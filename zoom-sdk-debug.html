<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zoom SDK Debug</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a1a;
            color: #00ff00;
        }
        .output {
            background: #000;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            white-space: pre-wrap;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>Zoom Video SDK Debug</h1>

    <h3>Testing UMD Build:</h3>
    <div id="umd-output" class="output">Loading UMD...</div>

    <h3>Testing ESM Build:</h3>
    <div id="esm-output" class="output">Loading ESM...</div>

    <!-- Test UMD Build -->
    <script src="./node_modules/@zoom/videosdk/dist/index.umd.js"></script>
    <script>
        console.log('=== UMD BUILD DEBUG ===');

        const umdOutput = document.getElementById('umd-output');
        let output = '';

        // Check what's actually available
        output += 'window.WebVideoSDK: ' + (typeof window.WebVideoSDK) + '\n';
        output += 'window.ZoomVideo: ' + (typeof window.ZoomVideo) + '\n';

        // Check all window properties containing "Video" or "Zoom"
        const videoZoomProps = Object.keys(window).filter(key =>
            key.toLowerCase().includes('video') ||
            key.toLowerCase().includes('zoom') ||
            key.toLowerCase().includes('sdk')
        );
        output += 'Properties with video/zoom/sdk: ' + JSON.stringify(videoZoomProps, null, 2) + '\n';

        // If WebVideoSDK exists, check its structure
        if (typeof window.WebVideoSDK !== 'undefined') {
            output += '\nWebVideoSDK keys: ' + JSON.stringify(Object.keys(window.WebVideoSDK), null, 2) + '\n';
            output += 'WebVideoSDK: ' + JSON.stringify(window.WebVideoSDK, null, 2) + '\n';
        }

        // Check if it's a different structure
        const possibleSDKs = ['ZoomVideo', 'WebVideoSDK', 'VideoSDK', 'ZoomVideoSDK'];
        possibleSDKs.forEach(name => {
            if (window[name]) {
                output += `\n${name} exists with type: ${typeof window[name]}\n`;
                if (typeof window[name] === 'object') {
                    output += `${name} keys: ${JSON.stringify(Object.keys(window[name]), null, 2)}\n`;
                }
                if (window[name].createClient) {
                    output += `${name}.createClient exists: ${typeof window[name].createClient}\n`;
                }
            }
        });

        umdOutput.textContent = output;
        console.log(output);
    </script>

    <!-- Test ESM Build -->
    <script type="module">
        console.log('=== ESM BUILD DEBUG ===');

        const esmOutput = document.getElementById('esm-output');

        try {
            // Try different import paths
            const paths = [
                './node_modules/@zoom/videosdk/dist/index.esm.js',
                './node_modules/@zoom/videosdk/dist/index.js',
                './node_modules/@zoom/videosdk/index.js'
            ];

            let esmResult = 'Testing ESM imports:\n';

            for (const path of paths) {
                try {
                    esmResult += `\nTrying: ${path}\n`;
                    const module = await import(path);
                    esmResult += `Success! Module keys: ${JSON.stringify(Object.keys(module), null, 2)}\n`;
                    esmResult += `Default export: ${typeof module.default}\n`;
                    if (module.default && typeof module.default === 'object') {
                        esmResult += `Default export keys: ${JSON.stringify(Object.keys(module.default), null, 2)}\n`;
                    }
                    break; // Stop on first success
                } catch (error) {
                    esmResult += `Failed: ${error.message}\n`;
                }
            }

            esmOutput.textContent = esmResult;
            console.log(esmResult);

        } catch (error) {
            const errorMsg = 'ESM Error: ' + error.message;
            esmOutput.textContent = errorMsg;
            console.error(errorMsg);
        }
    </script>
</body>
</html>