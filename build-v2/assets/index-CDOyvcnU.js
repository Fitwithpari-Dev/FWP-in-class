var px=Object.defineProperty;var iI=e=>{throw TypeError(e)};var hx=(e,t,r)=>t in e?px(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Se=(e,t,r)=>hx(e,typeof t!="symbol"?t+"":t,r),fx=(e,t,r)=>t.has(e)||iI("Cannot "+r);var $g=(e,t,r)=>t.has(e)?iI("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r);var po=(e,t,r)=>(fx(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function mx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var QT={exports:{}},rg={},JT={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var op=Symbol.for("react.element"),gx=Symbol.for("react.portal"),vx=Symbol.for("react.fragment"),yx=Symbol.for("react.strict_mode"),Sx=Symbol.for("react.profiler"),bx=Symbol.for("react.provider"),Ex=Symbol.for("react.context"),wx=Symbol.for("react.forward_ref"),Ix=Symbol.for("react.suspense"),Ax=Symbol.for("react.memo"),Cx=Symbol.for("react.lazy"),oI=Symbol.iterator;function _x(e){return e===null||typeof e!="object"?null:(e=oI&&e[oI]||e["@@iterator"],typeof e=="function"?e:null)}var ZT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YT=Object.assign,XT={};function Ju(e,t,r){this.props=e,this.context=t,this.refs=XT,this.updater=r||ZT}Ju.prototype.isReactComponent={};Ju.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ju.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function eO(){}eO.prototype=Ju.prototype;function q0(e,t,r){this.props=e,this.context=t,this.refs=XT,this.updater=r||ZT}var Q0=q0.prototype=new eO;Q0.constructor=q0;YT(Q0,Ju.prototype);Q0.isPureReactComponent=!0;var sI=Array.isArray,tO=Object.prototype.hasOwnProperty,J0={current:null},rO={key:!0,ref:!0,__self:!0,__source:!0};function nO(e,t,r){var n,i={},o=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)tO.call(t,n)&&!rO.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:op,type:e,key:o,ref:s,props:i,_owner:J0.current}}function Rx(e,t){return{$$typeof:op,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Z0(e){return typeof e=="object"&&e!==null&&e.$$typeof===op}function Tx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var aI=/\/+/g;function Fg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Tx(""+e.key):t.toString(36)}function vh(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case op:case gx:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+Fg(s,0):n,sI(i)?(r="",e!=null&&(r=e.replace(aI,"$&/")+"/"),vh(i,t,r,"",function(u){return u})):i!=null&&(Z0(i)&&(i=Rx(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(aI,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",sI(e))for(var a=0;a<e.length;a++){o=e[a];var l=n+Fg(o,a);s+=vh(o,t,r,l,i)}else if(l=_x(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=n+Fg(o,a++),s+=vh(o,t,r,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function bp(e,t,r){if(e==null)return e;var n=[],i=0;return vh(e,n,"","",function(o){return t.call(r,o,i++)}),n}function Ox(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var un={current:null},yh={transition:null},Px={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:yh,ReactCurrentOwner:J0};function iO(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:bp,forEach:function(e,t,r){bp(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return bp(e,function(){t++}),t},toArray:function(e){return bp(e,function(t){return t})||[]},only:function(e){if(!Z0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ke.Component=Ju;Ke.Fragment=vx;Ke.Profiler=Sx;Ke.PureComponent=q0;Ke.StrictMode=yx;Ke.Suspense=Ix;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Px;Ke.act=iO;Ke.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=YT({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=J0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)tO.call(t,l)&&!rO.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:op,type:e.type,key:i,ref:o,props:n,_owner:s}};Ke.createContext=function(e){return e={$$typeof:Ex,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bx,_context:e},e.Consumer=e};Ke.createElement=nO;Ke.createFactory=function(e){var t=nO.bind(null,e);return t.type=e,t};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(e){return{$$typeof:wx,render:e}};Ke.isValidElement=Z0;Ke.lazy=function(e){return{$$typeof:Cx,_payload:{_status:-1,_result:e},_init:Ox}};Ke.memo=function(e,t){return{$$typeof:Ax,type:e,compare:t===void 0?null:t}};Ke.startTransition=function(e){var t=yh.transition;yh.transition={};try{e()}finally{yh.transition=t}};Ke.unstable_act=iO;Ke.useCallback=function(e,t){return un.current.useCallback(e,t)};Ke.useContext=function(e){return un.current.useContext(e)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(e){return un.current.useDeferredValue(e)};Ke.useEffect=function(e,t){return un.current.useEffect(e,t)};Ke.useId=function(){return un.current.useId()};Ke.useImperativeHandle=function(e,t,r){return un.current.useImperativeHandle(e,t,r)};Ke.useInsertionEffect=function(e,t){return un.current.useInsertionEffect(e,t)};Ke.useLayoutEffect=function(e,t){return un.current.useLayoutEffect(e,t)};Ke.useMemo=function(e,t){return un.current.useMemo(e,t)};Ke.useReducer=function(e,t,r){return un.current.useReducer(e,t,r)};Ke.useRef=function(e){return un.current.useRef(e)};Ke.useState=function(e){return un.current.useState(e)};Ke.useSyncExternalStore=function(e,t,r){return un.current.useSyncExternalStore(e,t,r)};Ke.useTransition=function(){return un.current.useTransition()};Ke.version="18.3.1";JT.exports=Ke;var $e=JT.exports;const oO=mx($e);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx=$e,Dx=Symbol.for("react.element"),Mx=Symbol.for("react.fragment"),Nx=Object.prototype.hasOwnProperty,Lx=kx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vx={key:!0,ref:!0,__self:!0,__source:!0};function sO(e,t,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)Nx.call(t,n)&&!Vx.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Dx,type:e,key:o,ref:s,props:i,_owner:Lx.current}}rg.Fragment=Mx;rg.jsx=sO;rg.jsxs=sO;QT.exports=rg;var H=QT.exports,jy={},aO={exports:{}},Qn={},lO={exports:{}},uO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,$){var B=M.length;M.push($);e:for(;0<B;){var ee=B-1>>>1,ie=M[ee];if(0<i(ie,$))M[ee]=$,M[B]=ie,B=ee;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var $=M[0],B=M.pop();if(B!==$){M[0]=B;e:for(var ee=0,ie=M.length,be=ie>>>1;ee<be;){var le=2*(ee+1)-1,te=M[le],ve=le+1,Ae=M[ve];if(0>i(te,B))ve<ie&&0>i(Ae,te)?(M[ee]=Ae,M[ve]=B,ee=ve):(M[ee]=te,M[le]=B,ee=le);else if(ve<ie&&0>i(Ae,B))M[ee]=Ae,M[ve]=B,ee=ve;else break e}}return $}function i(M,$){var B=M.sortIndex-$.sortIndex;return B!==0?B:M.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],d=1,c=null,p=3,h=!1,m=!1,f=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=M)n(u),$.sortIndex=$.expirationTime,t(l,$);else break;$=r(u)}}function b(M){if(f=!1,S(M),!m)if(r(l)!==null)m=!0,C(R);else{var $=r(u);$!==null&&V(b,$.startTime-M)}}function R(M,$){m=!1,f&&(f=!1,g(D),D=-1),h=!0;var B=p;try{for(S($),c=r(l);c!==null&&(!(c.expirationTime>$)||M&&!P());){var ee=c.callback;if(typeof ee=="function"){c.callback=null,p=c.priorityLevel;var ie=ee(c.expirationTime<=$);$=e.unstable_now(),typeof ie=="function"?c.callback=ie:c===r(l)&&n(l),S($)}else n(l);c=r(l)}if(c!==null)var be=!0;else{var le=r(u);le!==null&&V(b,le.startTime-$),be=!1}return be}finally{c=null,p=B,h=!1}}var w=!1,O=null,D=-1,U=5,x=-1;function P(){return!(e.unstable_now()-x<U)}function I(){if(O!==null){var M=e.unstable_now();x=M;var $=!0;try{$=O(!0,M)}finally{$?E():(w=!1,O=null)}}else w=!1}var E;if(typeof y=="function")E=function(){y(I)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,_=A.port2;A.port1.onmessage=I,E=function(){_.postMessage(null)}}else E=function(){v(I,0)};function C(M){O=M,w||(w=!0,E())}function V(M,$){D=v(function(){M(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,C(R))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(M){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var B=p;p=$;try{return M()}finally{p=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,$){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var B=p;p=M;try{return $()}finally{p=B}},e.unstable_scheduleCallback=function(M,$,B){var ee=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ee+B:ee):B=ee,M){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=B+ie,M={id:d++,callback:$,priorityLevel:M,startTime:B,expirationTime:ie,sortIndex:-1},B>ee?(M.sortIndex=B,t(u,M),r(l)===null&&M===r(u)&&(f?(g(D),D=-1):f=!0,V(b,B-ee))):(M.sortIndex=ie,t(l,M),m||h||(m=!0,C(R))),M},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(M){var $=p;return function(){var B=p;p=$;try{return M.apply(this,arguments)}finally{p=B}}}})(uO);lO.exports=uO;var xx=lO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux=$e,Kn=xx;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dO=new Set,mc={};function cl(e,t){_u(e,t),_u(e+"Capture",t)}function _u(e,t){for(mc[e]=t,e=0;e<t.length;e++)dO.add(t[e])}var Uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$y=Object.prototype.hasOwnProperty,jx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lI={},uI={};function $x(e){return $y.call(uI,e)?!0:$y.call(lI,e)?!1:jx.test(e)?uI[e]=!0:(lI[e]=!0,!1)}function Fx(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Bx(e,t,r,n){if(t===null||typeof t>"u"||Fx(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dn(e,t,r,n,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var $r={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$r[e]=new dn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$r[t]=new dn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$r[e]=new dn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$r[e]=new dn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$r[e]=new dn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$r[e]=new dn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$r[e]=new dn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$r[e]=new dn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$r[e]=new dn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Y0=/[\-:]([a-z])/g;function X0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Y0,X0);$r[t]=new dn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Y0,X0);$r[t]=new dn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Y0,X0);$r[t]=new dn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$r[e]=new dn(e,1,!1,e.toLowerCase(),null,!1,!1)});$r.xlinkHref=new dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$r[e]=new dn(e,1,!1,e.toLowerCase(),null,!0,!0)});function eE(e,t,r,n){var i=$r.hasOwnProperty(t)?$r[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Bx(t,r,i,n)&&(r=null),n||i===null?$x(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Go=Ux.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ep=Symbol.for("react.element"),Ll=Symbol.for("react.portal"),Vl=Symbol.for("react.fragment"),tE=Symbol.for("react.strict_mode"),Fy=Symbol.for("react.profiler"),cO=Symbol.for("react.provider"),pO=Symbol.for("react.context"),rE=Symbol.for("react.forward_ref"),By=Symbol.for("react.suspense"),Hy=Symbol.for("react.suspense_list"),nE=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),hO=Symbol.for("react.offscreen"),dI=Symbol.iterator;function nd(e){return e===null||typeof e!="object"?null:(e=dI&&e[dI]||e["@@iterator"],typeof e=="function"?e:null)}var xt=Object.assign,Bg;function Pd(e){if(Bg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Bg=t&&t[1]||""}return`
`+Bg+e}var Hg=!1;function zg(e,t){if(!e||Hg)return"";Hg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{Hg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Pd(e):""}function Hx(e){switch(e.tag){case 5:return Pd(e.type);case 16:return Pd("Lazy");case 13:return Pd("Suspense");case 19:return Pd("SuspenseList");case 0:case 2:case 15:return e=zg(e.type,!1),e;case 11:return e=zg(e.type.render,!1),e;case 1:return e=zg(e.type,!0),e;default:return""}}function zy(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vl:return"Fragment";case Ll:return"Portal";case Fy:return"Profiler";case tE:return"StrictMode";case By:return"Suspense";case Hy:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pO:return(e.displayName||"Context")+".Consumer";case cO:return(e._context.displayName||"Context")+".Provider";case rE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nE:return t=e.displayName||null,t!==null?t:zy(e.type)||"Memo";case os:t=e._payload,e=e._init;try{return zy(e(t))}catch{}}return null}function zx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zy(t);case 8:return t===tE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wx(e){var t=fO(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wp(e){e._valueTracker||(e._valueTracker=Wx(e))}function mO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=fO(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ff(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wy(e,t){var r=t.checked;return xt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function cI(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Fs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gO(e,t){t=t.checked,t!=null&&eE(e,"checked",t,!1)}function Gy(e,t){gO(e,t);var r=Fs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ky(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ky(e,t.type,Fs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pI(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ky(e,t,r){(t!=="number"||ff(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var kd=Array.isArray;function ou(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Fs(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function qy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return xt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hI(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ce(92));if(kd(r)){if(1<r.length)throw Error(ce(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Fs(r)}}function vO(e,t){var r=Fs(t.value),n=Fs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function fI(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ip,SO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ip=Ip||document.createElement("div"),Ip.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ip.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Bd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gx=["Webkit","ms","Moz","O"];Object.keys(Bd).forEach(function(e){Gx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bd[t]=Bd[e]})});function bO(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Bd.hasOwnProperty(e)&&Bd[e]?(""+t).trim():t+"px"}function EO(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=bO(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Kx=xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jy(e,t){if(t){if(Kx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function Zy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yy=null;function iE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xy=null,su=null,au=null;function mI(e){if(e=lp(e)){if(typeof Xy!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=ag(t),Xy(e.stateNode,e.type,t))}}function wO(e){su?au?au.push(e):au=[e]:su=e}function IO(){if(su){var e=su,t=au;if(au=su=null,mI(e),t)for(e=0;e<t.length;e++)mI(t[e])}}function AO(e,t){return e(t)}function CO(){}var Wg=!1;function _O(e,t,r){if(Wg)return e(t,r);Wg=!0;try{return AO(e,t,r)}finally{Wg=!1,(su!==null||au!==null)&&(CO(),IO())}}function vc(e,t){var r=e.stateNode;if(r===null)return null;var n=ag(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ce(231,t,typeof r));return r}var eS=!1;if(Uo)try{var id={};Object.defineProperty(id,"passive",{get:function(){eS=!0}}),window.addEventListener("test",id,id),window.removeEventListener("test",id,id)}catch{eS=!1}function qx(e,t,r,n,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Hd=!1,mf=null,gf=!1,tS=null,Qx={onError:function(e){Hd=!0,mf=e}};function Jx(e,t,r,n,i,o,s,a,l){Hd=!1,mf=null,qx.apply(Qx,arguments)}function Zx(e,t,r,n,i,o,s,a,l){if(Jx.apply(this,arguments),Hd){if(Hd){var u=mf;Hd=!1,mf=null}else throw Error(ce(198));gf||(gf=!0,tS=u)}}function pl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function RO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gI(e){if(pl(e)!==e)throw Error(ce(188))}function Yx(e){var t=e.alternate;if(!t){if(t=pl(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return gI(i),e;if(o===n)return gI(i),t;o=o.sibling}throw Error(ce(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(r.tag!==3)throw Error(ce(188));return r.stateNode.current===r?e:t}function TO(e){return e=Yx(e),e!==null?OO(e):null}function OO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=OO(e);if(t!==null)return t;e=e.sibling}return null}var PO=Kn.unstable_scheduleCallback,vI=Kn.unstable_cancelCallback,Xx=Kn.unstable_shouldYield,eU=Kn.unstable_requestPaint,zt=Kn.unstable_now,tU=Kn.unstable_getCurrentPriorityLevel,oE=Kn.unstable_ImmediatePriority,kO=Kn.unstable_UserBlockingPriority,vf=Kn.unstable_NormalPriority,rU=Kn.unstable_LowPriority,DO=Kn.unstable_IdlePriority,ng=null,no=null;function nU(e){if(no&&typeof no.onCommitFiberRoot=="function")try{no.onCommitFiberRoot(ng,e,void 0,(e.current.flags&128)===128)}catch{}}var ki=Math.clz32?Math.clz32:sU,iU=Math.log,oU=Math.LN2;function sU(e){return e>>>=0,e===0?32:31-(iU(e)/oU|0)|0}var Ap=64,Cp=4194304;function Dd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=Dd(a):(o&=s,o!==0&&(n=Dd(o)))}else s=r&~i,s!==0?n=Dd(s):o!==0&&(n=Dd(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ki(t),i=1<<r,n|=e[r],t&=~i;return n}function aU(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lU(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-ki(o),a=1<<s,l=i[s];l===-1?(!(a&r)||a&n)&&(i[s]=aU(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function rS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function MO(){var e=Ap;return Ap<<=1,!(Ap&4194240)&&(Ap=64),e}function Gg(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function sp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ki(t),e[t]=r}function uU(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ki(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function sE(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ki(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var nt=0;function NO(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var LO,aE,VO,xO,UO,nS=!1,_p=[],ks=null,Ds=null,Ms=null,yc=new Map,Sc=new Map,ds=[],dU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yI(e,t){switch(e){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":yc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(t.pointerId)}}function od(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=lp(t),t!==null&&aE(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function cU(e,t,r,n,i){switch(t){case"focusin":return ks=od(ks,e,t,r,n,i),!0;case"dragenter":return Ds=od(Ds,e,t,r,n,i),!0;case"mouseover":return Ms=od(Ms,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return yc.set(o,od(yc.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Sc.set(o,od(Sc.get(o)||null,e,t,r,n,i)),!0}return!1}function jO(e){var t=_a(e.target);if(t!==null){var r=pl(t);if(r!==null){if(t=r.tag,t===13){if(t=RO(r),t!==null){e.blockedOn=t,UO(e.priority,function(){VO(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=iS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Yy=n,r.target.dispatchEvent(n),Yy=null}else return t=lp(r),t!==null&&aE(t),e.blockedOn=r,!1;t.shift()}return!0}function SI(e,t,r){Sh(e)&&r.delete(t)}function pU(){nS=!1,ks!==null&&Sh(ks)&&(ks=null),Ds!==null&&Sh(Ds)&&(Ds=null),Ms!==null&&Sh(Ms)&&(Ms=null),yc.forEach(SI),Sc.forEach(SI)}function sd(e,t){e.blockedOn===t&&(e.blockedOn=null,nS||(nS=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,pU)))}function bc(e){function t(i){return sd(i,e)}if(0<_p.length){sd(_p[0],e);for(var r=1;r<_p.length;r++){var n=_p[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ks!==null&&sd(ks,e),Ds!==null&&sd(Ds,e),Ms!==null&&sd(Ms,e),yc.forEach(t),Sc.forEach(t),r=0;r<ds.length;r++)n=ds[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ds.length&&(r=ds[0],r.blockedOn===null);)jO(r),r.blockedOn===null&&ds.shift()}var lu=Go.ReactCurrentBatchConfig,Sf=!0;function hU(e,t,r,n){var i=nt,o=lu.transition;lu.transition=null;try{nt=1,lE(e,t,r,n)}finally{nt=i,lu.transition=o}}function fU(e,t,r,n){var i=nt,o=lu.transition;lu.transition=null;try{nt=4,lE(e,t,r,n)}finally{nt=i,lu.transition=o}}function lE(e,t,r,n){if(Sf){var i=iS(e,t,r,n);if(i===null)rv(e,t,n,bf,r),yI(e,n);else if(cU(i,e,t,r,n))n.stopPropagation();else if(yI(e,n),t&4&&-1<dU.indexOf(e)){for(;i!==null;){var o=lp(i);if(o!==null&&LO(o),o=iS(e,t,r,n),o===null&&rv(e,t,n,bf,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else rv(e,t,n,null,r)}}var bf=null;function iS(e,t,r,n){if(bf=null,e=iE(n),e=_a(e),e!==null)if(t=pl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=RO(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bf=e,null}function $O(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tU()){case oE:return 1;case kO:return 4;case vf:case rU:return 16;case DO:return 536870912;default:return 16}default:return 16}}var ws=null,uE=null,bh=null;function FO(){if(bh)return bh;var e,t=uE,r=t.length,n,i="value"in ws?ws.value:ws.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[o-n];n++);return bh=i.slice(e,1<n?1-n:void 0)}function Eh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rp(){return!0}function bI(){return!1}function Jn(e){function t(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Rp:bI,this.isPropagationStopped=bI,this}return xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rp)},persist:function(){},isPersistent:Rp}),t}var Zu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dE=Jn(Zu),ap=xt({},Zu,{view:0,detail:0}),mU=Jn(ap),Kg,qg,ad,ig=xt({},ap,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ad&&(ad&&e.type==="mousemove"?(Kg=e.screenX-ad.screenX,qg=e.screenY-ad.screenY):qg=Kg=0,ad=e),Kg)},movementY:function(e){return"movementY"in e?e.movementY:qg}}),EI=Jn(ig),gU=xt({},ig,{dataTransfer:0}),vU=Jn(gU),yU=xt({},ap,{relatedTarget:0}),Qg=Jn(yU),SU=xt({},Zu,{animationName:0,elapsedTime:0,pseudoElement:0}),bU=Jn(SU),EU=xt({},Zu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wU=Jn(EU),IU=xt({},Zu,{data:0}),wI=Jn(IU),AU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_U={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RU(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_U[e])?!!t[e]:!1}function cE(){return RU}var TU=xt({},ap,{key:function(e){if(e.key){var t=AU[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Eh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?CU[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cE,charCode:function(e){return e.type==="keypress"?Eh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Eh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OU=Jn(TU),PU=xt({},ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),II=Jn(PU),kU=xt({},ap,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cE}),DU=Jn(kU),MU=xt({},Zu,{propertyName:0,elapsedTime:0,pseudoElement:0}),NU=Jn(MU),LU=xt({},ig,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),VU=Jn(LU),xU=[9,13,27,32],pE=Uo&&"CompositionEvent"in window,zd=null;Uo&&"documentMode"in document&&(zd=document.documentMode);var UU=Uo&&"TextEvent"in window&&!zd,BO=Uo&&(!pE||zd&&8<zd&&11>=zd),AI=" ",CI=!1;function HO(e,t){switch(e){case"keyup":return xU.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xl=!1;function jU(e,t){switch(e){case"compositionend":return zO(t);case"keypress":return t.which!==32?null:(CI=!0,AI);case"textInput":return e=t.data,e===AI&&CI?null:e;default:return null}}function $U(e,t){if(xl)return e==="compositionend"||!pE&&HO(e,t)?(e=FO(),bh=uE=ws=null,xl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return BO&&t.locale!=="ko"?null:t.data;default:return null}}var FU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _I(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FU[e.type]:t==="textarea"}function WO(e,t,r,n){wO(n),t=Ef(t,"onChange"),0<t.length&&(r=new dE("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wd=null,Ec=null;function BU(e){r1(e,0)}function og(e){var t=$l(e);if(mO(t))return e}function HU(e,t){if(e==="change")return t}var GO=!1;if(Uo){var Jg;if(Uo){var Zg="oninput"in document;if(!Zg){var RI=document.createElement("div");RI.setAttribute("oninput","return;"),Zg=typeof RI.oninput=="function"}Jg=Zg}else Jg=!1;GO=Jg&&(!document.documentMode||9<document.documentMode)}function TI(){Wd&&(Wd.detachEvent("onpropertychange",KO),Ec=Wd=null)}function KO(e){if(e.propertyName==="value"&&og(Ec)){var t=[];WO(t,Ec,e,iE(e)),_O(BU,t)}}function zU(e,t,r){e==="focusin"?(TI(),Wd=t,Ec=r,Wd.attachEvent("onpropertychange",KO)):e==="focusout"&&TI()}function WU(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return og(Ec)}function GU(e,t){if(e==="click")return og(t)}function KU(e,t){if(e==="input"||e==="change")return og(t)}function qU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ni=typeof Object.is=="function"?Object.is:qU;function wc(e,t){if(Ni(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!$y.call(t,i)||!Ni(e[i],t[i]))return!1}return!0}function OI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function PI(e,t){var r=OI(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=OI(r)}}function qO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function QO(){for(var e=window,t=ff();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ff(e.document)}return t}function hE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function QU(e){var t=QO(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&qO(r.ownerDocument.documentElement,r)){if(n!==null&&hE(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=PI(r,o);var s=PI(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var JU=Uo&&"documentMode"in document&&11>=document.documentMode,Ul=null,oS=null,Gd=null,sS=!1;function kI(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sS||Ul==null||Ul!==ff(n)||(n=Ul,"selectionStart"in n&&hE(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Gd&&wc(Gd,n)||(Gd=n,n=Ef(oS,"onSelect"),0<n.length&&(t=new dE("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ul)))}function Tp(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var jl={animationend:Tp("Animation","AnimationEnd"),animationiteration:Tp("Animation","AnimationIteration"),animationstart:Tp("Animation","AnimationStart"),transitionend:Tp("Transition","TransitionEnd")},Yg={},JO={};Uo&&(JO=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function sg(e){if(Yg[e])return Yg[e];if(!jl[e])return e;var t=jl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in JO)return Yg[e]=t[r];return e}var ZO=sg("animationend"),YO=sg("animationiteration"),XO=sg("animationstart"),e1=sg("transitionend"),t1=new Map,DI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ws(e,t){t1.set(e,t),cl(t,[e])}for(var Xg=0;Xg<DI.length;Xg++){var ev=DI[Xg],ZU=ev.toLowerCase(),YU=ev[0].toUpperCase()+ev.slice(1);Ws(ZU,"on"+YU)}Ws(ZO,"onAnimationEnd");Ws(YO,"onAnimationIteration");Ws(XO,"onAnimationStart");Ws("dblclick","onDoubleClick");Ws("focusin","onFocus");Ws("focusout","onBlur");Ws(e1,"onTransitionEnd");_u("onMouseEnter",["mouseout","mouseover"]);_u("onMouseLeave",["mouseout","mouseover"]);_u("onPointerEnter",["pointerout","pointerover"]);_u("onPointerLeave",["pointerout","pointerover"]);cl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cl("onBeforeInput",["compositionend","keypress","textInput","paste"]);cl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Md="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Md));function MI(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Zx(n,t,void 0,e),e.currentTarget=null}function r1(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;MI(i,a,u),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;MI(i,a,u),o=l}}}if(gf)throw e=tS,gf=!1,tS=null,e}function yt(e,t){var r=t[cS];r===void 0&&(r=t[cS]=new Set);var n=e+"__bubble";r.has(n)||(n1(t,e,2,!1),r.add(n))}function tv(e,t,r){var n=0;t&&(n|=4),n1(r,e,n,t)}var Op="_reactListening"+Math.random().toString(36).slice(2);function Ic(e){if(!e[Op]){e[Op]=!0,dO.forEach(function(r){r!=="selectionchange"&&(XU.has(r)||tv(r,!1,e),tv(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Op]||(t[Op]=!0,tv("selectionchange",!1,t))}}function n1(e,t,r,n){switch($O(t)){case 1:var i=hU;break;case 4:i=fU;break;default:i=lE}r=i.bind(null,t,r,e),i=void 0,!eS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function rv(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=_a(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}_O(function(){var u=o,d=iE(r),c=[];e:{var p=t1.get(e);if(p!==void 0){var h=dE,m=e;switch(e){case"keypress":if(Eh(r)===0)break e;case"keydown":case"keyup":h=OU;break;case"focusin":m="focus",h=Qg;break;case"focusout":m="blur",h=Qg;break;case"beforeblur":case"afterblur":h=Qg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=EI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=vU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=DU;break;case ZO:case YO:case XO:h=bU;break;case e1:h=NU;break;case"scroll":h=mU;break;case"wheel":h=VU;break;case"copy":case"cut":case"paste":h=wU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=II}var f=(t&4)!==0,v=!f&&e==="scroll",g=f?p!==null?p+"Capture":null:p;f=[];for(var y=u,S;y!==null;){S=y;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,g!==null&&(b=vc(y,g),b!=null&&f.push(Ac(y,b,S)))),v)break;y=y.return}0<f.length&&(p=new h(p,m,null,r,d),c.push({event:p,listeners:f}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==Yy&&(m=r.relatedTarget||r.fromElement)&&(_a(m)||m[jo]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=u,m=m?_a(m):null,m!==null&&(v=pl(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(f=EI,b="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(f=II,b="onPointerLeave",g="onPointerEnter",y="pointer"),v=h==null?p:$l(h),S=m==null?p:$l(m),p=new f(b,y+"leave",h,r,d),p.target=v,p.relatedTarget=S,b=null,_a(d)===u&&(f=new f(g,y+"enter",m,r,d),f.target=S,f.relatedTarget=v,b=f),v=b,h&&m)t:{for(f=h,g=m,y=0,S=f;S;S=vl(S))y++;for(S=0,b=g;b;b=vl(b))S++;for(;0<y-S;)f=vl(f),y--;for(;0<S-y;)g=vl(g),S--;for(;y--;){if(f===g||g!==null&&f===g.alternate)break t;f=vl(f),g=vl(g)}f=null}else f=null;h!==null&&NI(c,p,h,f,!1),m!==null&&v!==null&&NI(c,v,m,f,!0)}}e:{if(p=u?$l(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var R=HU;else if(_I(p))if(GO)R=KU;else{R=WU;var w=zU}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=GU);if(R&&(R=R(e,u))){WO(c,R,r,d);break e}w&&w(e,p,u),e==="focusout"&&(w=p._wrapperState)&&w.controlled&&p.type==="number"&&Ky(p,"number",p.value)}switch(w=u?$l(u):window,e){case"focusin":(_I(w)||w.contentEditable==="true")&&(Ul=w,oS=u,Gd=null);break;case"focusout":Gd=oS=Ul=null;break;case"mousedown":sS=!0;break;case"contextmenu":case"mouseup":case"dragend":sS=!1,kI(c,r,d);break;case"selectionchange":if(JU)break;case"keydown":case"keyup":kI(c,r,d)}var O;if(pE)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else xl?HO(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(BO&&r.locale!=="ko"&&(xl||D!=="onCompositionStart"?D==="onCompositionEnd"&&xl&&(O=FO()):(ws=d,uE="value"in ws?ws.value:ws.textContent,xl=!0)),w=Ef(u,D),0<w.length&&(D=new wI(D,e,null,r,d),c.push({event:D,listeners:w}),O?D.data=O:(O=zO(r),O!==null&&(D.data=O)))),(O=UU?jU(e,r):$U(e,r))&&(u=Ef(u,"onBeforeInput"),0<u.length&&(d=new wI("onBeforeInput","beforeinput",null,r,d),c.push({event:d,listeners:u}),d.data=O))}r1(c,t)})}function Ac(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ef(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=vc(e,r),o!=null&&n.unshift(Ac(e,o,i)),o=vc(e,t),o!=null&&n.push(Ac(e,o,i))),e=e.return}return n}function vl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function NI(e,t,r,n,i){for(var o=t._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=vc(r,o),l!=null&&s.unshift(Ac(r,l,a))):i||(l=vc(r,o),l!=null&&s.push(Ac(r,l,a)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var ej=/\r\n?/g,tj=/\u0000|\uFFFD/g;function LI(e){return(typeof e=="string"?e:""+e).replace(ej,`
`).replace(tj,"")}function Pp(e,t,r){if(t=LI(t),LI(e)!==t&&r)throw Error(ce(425))}function wf(){}var aS=null,lS=null;function uS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dS=typeof setTimeout=="function"?setTimeout:void 0,rj=typeof clearTimeout=="function"?clearTimeout:void 0,VI=typeof Promise=="function"?Promise:void 0,nj=typeof queueMicrotask=="function"?queueMicrotask:typeof VI<"u"?function(e){return VI.resolve(null).then(e).catch(ij)}:dS;function ij(e){setTimeout(function(){throw e})}function nv(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),bc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);bc(t)}function Ns(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xI(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Yu=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Yu,Cc="__reactProps$"+Yu,jo="__reactContainer$"+Yu,cS="__reactEvents$"+Yu,oj="__reactListeners$"+Yu,sj="__reactHandles$"+Yu;function _a(e){var t=e[Xi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[jo]||r[Xi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=xI(e);e!==null;){if(r=e[Xi])return r;e=xI(e)}return t}e=r,r=e.parentNode}return null}function lp(e){return e=e[Xi]||e[jo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $l(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function ag(e){return e[Cc]||null}var pS=[],Fl=-1;function Gs(e){return{current:e}}function It(e){0>Fl||(e.current=pS[Fl],pS[Fl]=null,Fl--)}function gt(e,t){Fl++,pS[Fl]=e.current,e.current=t}var Bs={},Yr=Gs(Bs),On=Gs(!1),Ya=Bs;function Ru(e,t){var r=e.type.contextTypes;if(!r)return Bs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Pn(e){return e=e.childContextTypes,e!=null}function If(){It(On),It(Yr)}function UI(e,t,r){if(Yr.current!==Bs)throw Error(ce(168));gt(Yr,t),gt(On,r)}function i1(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ce(108,zx(e)||"Unknown",i));return xt({},r,n)}function Af(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bs,Ya=Yr.current,gt(Yr,e),gt(On,On.current),!0}function jI(e,t,r){var n=e.stateNode;if(!n)throw Error(ce(169));r?(e=i1(e,t,Ya),n.__reactInternalMemoizedMergedChildContext=e,It(On),It(Yr),gt(Yr,e)):It(On),gt(On,r)}var wo=null,lg=!1,iv=!1;function o1(e){wo===null?wo=[e]:wo.push(e)}function aj(e){lg=!0,o1(e)}function Ks(){if(!iv&&wo!==null){iv=!0;var e=0,t=nt;try{var r=wo;for(nt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wo=null,lg=!1}catch(i){throw wo!==null&&(wo=wo.slice(e+1)),PO(oE,Ks),i}finally{nt=t,iv=!1}}return null}var Bl=[],Hl=0,Cf=null,_f=0,ri=[],ni=0,Xa=null,Po=1,ko="";function da(e,t){Bl[Hl++]=_f,Bl[Hl++]=Cf,Cf=e,_f=t}function s1(e,t,r){ri[ni++]=Po,ri[ni++]=ko,ri[ni++]=Xa,Xa=e;var n=Po;e=ko;var i=32-ki(n)-1;n&=~(1<<i),r+=1;var o=32-ki(t)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Po=1<<32-ki(t)+i|r<<i|n,ko=o+e}else Po=1<<o|r<<i|n,ko=e}function fE(e){e.return!==null&&(da(e,1),s1(e,1,0))}function mE(e){for(;e===Cf;)Cf=Bl[--Hl],Bl[Hl]=null,_f=Bl[--Hl],Bl[Hl]=null;for(;e===Xa;)Xa=ri[--ni],ri[ni]=null,ko=ri[--ni],ri[ni]=null,Po=ri[--ni],ri[ni]=null}var $n=null,jn=null,Tt=!1,Ci=null;function a1(e,t){var r=li(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function $I(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$n=e,jn=Ns(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$n=e,jn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Xa!==null?{id:Po,overflow:ko}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=li(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,$n=e,jn=null,!0):!1;default:return!1}}function hS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fS(e){if(Tt){var t=jn;if(t){var r=t;if(!$I(e,t)){if(hS(e))throw Error(ce(418));t=Ns(r.nextSibling);var n=$n;t&&$I(e,t)?a1(n,r):(e.flags=e.flags&-4097|2,Tt=!1,$n=e)}}else{if(hS(e))throw Error(ce(418));e.flags=e.flags&-4097|2,Tt=!1,$n=e}}}function FI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$n=e}function kp(e){if(e!==$n)return!1;if(!Tt)return FI(e),Tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!uS(e.type,e.memoizedProps)),t&&(t=jn)){if(hS(e))throw l1(),Error(ce(418));for(;t;)a1(e,t),t=Ns(t.nextSibling)}if(FI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){jn=Ns(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}jn=null}}else jn=$n?Ns(e.stateNode.nextSibling):null;return!0}function l1(){for(var e=jn;e;)e=Ns(e.nextSibling)}function Tu(){jn=$n=null,Tt=!1}function gE(e){Ci===null?Ci=[e]:Ci.push(e)}var lj=Go.ReactCurrentBatchConfig;function ld(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(ce(284));if(!r._owner)throw Error(ce(290,e))}return e}function Dp(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function BI(e){var t=e._init;return t(e._payload)}function u1(e){function t(g,y){if(e){var S=g.deletions;S===null?(g.deletions=[y],g.flags|=16):S.push(y)}}function r(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function n(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=Us(g,y),g.index=0,g.sibling=null,g}function o(g,y,S){return g.index=S,e?(S=g.alternate,S!==null?(S=S.index,S<y?(g.flags|=2,y):S):(g.flags|=2,y)):(g.flags|=1048576,y)}function s(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,S,b){return y===null||y.tag!==6?(y=cv(S,g.mode,b),y.return=g,y):(y=i(y,S),y.return=g,y)}function l(g,y,S,b){var R=S.type;return R===Vl?d(g,y,S.props.children,b,S.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===os&&BI(R)===y.type)?(b=i(y,S.props),b.ref=ld(g,y,S),b.return=g,b):(b=Th(S.type,S.key,S.props,null,g.mode,b),b.ref=ld(g,y,S),b.return=g,b)}function u(g,y,S,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=pv(S,g.mode,b),y.return=g,y):(y=i(y,S.children||[]),y.return=g,y)}function d(g,y,S,b,R){return y===null||y.tag!==7?(y=Ba(S,g.mode,b,R),y.return=g,y):(y=i(y,S),y.return=g,y)}function c(g,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=cv(""+y,g.mode,S),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ep:return S=Th(y.type,y.key,y.props,null,g.mode,S),S.ref=ld(g,null,y),S.return=g,S;case Ll:return y=pv(y,g.mode,S),y.return=g,y;case os:var b=y._init;return c(g,b(y._payload),S)}if(kd(y)||nd(y))return y=Ba(y,g.mode,S,null),y.return=g,y;Dp(g,y)}return null}function p(g,y,S,b){var R=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:a(g,y,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ep:return S.key===R?l(g,y,S,b):null;case Ll:return S.key===R?u(g,y,S,b):null;case os:return R=S._init,p(g,y,R(S._payload),b)}if(kd(S)||nd(S))return R!==null?null:d(g,y,S,b,null);Dp(g,S)}return null}function h(g,y,S,b,R){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(S)||null,a(y,g,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ep:return g=g.get(b.key===null?S:b.key)||null,l(y,g,b,R);case Ll:return g=g.get(b.key===null?S:b.key)||null,u(y,g,b,R);case os:var w=b._init;return h(g,y,S,w(b._payload),R)}if(kd(b)||nd(b))return g=g.get(S)||null,d(y,g,b,R,null);Dp(y,b)}return null}function m(g,y,S,b){for(var R=null,w=null,O=y,D=y=0,U=null;O!==null&&D<S.length;D++){O.index>D?(U=O,O=null):U=O.sibling;var x=p(g,O,S[D],b);if(x===null){O===null&&(O=U);break}e&&O&&x.alternate===null&&t(g,O),y=o(x,y,D),w===null?R=x:w.sibling=x,w=x,O=U}if(D===S.length)return r(g,O),Tt&&da(g,D),R;if(O===null){for(;D<S.length;D++)O=c(g,S[D],b),O!==null&&(y=o(O,y,D),w===null?R=O:w.sibling=O,w=O);return Tt&&da(g,D),R}for(O=n(g,O);D<S.length;D++)U=h(O,g,D,S[D],b),U!==null&&(e&&U.alternate!==null&&O.delete(U.key===null?D:U.key),y=o(U,y,D),w===null?R=U:w.sibling=U,w=U);return e&&O.forEach(function(P){return t(g,P)}),Tt&&da(g,D),R}function f(g,y,S,b){var R=nd(S);if(typeof R!="function")throw Error(ce(150));if(S=R.call(S),S==null)throw Error(ce(151));for(var w=R=null,O=y,D=y=0,U=null,x=S.next();O!==null&&!x.done;D++,x=S.next()){O.index>D?(U=O,O=null):U=O.sibling;var P=p(g,O,x.value,b);if(P===null){O===null&&(O=U);break}e&&O&&P.alternate===null&&t(g,O),y=o(P,y,D),w===null?R=P:w.sibling=P,w=P,O=U}if(x.done)return r(g,O),Tt&&da(g,D),R;if(O===null){for(;!x.done;D++,x=S.next())x=c(g,x.value,b),x!==null&&(y=o(x,y,D),w===null?R=x:w.sibling=x,w=x);return Tt&&da(g,D),R}for(O=n(g,O);!x.done;D++,x=S.next())x=h(O,g,D,x.value,b),x!==null&&(e&&x.alternate!==null&&O.delete(x.key===null?D:x.key),y=o(x,y,D),w===null?R=x:w.sibling=x,w=x);return e&&O.forEach(function(I){return t(g,I)}),Tt&&da(g,D),R}function v(g,y,S,b){if(typeof S=="object"&&S!==null&&S.type===Vl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ep:e:{for(var R=S.key,w=y;w!==null;){if(w.key===R){if(R=S.type,R===Vl){if(w.tag===7){r(g,w.sibling),y=i(w,S.props.children),y.return=g,g=y;break e}}else if(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===os&&BI(R)===w.type){r(g,w.sibling),y=i(w,S.props),y.ref=ld(g,w,S),y.return=g,g=y;break e}r(g,w);break}else t(g,w);w=w.sibling}S.type===Vl?(y=Ba(S.props.children,g.mode,b,S.key),y.return=g,g=y):(b=Th(S.type,S.key,S.props,null,g.mode,b),b.ref=ld(g,y,S),b.return=g,g=b)}return s(g);case Ll:e:{for(w=S.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){r(g,y.sibling),y=i(y,S.children||[]),y.return=g,g=y;break e}else{r(g,y);break}else t(g,y);y=y.sibling}y=pv(S,g.mode,b),y.return=g,g=y}return s(g);case os:return w=S._init,v(g,y,w(S._payload),b)}if(kd(S))return m(g,y,S,b);if(nd(S))return f(g,y,S,b);Dp(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(r(g,y.sibling),y=i(y,S),y.return=g,g=y):(r(g,y),y=cv(S,g.mode,b),y.return=g,g=y),s(g)):r(g,y)}return v}var Ou=u1(!0),d1=u1(!1),Rf=Gs(null),Tf=null,zl=null,vE=null;function yE(){vE=zl=Tf=null}function SE(e){var t=Rf.current;It(Rf),e._currentValue=t}function mS(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function uu(e,t){Tf=e,vE=zl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Cn=!0),e.firstContext=null)}function ci(e){var t=e._currentValue;if(vE!==e)if(e={context:e,memoizedValue:t,next:null},zl===null){if(Tf===null)throw Error(ce(308));zl=e,Tf.dependencies={lanes:0,firstContext:e}}else zl=zl.next=e;return t}var Ra=null;function bE(e){Ra===null?Ra=[e]:Ra.push(e)}function c1(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,bE(t)):(r.next=i.next,i.next=r),t.interleaved=r,$o(e,n)}function $o(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ss=!1;function EE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ls(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ze&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,$o(e,r)}return i=n.interleaved,i===null?(t.next=t,bE(n)):(t.next=i.next,i.next=t),n.interleaved=t,$o(e,r)}function wh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,sE(e,r)}}function HI(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Of(e,t,r,n){var i=e.updateQueue;ss=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(o!==null){var c=i.baseState;s=0,d=u=l=null,a=o;do{var p=a.lane,h=a.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,f=a;switch(p=t,h=r,f.tag){case 1:if(m=f.payload,typeof m=="function"){c=m.call(h,c,p);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=f.payload,p=typeof m=="function"?m.call(h,c,p):m,p==null)break e;c=xt({},c,p);break e;case 2:ss=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else h={eventTime:h,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=h,l=c):d=d.next=h,s|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);tl|=s,e.lanes=s,e.memoizedState=c}}function zI(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ce(191,i));i.call(n)}}}var up={},io=Gs(up),_c=Gs(up),Rc=Gs(up);function Ta(e){if(e===up)throw Error(ce(174));return e}function wE(e,t){switch(gt(Rc,t),gt(_c,e),gt(io,up),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qy(t,e)}It(io),gt(io,t)}function Pu(){It(io),It(_c),It(Rc)}function h1(e){Ta(Rc.current);var t=Ta(io.current),r=Qy(t,e.type);t!==r&&(gt(_c,e),gt(io,r))}function IE(e){_c.current===e&&(It(io),It(_c))}var Mt=Gs(0);function Pf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ov=[];function AE(){for(var e=0;e<ov.length;e++)ov[e]._workInProgressVersionPrimary=null;ov.length=0}var Ih=Go.ReactCurrentDispatcher,sv=Go.ReactCurrentBatchConfig,el=0,Vt=null,sr=null,yr=null,kf=!1,Kd=!1,Tc=0,uj=0;function Br(){throw Error(ce(321))}function CE(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ni(e[r],t[r]))return!1;return!0}function _E(e,t,r,n,i,o){if(el=o,Vt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ih.current=e===null||e.memoizedState===null?hj:fj,e=r(n,i),Kd){o=0;do{if(Kd=!1,Tc=0,25<=o)throw Error(ce(301));o+=1,yr=sr=null,t.updateQueue=null,Ih.current=mj,e=r(n,i)}while(Kd)}if(Ih.current=Df,t=sr!==null&&sr.next!==null,el=0,yr=sr=Vt=null,kf=!1,t)throw Error(ce(300));return e}function RE(){var e=Tc!==0;return Tc=0,e}function Wi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?Vt.memoizedState=yr=e:yr=yr.next=e,yr}function pi(){if(sr===null){var e=Vt.alternate;e=e!==null?e.memoizedState:null}else e=sr.next;var t=yr===null?Vt.memoizedState:yr.next;if(t!==null)yr=t,sr=e;else{if(e===null)throw Error(ce(310));sr=e,e={memoizedState:sr.memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},yr===null?Vt.memoizedState=yr=e:yr=yr.next=e}return yr}function Oc(e,t){return typeof t=="function"?t(e):t}function av(e){var t=pi(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=sr,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,l=null,u=o;do{var d=u.lane;if((el&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,s=n):l=l.next=c,Vt.lanes|=d,tl|=d}u=u.next}while(u!==null&&u!==o);l===null?s=n:l.next=a,Ni(n,t.memoizedState)||(Cn=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,Vt.lanes|=o,tl|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function lv(e){var t=pi(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Ni(o,t.memoizedState)||(Cn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function f1(){}function m1(e,t){var r=Vt,n=pi(),i=t(),o=!Ni(n.memoizedState,i);if(o&&(n.memoizedState=i,Cn=!0),n=n.queue,TE(y1.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||yr!==null&&yr.memoizedState.tag&1){if(r.flags|=2048,Pc(9,v1.bind(null,r,n,i,t),void 0,null),Ar===null)throw Error(ce(349));el&30||g1(r,t,i)}return i}function g1(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Vt.updateQueue,t===null?(t={lastEffect:null,stores:null},Vt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function v1(e,t,r,n){t.value=r,t.getSnapshot=n,S1(t)&&b1(e)}function y1(e,t,r){return r(function(){S1(t)&&b1(e)})}function S1(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ni(e,r)}catch{return!0}}function b1(e){var t=$o(e,1);t!==null&&Di(t,e,1,-1)}function WI(e){var t=Wi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:e},t.queue=e,e=e.dispatch=pj.bind(null,Vt,e),[t.memoizedState,e]}function Pc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Vt.updateQueue,t===null?(t={lastEffect:null,stores:null},Vt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function E1(){return pi().memoizedState}function Ah(e,t,r,n){var i=Wi();Vt.flags|=e,i.memoizedState=Pc(1|t,r,void 0,n===void 0?null:n)}function ug(e,t,r,n){var i=pi();n=n===void 0?null:n;var o=void 0;if(sr!==null){var s=sr.memoizedState;if(o=s.destroy,n!==null&&CE(n,s.deps)){i.memoizedState=Pc(t,r,o,n);return}}Vt.flags|=e,i.memoizedState=Pc(1|t,r,o,n)}function GI(e,t){return Ah(8390656,8,e,t)}function TE(e,t){return ug(2048,8,e,t)}function w1(e,t){return ug(4,2,e,t)}function I1(e,t){return ug(4,4,e,t)}function A1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function C1(e,t,r){return r=r!=null?r.concat([e]):null,ug(4,4,A1.bind(null,t,e),r)}function OE(){}function _1(e,t){var r=pi();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&CE(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function R1(e,t){var r=pi();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&CE(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function T1(e,t,r){return el&21?(Ni(r,t)||(r=MO(),Vt.lanes|=r,tl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Cn=!0),e.memoizedState=r)}function dj(e,t){var r=nt;nt=r!==0&&4>r?r:4,e(!0);var n=sv.transition;sv.transition={};try{e(!1),t()}finally{nt=r,sv.transition=n}}function O1(){return pi().memoizedState}function cj(e,t,r){var n=xs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},P1(e))k1(t,r);else if(r=c1(e,t,r,n),r!==null){var i=ln();Di(r,e,n,i),D1(r,t,n)}}function pj(e,t,r){var n=xs(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(P1(e))k1(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,Ni(a,s)){var l=t.interleaved;l===null?(i.next=i,bE(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=c1(e,t,i,n),r!==null&&(i=ln(),Di(r,e,n,i),D1(r,t,n))}}function P1(e){var t=e.alternate;return e===Vt||t!==null&&t===Vt}function k1(e,t){Kd=kf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function D1(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,sE(e,r)}}var Df={readContext:ci,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},hj={readContext:ci,useCallback:function(e,t){return Wi().memoizedState=[e,t===void 0?null:t],e},useContext:ci,useEffect:GI,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ah(4194308,4,A1.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ah(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ah(4,2,e,t)},useMemo:function(e,t){var r=Wi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Wi();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=cj.bind(null,Vt,e),[n.memoizedState,e]},useRef:function(e){var t=Wi();return e={current:e},t.memoizedState=e},useState:WI,useDebugValue:OE,useDeferredValue:function(e){return Wi().memoizedState=e},useTransition:function(){var e=WI(!1),t=e[0];return e=dj.bind(null,e[1]),Wi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Vt,i=Wi();if(Tt){if(r===void 0)throw Error(ce(407));r=r()}else{if(r=t(),Ar===null)throw Error(ce(349));el&30||g1(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,GI(y1.bind(null,n,o,e),[e]),n.flags|=2048,Pc(9,v1.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Wi(),t=Ar.identifierPrefix;if(Tt){var r=ko,n=Po;r=(n&~(1<<32-ki(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Tc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=uj++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fj={readContext:ci,useCallback:_1,useContext:ci,useEffect:TE,useImperativeHandle:C1,useInsertionEffect:w1,useLayoutEffect:I1,useMemo:R1,useReducer:av,useRef:E1,useState:function(){return av(Oc)},useDebugValue:OE,useDeferredValue:function(e){var t=pi();return T1(t,sr.memoizedState,e)},useTransition:function(){var e=av(Oc)[0],t=pi().memoizedState;return[e,t]},useMutableSource:f1,useSyncExternalStore:m1,useId:O1,unstable_isNewReconciler:!1},mj={readContext:ci,useCallback:_1,useContext:ci,useEffect:TE,useImperativeHandle:C1,useInsertionEffect:w1,useLayoutEffect:I1,useMemo:R1,useReducer:lv,useRef:E1,useState:function(){return lv(Oc)},useDebugValue:OE,useDeferredValue:function(e){var t=pi();return sr===null?t.memoizedState=e:T1(t,sr.memoizedState,e)},useTransition:function(){var e=lv(Oc)[0],t=pi().memoizedState;return[e,t]},useMutableSource:f1,useSyncExternalStore:m1,useId:O1,unstable_isNewReconciler:!1};function Ei(e,t){if(e&&e.defaultProps){t=xt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function gS(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:xt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var dg={isMounted:function(e){return(e=e._reactInternals)?pl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ln(),i=xs(e),o=Mo(n,i);o.payload=t,r!=null&&(o.callback=r),t=Ls(e,o,i),t!==null&&(Di(t,e,i,n),wh(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ln(),i=xs(e),o=Mo(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Ls(e,o,i),t!==null&&(Di(t,e,i,n),wh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ln(),n=xs(e),i=Mo(r,n);i.tag=2,t!=null&&(i.callback=t),t=Ls(e,i,n),t!==null&&(Di(t,e,n,r),wh(t,e,n))}};function KI(e,t,r,n,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,s):t.prototype&&t.prototype.isPureReactComponent?!wc(r,n)||!wc(i,o):!0}function M1(e,t,r){var n=!1,i=Bs,o=t.contextType;return typeof o=="object"&&o!==null?o=ci(o):(i=Pn(t)?Ya:Yr.current,n=t.contextTypes,o=(n=n!=null)?Ru(e,i):Bs),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dg,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function qI(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&dg.enqueueReplaceState(t,t.state,null)}function vS(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},EE(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=ci(o):(o=Pn(t)?Ya:Yr.current,i.context=Ru(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(gS(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&dg.enqueueReplaceState(i,i.state,null),Of(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ku(e,t){try{var r="",n=t;do r+=Hx(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function uv(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function yS(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var gj=typeof WeakMap=="function"?WeakMap:Map;function N1(e,t,r){r=Mo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Nf||(Nf=!0,TS=n),yS(e,t)},r}function L1(e,t,r){r=Mo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){yS(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){yS(e,t),typeof n!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function QI(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new gj;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Pj.bind(null,e,t,r),t.then(e,e))}function JI(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ZI(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Mo(-1,1),t.tag=2,Ls(r,t,1))),r.lanes|=1),e)}var vj=Go.ReactCurrentOwner,Cn=!1;function nn(e,t,r,n){t.child=e===null?d1(t,null,r,n):Ou(t,e.child,r,n)}function YI(e,t,r,n,i){r=r.render;var o=t.ref;return uu(t,i),n=_E(e,t,r,n,o,i),r=RE(),e!==null&&!Cn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Fo(e,t,i)):(Tt&&r&&fE(t),t.flags|=1,nn(e,t,n,i),t.child)}function XI(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!xE(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,V1(e,t,o,n,i)):(e=Th(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:wc,r(s,n)&&e.ref===t.ref)return Fo(e,t,i)}return t.flags|=1,e=Us(o,n),e.ref=t.ref,e.return=t,t.child=e}function V1(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(wc(o,n)&&e.ref===t.ref)if(Cn=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(Cn=!0);else return t.lanes=e.lanes,Fo(e,t,i)}return SS(e,t,r,n,i)}function x1(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Gl,Vn),Vn|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,gt(Gl,Vn),Vn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,gt(Gl,Vn),Vn|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,gt(Gl,Vn),Vn|=n;return nn(e,t,i,r),t.child}function U1(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function SS(e,t,r,n,i){var o=Pn(r)?Ya:Yr.current;return o=Ru(t,o),uu(t,i),r=_E(e,t,r,n,o,i),n=RE(),e!==null&&!Cn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Fo(e,t,i)):(Tt&&n&&fE(t),t.flags|=1,nn(e,t,r,i),t.child)}function eA(e,t,r,n,i){if(Pn(r)){var o=!0;Af(t)}else o=!1;if(uu(t,i),t.stateNode===null)Ch(e,t),M1(t,r,n),vS(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=ci(u):(u=Pn(r)?Ya:Yr.current,u=Ru(t,u));var d=r.getDerivedStateFromProps,c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";c||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==u)&&qI(t,s,n,u),ss=!1;var p=t.memoizedState;s.state=p,Of(t,n,s,i),l=t.memoizedState,a!==n||p!==l||On.current||ss?(typeof d=="function"&&(gS(t,r,d,n),l=t.memoizedState),(a=ss||KI(t,r,a,n,p,l,u))?(c||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=u,n=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,p1(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ei(t.type,a),s.props=u,c=t.pendingProps,p=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=ci(l):(l=Pn(r)?Ya:Yr.current,l=Ru(t,l));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==c||p!==l)&&qI(t,s,n,l),ss=!1,p=t.memoizedState,s.state=p,Of(t,n,s,i);var m=t.memoizedState;a!==c||p!==m||On.current||ss?(typeof h=="function"&&(gS(t,r,h,n),m=t.memoizedState),(u=ss||KI(t,r,u,n,p,m,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,m,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),s.props=n,s.state=m,s.context=l,n=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return bS(e,t,r,n,o,i)}function bS(e,t,r,n,i,o){U1(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&jI(t,r,!1),Fo(e,t,o);n=t.stateNode,vj.current=t;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Ou(t,e.child,null,o),t.child=Ou(t,null,a,o)):nn(e,t,a,o),t.memoizedState=n.state,i&&jI(t,r,!0),t.child}function j1(e){var t=e.stateNode;t.pendingContext?UI(e,t.pendingContext,t.pendingContext!==t.context):t.context&&UI(e,t.context,!1),wE(e,t.containerInfo)}function tA(e,t,r,n,i){return Tu(),gE(i),t.flags|=256,nn(e,t,r,n),t.child}var ES={dehydrated:null,treeContext:null,retryLane:0};function wS(e){return{baseLanes:e,cachePool:null,transitions:null}}function $1(e,t,r){var n=t.pendingProps,i=Mt.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),gt(Mt,i&1),e===null)return fS(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,o?(n=t.mode,o=t.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=hg(s,n,0,null),e=Ba(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=wS(r),t.memoizedState=ES,e):PE(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return yj(e,t,s,n,a,i,r);if(o){o=n.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Us(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Us(a,o):(o=Ba(o,s,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,s=e.child.memoizedState,s=s===null?wS(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~r,t.memoizedState=ES,n}return o=e.child,e=o.sibling,n=Us(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function PE(e,t){return t=hg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mp(e,t,r,n){return n!==null&&gE(n),Ou(t,e.child,null,r),e=PE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yj(e,t,r,n,i,o,s){if(r)return t.flags&256?(t.flags&=-257,n=uv(Error(ce(422))),Mp(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=hg({mode:"visible",children:n.children},i,0,null),o=Ba(o,i,s,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Ou(t,e.child,null,s),t.child.memoizedState=wS(s),t.memoizedState=ES,o);if(!(t.mode&1))return Mp(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(ce(419)),n=uv(o,n,void 0),Mp(e,t,s,n)}if(a=(s&e.childLanes)!==0,Cn||a){if(n=Ar,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,$o(e,i),Di(n,e,i,-1))}return VE(),n=uv(Error(ce(421))),Mp(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=kj.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,jn=Ns(i.nextSibling),$n=t,Tt=!0,Ci=null,e!==null&&(ri[ni++]=Po,ri[ni++]=ko,ri[ni++]=Xa,Po=e.id,ko=e.overflow,Xa=t),t=PE(t,n.children),t.flags|=4096,t)}function rA(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),mS(e.return,t,r)}function dv(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function F1(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(nn(e,t,n.children,r),n=Mt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rA(e,r,t);else if(e.tag===19)rA(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(gt(Mt,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Pf(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),dv(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Pf(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}dv(t,!0,r,null,o);break;case"together":dv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ch(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),tl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,r=Us(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Us(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Sj(e,t,r){switch(t.tag){case 3:j1(t),Tu();break;case 5:h1(t);break;case 1:Pn(t.type)&&Af(t);break;case 4:wE(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;gt(Rf,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(gt(Mt,Mt.current&1),t.flags|=128,null):r&t.child.childLanes?$1(e,t,r):(gt(Mt,Mt.current&1),e=Fo(e,t,r),e!==null?e.sibling:null);gt(Mt,Mt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return F1(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),gt(Mt,Mt.current),n)break;return null;case 22:case 23:return t.lanes=0,x1(e,t,r)}return Fo(e,t,r)}var B1,IS,H1,z1;B1=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};IS=function(){};H1=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Ta(io.current);var o=null;switch(r){case"input":i=Wy(e,i),n=Wy(e,n),o=[];break;case"select":i=xt({},i,{value:void 0}),n=xt({},n,{value:void 0}),o=[];break;case"textarea":i=qy(e,i),n=qy(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=wf)}Jy(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(mc.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(mc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&yt("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};z1=function(e,t,r,n){r!==n&&(t.flags|=4)};function ud(e,t){if(!Tt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Hr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function bj(e,t,r){var n=t.pendingProps;switch(mE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hr(t),null;case 1:return Pn(t.type)&&If(),Hr(t),null;case 3:return n=t.stateNode,Pu(),It(On),It(Yr),AE(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(kp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ci!==null&&(kS(Ci),Ci=null))),IS(e,t),Hr(t),null;case 5:IE(t);var i=Ta(Rc.current);if(r=t.type,e!==null&&t.stateNode!=null)H1(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ce(166));return Hr(t),null}if(e=Ta(io.current),kp(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Xi]=t,n[Cc]=o,e=(t.mode&1)!==0,r){case"dialog":yt("cancel",n),yt("close",n);break;case"iframe":case"object":case"embed":yt("load",n);break;case"video":case"audio":for(i=0;i<Md.length;i++)yt(Md[i],n);break;case"source":yt("error",n);break;case"img":case"image":case"link":yt("error",n),yt("load",n);break;case"details":yt("toggle",n);break;case"input":cI(n,o),yt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},yt("invalid",n);break;case"textarea":hI(n,o),yt("invalid",n)}Jy(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&Pp(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Pp(n.textContent,a,e),i=["children",""+a]):mc.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&yt("scroll",n)}switch(r){case"input":wp(n),pI(n,o,!0);break;case"textarea":wp(n),fI(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=wf)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yO(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Xi]=t,e[Cc]=n,B1(e,t,!1,!1),t.stateNode=e;e:{switch(s=Zy(r,n),r){case"dialog":yt("cancel",e),yt("close",e),i=n;break;case"iframe":case"object":case"embed":yt("load",e),i=n;break;case"video":case"audio":for(i=0;i<Md.length;i++)yt(Md[i],e);i=n;break;case"source":yt("error",e),i=n;break;case"img":case"image":case"link":yt("error",e),yt("load",e),i=n;break;case"details":yt("toggle",e),i=n;break;case"input":cI(e,n),i=Wy(e,n),yt("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=xt({},n,{value:void 0}),yt("invalid",e);break;case"textarea":hI(e,n),i=qy(e,n),yt("invalid",e);break;default:i=n}Jy(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?EO(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&SO(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&gc(e,l):typeof l=="number"&&gc(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(mc.hasOwnProperty(o)?l!=null&&o==="onScroll"&&yt("scroll",e):l!=null&&eE(e,o,l,s))}switch(r){case"input":wp(e),pI(e,n,!1);break;case"textarea":wp(e),fI(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Fs(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?ou(e,!!n.multiple,o,!1):n.defaultValue!=null&&ou(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=wf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Hr(t),null;case 6:if(e&&t.stateNode!=null)z1(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ce(166));if(r=Ta(Rc.current),Ta(io.current),kp(t)){if(n=t.stateNode,r=t.memoizedProps,n[Xi]=t,(o=n.nodeValue!==r)&&(e=$n,e!==null))switch(e.tag){case 3:Pp(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pp(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Xi]=t,t.stateNode=n}return Hr(t),null;case 13:if(It(Mt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Tt&&jn!==null&&t.mode&1&&!(t.flags&128))l1(),Tu(),t.flags|=98560,o=!1;else if(o=kp(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(ce(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ce(317));o[Xi]=t}else Tu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Hr(t),o=!1}else Ci!==null&&(kS(Ci),Ci=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Mt.current&1?ar===0&&(ar=3):VE())),t.updateQueue!==null&&(t.flags|=4),Hr(t),null);case 4:return Pu(),IS(e,t),e===null&&Ic(t.stateNode.containerInfo),Hr(t),null;case 10:return SE(t.type._context),Hr(t),null;case 17:return Pn(t.type)&&If(),Hr(t),null;case 19:if(It(Mt),o=t.memoizedState,o===null)return Hr(t),null;if(n=(t.flags&128)!==0,s=o.rendering,s===null)if(n)ud(o,!1);else{if(ar!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Pf(e),s!==null){for(t.flags|=128,ud(o,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return gt(Mt,Mt.current&1|2),t.child}e=e.sibling}o.tail!==null&&zt()>Du&&(t.flags|=128,n=!0,ud(o,!1),t.lanes=4194304)}else{if(!n)if(e=Pf(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ud(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Tt)return Hr(t),null}else 2*zt()-o.renderingStartTime>Du&&r!==1073741824&&(t.flags|=128,n=!0,ud(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(r=o.last,r!==null?r.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=zt(),t.sibling=null,r=Mt.current,gt(Mt,n?r&1|2:r&1),t):(Hr(t),null);case 22:case 23:return LE(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Vn&1073741824&&(Hr(t),t.subtreeFlags&6&&(t.flags|=8192)):Hr(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function Ej(e,t){switch(mE(t),t.tag){case 1:return Pn(t.type)&&If(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pu(),It(On),It(Yr),AE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return IE(t),null;case 13:if(It(Mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));Tu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return It(Mt),null;case 4:return Pu(),null;case 10:return SE(t.type._context),null;case 22:case 23:return LE(),null;case 24:return null;default:return null}}var Np=!1,qr=!1,wj=typeof WeakSet=="function"?WeakSet:Set,we=null;function Wl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){$t(e,t,n)}else r.current=null}function AS(e,t,r){try{r()}catch(n){$t(e,t,n)}}var nA=!1;function Ij(e,t){if(aS=Sf,e=QO(),hE(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,l=-1,u=0,d=0,c=e,p=null;t:for(;;){for(var h;c!==r||i!==0&&c.nodeType!==3||(a=s+i),c!==o||n!==0&&c.nodeType!==3||(l=s+n),c.nodeType===3&&(s+=c.nodeValue.length),(h=c.firstChild)!==null;)p=c,c=h;for(;;){if(c===e)break t;if(p===r&&++u===i&&(a=s),p===o&&++d===n&&(l=s),(h=c.nextSibling)!==null)break;c=p,p=c.parentNode}c=h}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(lS={focusedElem:e,selectionRange:r},Sf=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){t=we;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var f=m.memoizedProps,v=m.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?f:Ei(t.type,f),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(b){$t(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}return m=nA,nA=!1,m}function qd(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&AS(t,r,o)}i=i.next}while(i!==n)}}function cg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function CS(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function W1(e){var t=e.alternate;t!==null&&(e.alternate=null,W1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xi],delete t[Cc],delete t[cS],delete t[oj],delete t[sj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function G1(e){return e.tag===5||e.tag===3||e.tag===4}function iA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||G1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _S(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=wf));else if(n!==4&&(e=e.child,e!==null))for(_S(e,t,r),e=e.sibling;e!==null;)_S(e,t,r),e=e.sibling}function RS(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(RS(e,t,r),e=e.sibling;e!==null;)RS(e,t,r),e=e.sibling}var Dr=null,Ai=!1;function Qo(e,t,r){for(r=r.child;r!==null;)K1(e,t,r),r=r.sibling}function K1(e,t,r){if(no&&typeof no.onCommitFiberUnmount=="function")try{no.onCommitFiberUnmount(ng,r)}catch{}switch(r.tag){case 5:qr||Wl(r,t);case 6:var n=Dr,i=Ai;Dr=null,Qo(e,t,r),Dr=n,Ai=i,Dr!==null&&(Ai?(e=Dr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Dr.removeChild(r.stateNode));break;case 18:Dr!==null&&(Ai?(e=Dr,r=r.stateNode,e.nodeType===8?nv(e.parentNode,r):e.nodeType===1&&nv(e,r),bc(e)):nv(Dr,r.stateNode));break;case 4:n=Dr,i=Ai,Dr=r.stateNode.containerInfo,Ai=!0,Qo(e,t,r),Dr=n,Ai=i;break;case 0:case 11:case 14:case 15:if(!qr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&AS(r,t,s),i=i.next}while(i!==n)}Qo(e,t,r);break;case 1:if(!qr&&(Wl(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){$t(r,t,a)}Qo(e,t,r);break;case 21:Qo(e,t,r);break;case 22:r.mode&1?(qr=(n=qr)||r.memoizedState!==null,Qo(e,t,r),qr=n):Qo(e,t,r);break;default:Qo(e,t,r)}}function oA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new wj),t.forEach(function(n){var i=Dj.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function hi(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Dr=a.stateNode,Ai=!1;break e;case 3:Dr=a.stateNode.containerInfo,Ai=!0;break e;case 4:Dr=a.stateNode.containerInfo,Ai=!0;break e}a=a.return}if(Dr===null)throw Error(ce(160));K1(o,s,i),Dr=null,Ai=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){$t(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)q1(t,e),t=t.sibling}function q1(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hi(t,e),Ui(e),n&4){try{qd(3,e,e.return),cg(3,e)}catch(f){$t(e,e.return,f)}try{qd(5,e,e.return)}catch(f){$t(e,e.return,f)}}break;case 1:hi(t,e),Ui(e),n&512&&r!==null&&Wl(r,r.return);break;case 5:if(hi(t,e),Ui(e),n&512&&r!==null&&Wl(r,r.return),e.flags&32){var i=e.stateNode;try{gc(i,"")}catch(f){$t(e,e.return,f)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=r!==null?r.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&gO(i,o),Zy(a,s);var u=Zy(a,o);for(s=0;s<l.length;s+=2){var d=l[s],c=l[s+1];d==="style"?EO(i,c):d==="dangerouslySetInnerHTML"?SO(i,c):d==="children"?gc(i,c):eE(i,d,c,u)}switch(a){case"input":Gy(i,o);break;case"textarea":vO(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?ou(i,!!o.multiple,h,!1):p!==!!o.multiple&&(o.defaultValue!=null?ou(i,!!o.multiple,o.defaultValue,!0):ou(i,!!o.multiple,o.multiple?[]:"",!1))}i[Cc]=o}catch(f){$t(e,e.return,f)}}break;case 6:if(hi(t,e),Ui(e),n&4){if(e.stateNode===null)throw Error(ce(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(f){$t(e,e.return,f)}}break;case 3:if(hi(t,e),Ui(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{bc(t.containerInfo)}catch(f){$t(e,e.return,f)}break;case 4:hi(t,e),Ui(e);break;case 13:hi(t,e),Ui(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(ME=zt())),n&4&&oA(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(qr=(u=qr)||d,hi(t,e),qr=u):hi(t,e),Ui(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(we=e,d=e.child;d!==null;){for(c=we=d;we!==null;){switch(p=we,h=p.child,p.tag){case 0:case 11:case 14:case 15:qd(4,p,p.return);break;case 1:Wl(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(f){$t(n,r,f)}}break;case 5:Wl(p,p.return);break;case 22:if(p.memoizedState!==null){aA(c);continue}}h!==null?(h.return=p,we=h):aA(c)}d=d.sibling}e:for(d=null,c=e;;){if(c.tag===5){if(d===null){d=c;try{i=c.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=c.stateNode,l=c.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bO("display",s))}catch(f){$t(e,e.return,f)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(f){$t(e,e.return,f)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:hi(t,e),Ui(e),n&4&&oA(e);break;case 21:break;default:hi(t,e),Ui(e)}}function Ui(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(G1(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(gc(i,""),n.flags&=-33);var o=iA(e);RS(e,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=iA(e);_S(e,a,s);break;default:throw Error(ce(161))}}catch(l){$t(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Aj(e,t,r){we=e,Q1(e)}function Q1(e,t,r){for(var n=(e.mode&1)!==0;we!==null;){var i=we,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Np;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||qr;a=Np;var u=qr;if(Np=s,(qr=l)&&!u)for(we=i;we!==null;)s=we,l=s.child,s.tag===22&&s.memoizedState!==null?lA(i):l!==null?(l.return=s,we=l):lA(i);for(;o!==null;)we=o,Q1(o),o=o.sibling;we=i,Np=a,qr=u}sA(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,we=o):sA(e)}}function sA(e){for(;we!==null;){var t=we;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qr||cg(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!qr)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Ei(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&zI(t,o,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}zI(t,s,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&bc(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}qr||t.flags&512&&CS(t)}catch(p){$t(t,t.return,p)}}if(t===e){we=null;break}if(r=t.sibling,r!==null){r.return=t.return,we=r;break}we=t.return}}function aA(e){for(;we!==null;){var t=we;if(t===e){we=null;break}var r=t.sibling;if(r!==null){r.return=t.return,we=r;break}we=t.return}}function lA(e){for(;we!==null;){var t=we;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{cg(4,t)}catch(l){$t(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){$t(t,i,l)}}var o=t.return;try{CS(t)}catch(l){$t(t,o,l)}break;case 5:var s=t.return;try{CS(t)}catch(l){$t(t,s,l)}}}catch(l){$t(t,t.return,l)}if(t===e){we=null;break}var a=t.sibling;if(a!==null){a.return=t.return,we=a;break}we=t.return}}var Cj=Math.ceil,Mf=Go.ReactCurrentDispatcher,kE=Go.ReactCurrentOwner,di=Go.ReactCurrentBatchConfig,Ze=0,Ar=null,Yt=null,Ur=0,Vn=0,Gl=Gs(0),ar=0,kc=null,tl=0,pg=0,DE=0,Qd=null,In=null,ME=0,Du=1/0,bo=null,Nf=!1,TS=null,Vs=null,Lp=!1,Is=null,Lf=0,Jd=0,OS=null,_h=-1,Rh=0;function ln(){return Ze&6?zt():_h!==-1?_h:_h=zt()}function xs(e){return e.mode&1?Ze&2&&Ur!==0?Ur&-Ur:lj.transition!==null?(Rh===0&&(Rh=MO()),Rh):(e=nt,e!==0||(e=window.event,e=e===void 0?16:$O(e.type)),e):1}function Di(e,t,r,n){if(50<Jd)throw Jd=0,OS=null,Error(ce(185));sp(e,r,n),(!(Ze&2)||e!==Ar)&&(e===Ar&&(!(Ze&2)&&(pg|=r),ar===4&&cs(e,Ur)),kn(e,n),r===1&&Ze===0&&!(t.mode&1)&&(Du=zt()+500,lg&&Ks()))}function kn(e,t){var r=e.callbackNode;lU(e,t);var n=yf(e,e===Ar?Ur:0);if(n===0)r!==null&&vI(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&vI(r),t===1)e.tag===0?aj(uA.bind(null,e)):o1(uA.bind(null,e)),nj(function(){!(Ze&6)&&Ks()}),r=null;else{switch(NO(n)){case 1:r=oE;break;case 4:r=kO;break;case 16:r=vf;break;case 536870912:r=DO;break;default:r=vf}r=nP(r,J1.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function J1(e,t){if(_h=-1,Rh=0,Ze&6)throw Error(ce(327));var r=e.callbackNode;if(du()&&e.callbackNode!==r)return null;var n=yf(e,e===Ar?Ur:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Vf(e,n);else{t=n;var i=Ze;Ze|=2;var o=Y1();(Ar!==e||Ur!==t)&&(bo=null,Du=zt()+500,Fa(e,t));do try{Tj();break}catch(a){Z1(e,a)}while(!0);yE(),Mf.current=o,Ze=i,Yt!==null?t=0:(Ar=null,Ur=0,t=ar)}if(t!==0){if(t===2&&(i=rS(e),i!==0&&(n=i,t=PS(e,i))),t===1)throw r=kc,Fa(e,0),cs(e,n),kn(e,zt()),r;if(t===6)cs(e,n);else{if(i=e.current.alternate,!(n&30)&&!_j(i)&&(t=Vf(e,n),t===2&&(o=rS(e),o!==0&&(n=o,t=PS(e,o))),t===1))throw r=kc,Fa(e,0),cs(e,n),kn(e,zt()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ce(345));case 2:ca(e,In,bo);break;case 3:if(cs(e,n),(n&130023424)===n&&(t=ME+500-zt(),10<t)){if(yf(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){ln(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=dS(ca.bind(null,e,In,bo),t);break}ca(e,In,bo);break;case 4:if(cs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-ki(n);o=1<<s,s=t[s],s>i&&(i=s),n&=~o}if(n=i,n=zt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Cj(n/1960))-n,10<n){e.timeoutHandle=dS(ca.bind(null,e,In,bo),n);break}ca(e,In,bo);break;case 5:ca(e,In,bo);break;default:throw Error(ce(329))}}}return kn(e,zt()),e.callbackNode===r?J1.bind(null,e):null}function PS(e,t){var r=Qd;return e.current.memoizedState.isDehydrated&&(Fa(e,t).flags|=256),e=Vf(e,t),e!==2&&(t=In,In=r,t!==null&&kS(t)),e}function kS(e){In===null?In=e:In.push.apply(In,e)}function _j(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Ni(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cs(e,t){for(t&=~DE,t&=~pg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ki(t),n=1<<r;e[r]=-1,t&=~n}}function uA(e){if(Ze&6)throw Error(ce(327));du();var t=yf(e,0);if(!(t&1))return kn(e,zt()),null;var r=Vf(e,t);if(e.tag!==0&&r===2){var n=rS(e);n!==0&&(t=n,r=PS(e,n))}if(r===1)throw r=kc,Fa(e,0),cs(e,t),kn(e,zt()),r;if(r===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ca(e,In,bo),kn(e,zt()),null}function NE(e,t){var r=Ze;Ze|=1;try{return e(t)}finally{Ze=r,Ze===0&&(Du=zt()+500,lg&&Ks())}}function rl(e){Is!==null&&Is.tag===0&&!(Ze&6)&&du();var t=Ze;Ze|=1;var r=di.transition,n=nt;try{if(di.transition=null,nt=1,e)return e()}finally{nt=n,di.transition=r,Ze=t,!(Ze&6)&&Ks()}}function LE(){Vn=Gl.current,It(Gl)}function Fa(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,rj(r)),Yt!==null)for(r=Yt.return;r!==null;){var n=r;switch(mE(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&If();break;case 3:Pu(),It(On),It(Yr),AE();break;case 5:IE(n);break;case 4:Pu();break;case 13:It(Mt);break;case 19:It(Mt);break;case 10:SE(n.type._context);break;case 22:case 23:LE()}r=r.return}if(Ar=e,Yt=e=Us(e.current,null),Ur=Vn=t,ar=0,kc=null,DE=pg=tl=0,In=Qd=null,Ra!==null){for(t=0;t<Ra.length;t++)if(r=Ra[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}Ra=null}return e}function Z1(e,t){do{var r=Yt;try{if(yE(),Ih.current=Df,kf){for(var n=Vt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}kf=!1}if(el=0,yr=sr=Vt=null,Kd=!1,Tc=0,kE.current=null,r===null||r.return===null){ar=1,kc=t,Yt=null;break}e:{var o=e,s=r.return,a=r,l=t;if(t=Ur,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=JI(s);if(h!==null){h.flags&=-257,ZI(h,s,a,o,t),h.mode&1&&QI(o,u,t),t=h,l=u;var m=t.updateQueue;if(m===null){var f=new Set;f.add(l),t.updateQueue=f}else m.add(l);break e}else{if(!(t&1)){QI(o,u,t),VE();break e}l=Error(ce(426))}}else if(Tt&&a.mode&1){var v=JI(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),ZI(v,s,a,o,t),gE(ku(l,a));break e}}o=l=ku(l,a),ar!==4&&(ar=2),Qd===null?Qd=[o]:Qd.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=N1(o,l,t);HI(o,g);break e;case 1:a=l;var y=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Vs===null||!Vs.has(S)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=L1(o,a,t);HI(o,b);break e}}o=o.return}while(o!==null)}eP(r)}catch(R){t=R,Yt===r&&r!==null&&(Yt=r=r.return);continue}break}while(!0)}function Y1(){var e=Mf.current;return Mf.current=Df,e===null?Df:e}function VE(){(ar===0||ar===3||ar===2)&&(ar=4),Ar===null||!(tl&268435455)&&!(pg&268435455)||cs(Ar,Ur)}function Vf(e,t){var r=Ze;Ze|=2;var n=Y1();(Ar!==e||Ur!==t)&&(bo=null,Fa(e,t));do try{Rj();break}catch(i){Z1(e,i)}while(!0);if(yE(),Ze=r,Mf.current=n,Yt!==null)throw Error(ce(261));return Ar=null,Ur=0,ar}function Rj(){for(;Yt!==null;)X1(Yt)}function Tj(){for(;Yt!==null&&!Xx();)X1(Yt)}function X1(e){var t=rP(e.alternate,e,Vn);e.memoizedProps=e.pendingProps,t===null?eP(e):Yt=t,kE.current=null}function eP(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ej(r,t),r!==null){r.flags&=32767,Yt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ar=6,Yt=null;return}}else if(r=bj(r,t,Vn),r!==null){Yt=r;return}if(t=t.sibling,t!==null){Yt=t;return}Yt=t=e}while(t!==null);ar===0&&(ar=5)}function ca(e,t,r){var n=nt,i=di.transition;try{di.transition=null,nt=1,Oj(e,t,r,n)}finally{di.transition=i,nt=n}return null}function Oj(e,t,r,n){do du();while(Is!==null);if(Ze&6)throw Error(ce(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(uU(e,o),e===Ar&&(Yt=Ar=null,Ur=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Lp||(Lp=!0,nP(vf,function(){return du(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=di.transition,di.transition=null;var s=nt;nt=1;var a=Ze;Ze|=4,kE.current=null,Ij(e,r),q1(r,e),QU(lS),Sf=!!aS,lS=aS=null,e.current=r,Aj(r),eU(),Ze=a,nt=s,di.transition=o}else e.current=r;if(Lp&&(Lp=!1,Is=e,Lf=i),o=e.pendingLanes,o===0&&(Vs=null),nU(r.stateNode),kn(e,zt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Nf)throw Nf=!1,e=TS,TS=null,e;return Lf&1&&e.tag!==0&&du(),o=e.pendingLanes,o&1?e===OS?Jd++:(Jd=0,OS=e):Jd=0,Ks(),null}function du(){if(Is!==null){var e=NO(Lf),t=di.transition,r=nt;try{if(di.transition=null,nt=16>e?16:e,Is===null)var n=!1;else{if(e=Is,Is=null,Lf=0,Ze&6)throw Error(ce(331));var i=Ze;for(Ze|=4,we=e.current;we!==null;){var o=we,s=o.child;if(we.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(we=u;we!==null;){var d=we;switch(d.tag){case 0:case 11:case 15:qd(8,d,o)}var c=d.child;if(c!==null)c.return=d,we=c;else for(;we!==null;){d=we;var p=d.sibling,h=d.return;if(W1(d),d===u){we=null;break}if(p!==null){p.return=h,we=p;break}we=h}}}var m=o.alternate;if(m!==null){var f=m.child;if(f!==null){m.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(f!==null)}}we=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,we=s;else e:for(;we!==null;){if(o=we,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qd(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,we=g;break e}we=o.return}}var y=e.current;for(we=y;we!==null;){s=we;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,we=S;else e:for(s=y;we!==null;){if(a=we,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cg(9,a)}}catch(R){$t(a,a.return,R)}if(a===s){we=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,we=b;break e}we=a.return}}if(Ze=i,Ks(),no&&typeof no.onPostCommitFiberRoot=="function")try{no.onPostCommitFiberRoot(ng,e)}catch{}n=!0}return n}finally{nt=r,di.transition=t}}return!1}function dA(e,t,r){t=ku(r,t),t=N1(e,t,1),e=Ls(e,t,1),t=ln(),e!==null&&(sp(e,1,t),kn(e,t))}function $t(e,t,r){if(e.tag===3)dA(e,e,r);else for(;t!==null;){if(t.tag===3){dA(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Vs===null||!Vs.has(n))){e=ku(r,e),e=L1(t,e,1),t=Ls(t,e,1),e=ln(),t!==null&&(sp(t,1,e),kn(t,e));break}}t=t.return}}function Pj(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ln(),e.pingedLanes|=e.suspendedLanes&r,Ar===e&&(Ur&r)===r&&(ar===4||ar===3&&(Ur&130023424)===Ur&&500>zt()-ME?Fa(e,0):DE|=r),kn(e,t)}function tP(e,t){t===0&&(e.mode&1?(t=Cp,Cp<<=1,!(Cp&130023424)&&(Cp=4194304)):t=1);var r=ln();e=$o(e,t),e!==null&&(sp(e,t,r),kn(e,r))}function kj(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),tP(e,r)}function Dj(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(t),tP(e,r)}var rP;rP=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||On.current)Cn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Cn=!1,Sj(e,t,r);Cn=!!(e.flags&131072)}else Cn=!1,Tt&&t.flags&1048576&&s1(t,_f,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ch(e,t),e=t.pendingProps;var i=Ru(t,Yr.current);uu(t,r),i=_E(null,t,n,e,i,r);var o=RE();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pn(n)?(o=!0,Af(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,EE(t),i.updater=dg,t.stateNode=i,i._reactInternals=t,vS(t,n,e,r),t=bS(null,t,n,!0,o,r)):(t.tag=0,Tt&&o&&fE(t),nn(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ch(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Nj(n),e=Ei(n,e),i){case 0:t=SS(null,t,n,e,r);break e;case 1:t=eA(null,t,n,e,r);break e;case 11:t=YI(null,t,n,e,r);break e;case 14:t=XI(null,t,n,Ei(n.type,e),r);break e}throw Error(ce(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ei(n,i),SS(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ei(n,i),eA(e,t,n,i,r);case 3:e:{if(j1(t),e===null)throw Error(ce(387));n=t.pendingProps,o=t.memoizedState,i=o.element,p1(e,t),Of(t,n,null,r);var s=t.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=ku(Error(ce(423)),t),t=tA(e,t,n,r,i);break e}else if(n!==i){i=ku(Error(ce(424)),t),t=tA(e,t,n,r,i);break e}else for(jn=Ns(t.stateNode.containerInfo.firstChild),$n=t,Tt=!0,Ci=null,r=d1(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Tu(),n===i){t=Fo(e,t,r);break e}nn(e,t,n,r)}t=t.child}return t;case 5:return h1(t),e===null&&fS(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,uS(n,i)?s=null:o!==null&&uS(n,o)&&(t.flags|=32),U1(e,t),nn(e,t,s,r),t.child;case 6:return e===null&&fS(t),null;case 13:return $1(e,t,r);case 4:return wE(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ou(t,null,n,r):nn(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ei(n,i),YI(e,t,n,i,r);case 7:return nn(e,t,t.pendingProps,r),t.child;case 8:return nn(e,t,t.pendingProps.children,r),t.child;case 12:return nn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,gt(Rf,n._currentValue),n._currentValue=s,o!==null)if(Ni(o.value,s)){if(o.children===i.children&&!On.current){t=Fo(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=Mo(-1,r&-r),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),mS(o.return,r,t),a.lanes|=r;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ce(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),mS(s,r,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}nn(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,uu(t,r),i=ci(i),n=n(i),t.flags|=1,nn(e,t,n,r),t.child;case 14:return n=t.type,i=Ei(n,t.pendingProps),i=Ei(n.type,i),XI(e,t,n,i,r);case 15:return V1(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ei(n,i),Ch(e,t),t.tag=1,Pn(n)?(e=!0,Af(t)):e=!1,uu(t,r),M1(t,n,i),vS(t,n,i,r),bS(null,t,n,!0,e,r);case 19:return F1(e,t,r);case 22:return x1(e,t,r)}throw Error(ce(156,t.tag))};function nP(e,t){return PO(e,t)}function Mj(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(e,t,r,n){return new Mj(e,t,r,n)}function xE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nj(e){if(typeof e=="function")return xE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rE)return 11;if(e===nE)return 14}return 2}function Us(e,t){var r=e.alternate;return r===null?(r=li(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Th(e,t,r,n,i,o){var s=2;if(n=e,typeof e=="function")xE(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Vl:return Ba(r.children,i,o,t);case tE:s=8,i|=8;break;case Fy:return e=li(12,r,t,i|2),e.elementType=Fy,e.lanes=o,e;case By:return e=li(13,r,t,i),e.elementType=By,e.lanes=o,e;case Hy:return e=li(19,r,t,i),e.elementType=Hy,e.lanes=o,e;case hO:return hg(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cO:s=10;break e;case pO:s=9;break e;case rE:s=11;break e;case nE:s=14;break e;case os:s=16,n=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=li(s,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Ba(e,t,r,n){return e=li(7,e,n,t),e.lanes=r,e}function hg(e,t,r,n){return e=li(22,e,n,t),e.elementType=hO,e.lanes=r,e.stateNode={isHidden:!1},e}function cv(e,t,r){return e=li(6,e,null,t),e.lanes=r,e}function pv(e,t,r){return t=li(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lj(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gg(0),this.expirationTimes=Gg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gg(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function UE(e,t,r,n,i,o,s,a,l){return e=new Lj(e,t,r,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=li(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},EE(o),e}function Vj(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ll,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function iP(e){if(!e)return Bs;e=e._reactInternals;e:{if(pl(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var r=e.type;if(Pn(r))return i1(e,r,t)}return t}function oP(e,t,r,n,i,o,s,a,l){return e=UE(r,n,!0,e,i,o,s,a,l),e.context=iP(null),r=e.current,n=ln(),i=xs(r),o=Mo(n,i),o.callback=t??null,Ls(r,o,i),e.current.lanes=i,sp(e,i,n),kn(e,n),e}function fg(e,t,r,n){var i=t.current,o=ln(),s=xs(i);return r=iP(r),t.context===null?t.context=r:t.pendingContext=r,t=Mo(o,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ls(i,t,s),e!==null&&(Di(e,i,s,o),wh(e,i,s)),s}function xf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function jE(e,t){cA(e,t),(e=e.alternate)&&cA(e,t)}function xj(){return null}var sP=typeof reportError=="function"?reportError:function(e){console.error(e)};function $E(e){this._internalRoot=e}mg.prototype.render=$E.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));fg(e,t,null,null)};mg.prototype.unmount=$E.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rl(function(){fg(null,e,null,null)}),t[jo]=null}};function mg(e){this._internalRoot=e}mg.prototype.unstable_scheduleHydration=function(e){if(e){var t=xO();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ds.length&&t!==0&&t<ds[r].priority;r++);ds.splice(r,0,e),r===0&&jO(e)}};function FE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pA(){}function Uj(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var u=xf(s);o.call(u)}}var s=oP(t,n,e,0,null,!1,!1,"",pA);return e._reactRootContainer=s,e[jo]=s.current,Ic(e.nodeType===8?e.parentNode:e),rl(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=xf(l);a.call(u)}}var l=UE(e,0,!1,null,null,!1,!1,"",pA);return e._reactRootContainer=l,e[jo]=l.current,Ic(e.nodeType===8?e.parentNode:e),rl(function(){fg(t,l,r,n)}),l}function vg(e,t,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=xf(s);a.call(l)}}fg(t,s,e,i)}else s=Uj(r,t,e,i,n);return xf(s)}LO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Dd(t.pendingLanes);r!==0&&(sE(t,r|1),kn(t,zt()),!(Ze&6)&&(Du=zt()+500,Ks()))}break;case 13:rl(function(){var n=$o(e,1);if(n!==null){var i=ln();Di(n,e,1,i)}}),jE(e,1)}};aE=function(e){if(e.tag===13){var t=$o(e,134217728);if(t!==null){var r=ln();Di(t,e,134217728,r)}jE(e,134217728)}};VO=function(e){if(e.tag===13){var t=xs(e),r=$o(e,t);if(r!==null){var n=ln();Di(r,e,t,n)}jE(e,t)}};xO=function(){return nt};UO=function(e,t){var r=nt;try{return nt=e,t()}finally{nt=r}};Xy=function(e,t,r){switch(t){case"input":if(Gy(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=ag(n);if(!i)throw Error(ce(90));mO(n),Gy(n,i)}}}break;case"textarea":vO(e,r);break;case"select":t=r.value,t!=null&&ou(e,!!r.multiple,t,!1)}};AO=NE;CO=rl;var jj={usingClientEntryPoint:!1,Events:[lp,$l,ag,wO,IO,NE]},dd={findFiberByHostInstance:_a,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$j={bundleType:dd.bundleType,version:dd.version,rendererPackageName:dd.rendererPackageName,rendererConfig:dd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Go.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=TO(e),e===null?null:e.stateNode},findFiberByHostInstance:dd.findFiberByHostInstance||xj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vp.isDisabled&&Vp.supportsFiber)try{ng=Vp.inject($j),no=Vp}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jj;Qn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!FE(t))throw Error(ce(200));return Vj(e,t,null,r)};Qn.createRoot=function(e,t){if(!FE(e))throw Error(ce(299));var r=!1,n="",i=sP;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=UE(e,1,!1,null,null,r,!1,n,i),e[jo]=t.current,Ic(e.nodeType===8?e.parentNode:e),new $E(t)};Qn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=TO(t),e=e===null?null:e.stateNode,e};Qn.flushSync=function(e){return rl(e)};Qn.hydrate=function(e,t,r){if(!gg(t))throw Error(ce(200));return vg(null,e,t,!0,r)};Qn.hydrateRoot=function(e,t,r){if(!FE(e))throw Error(ce(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=sP;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=oP(t,null,e,1,r??null,i,!1,o,s),e[jo]=t.current,Ic(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new mg(t)};Qn.render=function(e,t,r){if(!gg(t))throw Error(ce(200));return vg(null,e,t,!1,r)};Qn.unmountComponentAtNode=function(e){if(!gg(e))throw Error(ce(40));return e._reactRootContainer?(rl(function(){vg(null,null,e,!1,function(){e._reactRootContainer=null,e[jo]=null})}),!0):!1};Qn.unstable_batchedUpdates=NE;Qn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!gg(r))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return vg(e,t,r,!1,n)};Qn.version="18.3.1-next-f1338f8080-20240426";function aP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aP)}catch(e){console.error(e)}}aP(),aO.exports=Qn;var Fj=aO.exports,hA=Fj;jy.createRoot=hA.createRoot,jy.hydrateRoot=hA.hydrateRoot;class fA extends Error{constructor(t){super(`Video service '${t}' is not supported or not properly configured`),this.serviceType=t,this.name="UnsupportedVideoServiceError"}}class Bj extends Error{constructor(t,r){super(`Video service '${t}' requires configuration for: ${r.join(", ")}`),this.serviceType=t,this.missingFields=r,this.name="VideoServiceConfigurationError"}}var DS=function(e,t){return DS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},DS(e,t)};function yg(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");DS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function MS(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function NS(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function LS(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function No(e){return typeof e=="function"}function lP(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var hv=lP(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function VS(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Sg=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=MS(s),l=a.next();!l.done;l=a.next()){var u=l.value;u.remove(this)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else s.remove(this);var d=this.initialTeardown;if(No(d))try{d()}catch(f){o=f instanceof hv?f.errors:[f]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var p=MS(c),h=p.next();!h.done;h=p.next()){var m=h.value;try{mA(m)}catch(f){o=o??[],f instanceof hv?o=LS(LS([],NS(o)),NS(f.errors)):o.push(f)}}}catch(f){n={error:f}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}}if(o)throw new hv(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)mA(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&VS(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&VS(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),uP=Sg.EMPTY;function dP(e){return e instanceof Sg||e&&"closed"in e&&No(e.remove)&&No(e.add)&&No(e.unsubscribe)}function mA(e){No(e)?e():e.unsubscribe()}var Hj={Promise:void 0},zj={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,LS([e,t],NS(r)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Wj(e){zj.setTimeout(function(){throw e})}function gA(){}function Oh(e){e()}var cP=function(e){yg(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,dP(r)&&r.add(n)):n.destination=qj,n}return t.create=function(r,n,i){return new xS(r,n,i)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Sg),Gj=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){xp(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){xp(n)}else xp(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){xp(r)}},e}(),xS=function(e){yg(t,e);function t(r,n,i){var o=e.call(this)||this,s;return No(r)||!r?s={next:r??void 0,error:n??void 0,complete:i??void 0}:s=r,o.destination=new Gj(s),o}return t}(cP);function xp(e){Wj(e)}function Kj(e){throw e}var qj={closed:!0,next:gA,error:Kj,complete:gA},Qj=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Jj(e){return e}function Zj(e){return e.length===0?Jj:e.length===1?e[0]:function(r){return e.reduce(function(n,i){return i(n)},r)}}var vA=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i=this,o=Xj(t)?t:new xS(t,r,n);return Oh(function(){var s=i,a=s.operator,l=s.source;o.add(a?a.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=yA(r),new r(function(i,o){var s=new xS({next:function(a){try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[Qj]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Zj(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=yA(t),new t(function(n,i){var o;r.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},e.create=function(t){return new e(t)},e}();function yA(e){var t;return(t=e??Hj.Promise)!==null&&t!==void 0?t:Promise}function Yj(e){return e&&No(e.next)&&No(e.error)&&No(e.complete)}function Xj(e){return e&&e instanceof cP||Yj(e)&&dP(e)}var e$=lP(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Jr=function(e){yg(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new SA(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new e$},t.prototype.next=function(r){var n=this;Oh(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=MS(n.currentObservers),a=s.next();!a.done;a=s.next()){var l=a.value;l.next(r)}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(r){var n=this;Oh(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},t.prototype.complete=function(){var r=this;Oh(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?uP:(this.currentObservers=null,a.push(r),new Sg(function(){n.currentObservers=null,VS(a,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,s=n.isStopped;i?r.error(o):s&&r.complete()},t.prototype.asObservable=function(){var r=new vA;return r.source=this,r},t.create=function(r,n){return new SA(r,n)},t}(vA),SA=function(e){yg(t,e);function t(r,n){var i=e.call(this)||this;return i.destination=r,i.source=n,i}return t.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},t.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:uP},t}(Jr),US=function(e,t){return US=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},US(e,t)};function cn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}US(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zd=function(){return Zd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zd.apply(this,arguments)};function pP(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&d[0]?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,n=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||d[0]!==6&&d[0]!==2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(e,s)}catch(c){d=[6,c],n=0}finally{r=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([l,u])}}}function Dc(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ao(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function Bo(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}function Kl(e){return this instanceof Kl?(this.v=e,this):new Kl(e)}function t$(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=Dc(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(o){return new Promise(function(s,a){(function(l,u,d,c){Promise.resolve(c).then(function(p){l({value:p,done:d})},u)})(s,a,(o=e[i](o)).done,o.value)})}}}function Xe(e){return typeof e=="function"}function dp(e){var t=e(function(r){Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var fv=dp(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Uf(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var cp=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var r,n,i,o,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var l=Dc(a),u=l.next();!u.done;u=l.next())u.value.remove(this)}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}else a.remove(this);var d=this.initialTeardown;if(Xe(d))try{d()}catch(f){s=f instanceof fv?f.errors:[f]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var p=Dc(c),h=p.next();!h.done;h=p.next()){var m=h.value;try{bA(m)}catch(f){s=s??[],f instanceof fv?s=Bo(Bo([],ao(s)),ao(f.errors)):s.push(f)}}}catch(f){i={error:f}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}if(s)throw new fv(s)}},e.prototype.add=function(r){var n;if(r&&r!==this)if(this.closed)bA(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(r)}},e.prototype._hasParent=function(r){var n=this._parentage;return n===r||Array.isArray(n)&&n.includes(r)},e.prototype._addParent=function(r){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(r),n):n?[n,r]:r},e.prototype._removeParent=function(r){var n=this._parentage;n===r?this._parentage=null:Array.isArray(n)&&Uf(n,r)},e.prototype.remove=function(r){var n=this._finalizers;n&&Uf(n,r),r instanceof e&&r._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),hP=cp.EMPTY;function fP(e){return e instanceof cp||e&&"closed"in e&&Xe(e.remove)&&Xe(e.add)&&Xe(e.unsubscribe)}function bA(e){Xe(e)?e():e.unsubscribe()}var r$=void 0;function mP(e){(function(t,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];setTimeout.apply(void 0,Bo([t,r],ao(n)))})(function(){throw e})}function Mc(){}function Ph(e){e()}var BE=function(e){function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,fP(r)&&r.add(n)):n.destination=i$,n}return cn(t,e),t.create=function(r,n,i){return new jf(r,n,i)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(cp),n$=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){Up(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){Up(n)}else Up(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){Up(r)}},e}(),jf=function(e){function t(r,n,i){var o,s=e.call(this)||this;return o=Xe(r)||!r?{next:r??void 0,error:n??void 0,complete:i??void 0}:r,s.destination=new n$(o),s}return cn(t,e),t}(BE);function Up(e){mP(e)}var i$={closed:!0,next:Mc,error:function(e){throw e},complete:Mc},HE=typeof Symbol=="function"&&Symbol.observable||"@@observable";function bg(e){return e}function nl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return gP(e)}function gP(e){return e.length===0?bg:e.length===1?e[0]:function(t){return e.reduce(function(r,n){return n(r)},t)}}var Ft=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i,o=this,s=(i=t)&&i instanceof BE||function(a){return a&&Xe(a.next)&&Xe(a.error)&&Xe(a.complete)}(i)&&fP(i)?t:new jf(t,r,n);return Ph(function(){var a=o,l=a.operator,u=a.source;s.add(l?l.call(s,u):u?o._subscribe(s):o._trySubscribe(s))}),s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return new(r=EA(r))(function(i,o){var s=new jf({next:function(a){try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[HE]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return gP(t)(this)},e.prototype.toPromise=function(t){var r=this;return new(t=EA(t))(function(n,i){var o;r.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},e.create=function(t){return new e(t)},e}();function EA(e){var t;return(t=e??r$)!==null&&t!==void 0?t:Promise}function Fr(e){return function(t){if(function(r){return Xe(r==null?void 0:r.lift)}(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function tr(e,t,r,n,i){return new o$(e,t,r,n,i)}var mv,o$=function(e){function t(r,n,i,o,s,a){var l=e.call(this,r)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=n?function(u){try{n(u)}catch(d){r.error(d)}}:e.prototype._next,l._error=o?function(u){try{o(u)}catch(d){r.error(d)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(u){r.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,l}return cn(t,e),t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(BE),s$=dp(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Fn=function(e){function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return cn(t,e),t.prototype.lift=function(r){var n=new wA(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new s$},t.prototype.next=function(r){var n=this;Ph(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=Dc(n.currentObservers),a=s.next();!a.done;a=s.next())a.value.next(r)}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(r){var n=this;Ph(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},t.prototype.complete=function(){var r=this;Ph(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?hP:(this.currentObservers=null,a.push(r),new cp(function(){n.currentObservers=null,Uf(a,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,s=n.isStopped;i?r.error(o):s&&r.complete()},t.prototype.asObservable=function(){var r=new Ft;return r.source=this,r},t.create=function(r,n){return new wA(r,n)},t}(Ft),wA=function(e){function t(r,n){var i=e.call(this)||this;return i.destination=r,i.source=n,i}return cn(t,e),t.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},t.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:hP},t}(Fn),a$=function(e){function t(r){var n=e.call(this)||this;return n._value=r,n}return cn(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(r){var n=e.prototype._subscribe.call(this,r);return!n.closed&&r.next(this._value),n},t.prototype.getValue=function(){var r=this,n=r.hasError,i=r.thrownError,o=r._value;if(n)throw i;return this._throwIfClosed(),o},t.prototype.next=function(r){e.prototype.next.call(this,this._value=r)},t}(Fn),zE={now:function(){return(zE.delegate||Date).now()},delegate:void 0},l$=function(e){function t(r,n,i){r===void 0&&(r=1/0),n===void 0&&(n=1/0),i===void 0&&(i=zE);var o=e.call(this)||this;return o._bufferSize=r,o._windowTime=n,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,r),o._windowTime=Math.max(1,n),o}return cn(t,e),t.prototype.next=function(r){var n=this,i=n.isStopped,o=n._buffer,s=n._infiniteTimeWindow,a=n._timestampProvider,l=n._windowTime;i||(o.push(r),!s&&o.push(a.now()+l)),this._trimBuffer(),e.prototype.next.call(this,r)},t.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),i=this._infiniteTimeWindow,o=this._buffer.slice(),s=0;s<o.length&&!r.closed;s+=i?1:2)r.next(o[s]);return this._checkFinalizedStatuses(r),n},t.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,i=r._timestampProvider,o=r._buffer,s=r._infiniteTimeWindow,a=(s?1:2)*n;if(n<1/0&&a<o.length&&o.splice(0,o.length-a),!s){for(var l=i.now(),u=0,d=1;d<o.length&&o[d]<=l;d+=2)u=d;u&&o.splice(0,u+1)}},t}(Fn),u$=function(e){function t(r,n){return e.call(this)||this}return cn(t,e),t.prototype.schedule=function(r,n){return this},t}(cp),WE=function(e){function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return cn(t,e),t.prototype.schedule=function(r,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),function(o,s){for(var a=[],l=2;l<arguments.length;l++)a[l-2]=arguments[l];return setInterval.apply(void 0,Bo([o,s],ao(a)))}(r.flush.bind(r,this),i)},t.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&function(o){clearInterval(o)}(n)},t.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,n){var i,o=!1;try{this.work(r)}catch(s){o=!0,i=s||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},t.prototype.unsubscribe=function(){if(!this.closed){var r=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Uf(i,this),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(u$),d$=1,jS={};function vP(e){return e in jS&&(delete jS[e],!0)}var c$=function(e){var t=d$++;return jS[t]=!0,mv||(mv=Promise.resolve()),mv.then(function(){return vP(t)&&e()}),t},p$=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c$.apply(void 0,Bo([],ao(e)))},h$=function(e){return function(t){vP(t)}(e)},f$=function(e){function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return cn(t,e),t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=p$(r.flush.bind(r,void 0))))},t.prototype.recycleAsyncId=function(r,n,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,r,n,i);var s=r.actions;n!=null&&((o=s[s.length-1])===null||o===void 0?void 0:o.id)!==n&&(h$(n),r._scheduled===n&&(r._scheduled=void 0))},t}(WE),IA=function(){function e(t,r){r===void 0&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(t,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(n,r)},e.now=zE.now,e}(),GE=function(e){function t(r,n){n===void 0&&(n=IA.now);var i=e.call(this,r,n)||this;return i.actions=[],i._active=!1,i}return cn(t,e),t.prototype.flush=function(r){var n=this.actions;if(this._active)n.push(r);else{var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}}},t}(IA),Hs=new(function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return cn(t,e),t.prototype.flush=function(r){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i,o=this.actions;r=r||o.shift();do if(i=r.execute(r.state,r.delay))break;while((r=o[0])&&r.id===n&&o.shift());if(this._active=!1,i){for(;(r=o[0])&&r.id===n&&o.shift();)r.unsubscribe();throw i}},t}(GE))(f$),Ko=new GE(WE),m$=Ko,g$=function(e){function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return cn(t,e),t.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},t.prototype.execute=function(r,n){return n>0||this.closed?e.prototype.execute.call(this,r,n):this._execute(r,n)},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.flush(this),0)},t}(WE),AA=new(function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return cn(t,e),t}(GE))(g$),re=new Ft(function(e){return e.complete()});function yP(e){return e&&Xe(e.schedule)}function KE(e){return e[e.length-1]}function SP(e){return Xe(KE(e))?e.pop():void 0}function Eg(e){return yP(KE(e))?e.pop():void 0}var qE=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function bP(e){return Xe(e==null?void 0:e.then)}function EP(e){return Xe(e[HE])}function wP(e){return Symbol.asyncIterator&&Xe(e==null?void 0:e[Symbol.asyncIterator])}function IP(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var AP=typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator";function CP(e){return Xe(e==null?void 0:e[AP])}function _P(e){return function(t,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,r||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){o[p]&&(i[p]=function(h){return new Promise(function(m,f){s.push([p,h,m,f])>1||l(p,h)})})}function l(p,h){try{(function(m){m.value instanceof Kl?Promise.resolve(m.value.v).then(u,d):c(s[0][2],m)})(o[p](h))}catch(m){c(s[0][3],m)}}function u(p){l("next",p)}function d(p){l("throw",p)}function c(p,h){p(h),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function(){var t,r,n;return pP(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Kl(t.read())];case 3:return r=i.sent(),n=r.value,r.done?[4,Kl(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Kl(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function RP(e){return Xe(e==null?void 0:e.getReader)}function Cr(e){if(e instanceof Ft)return e;if(e!=null){if(EP(e))return i=e,new Ft(function(o){var s=i[HE]();if(Xe(s.subscribe))return s.subscribe(o);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(qE(e))return n=e,new Ft(function(o){for(var s=0;s<n.length&&!o.closed;s++)o.next(n[s]);o.complete()});if(bP(e))return r=e,new Ft(function(o){r.then(function(s){o.closed||(o.next(s),o.complete())},function(s){return o.error(s)}).then(null,mP)});if(wP(e))return CA(e);if(CP(e))return t=e,new Ft(function(o){var s,a;try{for(var l=Dc(t),u=l.next();!u.done;u=l.next()){var d=u.value;if(o.next(d),o.closed)return}}catch(c){s={error:c}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}o.complete()});if(RP(e))return CA(_P(e))}var t,r,n,i;throw IP(e)}function CA(e){return new Ft(function(t){(function(r,n){var i,o,s,a;return function(l,u,d,c){return new(d||(d=Promise))(function(p,h){function m(g){try{v(c.next(g))}catch(y){h(y)}}function f(g){try{v(c.throw(g))}catch(y){h(y)}}function v(g){var y;g.done?p(g.value):(y=g.value,y instanceof d?y:new d(function(S){S(y)})).then(m,f)}v((c=c.apply(l,[])).next())})}(this,0,void 0,function(){var l,u;return pP(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),i=t$(r),d.label=1;case 1:return[4,i.next()];case 2:if((o=d.sent()).done)return[3,4];if(l=o.value,n.next(l),n.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=d.sent(),s={error:u},[3,11];case 6:return d.trys.push([6,,9,10]),o&&!o.done&&(a=i.return)?[4,a.call(i)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})})(e,t).catch(function(r){return t.error(r)})})}function js(e,t,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}function _r(e,t){return t===void 0&&(t=0),Fr(function(r,n){r.subscribe(tr(n,function(i){return js(n,e,function(){return n.next(i)},t)},function(){return js(n,e,function(){return n.complete()},t)},function(i){return js(n,e,function(){return n.error(i)},t)}))})}function $S(e,t){return t===void 0&&(t=0),Fr(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function _A(e,t){if(!e)throw new Error("Iterable cannot be null");return new Ft(function(r){js(r,t,function(){var n=e[Symbol.asyncIterator]();js(r,t,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}function X(e,t){return t?function(r,n){if(r!=null){if(EP(r))return function(i,o){return Cr(i).pipe($S(o),_r(o))}(r,n);if(qE(r))return function(i,o){return new Ft(function(s){var a=0;return o.schedule(function(){a===i.length?s.complete():(s.next(i[a++]),s.closed||this.schedule())})})}(r,n);if(bP(r))return function(i,o){return Cr(i).pipe($S(o),_r(o))}(r,n);if(wP(r))return _A(r,n);if(CP(r))return function(i,o){return new Ft(function(s){var a;return js(s,o,function(){a=i[AP](),js(s,o,function(){var l,u,d;try{u=(l=a.next()).value,d=l.done}catch(c){return void s.error(c)}d?s.complete():s.next(u)},0,!0)}),function(){return Xe(a==null?void 0:a.return)&&a.return()}})}(r,n);if(RP(r))return function(i,o){return _A(_P(i),o)}(r,n)}throw IP(r)}(e,t):Cr(e)}function qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return X(e,Eg(e))}function Oa(e,t){var r=Xe(e)?e:function(){return e};return new Ft(function(n){return n.error(r())})}var v$=dp(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function dr(e,t){return new Promise(function(r,n){var i=new jf({next:function(o){r(o),i.unsubscribe()},error:n,complete:function(){n(new v$)}});e.subscribe(i)})}function TP(e){return e instanceof Date&&!isNaN(e)}var y$=dp(function(e){return function(t){t===void 0&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function OP(e,t){var r=TP(e)?{first:e}:typeof e=="number"?{each:e}:e,n=r.first,i=r.each,o=r.with,s=o===void 0?S$:o,a=r.scheduler,l=a===void 0?Ko:a,u=r.meta,d=u===void 0?null:u;if(n==null&&i==null)throw new TypeError("No timeout provided.");return Fr(function(c,p){var h,m,f=null,v=0,g=function(y){m=js(p,l,function(){try{h.unsubscribe(),Cr(s({meta:d,lastValue:f,seen:v})).subscribe(p)}catch(S){p.error(S)}},y)};h=c.subscribe(tr(p,function(y){m==null||m.unsubscribe(),v++,p.next(f=y),i>0&&g(i)},void 0,void 0,function(){m!=null&&m.closed||m==null||m.unsubscribe(),f=null})),!v&&g(n!=null?typeof n=="number"?n:+n-l.now():i)})}function S$(e){throw new y$(e)}function ne(e,t){return Fr(function(r,n){var i=0;r.subscribe(tr(n,function(o){n.next(e.call(t,o,i++))}))})}var b$=Array.isArray;function QE(e){return ne(function(t){return function(r,n){return b$(n)?r.apply(void 0,Bo([],ao(n))):r(n)}(e,t)})}var E$=Array.isArray,w$=Object.getPrototypeOf,I$=Object.prototype,A$=Object.keys;function G(e,t,r){return r===void 0&&(r=1/0),Xe(t)?G(function(n,i){return ne(function(o,s){return t(n,o,i,s)})(Cr(e(n,i)))},r):(typeof t=="number"&&(r=t),Fr(function(n,i){return function(o,s,a,l){var u=[],d=0,c=0,p=!1,h=function(){!p||u.length||d||s.complete()},m=function(f){d++;var v=!1;Cr(a(f,c++)).subscribe(tr(s,function(g){s.next(g)},function(){v=!0},void 0,function(){if(v)try{for(d--;u.length&&d<l;)g=u.shift(),m(g);h()}catch(y){s.error(y)}var g}))};return o.subscribe(tr(s,function(f){return d<l?m(f):u.push(f)},function(){p=!0,h()})),function(){}}(n,i,e,r)}))}function PP(e){return e===void 0&&(e=1/0),G(bg,e)}function Nc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return PP(1)(X(e,Eg(e)))}function pp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=SP(e),n=function(a){if(a.length===1){var l=a[0];if(E$(l))return{args:l,keys:null};if((d=l)&&typeof d=="object"&&w$(d)===I$){var u=A$(l);return{args:u.map(function(c){return l[c]}),keys:u}}}var d;return{args:a,keys:null}}(e),i=n.args,o=n.keys,s=new Ft(function(a){var l=i.length;if(l)for(var u=new Array(l),d=l,c=l,p=function(m){var f=!1;Cr(i[m]).subscribe(tr(a,function(v){f||(f=!0,c--),u[m]=v},function(){return d--},void 0,function(){d&&f||(c||a.next(o?function(v,g){return v.reduce(function(y,S,b){return y[S]=g[b],y},{})}(o,u):u),a.complete())}))},h=0;h<l;h++)p(h);else a.complete()});return r?s.pipe(QE(r)):s}var C$=["addListener","removeListener"],_$=["addEventListener","removeEventListener"],R$=["on","off"];function Ot(e,t,r,n){if(Xe(r)&&(n=r,r=void 0),n)return Ot(e,t,r).pipe(QE(n));var i=ao(function(a){return Xe(a.addEventListener)&&Xe(a.removeEventListener)}(e)?_$.map(function(a){return function(l){return e[a](t,l,r)}}):function(a){return Xe(a.addListener)&&Xe(a.removeListener)}(e)?C$.map(RA(e,t)):function(a){return Xe(a.on)&&Xe(a.off)}(e)?R$.map(RA(e,t)):[],2),o=i[0],s=i[1];if(!o&&qE(e))return G(function(a){return Ot(a,t,r)})(Cr(e));if(!o)throw new TypeError("Invalid event target");return new Ft(function(a){var l=function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];return a.next(1<u.length?u:u[0])};return o(l),function(){return s(l)}})}function RA(e,t){return function(r){return function(n){return e[r](t,n)}}}function As(e,t,r){return r?As(e,t).pipe(QE(r)):new Ft(function(n){var i=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return n.next(s.length===1?s[0]:s)},o=e(i);return Xe(t)?function(){return t(i,o)}:void 0})}function Nt(e,t,r){e===void 0&&(e=0),r===void 0&&(r=m$);var n=-1;return t!=null&&(yP(t)?r=t:n=t),new Ft(function(i){var o=TP(e)?+e-r.now():e;o<0&&(o=0);var s=0;return r.schedule(function(){i.closed||(i.next(s++),0<=n?this.schedule(void 0,n):i.complete())},o)})}function Lc(e,t){return e===void 0&&(e=0),t===void 0&&(t=Ko),e<0&&(e=0),Nt(e,e,t)}function Wt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Eg(e),n=function(o){return typeof KE(o)=="number"?o.pop():1/0}(e),i=e;return i.length?i.length===1?Cr(i[0]):PP(n)(X(i,r)):re}var T$=Array.isArray;function O$(e,t){return function(r,n){return!e.call(t,r,n)}}function z(e,t){return Fr(function(r,n){var i=0;r.subscribe(tr(n,function(o){return e.call(t,o,i++)&&n.next(o)}))})}function jr(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(t=(e=t).length===1&&T$(e[0])?e[0]:e).length===1?Cr(t[0]):new Ft(function(n){return function(i){for(var o=[],s=function(l){o.push(Cr(n[l]).subscribe(tr(i,function(u){if(o){for(var d=0;d<o.length;d++)d!==l&&o[d].unsubscribe();o=null}i.next(u)})))},a=0;o&&!i.closed&&a<n.length;a++)s(a)}}(t))}function ui(e){return Fr(function(t,r){var n,i=null,o=!1;i=t.subscribe(tr(r,void 0,void 0,function(s){n=Cr(e(s,ui(e)(t))),i?(i.unsubscribe(),i=null,n.subscribe(r)):o=!0})),o&&(i.unsubscribe(),i=null,n.subscribe(r))})}function xe(e){return e<=0?function(){return re}:Fr(function(t,r){var n=0;t.subscribe(tr(r,function(i){++n<=e&&(r.next(i),e<=n&&r.complete())}))})}function kP(){return Fr(function(e,t){e.subscribe(tr(t,Mc))})}function _n(e){return ne(function(){return e})}function Mu(e,t){t===void 0&&(t=Ko);var r,n=Nt(e,t);return r=function(){return n},G(function(i,o){return Cr(r()).pipe(xe(1),_n(i))})}function _e(e,t,r){return r===void 0&&(r=1/0),Xe(t)?G(function(){return e},t,r):G(function(){return e},r)}function P$(e,t){return Fr(function(r,n,i){return function(o,s){var a=i,l=n,u=0;o.subscribe(tr(s,function(d){var c=u++;l=a?r(l,d,c):(a=!0,d),s.next(l)},void 0))}}(e,t,arguments.length>=2))}function DP(e){return Fr(function(t,r){var n=!1,i=0;t.subscribe(tr(r,function(o){return(n||(n=!e(o,i++)))&&r.next(o)}))})}function Bn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Eg(e);return Fr(function(n,i){(r?Nc(e,n,r):Nc(e,n)).subscribe(i)})}function Be(e,t){return Fr(function(r,n){var i=null,o=0,s=!1,a=function(){return s&&!i&&n.complete()};r.subscribe(tr(n,function(l){i==null||i.unsubscribe();var u=0,d=o++;Cr(e(l,d)).subscribe(i=tr(n,function(c){return n.next(t?t(l,c,d,u++):c)},function(){i=null,a()}))},function(){s=!0,a()}))})}function Zr(e){return Fr(function(t,r){Cr(e).subscribe(tr(r,function(){return r.complete()},Mc)),!r.closed&&t.subscribe(r)})}function Pa(e,t){return t===void 0&&(t=!1),Fr(function(r,n){var i=0;r.subscribe(tr(n,function(o){var s=e(o,i++);(s||t)&&n.next(o),!s&&n.complete()}))})}function de(e,t,r){var n=Xe(e)||t||r?{next:e,error:t,complete:r}:e;return n?Fr(function(i,o){var s;(s=n.subscribe)===null||s===void 0||s.call(n);var a=!0;i.subscribe(tr(o,function(l){var u;(u=n.next)===null||u===void 0||u.call(n,l),o.next(l)},function(){var l;a=!1,(l=n.complete)===null||l===void 0||l.call(n),o.complete()},function(l){var u;a=!1,(u=n.error)===null||u===void 0||u.call(n,l),o.error(l)},function(){var l,u;a&&((l=n.unsubscribe)===null||l===void 0||l.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):bg}function fe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=SP(e);return Fr(function(n,i){for(var o=e.length,s=new Array(o),a=e.map(function(){return!1}),l=!1,u=function(c){Cr(e[c]).subscribe(tr(i,function(p){s[c]=p,l||a[c]||(a[c]=!0,(l=a.every(bg))&&(a=null))},Mc))},d=0;d<o;d++)u(d);n.subscribe(tr(i,function(c){if(l){var p=Bo([c],ao(s));i.next(r?r.apply(void 0,Bo([],ao(p))):p)}}))})}function Yd(e){return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function k$(e,t,r){return(t=function(n){var i=function(o,s){if(Yd(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var l=a.call(o,s);if(Yd(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n,"string");return Yd(i)=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function OA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TA(Object(r),!0).forEach(function(n){k$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var PA=typeof Symbol=="function"&&Symbol.observable||"@@observable",gv=function(){return Math.random().toString(36).substring(7).split("").join(".")},$f={INIT:"@@redux/INIT"+gv(),REPLACE:"@@redux/REPLACE"+gv(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+gv()}};function MP(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(zr(0));if(typeof t=="function"&&r===void 0&&(r=t,t=void 0),r!==void 0){if(typeof r!="function")throw new Error(zr(1));return r(MP)(e,t)}if(typeof e!="function")throw new Error(zr(2));var i=e,o=t,s=[],a=s,l=!1;function u(){a===s&&(a=s.slice())}function d(){if(l)throw new Error(zr(3));return o}function c(h){if(typeof h!="function")throw new Error(zr(4));if(l)throw new Error(zr(5));var m=!0;return u(),a.push(h),function(){if(m){if(l)throw new Error(zr(6));m=!1,u();var f=a.indexOf(h);a.splice(f,1),s=null}}}function p(h){if(!function(v){if(typeof v!="object"||v===null)return!1;for(var g=v;Object.getPrototypeOf(g)!==null;)g=Object.getPrototypeOf(g);return Object.getPrototypeOf(v)===g}(h))throw new Error(zr(7));if(h.type===void 0)throw new Error(zr(8));if(l)throw new Error(zr(9));try{l=!0,o=i(o,h)}finally{l=!1}for(var m=s=a,f=0;f<m.length;f++)(0,m[f])();return h}return p({type:$f.INIT}),(n={dispatch:p,subscribe:c,getState:d,replaceReducer:function(h){if(typeof h!="function")throw new Error(zr(10));i=h,p({type:$f.REPLACE})}})[PA]=function(){var h,m=c;return(h={subscribe:function(f){if(typeof f!="object"||f===null)throw new Error(zr(11));function v(){f.next&&f.next(d())}return v(),{unsubscribe:m(v)}}})[PA]=function(){return this},h},n}function NP(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}var D$=function(e){function t(r,n){var i=e.call(this,function(o){var s=i.__notifier.subscribe(o);return s&&!s.closed&&o.next(i.value),s})||this;return i.__notifier=new Fn,i.value=n,r.subscribe(function(o){o!==i.value&&(i.value=o,i.__notifier.next(o))}),i}return cn(t,e),t}(Ft),kA=function(e,t){return e===t||typeof t=="function"&&e===t.toString()};function he(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;return z(r===1?function(n){return kA(n.type,e[0])}:function(n){for(var i=0;i<r;i++)if(kA(n.type,e[i]))return!0;return!1})}function jp(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function $p(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}jp(function e(t,r,n){e.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:r,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})},$p),jp(function e(t,r){e.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})},$p),jp(function e(t,r){e.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:r,enumerable:!0})},$p),jp(function e(t,r,n){e.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:r,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})},$p);const qs=!1;var DA,MA,ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function JE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function LP(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var M$=(MA||(MA=1,DA=function(e,t,r,n,i,o,s,a){if(!e){var l;if(t===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,i,o,s,a],d=0;(l=new Error(t.replace(/%s/g,function(){return u[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}),DA),cu=JE(M$),Ha=function(e){return typeof e=="function"},NA=function(e){return e.toString()},vv=function(e){return typeof e=="string"},kh="||",za=function(e){return e},LA=function(e){return e===null};function ut(e,t,r){t===void 0&&(t=za),cu(Ha(t)||LA(t),"Expected payloadCreator to be a function, undefined or null");var n=LA(t)||t===za?za:function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),d=1;d<l;d++)u[d-1]=arguments[d];return a instanceof Error?a:t.apply(void 0,[a].concat(u))},i=Ha(r),o=e.toString(),s=function(){var a=n.apply(void 0,arguments),l={type:e};return a instanceof Error&&(l.error=!0),a!==void 0&&(l.payload=a),i&&(l.meta=r.apply(void 0,arguments)),l};return s.toString=function(){return o},s}var yv,VA,xA,UA,jA,$A,Nu=function(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},FA=function(e){return Array.isArray(e)},VP=function(e){return e==null},BA=JE(function(){if($A)return jA;$A=1;var e=function(){if(UA)return xA;UA=1;var t=function(){if(VA)return yv;VA=1,yv=function(a){return r.test(a)?a.toLowerCase():n.test(a)?(function(l){return l.replace(o,function(u,d){return d?" "+d:""})}(a)||a).toLowerCase():i.test(a)?function(l){return l.replace(s,function(u,d,c){return d+" "+c.toLowerCase().split("").join(" ")})}(a).toLowerCase():a.toLowerCase()};var r=/\s/,n=/(_|-|\.|:)/,i=/([a-z][A-Z]|[A-Z][a-z])/,o=/[\W_]+(.|$)/g,s=/(.)([A-Z]+)/g;return yv}();return xA=function(r){return t(r).replace(/[\W_]+(.|$)/g,function(n,i){return i?" "+i:""}).trim()}}();return jA=function(t){return e(t).replace(/\s(\w)/g,function(r,n){return n.toUpperCase()})}}()),xP=function(e){return e.indexOf("/")===-1?BA(e):e.split("/").map(BA).join("/")},FS=function(e,t){return e.reduce(function(r,n){return t(r,n)},{})},wg=function(e){return typeof Map<"u"&&e instanceof Map};function ZE(e){if(wg(e))return Array.from(e.keys());if(typeof Reflect<"u"&&typeof Reflect.ownKeys=="function")return Reflect.ownKeys(e);var t=Object.getOwnPropertyNames(e);return typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(e))),t}function UP(e,t){return wg(t)?t.get(e):t[e]}var jP=function(e){return function t(r,n,i,o){var s=n===void 0?{}:n,a=s.namespace,l=a===void 0?"/":a,u=s.prefix;return i===void 0&&(i={}),o===void 0&&(o=""),ZE(r).forEach(function(d){var c=function(h){return o||!u||u&&new RegExp("^"+u+l).test(h)?h:""+u+l+h}(function(h){var m;if(!o)return h;var f=h.toString().split(kh),v=o.split(kh);return(m=[]).concat.apply(m,v.map(function(g){return f.map(function(y){return""+g+l+y})})).join(kh)}(d)),p=UP(d,r);e(p)?t(p,{namespace:l,prefix:u},i,c):i[c]=p}),i}},N$=jP(Nu);function Ff(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){L$(e,i,r[i])})}return e}function L$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i,o=Nu((i=r)[i.length-1])?r.pop():{};return cu(r.every(vv)&&(vv(e)||Nu(e)),"Expected optional object followed by string action types"),vv(e)?HA([e].concat(r),o):Ff({},function(s,a){return function(l,u){var d=u===void 0?{}:u,c=d.namespace,p=c===void 0?"/":c,h=d.prefix;function m(v,g,y){var S=xP(y.shift());y.length===0?g[S]=l[v]:(g[S]||(g[S]={}),m(v,g[S],y))}var f={};return Object.getOwnPropertyNames(l).forEach(function(v){var g=h?v.replace(""+h+p,""):v;return m(v,f,g.split(p))}),f}($P(N$(s,a)),a)}(e,o),HA(r,o))}function $P(e,t){var r=t===void 0?{}:t,n=r.prefix,i=r.namespace,o=i===void 0?"/":i;return FS(Object.keys(e),function(s,a){var l,u=e[a];cu(function(p){if(Ha(p)||VP(p))return!0;if(FA(p)){var h=p[0],m=h===void 0?za:h,f=p[1];return Ha(m)&&Ha(f)}return!1}(u),"Expected function, undefined, null, or array with payload and meta functions for "+a);var d=n?""+n+o+a:a,c=FA(u)?ut.apply(void 0,[d].concat(u)):ut(d,u);return Ff({},s,((l={})[a]=c,l))})}function HA(e,t){var r=$P(FS(e,function(n,i){var o;return Ff({},n,((o={})[i]=za,o))}),t);return FS(Object.keys(r),function(n,i){var o;return Ff({},n,((o={})[xP(i)]=r[i],o))})}var V$=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=typeof t[t.length-1]!="function"&&t.pop(),i=t;if(n===void 0)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(o,s){for(var a=arguments.length,l=Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];var d=o===void 0,c=s===void 0;return d&&c&&n?n:i.reduce(function(p,h){return h.apply(void 0,[p,s].concat(l))},d&&!c&&n?n:o)}},x$=jP(function(e){return(Nu(e)||wg(e))&&!function(t){var r=ZE(t),n=r.every(function(i){return i==="next"||i==="throw"});return r.length&&r.length<=2&&n}(e)});function pn(e,t,r){r===void 0&&(r={}),cu(Nu(e)||wg(e),"Expected handlers to be a plain object.");var n=x$(e,r),i=ZE(n).map(function(s){return function(a,l,u){l===void 0&&(l=za);var d=NA(a).split(kh);cu(u!==void 0,"defaultState for reducer handling "+d.join(", ")+" should be defined"),cu(Ha(l)||Nu(l),"Expected reducer to be a function or object with next and throw reducers");var c=Ha(l)?[l,l]:[l.next,l.throw].map(function(m){return VP(m)?za:m}),p=c[0],h=c[1];return function(m,f){m===void 0&&(m=u);var v=f.type;return v&&d.indexOf(NA(v))!==-1?(f.error===!0?h:p)(m,f):m}}(s,UP(s,n),t)}),o=V$.apply(void 0,i.concat([t]));return function(s,a){return s===void 0&&(s=t),o(s,a)}}const Dh=ut("CONNECT_ZOOM_SOCKET"),Sv=ut("CONNECT_XMPP_SOCKET"),Li=ut("CLOSE_ZOOM_SOCKET"),FP=ut("CLOSE_XMPP_SOCKET"),hl=ut("RECEIVE_MESSAGE_FROM_ZOOM_SOCKET"),U$=ut("RECEIVE_SHARING_PAYLOAD_FROM_ZOOM_SOCKET"),BP=ut("RECEIVE_MESSAGE_FROM_XMPP_SOCKET"),BS=ut("CONNECT_MAIN_SESSION_SOCKET"),HP=ut("CLOSE_MAIN_SESSION_SOCKET"),Lo=ut("RECEIVE_MESSAGE_FROM_MAIN_SESSION_SOCKET"),{setZoomSocketStatus:ql,setRwgServersList:zP,setRwgRetryCount:WP,setXmppSocketStatus:Mh,setMainSessionSocketStatus:Nh,resetSocket:GP}=rr("SET_ZOOM_SOCKET_STATUS","SET_RWG_SERVERS_LIST","SET_RWG_RETRY_COUNT","SET_XMPP_SOCKET_STATUS","SET_MAIN_SESSION_SOCKET_STATUS","RESET_SOCKET"),YE=ut("CONNECT_TO_MEDIA_STREAM"),KP=ut("RECEIVE_PAYLOAD_FROM_MEDIA_SDK"),{setAudioEncodeStatus:HS,setAudioDecodeStatus:zS,setVideoEncodeStatus:WS,setVideoDecodeStatus:GS,setSharingEncodeStatus:KS,setSharingDecodeStatus:Lh,setMediaConstraints:XE,setMediaEncryptKey:qP,setIsEnableDecoderInWorklet:QP,setPatchedMediaSdkStatus:Vh,setMediaAssetsPath:JP,setIsEnableVideoAudioQos:ZP,setIsAudioBridgeReceiveReady:YP,setIsAudioBridgeSendReady:XP,setIsMediaAgentInitialized:ew,setAdaptedAbOptionForMediaSdk:ek,resetMedia:tk}=rr("SET_AUDIO_ENCODE_STATUS","SET_AUDIO_DECODE_STATUS","SET_VIDEO_ENCODE_STATUS","SET_VIDEO_DECODE_STATUS","SET_SHARING_ENCODE_STATUS","SET_SHARING_DECODE_STATUS","SET_MEDIA_CONSTRAINTS","SET_MEDIA_ENCRYPT_KEY","SET_IS_ENABLE_DECODER_IN_WORKLET","SET_PATCHED_MEDIA_SDK_STATUS","SET_MEDIA_ASSETS_PATH","SET_IS_ENABLE_VIDEO_AUDIO_QOS","SET_IS_AUDIO_BRIDGE_RECEIVE_READY","SET_IS_AUDIO_BRIDGE_SEND_READY","SET_IS_MEDIA_AGENT_INITIALIZED","SET_ADAPTED_AB_OPTION_FOR_MEDIA_SDK","RESET_MEDIA");function j$(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e(qe(...n||[]),t,null)}function rk(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return Wt(...t.map(a=>{const l=a(...o);if(!l)throw new TypeError(`combineEpics: one of the provided Epics "${a.name||"<anonymous>"}" does not return a stream. Double check you're not missing a return statement!`);return l.pipe(ui((u,d)=>(setTimeout(()=>{throw u},0),d)))}))};try{Object.defineProperty(n,"name",{value:`combineEpics(${t.map(i=>i.name||"<anonymous>").join(", ")})`})}catch{}return n}function hn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return rk(...t.flatMap(n=>Object.values(n)))}function se(e,t){return e.pipe(he(`${hl}`),z(r=>r.payload.evt===t))}function ps(e,t){return e.pipe(he(`${Lo}`),z(r=>r.payload.evt===t))}function pu(e,t){return e.pipe(he(`${BP}`),z(r=>r.payload.evt===t))}function Mi(e,t){return e.pipe(he(`${hl}`,`${Lo}`),z(r=>r.payload.evt===t))}function Re(e,t){return e.pipe(he(`${KP}`),z(r=>Array.isArray(t)?t.indexOf(r.payload.type)>-1:r.payload.type===t))}function tw(e,t){return e.pipe(he(`${YE}`),z(()=>{const{media:{assetsPath:r,mediaConstraints:n}}=t.value;return r!==void 0&&n!==void 0}),Be(()=>{const{media:{isMediaAgentInitialized:r}}=t.value;return r?X([0]):e.pipe(he(`${ew}`),z(n=>!!n.payload),xe(1))}))}function Ig(e,t,r){const n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=()=>{n.readyState!=="loaded"&&n.readyState!=="complete"||(n.onreadystatechange=null,t())}:(n.onload=()=>{t()},n.onerror=()=>{r()}),n.src=e,window.crossOriginIsolated&&(n.crossOrigin="anonymous"),typeof document.body.append=="function"?document.getElementsByTagName("head")[0].append(n):document.getElementsByTagName("head")[0].appendChild(n)}function nk(e,t){let r=e;/^https?:\/\//.test(r)||(r=`https://${e}`);try{const n=new URL(r);if(!t)return n.href;if(t.hostname)return n.hostname;if(t.path)return n.pathname}catch{return""}return""}function Vc(e){if(e){var t;const r=document.getElementById(e);r==null||(t=r.parentNode)===null||t===void 0||t.removeChild(r)}}let Ag="zoom.us";const Cg="3.11.0",xh=`https://dmogdx0jrul3u.cloudfront.net/${Cg}/lib/av`,Sa=`https://source.zoom.us/${Cg}/lib/av`,Uh=`https://jssdk.zoomus.cn/${Cg}/lib/av`,ik=()=>Ag,zA=typeof TextDecoder=="function"?new TextDecoder:void 0,WA=typeof TextEncoder=="function"?new TextEncoder:void 0,Nd=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Fp=(()=>{let e={};return Nd.forEach((t,r)=>e[t]=r),e})(),$$=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Nr=String.fromCharCode.bind(String),F$=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),ok=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),sk=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),ak=typeof btoa=="function"?e=>btoa(e):e=>{let t,r,n,i,o="";const s=e.length%3;for(let a=0;a<e.length;){if((r=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|i,o+=Nd[t>>18&63]+Nd[t>>12&63]+Nd[t>>6&63]+Nd[63&t]}return s?o.slice(0,s-3)+"===".substring(s):o},qS=e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(Nr.apply(null,e.subarray(r,r+4096)));return ak(t.join(""))},B$=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?Nr(192|t>>>6)+Nr(128|63&t):Nr(224|t>>>12&15)+Nr(128|t>>>6&63)+Nr(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return Nr(240|t>>>18&7)+Nr(128|t>>>12&63)+Nr(128|t>>>6&63)+Nr(128|63&t)},H$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,GA=WA?e=>qS(WA.encode(e)):e=>ak((t=>t.replace(H$,B$))(e)),z$=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,W$=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return Nr(55296+(t>>>10))+Nr(56320+(1023&t));case 3:return Nr((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Nr((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},lk=typeof atob=="function"?e=>atob(sk(e)):e=>{if(e=e.replace(/\s+/g,""),!$$.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,i="";for(let o=0;o<e.length;)t=Fp[e.charAt(o++)]<<18|Fp[e.charAt(o++)]<<12|(r=Fp[e.charAt(o++)])<<6|(n=Fp[e.charAt(o++)]),i+=r===64?Nr(t>>16&255):n===64?Nr(t>>16&255,t>>8&255):Nr(t>>16&255,t>>8&255,255&t);return i},G$=e=>F$(lk(e).split("").map(t=>t.charCodeAt(0))),K$=zA?e=>zA.decode(G$(e)):e=>(t=>t.replace(z$,W$))(lk(e)),uk=(e,t=!1)=>t?ok(GA(e)):GA(e),q$=e=>K$((t=>sk(t.replace(/[-_]/g,r=>r=="-"?"+":"/")))(e)),Q$=(e,t=!1)=>t?ok(qS(e)):qS(e);function bt(e){return uk(e,!0)}function Vi(e){return q$(e)}function dk(e){return uk(e,!1)}const J$={"-":"+",_:"/",".":"="};function Hn(e){const t=e.replace(/[-_.]/g,r=>J$[r]);return Uint8Array.from(window.atob(t),r=>r.charCodeAt(0))}const ck=e=>{const t=e.charCodeAt(0);return t<=parseInt("0x7F",16)?1:t<=parseInt("0x7FF",16)?2:t<=parseInt("0xFFFF",16)?3:t<=parseInt("0x1FFFFF",16)?4:t<=parseInt("0x3FFFFFF",16)?5:6},xc=(e,t)=>{const r=e.split(".").map(o=>Number(o)).slice(0,3),n=t.split(".").map(o=>Number(o)).slice(0,3);let i=0;for(let o=0;o<3;o++){const s=o<r.length?r[o]:0,a=o<n.length?n[o]:0;if(s<a){i=-1;break}if(s>a){i=1;break}}return i},Bf=e=>{var t;let r=new Date().getTime(),n=1e3*((t=performance)===null||t===void 0?void 0:t.now())||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,o=>{let s=16*Math.random();return r>0?(s=(r+s)%16|0,r=Math.floor(r/16)):(s=(n+s)%16|0,n=Math.floor(n/16)),(o==="x"?s:3&s|8).toString(16)})+""};function hp(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),n=Object.keys(t),i=r.length;if(n.length!==i)return!1;for(let o=0;o<i;o++){const s=r[o];if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1}return!0}const sn=(e,t)=>e>>10==t>>10,_g=(e,t)=>new Promise(r=>{setTimeout(()=>{r(e())},t)}),Do=e=>{const t=`${Math.floor(1e4*Math.random())}`;return e.indexOf("@")>-1?e.replace("@",t):`${e}${t}`},Oi=e=>{try{const t=new URL(e);return!(t.protocol==="data:"&&t.origin==="null")&&t.origin!==location.origin}catch{return!0}},il=e=>{const t=e.split(".")[1];if(typeof t=="string"){let r=t.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{const n=decodeURIComponent(window.atob(r).replace(/(.)/g,function(i,o){let s=o.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}));return JSON.parse(n)}catch{console.error("Invalid token specified: invalid base64")}}};function Rg(e){return e&&e.endsWith("/")?e.slice(0,e.length-1):e}function pk(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}function KA(e){return`${e.tagName}${e.id?`#${e.id}`:""}${e.className?`${e.className.split(" ").map(t=>`.${t}`).join("")}`:""}`}function hk(e){const t=function(r){const n=r&&r.getRootNode();if(n&&n.nodeName!=="#document"&&n.host)return KA(n.host)}(e);return`${t?`${t}>`:""}${KA(e)}`}function Hf(e){return typeof e=="object"&&e!==null?e instanceof HTMLElement?hk(e):ArrayBuffer.isView(e)?pk(e.buffer):Array.isArray(e)?e.map(t=>Hf(t)):Object.keys(e).reduce((t,r)=>({...t,[`${r}`]:Hf(e[r])}),{}):e}const Z$=[xh,Uh,Sa].map(e=>nk(e,{hostname:!0}));function fk(e){return Z$.some(t=>new RegExp(`^https://${t}`).test(e??""))}let wn=function(e){return e[e.Success=0]="Success",e[e.MeetingIsOver=6]="MeetingIsOver",e[e.UserFull=9]="UserFull",e[e.MeetingLocked=12]="MeetingLocked",e[e.WebinarBlockedEmail=3033]="WebinarBlockedEmail",e[e.MeetingNotStarted=3008]="MeetingNotStarted",e[e.MeetingHasClosed=103003]="MeetingHasClosed",e[e.UserHasBeenRemoved=103039]="UserHasBeenRemoved",e[e.MMRIBReject=103043]="MMRIBReject",e[e.MMRConfParticipantExists=103044]="MMRConfParticipantExists",e}({}),ho=function(e){return e[e.Unknown=0]="Unknown",e[e.Normal=1]="Normal",e[e.Userrequest=2]="Userrequest",e[e.SdkConnection=3]="SdkConnection",e[e.Reconnect=5]="Reconnect",e[e.PtRequest=6]="PtRequest",e[e.KickedByHost=7]="KickedByHost",e[e.EndByHost=8]="EndByHost",e[e.EndByHostStartAnotherMeeting=9]="EndByHostStartAnotherMeeting",e[e.FreeMeetingTimeout=10]="FreeMeetingTimeout",e[e.JBHTimeout=11]="JBHTimeout",e[e.EndBySingleStatus=12]="EndBySingleStatus",e[e.WebinarNeedRegister=13]="WebinarNeedRegister",e[e.ArchiveFail=14]="ArchiveFail",e[e.EndByNone=15]="EndByNone",e[e.EndByAdmin=16]="EndByAdmin",e[e.DuplicateSession=17]="DuplicateSession",e[e.MeetingTransfer=18]="MeetingTransfer",e}({}),Y$=function(e){return e[e.WaitingRoomFailover=1]="WaitingRoomFailover",e[e.WebEndAndRejoin=2]="WebEndAndRejoin",e}({}),wi=function(e){return e[e.Success=0]="Success",e[e.CommonError=200]="CommonError",e[e.WrongPasscode=3004]="WrongPasscode",e[e.RoleTypeMissing=3010]="RoleTypeMissing",e[e.InvalidParameter=4003]="InvalidParameter",e}({}),vt=function(e){return e[e.Success=0]="Success",e[e.AnotherMeetingInProgress=3e3]="AnotherMeetingInProgress",e[e.MeetingNotExist=3001]="MeetingNotExist",e[e.NotHost=3003]="NotHost",e[e.WrongPasscode=3004]="WrongPasscode",e[e.MissingEmail=3005]="MissingEmail",e[e.MeetingNotStarted=3008]="MeetingNotStarted",e[e.UserHasBeenRemoved=3009]="UserHasBeenRemoved",e[e.RoleTypeMissing=3010]="RoleTypeMissing",e[e.WebinarEnforceLogin=3034]="WebinarEnforceLogin",e[e.RealNameMissing=3082]="RealNameMissing",e[e.RegisterRequired=3099]="RegisterRequired",e[e.SsoLoginWindow=6024]="SsoLoginWindow",e[e.ZoomLoginWindow=3051]="ZoomLoginWindow",e[e.ZoomSpecificLoginWindow=3052]="ZoomSpecificLoginWindow",e[e.LoginRequired=3100]="LoginRequired",e[e.Reconnecting=4e3]="Reconnecting",e[e.Disconnect=4001]="Disconnect",e[e.InvalidParameter=4003]="InvalidParameter",e[e.DeniedRegisterWithPanelist=3032]="DeniedRegisterWithPanelist",e[e.ServiceOffline=403]="ServiceOffline",e[e.RwcEmpty=3621]="RwcEmpty",e[e.RwcError=3622]="RwcError",e[e.FrequentCall=3633]="FrequentCall",e[e.FrequentJoin=3634]="FrequentJoin",e[e.WasmFail=3635]="WasmFail",e[e.CommonError=200]="CommonError",e[e.Upgrade=1e4]="Upgrade",e}({});vt.Success,vt.RegisterRequired,vt.LoginRequired,vt.SsoLoginWindow,vt.ZoomLoginWindow,vt.ZoomSpecificLoginWindow,vt.MissingEmail,vt.MeetingNotExist,vt.NotHost,vt.WrongPasscode,vt.RoleTypeMissing,vt.AnotherMeetingInProgress,vt.MeetingNotStarted,vt.InvalidParameter,vt.Reconnecting,vt.UserHasBeenRemoved,vt.WebinarEnforceLogin,vt.Disconnect,vt.DeniedRegisterWithPanelist,vt.RwcEmpty,vt.RwcError,vt.FrequentCall,vt.FrequentJoin,vt.WasmFail,vt.Upgrade;const qA={3004:{"apac.errorcodes_pac_mn_wrong":3714},3005:{"apac.errorcodes_web_has_in_progress":3e3},3008:{"apac.errorcodes_not_start":3008},3027:{"apac.errorcodes_host_email_as_attendee":3627},3033:{"apac.errorcodes_denied_email":3620},1005:{"apac.errorcodes_no_response_from_web":3621},131005:{"apac.errorcodes_no_response_from_web":3621},1001:{"apac.errorcodes_host_inactive":3625},131001:{"apac.errorcodes_host_inactive":3625},131013:{"meeting ended":4004},103039:{"apac.errorcodes_be_removed":3009},6:{"meeting ended":4004},9:{"meeting is at capacity":4005},12:{"meeting locked":4006},103043:{"reject for information barriers":4007},103044:{"participant exist":4008}};function Hi(e,t){let r={code:200};if(qA[e]!==void 0){const n=qA[e],i=Object.keys(n)[0];return r={code:n[i],i18nKey:i},{reason:i.startsWith("apac")?"":i,errorCode:r.code}}return{code:200,reason:"connection error"}}const X$="SET_MEETING_INFO",eF="SET_MEETING_JOIN_INFO",tF="SET_WINDOWN_OPEN",rF="SET_APPID_SIGNATURE",nF="SET_ZTK",iF="SET_ZSK",oF="SET_TK_MTKGUID",sF="SET_PING_RWC_TIMESTAMP",aF="SET_IN_MEETING_INFO",lF="SET_MEETING_ATTRIBUTE",uF="RESET_MEETING",dF="SET_IS_HOST",cF="SET_IS_COHOST",pF="SET_MEETING_IS_ON_HOLD",hF="SET_IS_MEETING_RESET",fF="SET_AUDIO_VIDEO_BEFORE_ON_HOLD",mF="SET_CURRENT_USER_AUDIO_BEFORE_RESET",gF="SET_IS_CURRENT_USER_MUTED_BEFORE_RESET",vF="SET_IS_CURRENT_USER_START_VIDEO_BEFORE_RESET",yF="SET_MEETING_STATUS",SF="SET_MEETING_REGION",bF="SET_JOIN_MEETING_TIME_STAMP",EF="SET_ACTIVE_APP_INFO",wF="SET_MEETING_IDLE_START_TIME",IF="SET_SESSION_IDLE_TIMEOUT_MINUTES",AF="SET_IS_AUDIO_BRIDGE_ENABLED",CF="ADD_DISCARDED_RWC_HOST",_F="SET_SHARE_PRONOUN_TYPE",RF="SET_IS_STAY_AWAKE_DURING_THE_SESSION",TF="SET_MEETING_JOIN_SUCCESS_TIMESTAMP",OF="RESET_FAILOVER_RECORD",PF="SET_FAILOVER_REASON",kF="SET_IS_QUICKLY_LEAVE_MEETING_AFTER_REFRESH",DF="SET_MEETING_INFO_TIMESTAMP",MF="SET_IS_ENABLE_ZMK_FROM_RWG",NF="SET_IS_RLB_TP",LF="SET_IS_RLB_TP_READY",VF=["bLock","bHoldUponEntry","viewOnly","listenOnlyPhone","bAllowRaiseHand","bAllowAttendeeRename","bBroadcast","bAllowPlayChimeForEnterOrExit","bIbDisableShare","bIbDisableChat","encryptKey","bNoHostTimeOut","bAllowShowCount","bHasAST","bHasRMC","gatewayKey","encryptKey"],QA={bChime:"bAllowPlayChimeForEnterOrExit",bHasAST:"hasAst",bHasRMC:"hasRmc",topic:e=>({meetingTopic:Vi(e)}),gatewayKey:e=>{const[,t,r]=e.split(".");return t&&r?{gatewayUser:{userId:Number(t),sn:r}}:{}},encryptKey:e=>({gcmSessinKey:Hn(e)})},zf=ut("GET_MEETING_INFO"),Lu=ut("GET_INSTANT_MEETING_INFO");ut("LOGON_ZOOM_DOMAIN"),ut("VERIFY_ZOOM_RECAPTCHA"),ut("LOGON_THIRD_PARTY_DOMAIN");const rw=ut("PING_RWC_SERVER"),Vr=ut("MEETING_FAILOVER"),Vu=ut("LEAVE_MEETING"),QS=ut("LEAVE_WAITING_ROOM"),xu=ut("END_MEETING");ut("REGISTER_WEBINAR");const JA=ut("TRIGGER_IDLE_CHECK"),ZA=ut("END_OF_ZE_WORLD"),{setMeetingInfo:qn,setMeetingJoinInfo:xF,setWindownOpen:UF,setAppidSignature:mk,setZtk:jF,setZsk:$F,setTkMtkguid:FF,setPingRwcTimestamp:gk,setInMeetingInfo:Ho,setMeetingAttribute:Wf,resetMeeting:JS,setIsHost:vk,setIsCohost:yk,setMeetingIsOnHold:Ql,setIsMeetingReset:Sk,setAudioVideoBeforeOnHold:bk,setCurrentUserAudioBeforeReset:ZS,setIsCurrentUserMutedBeforeReset:YS,setMeetingStatus:nw,setMeetingRegion:Ek,setIsCurrentUserStartVideoBeforeReset:wk,setJoinMeetingTimeStamp:Ik,setActiveAppInfo:BF,setMeetingIdleStartTime:Ld,setSessionIdleTimeoutMinutes:Ak,setIsAudioBridgeEnabled:Ck,addDiscardedRwcHost:_k,setSharePronounType:Rk,setIsStayAwakeDuringTheSession:Tk,setMeetingJoinSuccessTimestamp:Ok,resetFailoverRecord:Pk,setFailoverReason:Gf,setIsQuicklyLeaveMeetingAfterRefresh:kk,setMeetingInfoTimestamp:Dk,setIsEnableZmkFromRwg:Mk,setIsRlbTp:jh,setIsRlbTpReady:Nk}=rr({[X$]:e=>e,[eF]:e=>e,[tF]:e=>e,[rF]:e=>e,[nF]:e=>e,[iF]:e=>e,[oF]:e=>e,[sF]:e=>e,[aF]:e=>e,[lF]:e=>{if(VF.some(t=>e&&e[t]!==void 0)){let t=e;return Object.keys(QA).some(r=>e[r]!==void 0)&&(t=Object.keys(e).reduce((r,n)=>{const i=QA[n];return typeof i=="function"?Object.assign(r,i(e[n])):typeof i=="string"?r[i]=e[n]:(r[n],e[n]),r},{})),t}return{}},[dF]:e=>e&&e.bHost,[cF]:e=>e&&e.bCoHost,[uF]:e=>e,[pF]:e=>e,[hF]:e=>e,[fF]:e=>e,[mF]:e=>e,[gF]:e=>e,[yF]:e=>e,[SF]:e=>e,[vF]:e=>e,[bF]:e=>e,[EF]:e=>e,[wF]:e=>e,[IF]:e=>e,[AF]:e=>e,[CF]:e=>e,[_F]:e=>e,[RF]:e=>e,[TF]:e=>e,[OF]:e=>e,[PF]:e=>e,[kF]:e=>e,[DF]:e=>e,[MF]:e=>e,[NF]:e=>e,[LF]:e=>e});let Ir=function(e){return e.Failover="failover",e.OnHold="on hold",e.Promote="promote",e.Depromote="depromote",e.JoinBreakoutRoom="join breakout room",e.MoveToBreakoutRoom="move to breakout room",e.BackToMainSession="back to main session",e}({});const ba="js_media.min.js";let bv=function(e){return e.CDN="CDN",e.Global="Global",e.CN="CN",e}({}),Jl=function(e){return e.Connected="Connected",e.Reconnecting="Reconnecting",e.Closed="Closed",e.Fail="Fail",e}({}),Lt=function(e){return e.Initial="initial",e.Joined="joined",e.Closed="closed",e}({}),Ki=function(e){return e.AudioBridgeEnable="M:1,2;V:1,2",e.AudioDecodeInWorklet="M:6;V:3",e.VideoFullHD="M:8;V:4",e.VideoShareFullHD="M:9;V:5",e.WebGL2Render="M:20;V:8",e.WebGPURender="M:21;V:9",e.ZMKFromRWG="M:19;V:10",e}({}),lr=function(e){return e[e.NormalCase=-1]="NormalCase",e[e.NoHeartbeat=0]="NoHeartbeat",e[e.NoHeartbeatMChannel=1]="NoHeartbeatMChannel",e[e.NetworkChange=2]="NetworkChange",e[e.NotifyUiFailover=3]="NotifyUiFailover",e[e.InvalidParameters=4]="InvalidParameters",e[e.OnError=5]="OnError",e[e.OnErrorMChannel=6]="OnErrorMChannel",e[e.Disconnect=7]="Disconnect",e[e.DisconnectMChannel=8]="DisconnectMChannel",e[e.DisconnectXmpp=9]="DisconnectXmpp",e[e.RefreshPage=10]="RefreshPage",e[e.OnErrorXmppChannel=15]="OnErrorXmppChannel",e}({});const HF=["8-29","9-21","12-44"];let We=function(e){return e.LocalStorage="LocalStorage",e.SessionStorage="SessionStorage",e.Memory="Memory",e}({});const YA=bt("{}");class Pe{constructor(t){this.sessionStorageKey=void 0,this.localStorageKey=void 0,this.sessionCache=void 0,this.localCache=void 0,this.memoryCache=void 0,this.sessionStorageKey=bt(`zoom-storage-${t}`),this.localStorageKey=bt("zoom-local-storage"),this.memoryCache={};try{this.sessionCache=JSON.parse(Vi(sessionStorage.getItem(this.sessionStorageKey)||YA)),this.localCache=JSON.parse(Vi(localStorage.getItem(this.localStorageKey)||YA))}catch(r){console.error(r),this.sessionCache={},this.localCache={}}}static init(t){this.instance=new Pe(t)}static get(t){if(this.instance===void 0)throw new Error("read before initial");return this.instance.getValue(t).value}static set(t,r,n){if(this.instance===void 0)throw new Error("set before initial");return this.instance.setValue(t,r,n)}static remove(t){if(this.instance===void 0)throw new Error("remove before initial");return this.instance.removeValue(t)}static clearSession(){if(this.instance===void 0)throw new Error("clear before initial");return this.instance.memoryCache={},this.instance.sessionCache={},this.instance.localCache={},sessionStorage.removeItem(this.instance.sessionStorageKey)}getValue(t){return this.sessionCache.hasOwnProperty(t)?{value:this.sessionCache[t],type:We.SessionStorage}:this.localCache.hasOwnProperty(t)?{value:this.localCache[t],type:We.LocalStorage}:{value:this.memoryCache[t],type:We.Memory}}setValue(t,r,n){if(!t)throw new Error("key is null");switch(n){case We.SessionStorage:{const i=this.sessionCache[t];let o=r;return typeof r=="function"&&(o=r(i)),i!==o&&(this.sessionCache[t]=o,this.flushValue(We.SessionStorage)),o}case We.LocalStorage:{const i=this.localCache[t];let o=r;return typeof r=="function"&&(o=r(i)),i!==o&&(this.localCache[t]=o,this.flushValue(We.LocalStorage)),o}case We.Memory:{const i=this.memoryCache[t];let o=r;return typeof r=="function"&&(o=r(i)),this.memoryCache[t]=o,o}default:return null}}removeValue(t){const{type:r}=this.getValue(t);switch(r){case We.SessionStorage:delete this.sessionCache[t],this.flushValue(We.SessionStorage);break;case We.LocalStorage:delete this.localCache[t],this.flushValue(We.LocalStorage);break;case We.Memory:delete this.memoryCache[t]}}flushValue(t){t===We.SessionStorage?sessionStorage.setItem(this.sessionStorageKey,bt(JSON.stringify(this.sessionCache))):t===We.LocalStorage&&localStorage.setItem(this.localStorageKey,bt(JSON.stringify(this.localCache)))}}Pe.instance=void 0;let tt=function(e){return e.WebclientOpt="WEB_CLIENT_OPT",e.WebclientWebinarToken="WEB_CLIENT_WEBINAR_TOKEN",e.WebclientMeetingToken="WEB_CLIENT_MEETING_TOKEN",e.WebclientZtk="WEB_CLIENT_ZTK",e.WebclientZsk="WEB_CLIENT_ZSK",e.WebclientTk="WEB_CLIENT_TK",e.WebclientIVState="WEB_CLIENT_IV_STATE",e.WebclientIsOnHold="WEB_CLIENT_IS_ON_HOLD",e.WebclientParticipantId="WEB_CLIENT_PARTICIPANT_ID",e.WebclientZoomId="WEB_CLIENT_ZOOM_ID",e.WebclientUserName="WEB_CLIENT_USER_NAME",e.WebclientUserEmail="WEB_CLIENT_USER_EMAIL",e.WebclientBreakoutRoomAttendeeStatus="WEB_CLIENT_BO_ATTENDEE_STATUS",e.WebclientBreakoutRoomCommand="WEB_CLIENT_BO_COMMAND",e.WebclientAudioEncryptKey="WEB_CLIENT_AUDIO_ENCRYPT_KEY",e.WebclientVideoEncryptKey="WEB_CLIENT_VIDEO_ENCRYPT_KEY",e.WebclientSharingEncryptKey="WEB_CLIENT_SHARING_ENCRYPT_KEY",e.WebclientFailoverCount="WEB_CLIENT_FAILOVER_COUNT",e.WebclientRecordingToken="WEB_CLIENT_RECORDING_TOKEN",e}({}),XS=function(e){return e.WebclientDeviceId="WEBCLIENT_DEVICE_ID",e.VSDKLogTrackingId="ZM_VSDK_LOG_TRACKING_IDS",e}({}),Uc=function(e){return e.EnforceWebRTCAudio="ENFORCE_WEB_RTC_AUDIO",e.DisableAutoReportLogs="DISABLE_AUTO_REPORT_LOGS",e}({});function Dt(e,t){const r=t.match(e);return r&&r.length>0&&r[1]||""}function Lk(e,t){const r=t.match(e);return r&&r.length>1&&r[2]||""}const Jo=/version\/(\d+(\.?_?\d+)+)/i,zF=[{test:[/opera/i],describe:e=>["Opera(Legacy)",Dt(Jo,e)||Dt(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/opr\/|opios/i],describe:e=>["Opera",Dt(/(?:opr|opios)[\s/](\S+)/i,e)||Dt(Jo,e)]},{test:[/SamsungBrowser/i],describe:e=>["Samsung Internet for Android",Dt(Jo,e)||Dt(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/micromessenger/i],describe:e=>["WeChat",Dt(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||Dt(Jo,e)]},{test:[/qqbrowser/i],describe:e=>[/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser",Dt(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||Dt(Jo,e)]},{test:[/msie|trident/i],describe:e=>["Internet Explorer",Dt(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e)]},{test:[/\sedg\//i],describe:e=>["Microsoft Edge",Dt(/\sedg\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/edg([ea]|ios)/i],describe:e=>["Microsoft Edge(Legacy)",Lk(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/firefox|iceweasel|fxios/i],describe:e=>["Firefox",Dt(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e)]},{test:[/electron/i],describe:e=>["Electron",Dt(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e)]},{test:[/chromium/i],describe:e=>["Chromium",Dt(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||Dt(Jo,e)]},{test:[/chrome|crios|crmo/i],describe:e=>["Chrome",Dt(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e)]},{test:e=>!/like android/i.test(e)&&/android/i.test(e),describe:e=>["Android Browser",Dt(Jo,e)]},{test:[/safari|applewebkit/i],describe:e=>["Safari",Dt(Jo,e)]}],WF=[{test:[/windows /i],describe:e=>["Windows",Dt(/Windows ((NT|XP)( \d\d?.\d)?)/i,e)]},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:e=>["iOS",Lk(/(Version\/)(\d[\d.]+)/,e)]},{test:[/macintosh/i],describe:e=>["macOS",Dt(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,".")]},{test:[/(ipod|iphone|ipad)/i],describe:e=>["iOS",Dt(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".")]},{test:e=>!/like android/i.test(e)&&/android/i.test(e),describe:e=>["Android",Dt(/android[\s/-](\d+(\.\d+)*)/i,e)]},{test:[/linux/i],describe:()=>["Linux"]},{test:[/CrOS/],describe:()=>["Chrome OS"]}];class GF{constructor(){this.value=void 0,this.gpu=void 0}get isSupported(){if(this.value===void 0)if(typeof window.OffscreenCanvas=="function"){const t=new OffscreenCanvas(1,1);t.addEventListener("webglcontextlost",n=>{n.preventDefault()});const r=t.getContext("webgl");if(this.value=!!r,r){const n=r.getExtension("WEBGL_debug_renderer_info");n&&(this.gpu=r.getParameter(n.UNMASKED_RENDERER_WEBGL))}}else this.value=!1;return this.value}}const ae=new class{constructor(){this._browser=void 0,this._os=void 0,this._browserVersion=void 0,this._osVersion=void 0,this._offscreenCanvasCapality=void 0,this._clientHintsData=void 0,this._offscreenCanvasCapality=new GF,"userAgentData"in navigator&&navigator.userAgentData.getHighEntropyValues(["architecture","bitness","formFactor","model","platformVersion","wow64"]).then(e=>{this._clientHintsData=e,this._os&&this._osVersion&&this._clientHintsData.platform&&this._clientHintsData.platformVersion&&(this._os=this._clientHintsData.platform,this._osVersion=this._clientHintsData.platformVersion)}).catch(e=>{console.warn(e)})}_getBrowserVersion(){var e;if((e=this._clientHintsData)!==null&&e!==void 0&&(e=e.brands)!==null&&e!==void 0&&e.length){const t=this._clientHintsData.brands.filter(n=>!/(Chromium|Not.*Brand)/i.test(n.brand))[0];t&&(this._browser=t.brand);const r=this._clientHintsData.brands.find(n=>{var i;return((i=n.brand)===null||i===void 0?void 0:i.toLowerCase())==="chromium"});r?(this._browserVersion=r.version,this._browser||(this._browser=r.brand)):this._browserVersion=t.version}else{const t=navigator.userAgent,r=zF.find(n=>typeof n.test=="function"?n.test(t):n.test.some(i=>i.test(t)));if(r){const n=r.describe(t);this._browser=n[0],this._browserVersion=n[1],this.isIOSMobile&&(this._browser="ios-safari")}else this._browser="unknown",this._browserVersion="0"}}_getOSVersion(){var e,t;if((e=this._clientHintsData)!==null&&e!==void 0&&e.platform&&(t=this._clientHintsData)!==null&&t!==void 0&&t.platformVersion)this._os=this._clientHintsData.platform,this._osVersion=this._clientHintsData.platformVersion;else{const r=navigator.userAgent,n=WF.find(i=>typeof i.test=="function"?i.test(r):i.test.some(o=>o.test(r)));if(n){const i=n.describe(r);this._os=i[0],this._osVersion=i[1]}else this._os="unknown",this._osVersion="0"}}get browser(){return this._browser||this._getBrowserVersion(),this._browser}get browserVersion(){return this._browserVersion||this._getBrowserVersion(),this._browserVersion}get os(){return this._os||this._getOSVersion(),this._os}get osVersion(){return this._osVersion||this._getOSVersion(),this._osVersion}get isIE(){return this.browser==="Internet Explorer"}get isLegacyEdge(){return this.browser==="Microsoft Edge(Legacy)"}get isLegacyOpera(){return this.browser==="Opera(Legacy)"}get isFirefox(){return this.browser==="Firefox"}get isSafari(){return this.browser==="Safari"}get isChrome(){var e,t;if((e=this._clientHintsData)!==null&&e!==void 0&&(e=e.brands)!==null&&e!==void 0&&e.length)return(t=this._clientHintsData)===null||t===void 0?void 0:t.brands.some(n=>{var i;return((i=n.brand)===null||i===void 0?void 0:i.toLocaleLowerCase())==="chromium"});const{userAgent:r}=navigator;return!this.isLegacyOpera&&!this.isLegacyEdge&&/chrome/i.test(r)&&/webkit/i.test(r)}get isLegacyChrome(){var e;return this.isChrome&&typeof((e=navigator.mediaDevices)===null||e===void 0?void 0:e.getDisplayMedia)!="function"}get isMacOS(){return this.os==="macOS"}get isIPad(){var e;return/iPad/i.test(navigator.userAgent)||this.isMacOS&&((e=navigator)===null||e===void 0?void 0:e.maxTouchPoints)>2}get isIOSMobile(){return this.os==="iOS"||this.isIPad}get architecture(){var e,t;return(e=(t=this._clientHintsData)===null||t===void 0?void 0:t.architecture)!==null&&e!==void 0?e:""}get isArm(){return this.architecture?this.architecture==="arm":/arm/i.test(navigator.userAgent)}get isChromeOS(){return this.os==="Chrome OS"}get isAndroidBrowser(){var e;return((e=this.os)===null||e===void 0?void 0:e.toLowerCase())==="android"}get isArmChromeOS(){return this.isArm&&this.isChromeOS}get isAndroidOrIOSBrowser(){return this.isAndroidBrowser||this.isIOSMobile}get isSupportEssentialAudioAndVideoAbility(){return typeof WebAssembly=="object"&&typeof Worker=="function"}get isSupportAudioWorklet(){return typeof AudioWorklet=="function"}get isSupportImageCapture(){return"ImageCapture"in window}get isSupportMediaStreamTrackProcessor(){return"MediaStreamTrackProcessor"in window}get isSupportOffscreenCanvas(){return this._offscreenCanvasCapality.isSupported}get gpu(){return this._offscreenCanvasCapality.isSupported?this._offscreenCanvasCapality.gpu:""}get bitness(){var e,t;return(e=(t=this._clientHintsData)===null||t===void 0?void 0:t.bitness)!==null&&e!==void 0?e:""}get model(){var e,t;return(e=(t=this._clientHintsData)===null||t===void 0?void 0:t.model)!==null&&e!==void 0?e:""}get wow64(){var e;if(this.os.toLowerCase()==="windows")return(e=this._clientHintsData)===null||e===void 0?void 0:e.wow64}get isSupportSendScreenSharing(){return"getDisplayMedia"in navigator.mediaDevices&&typeof navigator.mediaDevices.getDisplayMedia=="function"}get isSupportSharedArrayBuffer(){return typeof SharedArrayBuffer=="function"}};function Gt(){return ae.isAndroidOrIOSBrowser||!!Pe.get(Uc.EnforceWebRTCAudio)}const Vk=()=>ae.isIE,Tg=()=>{var e;return ae.isSupportOffscreenCanvas&&((e=navigator)===null||e===void 0?void 0:e.hardwareConcurrency)>=2&&typeof requestAnimationFrame=="function"&&ae.isSupportSharedArrayBuffer},hu=(e,t)=>{var r;const{isSafari:n,isIOSMobile:i,isSupportMediaStreamTrackProcessor:o,isAndroidOrIOSBrowser:s,isArmChromeOS:a,isChromeOS:l,isArm:u,isSupportOffscreenCanvas:d,isIPad:c}=ae;if(!Tg()){const p=n||i,h=typeof window.SharedArrayBuffer!="function"&&(!!p||o&&d);return e&&h?t?25:navigator.hardwareConcurrency<4?2:4:1}return s?t?25:c?9:4:a||l&&!u?navigator.hardwareConcurrency>=4?9:2:((r=navigator)===null||r===void 0?void 0:r.hardwareConcurrency)<4?2:25};function xk(){var e;return"webkit"in window&&!("chrome"in window)&&!((e=window.webkit.messageHandlers)===null||e===void 0||!e.jsOCHelper)}function Bp(){var e;const{isAndroidBrowser:t,isIOSMobile:r,osVersion:n,browserVersion:i,isChrome:o,isFirefox:s,isSafari:a}=ae;var l,u;if(r)return Number((l=n.match(/^\d+/))===null||l===void 0?void 0:l[0])>=15;if(t)return Number((u=n.match(/^\d+/))===null||u===void 0?void 0:u[0])>=10;const d=Number((e=i.match(/^\d+/))===null||e===void 0?void 0:e[0]);return!!(o&&d>=69)||!!(a&&d>14)||!!(s&&d>=76)}let Zt=function(e){return e.VIDEO_ENCODE="0",e.VIDEO_DECODE="1",e.AUDIO_ENCODE="2",e.AUDIO_DECODE="3",e.SHARING_ENCODE="4",e.SHARING_DECODE="5",e}({}),fp=function(e){return e[e.NONE=0]="NONE",e[e.AES_256=1]="AES_256",e[e.AES_GCM=2]="AES_GCM",e}({});const Rr=Object.freeze({RWG_CHAT:{gcmType:1,sessionType:"RWG_CHAT"},XMPP_CHAT:{gcmType:1,sessionType:"XMPP_CHAT"},CC_MESSAGE:{gcmType:3,sessionType:"CC_MESSAGE"},BO_BROADCAST:{gcmType:1,sessionType:"BO_BROADCAST"},CHAT_FILE:{gcmType:2,sessionType:"CHAT_FILE"},CHAT_FILE_INFO:{gcmType:1,sessionType:"CHAT_FILE_INFO"}}),cd=(window.crypto||window.msCrypto).subtle,yl=tt.WebclientIVState,KF=Object.keys(Rr).map(e=>Rr[e].sessionType);class ur{constructor(t,r,n){this.isGCMEnabled=void 0,this.gcmSessionKey=void 0,this.gcmMainSessionKey=void 0,this.zoomId=void 0,this.resetParameters(t,r,n),Pe.set(yl,{},We.SessionStorage)}static init(t,r,n){this.instance?this.instance.resetParameters(t,r,n):this.instance=new ur(t,r,n)}static destroy(){this.instance&&(this.instance=void 0)}resetParameters(t,r,n){this.isGCMEnabled=!(ae.isIE||!ae.isSupportEssentialAudioAndVideoAbility)&&n===fp.AES_GCM,this.gcmSessionKey=Hn(r),this.gcmMainSessionKey||(this.gcmMainSessionKey=this.gcmSessionKey),this.zoomId=String(t)}beginCrypto(t,r,n){const i=new Uint32Array(1);i[0]=9,i[0]+=Number(n);const o=new Uint8Array(i.buffer);let s=new Uint8Array(132);const a=Hn(r);return s.set(a,0),s.set(o,a.length),s=s.subarray(0,a.length+4),cd.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!0,["sign"]).then(l=>cd.sign({name:"HMAC"},l,s)).then(l=>cd.importKey("raw",l,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))}getNextIV(t){const r=Pe.get(yl);return r[t]===void 0?(r[t]=0,Pe.set(yl,r,We.SessionStorage)):Pe.set(yl,n=>({...n,[t]:n[t]+1}),We.SessionStorage)}resetIVState(){const t=Pe.get(yl);if(t!==void 0){const r=Object.keys(t).filter(n=>KF.indexOf(n)>-1);r.length>0&&(r.forEach(n=>{t[n]+=1e6}),Pe.set(yl,t,We.SessionStorage))}}static resetIV(){if(this.instance===void 0)throw new Error("reset before intialize");this.instance.resetIVState()}static beginEncrypt(t){let{text:r,type:n}=t;const i=new Uint8Array(0);if(this.instance&&this.instance.isGCMEnabled){const a=this.instance.getNextIV(n.sessionType),l=new ArrayBuffer(12),u=new Uint8Array(l);new DataView(l).setUint32(0,a,!0);let d=null;return d=n.sessionType==="BO_BROADCAST"||n.sessionType==="XMPP_CHAT"?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(d,this.instance.zoomId,n.gcmType).then(c=>{const p=ArrayBuffer.isView(r)?r:new TextEncoder().encode(r);return cd.encrypt({name:"AES-GCM",iv:u,additionalData:i,tagLength:8*16},c,p)}).then(c=>{const p=1+u.byteLength+2+i.byteLength+4+c.byteLength,h=new ArrayBuffer(p);if(new Uint8Array(h)[0]=u.length,new Uint8Array(h,1,u.byteLength).set(u),new DataView(h).setUint16(1+u.byteLength,i.length,!0),new Uint8Array(h,3+u.byteLength).set(i),new DataView(h).setUint32(1+u.byteLength+2+i.byteLength,c.byteLength-16,!0),new Uint8Array(h,1+u.byteLength+2+i.byteLength+4).set(new Uint8Array(c)),n.sessionType===Rr.CHAT_FILE.sessionType)return h;const m=new Uint8Array(h).reduce((f,v)=>f+String.fromCharCode(v),"");return window.btoa(m).replace(/_/g,"/").replace(/-/g,"+").replace(/\=/g,"")})}return Promise.resolve(ArrayBuffer.isView(r)?r:bt(r))}static beginDecrypt(t){let{decryptedText:r,type:n,zoomId:i}=t;if(this.instance&&this.instance.isGCMEnabled){const o=ArrayBuffer.isView(r)||r instanceof ArrayBuffer?new Uint8Array(r):function(v){let g;const y=v.length,S=new Array(y);for(g=0;g<y;++g)S[g]=255&v.charCodeAt(g);return new Uint8Array(S)}(atob(r.replace(/_/g,"/").replace(/-/g,"+"))),s=o[0],a=o.slice(1,s+1),l=o.slice(1+s,3+s),u=new DataView(l.buffer).getUint16(0,!0),d=o.slice(1+s+2,1+s+2+u),c=o.slice(1+s+2+u,1+s+2+u+4),p=new DataView(c.buffer).getUint32(0,!0),h=o.slice(1+s+2+u+4,1+s+2+u+4+p),m=o.slice(1+s+2+u+4+p);let f=null;return f=n.sessionType==="BO_BROADCAST"||n.sessionType==="XMPP_CHAT"?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(f,i,n.gcmType).then(v=>{const g=function(y,S){y=new Uint8Array(y),S=new Uint8Array(S);const b=new Uint8Array(y.length+S.length);return b.set(y),b.set(S,y.length),b}(h,m);return cd.decrypt({name:"AES-GCM",iv:a,additionalData:d,tagLength:8*m.length},v,g.buffer)}).then(v=>({message:n.sessionType===Rr.CHAT_FILE.sessionType?v:new TextDecoder().decode(v),iv:a,aad:d})).catch(v=>({message:"[This is an encrypted message]",iv:a,aad:d}))}{const o=new TextDecoder("utf-8");return Promise.resolve({message:ArrayBuffer.isView(r)||r instanceof ArrayBuffer?r:o.decode(Hn(r))})}}}ur.instance=void 0;const eb=20225,iw=20234,ot=7937,zn=7938,tb=12039,XA=16138,Og=4098,Ev=4305,Hp=4343,rb=16428;let ft=function(e){return e[e.NoAttendee=0]="NoAttendee",e[e.All=1]="All",e[e.AllPanelist=2]="AllPanelist",e[e.Host=3]="Host",e[e.NoOne=4]="NoOne",e[e.EveryonePublicly=5]="EveryonePublicly",e}({}),ol=function(e){return e[e.AllPanelist=1]="AllPanelist",e[e.Everyone=2]="Everyone",e[e.Invalid=0]="Invalid",e}({}),rt=function(e){return e[e.All=0]="All",e[e.Panelist=1]="Panelist",e[e.IndividualCcPanelist=2]="IndividualCcPanelist",e[e.Individual=3]="Individual",e[e.SilentModeUsers=4]="SilentModeUsers",e}({}),Kf=function(e){return e[e.None=0]="None",e[e.Delete=1]="Delete",e[e.Modify=2]="Modify",e}({}),wv=function(e){return e[e.Success=0]="Success",e[e.Delete=1]="Delete",e[e.Block=3]="Block",e}({});const qF=[ft.All,ft.Host,ft.NoOne,ft.EveryonePublicly],QF=[ft.NoOne,ft.All,ft.AllPanelist],qf={AllPanelist:11,Everyone:12},JF={[qf.AllPanelist]:ol.AllPanelist,[qf.Everyone]:ol.Everyone},Vd={userId:rt.All,displayName:"Everyone",isHost:!1,isCoHost:!1},Zl={userId:rt.Panelist,displayName:"All panelists"},ZF={userId:rt.SilentModeUsers,displayName:"Everyone (in Waiting Room)",isHost:!1,isCoHost:!1};let YF=function(e){return e[e.Local=0]="Local",e[e.ThirdParty=1]="ThirdParty",e}({}),fr=function(e){return e[e.ChunkSize=20971520]="ChunkSize",e[e.EncodeBlockSize=32768]="EncodeBlockSize",e[e.DecodeBlockSize=32803]="DecodeBlockSize",e[e.MaxSize=2147483648]="MaxSize",e[e.ReaderChunkSize=1073741824]="ReaderChunkSize",e}({}),Ht=function(e){return e[e.Init=0]="Init",e[e.InProgress=1]="InProgress",e[e.Success=2]="Success",e[e.Fail=3]="Fail",e[e.Cancel=4]="Cancel",e[e.Complete=5]="Complete",e}({}),Io=function(e){return e[e.InProgress=1]="InProgress",e[e.Success=2]="Success",e[e.Fail=3]="Fail",e[e.Cancel=4]="Cancel",e}({});const XF={"7z":"application/x-7z-compressed",avi:"video/x-msvideo",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",gif:"image/gif",gz:"application/gzip",html:"text/html",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",mid:"audio/midi",mov:"video/*",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/*",mpg:"video/*",pdf:"application/pdf",png:"image/png",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",txt:"text/plain",wav:"audio/wav",webp:"image/webp",wma:"audio/*",wmv:"video/*",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",zip:"application/zip"};let Qr=function(e){return e.Open="open",e.Message="message",e.Error="error",e.Close="close",e.Inactive="inactive",e}({});class Uk{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.intervalsToBeCleardWhenSocketClose=[],this.isAlive=!1,this.isRlbTP=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1,this.isRlbTP=!1}on(t,r){let n=this.eventHandlers.get(t);n||(n=[]),n.push(r),this.eventHandlers.set(t,n)}off(t,r){const n=this.eventHandlers.get(t);if(n){const i=n.filter(o=>o!==r);this.eventHandlers.set(t,i)}}emit(t,r){const n=this.eventHandlers.get(t);n&&n instanceof Array&&n.slice(0).forEach(i=>{try{i(r)}catch(o){console.error(o)}})}sendMessageToRwg(t){this.seq+=1;const r=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(t,{seq:r}))),r}connect(t,r){this.websocket=r?new window.ZoomTPModule.ZoomTPWebSocket(t):new WebSocket(t),this.websocket.binaryType="arraybuffer",this.isRlbTP=r,this.addWebSocketEventListeners()}close(){var t;(t=this.websocket)===null||t===void 0||t.close()}addHeartBeat(){const t=ae.isAndroidOrIOSBrowser?15e3:2e4,r=setInterval(()=>{this.isAlive||this.emit(Qr.Inactive,{}),this.sendMessageToRwg({evt:0}),this.isAlive=!1},t);this.intervalsToBeCleardWhenSocketClose.push(r)}clearIntervals(){this.intervalsToBeCleardWhenSocketClose.forEach(t=>clearInterval(t)),this.isAlive=!1}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",t=>{this.isRlbTP||this.addHeartBeat(),this.emit(Qr.Open,t)}),this.websocket.addEventListener("message",t=>{this.isAlive=!0,this.emit(Qr.Message,t)}),this.websocket.addEventListener("close",t=>{this.clearIntervals(),this.emit(Qr.Close,t)}),this.websocket.addEventListener("error",t=>{this.clearIntervals(),this.emit(Qr.Error,t)}))}sendLaunchParams(t){return{seq:this.sendMessageToRwg({evt:4301,body:t})}}joinMeeting(t){return{seq:this.sendMessageToRwg({evt:4097,body:{meetingtoken:t}})}}lockMeeting(t){return{seq:this.sendMessageToRwg({evt:4099,body:{bLock:t}})}}endMeeting(){return{seq:this.sendMessageToRwg({evt:4101,body:{}})}}leaveMeeting(){const t=arguments.length>0&&arguments[0]!==void 0&&arguments[0]?4364:4103;return{seq:this.sendMessageToRwg({evt:t,body:{}})}}recordMeeting(t,r){return{seq:this.sendMessageToRwg({evt:4105,body:{bRecord:t,bPause:r}})}}localRecordingGrantPermission(t,r,n){return{seq:this.sendMessageToRwg({evt:Hp,body:{cmdType:"permission_request_answer",userId:t,agreed:r,saveAgreed:n}})}}hostGrantPermission(t,r){return{seq:this.sendMessageToRwg({evt:Hp,body:{cmdType:"grant_permission",userId:t,grant:r}})}}localRecordingRequestPermission(){return{seq:this.sendMessageToRwg({evt:Hp,body:{cmdType:"request_permission"}})}}localRecordingMeeting(t){return{seq:this.sendMessageToRwg({evt:Hp,body:{cmdType:"change_recording_status",status:t}})}}summaryMeeting(t){return{seq:this.sendMessageToRwg({evt:8009,body:{type:t?"start":"stop"}})}}startMeetingQuery(t){return{seq:this.sendMessageToRwg({evt:8017,body:{type:t?"start":"stop"}})}}allowSelfRecord(t){return{seq:this.sendMessageToRwg({evt:4325,body:{bAllowISORecord:t}})}}enableZoomIQRecord(t){return{seq:this.sendMessageToRwg({evt:4318,body:{check:t}})}}expel(t){return{seq:this.sendMessageToRwg({evt:4107,body:{id:t}})}}expelAttendee(t){return{seq:this.sendMessageToRwg({evt:4205,body:{jid:t}})}}rename(t,r,n){return{seq:this.sendMessageToRwg({evt:4109,body:{id:t,dn2:r,olddn2:n}})}}assignHost(t,r){return{seq:this.sendMessageToRwg({evt:4111,body:{id:t,bCoHost:r}})}}reclaimHost(t){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return{seq:this.sendMessageToRwg({evt:4133,body:{id:t,bCoHost:r}})}}revokeCoHost(t){return{seq:this.sendMessageToRwg({evt:4195,body:{id:t}})}}putOnHold(t,r){return{seq:this.sendMessageToRwg({evt:4113,body:{id:t,bHold:r}})}}setMuteOnEntry(t){return{seq:this.sendMessageToRwg({evt:4115,body:{bOn:t}})}}setHoldOnEntry(t){return{seq:this.sendMessageToRwg({evt:4117,body:{bOn:t}})}}inviteCRCDevice(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2;return{seq:this.sendMessageToRwg({evt:4119,body:{ip:t,type:r,encrypt:n}})}}cancelInviteCRCDevice(t){return{seq:this.sendMessageToRwg({evt:4121,body:{transID:t}})}}sendCloseCaption(t){return{seq:this.sendMessageToRwg({evt:4125,body:{...t}})}}allowViewParticipantNumber(t){return{seq:this.sendMessageToRwg({evt:4127,body:{bOn:t}})}}lowerAllHands(){return{seq:this.sendMessageToRwg({evt:4129,body:{}})}}raiseLowerHand(t,r){return{seq:this.sendMessageToRwg({evt:4131,body:{id:t,bOn:r}})}}chat(t,r,n,i){const o={text:t,destNodeID:r};return n&&Object.assign(o,{sn:n}),i&&Object.assign(o,{attendeeNodeID:i}),{seq:this.sendMessageToRwg({evt:4135,body:o})}}assignCC(t,r){return{seq:this.sendMessageToRwg({evt:4137,body:{id:t,bCCEditor:r}})}}enableLT(t){return{seq:this.sendMessageToRwg({evt:4227,body:{op:t?2:4}})}}enableNewLLT(){return{seq:this.sendMessageToRwg({evt:4285})}}disableCaptions(t){return{seq:this.sendMessageToRwg({evt:Ev,body:{type:4,disableNewLtt:t}})}}enableManualCaption(t){return{seq:this.sendMessageToRwg({evt:4291,body:{op:t?1:0}})}}setTranslationLanguage(t){return t!==void 0?{seq:this.sendMessageToRwg({evt:Ev,body:{type:1,lang:t}})}:{seq:this.sendMessageToRwg({evt:Ev,body:{type:3}})}}setSpokenLanguage(t){return{seq:this.sendMessageToRwg({evt:4287,body:{lang:t}})}}allowAskLT(t){return{seq:this.sendMessageToRwg({evt:4263,body:{bAnonymous:t}})}}approveLT(){return{seq:this.sendMessageToRwg({evt:4262,body:{bApproved:!0}})}}askLT(t){return{seq:this.sendMessageToRwg({evt:4261,body:{bAnonymous:t}})}}setChatPriviledge(t){return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:t}})}}setPanelistChatPrivilege(t){if(!Object.values(qf).includes(t))throw Error("Invalid panelist chat privilege req value");return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:t}})}}sendFeedback(t){return{seq:this.sendMessageToRwg({evt:4143,body:{feedback:t}})}}clearFeedback(){return{seq:this.sendMessageToRwg({evt:4145,body:{}})}}allowUnmuteVideo(t){return{seq:this.sendMessageToRwg({evt:4147,body:{bOn:t}})}}allowUnmuteAudio(t){return{seq:this.sendMessageToRwg({evt:4149,body:{bOn:t}})}}allowRaiseHand(t){return{seq:this.sendMessageToRwg({evt:4151,body:{bOn:t}})}}boToken(t){return{seq:this.sendMessageToRwg({evt:4173,body:{topic:t}})}}startBO(t){return{seq:this.sendMessageToRwg({evt:4175,body:{proto:t}})}}stopBO(t){return{seq:this.sendMessageToRwg({evt:4177,body:{status:t}})}}assignToBO(t,r){return{seq:this.sendMessageToRwg({evt:4179,body:{targetID:t,targetBID:r}})}}switchBO(t,r){return{seq:this.sendMessageToRwg({evt:4181,body:{targetID:t,targetBID:r}})}}wantJoinBO(t,r){return{seq:this.sendMessageToRwg({evt:4183,body:{targetID:t,targetBID:r}})}}joinBO(t){return{seq:this.sendMessageToRwg({evt:4193,body:{targetBID:t}})}}leaveBO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return{seq:this.sendMessageToRwg({evt:4185,body:{reason:t}})}}broadcastBO(t){return{seq:this.sendMessageToRwg({evt:4187,body:{textContent:t}})}}askForHelpBO(t){return{seq:this.sendMessageToRwg({evt:4189,body:{targetID:t}})}}askForHelpResultBO(t,r){return{seq:this.sendMessageToRwg({evt:4191,body:{targetID:t,helpResult:r}})}}coHostStartBO(t,r){return{seq:this.sendMessageToRwg({evt:4241,body:{proto:t,targetID:r}})}}coHostStopBO(t,r){return{seq:this.sendMessageToRwg({evt:4243,body:{status:t,targetID:r}})}}coHostAssignToBO(t,r,n){return{seq:this.sendMessageToRwg({evt:4245,body:{userGUID:t,targetID:n,targetBID:r}})}}moveToMainSession(t){return{seq:this.sendMessageToRwg({evt:4247,body:{userGUID:t}})}}coHostMoveToMainSession(t,r){return{seq:this.sendMessageToRwg({evt:4249,body:{userGUID:t,targetID:r}})}}allowParticipantRename(t){return{seq:this.sendMessageToRwg({evt:4163,body:{bOn:t}})}}allowMessageFeedbackNotify(t,r){return{seq:this.sendMessageToRwg({evt:4171,body:{bOn:t,id:r}})}}setPlayChime(t,r){return{seq:this.sendMessageToRwg({evt:4197,body:{bOn:t,id:r}})}}admitAllSilentUsers(){return{seq:this.sendMessageToRwg({evt:4199,body:{}})}}bindTeleUser(t,r,n){return{seq:this.sendMessageToRwg({evt:4201,body:{teleUserID:t,targetUserID:r,bBind:n}})}}practiceSession(){return{seq:this.sendMessageToRwg({evt:4207,body:null})}}roleChangeWebinar(t,r,n,i){return{seq:this.sendMessageToRwg({evt:4209,body:{jid:r,userID:n,clientCap:i,bPromote:t}})}}sendPromoteConsent(t,r){return{seq:this.sendMessageToRwg({evt:4254,body:{agreed:t,req_id:r}})}}batchCreateBOToken(t){const r=t.map((n,i)=>({topic:n,index:i}));return{seq:this.sendMessageToRwg({evt:4211,body:r})}}mute(t,r){return{seq:this.sendMessageToRwg({evt:8193,body:{bMute:r,id:t}})}}audioDrop(t){return{seq:this.sendMessageToRwg({evt:8195,body:{id:t}})}}audioDialout(t,r,n,i,o){return{seq:this.sendMessageToRwg({evt:8197,body:{pn:t,dn2:bt(r),bCallme:n,bPressOne:i,bGreeting:o}})}}audioCancelDialout(t,r){return{seq:this.sendMessageToRwg({evt:8199,body:{pn:t,bCallme:r}})}}audioMuteAll(t){return{seq:this.sendMessageToRwg({evt:8201,body:{bMute:t}})}}allowToTalk(t,r){return{seq:this.sendMessageToRwg({evt:8204,body:{id:t,bAllowTalk:r}})}}subscribeVideo(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return{seq:this.sendMessageToRwg({evt:12289,body:{id:t,size:r,bOn:n}})}}unsubscribeVideo(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return{seq:this.sendMessageToRwg({evt:12291,body:{id:t}})}}muteAttendeeVideo(t,r){return{seq:this.sendMessageToRwg({evt:12297,body:{id:t,bOn:r}})}}notifyRwgIsMuteVideo(t,r){return this.muteAttendeeVideo(t,r)}pauseSharing(){return{seq:this.sendMessageToRwg({evt:16385,body:{}})}}resumeSharing(){return{seq:this.sendMessageToRwg({evt:16387,body:{}})}}allowAnonymousQuestion(t,r){return{seq:this.sendMessageToRwg({evt:4155,body:{userId:t,bOn:r}})}}allowViewAll(t,r){return{seq:this.sendMessageToRwg({evt:4157,body:{userId:t,bOn:r}})}}allowVote(t,r){return{seq:this.sendMessageToRwg({evt:4159,body:{userId:t,bOn:r}})}}allowComment(t,r){return{seq:this.sendMessageToRwg({evt:4161,body:{userId:t,bOn:r}})}}sharingRequestRemoteControl(t,r){return{seq:this.sendMessageToRwg({evt:16389,body:{id:t,bOn:r}})}}subscribeGrabRemoteControl(t,r){return{seq:this.sendMessageToRwg({evt:16393,body:{id:t,bOn:r}})}}subscribeSharing(t,r,n,i){const o={id:t,size:r};return n&&Object.assign(o,{bShareToBO:!0}),i!==void 0&&Object.assign(o,{bVideoShare:i}),{seq:this.sendMessageToRwg({evt:16415,body:o})}}unsubscribeSharing(t,r){const n={id:t};return r&&Object.assign(n,{bShareToBO:!0}),{seq:this.sendMessageToRwg({evt:16417,body:n})}}sendRWGConnectionPerformance(t){return{seq:this.sendMessageToRwg({evt:4167,body:{data:t}})}}sendSdkKeyToMonitor(t,r,n){return{seq:this.sendMessageToRwg({evt:4167,body:{data:`ZoomConferenceClient,videoapp_HTML5_sdk_web_join,${n},2,${r},${t}`}})}}sendDatachannelOffer(t){return{seq:this.sendMessageToRwg({evt:24321,offer:t})}}joinOrLeaveVoip(t){return{seq:this.sendMessageToRwg({evt:8203,body:{bOn:t}})}}startSharing(t,r){return{seq:this.sendMessageToRwg({evt:16409,body:{id:t,boOn:!1,...r??{}}})}}stopSharing(t){return{seq:this.sendMessageToRwg({evt:16409,body:{id:t,bOn:!0}})}}lockSharing(t){return{seq:this.sendMessageToRwg({evt:4169,body:{lockShare:t}})}}startShareToBreakoutRoom(t){return{seq:this.sendMessageToRwg({evt:16425,body:{id:t,bShareToBO:!0}})}}stopShareToBreakoutRoom(t){return{seq:this.sendMessageToRwg({evt:16425,body:{id:t,bShareToBO:!1}})}}preAssignBreakoutRoom(){return{seq:this.sendMessageToRwg({evt:4213,body:{}})}}claimHost(t){return{seq:this.sendMessageToRwg({evt:4215,body:{hostKey:t}})}}allowMultiplePin(t,r){return{seq:this.sendMessageToRwg({evt:4217,body:{userID:t,bOn:r}})}}spotlightVideo(t,r){return{seq:this.sendMessageToRwg({evt:4219,body:{id:t,...r}})}}connectCamera(t,r){const n={evt:12307,body:{id:t,bOn:r}};return{seq:this.sendMessageToRwg(n)}}followHostLayout(t){return{seq:this.sendMessageToRwg({evt:4223,body:{bFollowHostVideo:t}})}}setVideoDragLayout(t){return{seq:this.sendMessageToRwg({evt:4218,body:{drag_list:t}})}}chatCmdReq(t,r){return{seq:this.sendMessageToRwg({evt:4237,body:{msgID:t,cmd:r}})}}activeAppLinkReq(t){return{seq:this.sendMessageToRwg({evt:4257,body:{appId:t}})}}activeAppInfoReq(){return{seq:this.sendMessageToRwg({evt:4255,body:{}})}}muteShareAudio(t,r){const n={bOn:!0,bShareAudio:!t};return r&&Object.assign(n,{bShareAudioOnly:!0}),{seq:this.sendMessageToRwg({evt:16423,body:n})}}localMuteAudio(t,r){return{seq:this.sendMessageToRwg({evt:8209,body:{id:t,bMute:r}})}}changeSharePronoun(t,r){return{seq:this.sendMessageToRwg({evt:4264,body:{bPronoun:t,strPronoun:r}})}}sendReceivingSharingReady(t){return{seq:this.sendMessageToRwg({evt:16421,body:{ssrc:t}})}}sendManualCaption(t){return{seq:this.sendMessageToRwg({evt:4289,body:{...t}})}}sendPollingAction(t,r,n){return{seq:this.sendMessageToRwg({evt:4224,body:{action:t,PollingId:r,...n}})}}broadcastUserNetworkQuality(t){const r={type:t.isUplink,level:t.level,bwLevel:t.bwLevel};return{seq:this.sendMessageToRwg({evt:4331,body:r})}}sendFarEndCameraControl(t,r,n){return{seq:this.sendMessageToRwg({evt:4329,body:{cmd:t,userID:r,buttonID:n}})}}sendCameraAblity(t){return{seq:this.sendMessageToRwg({evt:4330,body:{...t,focus:!1}})}}sendReaction(t){return{seq:this.sendMessageToRwg({evt:4259,body:{...t}})}}remoteControlConsent(t,r,n,i){let o=arguments.length>4&&arguments[4]!==void 0&&arguments[4],s=arguments.length>5?arguments[5]:void 0;const{deviceId:a,...l}=i,u=s!==void 0?{runAsAdmin:s}:{};return{seq:this.sendMessageToRwg({evt:16427,body:{DeviceID:a,op:t,SendUserID:n,AssignUserID:r,...l,bAutoDelete:o,...u}})}}takeBackRemoteControlPermission(t,r){return{seq:this.sendMessageToRwg({evt:16431,body:{SendUserID:t,ReceiverUserID:r}})}}syncSharedContentMetaWithRcApp(t){const{deviceId:r,...n}=t;return{seq:this.sendMessageToRwg({evt:16429,body:{DeviceID:r,...n}})}}startLiveStream(t,r,n){return{seq:this.sendMessageToRwg({evt:7977,body:{action:1,streamingURL:t,streamingKey:r,broadcastURL:n}})}}stopLiveStream(){return{seq:this.sendMessageToRwg({evt:7977,body:{action:0}})}}sendRemoteControlAuth(t){return{seq:this.sendMessageToRwg({evt:16433,body:{auth:t}})}}chatFileTransfer(t){return{seq:this.sendMessageToRwg({evt:4307,body:{...t,fileType:0,receiverType:0}})}}broadcastVoiceReq(t){return{seq:this.sendMessageToRwg({evt:4314,body:{broadcastVoice:t}})}}}class He extends Uk{static createAgent(){return this.rwgInstance||(this.rwgInstance=new He),this.rwgInstance}}He.rwgInstance=null;class Pg extends Uk{static getInstance(){return this.instance||(this.instance=new Pg),this.instance}}Pg.instance=null;const jk=[{name:"audio_simd.min.js",category:"audio",type:"worker",tag:"simd",alias:"audioSIMDWorkletPath"},{name:"audio.simd.wasm",category:"audio",type:"wasm",tag:"simd",alias:"audioSIMDWasm"},{name:"js_audio_process.min.js",category:"audio",type:"worker",tag:"",alias:"audioWorkerPath"},{name:"audio.encode.wasm",category:"audio",type:"wasm",tag:"",alias:"audioWasm"},{name:"js_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletPath"},{name:"js_audio_worklet_simd.min.js",category:"audio",type:"worklet",tag:"simd",alias:"audioWorkletSIMDPath"},{name:"js_audio_worklet_process.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletProcessPath"},{name:"js_sharing_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"sharingAudioWorkletPath"},{name:"js_audio_level_worklet_process.min.js",category:"audio",type:"worklet",tag:"",alias:"audioLevelWorkletPath"},{name:"video_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"videoMSIMDWorkerPath"},{name:"video.mtsimd.wasm",category:"video",type:"wasm",tag:"simd,thread,videoShare",alias:"videoMSIMDWasm"},{name:"video_m.min.js",category:"video",type:"worker",tag:"thread",alias:"videoMtWorkerPath"},{name:"video.mt.wasm",category:"video",type:"wasm",tag:"thread",alias:"videoMtWasm"},{name:"video_simd.min.js",category:"video",type:"worker",tag:"simd",alias:"videoSIMDWorkerPath"},{name:"video.simd.wasm",category:"video",type:"wasm",tag:"simd",alias:"videoSIMDWasm"},{name:"video_s.min.js",category:"video",type:"worker",tag:"",alias:"videoWorkerPath"},{name:"video.decode.wasm",category:"video",type:"wasm",tag:"",alias:"videoWasm"},{name:"video_share_mtsimd.min.js",category:"video",type:"worker",tag:"videoShare",alias:"vsmiworkerpath"},{name:"sharing_mtsimd.min.js",category:"sharing",type:"worker",tag:"simd,thread",alias:"sharingMSIMDWorkerPath"},{name:"sharing_m.min.js",category:"sharing",type:"worker",tag:"thread",alias:"sharingMtWorkerPath"},{name:"sharing_simd.min.js",category:"sharing",type:"worker",tag:"simd",alias:"sharingSIMDWorkerPath"},{name:"sharing_s.min.js",category:"sharing",type:"worker",tag:"",alias:"sharingWorkerPath"}],eC="1501",$k=(e,t)=>jk.reduce((r,n)=>{const{name:i,alias:o}=n;return Object.assign(r,{[`${o}`]:`${e}/${t&&eC?`${eC}_`:""}${i}`}),r},{});let mr=function(e){return e.VideoEncode="0",e.VideoDecode="1",e.AudioEncode="2",e.AudioDecode="3",e.SharingEncode="4",e.SharingDecode="5",e}({});const Sl=tt.WebclientIVState;class Oe{static getInstance(){return this.agentInstance===void 0&&(this.agentInstance=new Oe),this.agentInstance}constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.constraints=void 0,this.svcUrl=void 0,this.meetingNumber=void 0,this.confId=void 0,this.mediaSocketAddress=void 0,this.currentUserId=void 0,this.receivedSharingCanvas=void 0,this.sharingCanvas=void 0,this.mediaOptions=void 0,this.inProgress=void 0,this.callbackList=[]}init(t){if(!this.instance&&window.JsMediaSDK_Instance){const r={ivObj:{[Zt.AUDIO_ENCODE]:Pe.get(Sl)&&Pe.get(Sl)[Zt.AUDIO_ENCODE],[Zt.VIDEO_ENCODE]:Pe.get(Sl)&&Pe.get(Sl)[Zt.VIDEO_ENCODE],[Zt.SHARING_ENCODE]:Pe.get(Sl)&&Pe.get(Sl)[Zt.SHARING_ENCODE]},globalTracingLogger:t};this.instance=new window.JsMediaSDK_Instance(r),this.instance.setRWGAgent(He.createAgent())}}setAssetsAndConstraint(t,r,n,i){var o;this.assetsPath=t,this.constraints=r,this.mediaWorkersPath=$k(this.assetsPath,!!n),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=i,(o=this.instance)===null||o===void 0||o.JsMediaSDK_PreLoad(this.mediaWorkersPath,this.onMediaSDKCallback,i)}onMediaSDKCallback(t,r){this.callbackList.length>0&&this.callbackList.forEach(n=>n(t,r))}registerCallback(t){this.callbackList.push(t)}unregisterCallback(t){this.callbackList=this.callbackList.filter(r=>r!==t)}static isSupportVideoEncodeHardwareAcceleration(){return window.JsMediaSDK_Instance.util.IsSupportVideoEncodeHardwareAcceleration()}static isSupportVideoDecodeHardwareAcceleration(){return window.JsMediaSDK_Instance.util.IsSupportVideoDecodeHardwareAcceleration()}static isCompatibleHardwareForEncode(){var t;return ae.isSupportOffscreenCanvas&&((t=window.JsMediaSDK_Instance)===null||t===void 0?void 0:t.util.AdapterWhiteListCheckForEncoder())==0}static getPTZCapability(){var t,r,n,i,o,s;return{pan:!((t=window.JsMediaSDK_Instance)===null||t===void 0||(t=t.util)===null||t===void 0||(r=t.isSupportCameraPan)===null||r===void 0||!r.call(t)),tilt:!((n=window.JsMediaSDK_Instance)===null||n===void 0||(n=n.util)===null||n===void 0||(i=n.isSupportCameraTilt)===null||i===void 0||!i.call(n)),zoom:!((o=window.JsMediaSDK_Instance)===null||o===void 0||(o=o.util)===null||o===void 0||(s=o.isSupportCameraZoom)===null||s===void 0||!s.call(o))}}static isSupportVideoShare(){var t,r;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||(t=t.util)===null||t===void 0||(r=t.isSupportVideoShareReceive)===null||r===void 0||!r.call(t))}static isSupportVideoShareSend(){var t,r;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||(t=t.util)===null||t===void 0||(r=t.isSupportVideoShareSend)===null||r===void 0||!r.call(t))}static isSupportSending720P(){var t;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||(t=t.util)===null||t===void 0||!t.get720pcapacity())}static isSupportSubscribing1080P(){var t;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||(t=t.util)===null||t===void 0||!t.getsub1080pcapacity())}static isSupportOpenMicWhenShareAudio(){var t;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||!t.util.isSupportOpenMicWhenShareAudio())}static isSupportMediaPlaybackAsVideoInput(){var t;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||(t=t.util.videoToMediaStreamManager)===null||t===void 0||!t.isSupported())}static isSupportMediaPlaybackAsAudioInput(){var t;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||(t=t.util.audioToMediaStreamMananger)===null||t===void 0||!t.isSupported())}static isSupportAudioDenoise(t){var r;return!((r=window.JsMediaSDK_Instance)===null||r===void 0||!r.util.isSupportAudioDenoise(t))}static isSupportAudioBridgeAVSync(){var t;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||!t.util.isSupportAudioBridgeAvsync())}static getAudioFeatureFlag(){var t;return(t=window.JsMediaSDK_Instance)===null||t===void 0?void 0:t.util.getAudioFeatureFlags()}static isSupportShareMultiStream(){var t;return(t=window.JsMediaSDK_Instance)===null||t===void 0?void 0:t.util.isSupportShareMultiStream()}static isSupportVideoLTR(){var t;return(t=window.JsMediaSDK_Instance)===null||t===void 0?void 0:t.util.isSupportVideoLTR()}static isSupportStereoAudio(){var t;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||!t.util.isBrowserSupportStereo())}static isSupportFullHDVideo(){var t;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||!t.util.isSupportSendVideoFullHD())}static isSupportFullHDVideoShare(){var t;return!((t=window.JsMediaSDK_Instance)===null||t===void 0||!t.util.isSupportSendVideoShareFullHD())}static isSupportShare2ndAudioDevice(t){var r;return!((r=window.JsMediaSDK_Instance)===null||r===void 0||!r.util.isSupportShare2ndAudioDevice(t))}connect(t){var r,n,i,o,s,a;let{svcUrl:l,meetingNumber:u,conId:d,e2eEncrypt:c,isViewOnly:p,currentUserId:h,isWebinar:m,enableAudioQos:f,enableVideoQos:v=!1,enableWebtransport:g=!1,webtransportPort:y,rendererType:S,adaptedABOptionForMediaSDK:b,mediasdkConfig:R}=t;const{isSupportEssentialAudioAndVideoAbility:w,isSupportAudioWorklet:O,isSupportSendScreenSharing:D}=ae;this.svcUrl=l,this.meetingNumber=u,this.confId=d;const U=((B,ee,ie)=>({videoSocketAddress:`wss://${B}/wc/media/${ee}?type=v&cid=${ie}`,audioSocketAddress:`wss://${B}/wc/media/${ee}?type=a&cid=${ie}`,sharingSocketAddress:`wss://${B}/wc/media/${ee}?type=${Vk()?"j":"s"}&cid=${ie}`}))(l,u,d);this.mediaSocketAddress=U,this.currentUserId=h;const x=hu((r=this.mediaOptions)===null||r===void 0?void 0:r.enableMultiDecodeVideoWithoutSAB);var P,I,E,A,_,C,V,M,$;(n=this.instance)===null||n===void 0||n.setPropsBeforeInit({callback:this.onMediaSDKCallback,audioWorkerPath:w?(i=this.mediaWorkersPath)===null||i===void 0?void 0:i.audioWorkletPath:void 0,e2eEncrypt:c,isEnableListenInitEvent:!0,enableWebtransport:g,webtransportPort:y,featureOptions:b,rendererType:S,mediasdkConfig:R}),((o=this.constraints)===null||o===void 0?void 0:o.audio)===!0&&w&&!Gt()&&((m||O)&&((P=this.instance)===null||P===void 0||P.initAudioDecode(this.mediaWorkersPath,U.audioSocketAddress,h,qs,d,u,x,f)),!O||m&&p||(I=this.instance)===null||I===void 0||I.initAudioEncode(this.mediaWorkersPath,U.audioSocketAddress,h,qs,d,u,x,f)),((s=this.constraints)===null||s===void 0?void 0:s.video)===!0&&w&&((E=this.instance)===null||E===void 0||E.initVideoDecode(this.mediaWorkersPath,U.videoSocketAddress,h,qs,d,u,x,(A=(_=window.JsMediaSDK_Instance)===null||_===void 0||(_=_.util)===null||_===void 0?void 0:_.isGraphicShouldUseHardwareAccelerationDecode())===null||A===void 0||A,v),m&&p||(C=this.instance)===null||C===void 0||C.initVideoEncode(this.mediaWorkersPath,U.videoSocketAddress,h,qs,d,u,x,!1,v,!0,!0)),((a=this.constraints)===null||a===void 0?void 0:a.screen)===!0&&(w?((V=this.instance)===null||V===void 0||V.initSharingDecode(this.mediaWorkersPath,U.sharingSocketAddress,h,qs,d,u,x),!D||m&&p||(M=this.instance)===null||M===void 0||M.initSharingEncode(this.mediaWorkersPath,U.sharingSocketAddress,h,qs,d,u,x)):($=this.instance)===null||$===void 0||$.initSharingDecode(U.sharingSocketAddress)),this.inProgress=!0}async destroy(){var t;this.callbackList=[],[mr.AudioDecode,mr.AudioEncode,mr.VideoDecode,mr.VideoEncode].forEach(n=>{var i;(i=this.instance)===null||i===void 0||i.updateQosSubscription(!1,n)});const r=(t=this.instance)===null||t===void 0?void 0:t.destroy.bind(this.instance);this.instance=null,this.inProgress=!1,await(r==null?void 0:r())}disconnect(){var t,r;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(17,{}),(r=this.instance)===null||r===void 0||r.JsMediaSDK_UnInit()}muteAudio(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(8,{ssrc:0})}unmuteAudio(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(7,{ssrc:0,AudioSelectValue:0})}joinComputerAudio(t,r,n,i,o,s,a){var l;const u=a?{...a,enableHID:!0}:{enableHID:!1};return(l=this.instance)===null||l===void 0?void 0:l.Notify_MeidaSDK(22,{CaptureAudio:i,CaptureAudioInfo:{ssrc:t,AudioSelectValue:r==="default"?null:r,...u,audioProfile:o},speakerInfo:{defaultDeviceId:n},...s?{useAudioBridge:!0,audioBridge:s}:{}})}leaveComputerAudio(){var t;return(t=this.instance)===null||t===void 0?void 0:t.Notify_MeidaSDK(21,null)}joinSharingAudio(t){var r;let{ssrc:n,microphoneDeviceId:i,speakerDeviceId:o,isCaptureAudio:s,audioBridge:a}=t;return(r=this.instance)===null||r===void 0?void 0:r.Notify_MeidaSDK(72,{CaptureAudio:s,CaptureAudioInfo:{ssrc:n,AudioSelectValue:i==="default"?null:i},speakerInfo:{defaultDeviceId:o},checkAutoplay:!1,...a?{useAudioBridge:!0,audioBridge:a}:{}})}leaveSharingAudio(t){var r;return(r=this.instance)===null||r===void 0?void 0:r.Notify_MeidaSDK(73,{isPause:t?1:0})}changeSpeaker(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(11,{ssrc:0,AudioSelectValue:t})}changeMicrophone(t,r,n){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(18,{ssrc:0,AudioSelectValue:t==="default"?null:t,microphoneLabel:r??"default",defaultMuted:n})}restoreWebRTC(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(19,{ssrc:0,AudioSelectValue:t==="default"?null:t})}renderVideo(t,r,n,i,o,s,a,l,u,d,c){var p;const h={userId:r,width:i,height:o,x:s,y:a,quality:l,isMyself:u,canvas:t,enableWaterMark:c,waterMarkText:d,zone:n};t instanceof HTMLVideoElement&&Object.assign(h,{videodom:t}),(p=this.instance)===null||p===void 0||p.Notify_MeidaSDK(1,h)}stopRenderVideo(t,r,n,i){var o;let s=arguments.length>4&&arguments[4]!==void 0&&arguments[4];(o=this.instance)===null||o===void 0||o.Notify_MeidaSDK(2,{canvas:t,userId:r,RGBA:i,doNotClean:s,zone:n})}startCaptureVideo(t,r,n,i,o,s){var a;let l=arguments.length>6&&arguments[6]!==void 0&&arguments[6],u=arguments.length>8?arguments[8]:void 0;const d=arguments.length>7&&arguments[7]?Oe.getPTZCapability():void 0;(a=this.instance)===null||a===void 0||a.Notify_MeidaSDK(3,{ssid:t,width:n,height:i,fps:u,video:o,usingFacingMode:s,VideoSelectValue:r==="default"?null:r,disableOriginalRatio:l,...d})}stopCaptureVideo(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(4,{ssrc:0})}changeCamera(t,r,n){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(12,{VideoSelectValue:t==="default"?null:t,usingFacingMode:!!r,...n||{}})}switchCanvasForVideoCapture(t){var r;let n=t;typeof t=="string"&&(n=[t]),(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(25,n)}renderSharing(t,r){var n;let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",s=arguments.length>4&&arguments[4]!==void 0&&arguments[4];this.receivedSharingCanvas=r,(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(23,{width:0,height:0,ssrc:t,canvas:r,enableWaterMark:i,waterMarkText:o,isFromMainSession:s})}stopRenderSharing(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(24,{})}switchSharingSource(t){var r;let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(36,{ssrc:t,isFromMainSession:Number(n)})}ajustmentReceivedSharingCanvas(t,r){if(this.receivedSharingCanvas&&t&&r)try{if(ae.isAndroidOrIOSBrowser){const[n,i]=[1280,720],o=Math.max(t/n,r/i,1);this.receivedSharingCanvas.width=Math.floor(t/o),this.receivedSharingCanvas.height=Math.floor(r/o)}else this.receivedSharingCanvas.width=t,this.receivedSharingCanvas.height=r}catch{}}startRemoteControl(t,r,n){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(26,{socketURL:`wss://${this.svcUrl}`,meetingID:this.meetingNumber,condID:this.confId,os:r,dom:t,...n})}stopRemoteControl(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(28)}resendRemoteControlPositionPDU(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(41)}updateRemoteControlProperties(t){var r;const{dimension:n,...i}=t;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(27,{...n,...i})}startDesktopSharing(t,r,n,i){var o;let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0;this.sharingCanvas=r;const d={};i&&Object.assign(d,{share2ndCamera:!0,share2ndCameraParams:{VideoSelectValue:i.cameraId==="default"?null:i.cameraId,width:i.width,height:i.height}}),a!==void 0&&Object.assign(d,{videoParams:{displaySurface:a}}),u!==void 0&&Object.assign(d,{otherParams:{...u}}),(o=this.instance)===null||o===void 0||o.Notify_MeidaSDK(30,{ssid:t,canvas:r,video:n,...d,showShareAudioOption:s,sourceId:l})}stopDesktopSharing(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(31,{})}pauseDesktopSharing(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(32,{})}resumeDesktopSharing(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(33,{})}selectLanguageChannelForNewLTT(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(57,{lang:t})}changeSharingSecondCamera(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(49,{VideoSelectValue:t})}ajustmentSharingCanvas(t,r){if(this.sharingCanvas)try{this.sharingCanvas.width=t,this.sharingCanvas.height=r}catch{}}checkChromeSharingExtension(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(34,{})}enableAudioEncode(){var t,r;(t=this.instance)===null||t===void 0||t.initAudioEncode(this.mediaWorkersPath,this.mediaSocketAddress.audioSocketAddress,this.currentUserId,qs,this.confId,this.meetingNumber,hu((r=this.mediaOptions)===null||r===void 0?void 0:r.enableMultiDecodeVideoWithoutSAB))}sendUserNodeList(t,r){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(43,{userList:t,encryptKey:r})}updateRenderedSharingDimension(t,r){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(44,{width:t,height:r})}pauseOrResumeAudio(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(45,{bPause:t})}updateRenderedVideoCanvasDimension(t,r,n){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(46,{canvas:t,width:r,height:n})}clearVideoCanvas(t,r){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(47,{id:t,RGBA:r})}adjustRenderedVideoPosition(t,r,n,i,o,s,a,l){var u;(u=this.instance)===null||u===void 0||u.Notify_MeidaSDK(48,{userId:r,x:i,y:o,width:s,height:a,canvas:t,zone:n,RGBA:l})}mirrorVideo(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(75,{isMirrorMyVideo:t})}updateUserMediaSN(t){var r,n,i;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(80,{isFromMainSession:Number(t.isFromMainSession),mediaActionType:t.iVType,body:{add:(n=t.added)!==null&&n!==void 0?n:[],remove:(i=t.removed)!==null&&i!==void 0?i:[]}})}updateMediaParams(t){var r;const{iVType:n,isFromMainSession:i,updateParams:o}=t;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(81,{mediaActionType:n,isFromMainSession:Number(i),updateParams:o})}createMainSessionChannel(t,r){var n,i;t==="sharing"?(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(84,r):(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(85,r)}addReceivedSharingChannelType(t){var r;const{isFromMainSession:n,...i}=t;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(82,{isFromMainSession:Number(n),...i})}removeReceivedSharingChannelType(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(83,{isFromMainSession:Number(t.isFromMainSession),ssrc:t.ssrc})}enableHardwareAccelerationForVideoDecode(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(70,{enable:t})}enableHardwareAccelerationForVideoEncode(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(71,{enable:t})}setSharingAudioVolume(t,r,n){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(74,{userid:t>>10,shareVolume:r?0:100,isFromMainSession:n})}subscribeToQos(t,r){t.forEach(n=>{var i;(i=this.instance)===null||i===void 0||i.updateQosSubscription(!0,n,r)})}unsubscribeFromQos(t){t.forEach(r=>{var n;(n=this.instance)===null||n===void 0||n.updateQosSubscription(!1,r)})}passThroughRWGMessage(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(40,t)}startVirtualBackgroundSetting(t,r,n,i,o,s){var a;let l=arguments.length>6&&arguments[6]!==void 0&&arguments[6];(a=this.instance)===null||a===void 0||a.Notify_MeidaSDK(91,{canvas:t,bgdom:r,width:o,height:s,ssid:n,VideoSelectValue:i==="default"?null:i,disableOriginalRatio:l})}updateVirtualBackgroundImage(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(92,{bgdom:t})}stopVirtualBackgroundSetting(){var t;let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(93,{isSwitch:r})}startMaskSetting(t,r,n,i,o,s,a,l,u){var d;(d=this.instance)===null||d===void 0||d.Notify_MeidaSDK(62,{canvas:t,maskdom:n,bgdom:r,dx:0,dy:0,dWidth:s,dHeight:a,width:l,height:u,ssid:i,VideoSelectValue:o==="default"?null:o})}updateMaskBackgroundImage(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(63,{bgdom:t})}updateMaskClip(t,r,n){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(64,{maskdom:t,dx:0,dy:0,dWidth:r,dHeight:n})}stopMaskSetting(){var t;let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(65,{isSwitch:r})}enableVideoObserver(t){var r;let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(99,{enable:t,fpsdisbale:n})}enableShareAudioToBreakoutRoom(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(86,{enable:t})}sendUserAudioStatus(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(51,t)}muteOrUnmuteOtherAudio(t,r){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(50,{userId:t,volume:r?0:100})}adjustOtherAudioVolume(t,r){var n;(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(50,{userId:t,volume:r})}notifySDKMeetingReady(){var t;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(113)}movePTZCamera(t){var r;return(r=window.JsMediaSDK_Instance)===null||r===void 0||(r=r.util)===null||r===void 0?void 0:r.queryPTZPermisson().then(n=>{var i;return n?((i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(53,t),Promise.resolve("")):Promise.reject("Cannot move camera without permission granted")})}switchSharingMode(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(101,{mode:t})}updateVideoHDValue(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK("update_videohd_value",{videohd:t})}updateVideoFullhdValue(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK("update_videofullhd_value",{videofullhd:t})}changeAudioProfile(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(126,t)}enableSyncButtonsOnHeadset(t,r,n){var i;(i=this.instance)===null||i===void 0||i.Notify_MeidaSDK(100,{enable:t,microphoneLabel:r,defaultMuted:n})}stopAllIncomingAudio(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(123,t)}isSharingEntireScreen(){var t,r;const n=(t=this.instance)===null||t===void 0||(r=t.getShareStreamInfo)===null||r===void 0?void 0:r.call(t);if(n){const{displaySurface:i}=n;return!i||i==="monitor"}return!1}getShareStreamInfo(){var t,r;const n=(t=this.instance)===null||t===void 0||(r=t.getShareStreamInfo)===null||r===void 0?void 0:r.call(t);if(n){const{deviceId:i,width:o,height:s}=n;return{deviceId:i,width:o,height:s}}return{}}preInitAudioBridge(t){var r;(r=this.instance)===null||r===void 0||r.previewInit({audioBridge:{...t}})}prefetchVideoSsrc(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(110,{ssrc:t})}cancelPrefetchVideoSsrc(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(112,{ssrc:t,haddata:!1})}setMobileRotateMode(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(124,{isLandScape:t})}changeActiveVideoSsrc(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(13,{ssrc:t})}setAudioCodecMode(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(122,{mode:t})}startRemoteControlQRCheck(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(54,{enable:t})}broadcastVoiceToBreakoutRoom(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(87,{enable:t})}share2ndAudio(t,r){var n;const i={audioOnly:!0,deviceId:t==="default"?null:t};r&&Object.assign(i,r),(n=this.instance)===null||n===void 0||n.Notify_MeidaSDK(129,i)}enablePlayAudioFileLocally(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(138,t)}bypassMediaMessage(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(128,t)}}Oe.agentInstance=void 0;const mp="ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",vr="UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",ow="ADD_USER_PARTICIPANT_ATTRIBUTE",lo="UPDATE_USER_PARTICIPANT_ATTRIBUTE",sw="REMOVE_USER_PARTICIPANT_ATTRIBUTE",hs="UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",Fk="REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE",Bk="JOIN_MEETING_SUCCESS",mt="JOIN_MEETING_FAILED",xr="RECONNECTING_MEETING",fs="LEAVING_MEETING",aw="MEETING_IN_WAITING_ROOM",lw="UPDATE_MEETING_ATTRIBUTE",Hk="SHARE_PRONOUN_TYPE_UPDATE",$h="MEETING_RLB_TP_READY_STATUS_CHANGE";var bi=function(e){return e.ConnectionChange="connection-change",e.OnHoldChange="on-hold-change",e.UserAdd="user-added",e.UserUpdate="user-updated",e.UserRemove="user-removed",e.AttendeeUpdate="attendee-updated",e.MeetingAttributeUpdate="meeting-attribute-updated",e.PromoteAttendeeConsent="promote-attendee-consent",e.ActiveAppsUpdate="active-apps-updated",e.SharePronounTypeUpdate="share-pronoun-type-update",e}(bi||{});const eB={JoinMeeting:{success:mp,fail:[mt]}},tB={[bi.ConnectionChange]:[{event:Bk,payload:()=>({state:Jl.Connected})},{event:mt,payload:e=>({state:Jl.Fail,...e})},{event:xr,payload:e=>({state:Jl.Reconnecting,...e})},{event:fs,payload:e=>({state:Jl.Closed,...e})}],[bi.OnHoldChange]:[{event:aw,payload:e=>({isOnHold:e})}],[bi.UserAdd]:[{event:mp,payload:e=>[e]},{event:ow,payload:e=>e}],[bi.UserUpdate]:[{event:vr,payload:e=>[e]},{event:lo,payload:e=>e}],[bi.UserRemove]:[{event:sw,payload:e=>e}],[bi.AttendeeUpdate]:[{event:hs,payload:e=>e},{event:Fk,payload:e=>e}],[bi.MeetingAttributeUpdate]:[{event:lw,payload:e=>"bNoHostTimeOut"in e?{isHostLost:e.bNoHostTimeOut}:null}],[bi.PromoteAttendeeConsent]:[{event:"MEETING_WEBINAR_PROMOTE_CONSENT_REQ",payload:e=>{let{req_id:t,sender_id:r}=e;return{reqId:t,senderId:r}}}],[bi.ActiveAppsUpdate]:[{event:"ACTIVE_APPS_UPDATE",payload:()=>{}}],[bi.SharePronounTypeUpdate]:[{event:Hk,payload:e=>e}]},Xd="LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",Ri="LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",zk="LIVE_TRANSCRIPTION_STATUS_CHANGE",Qf="LIVE_TRANSCRIPTION_HOST_DISABLE_CHANGE",rB={"caption-message":[{event:Xd,payload:e=>e}],"caption-status":[{event:Ri,payload:e=>e}],"caption-enable":[{event:zk,payload:e=>e}],"caption-host-disable":[{event:Qf,payload:e=>e}]},Wa="CHAT_RECEIVE_MESSAGE_EVENTS",fu="CHAT_PRIVILEGE_CHANGE",Wk="CHAT_MESSAGE_RESPONSE",Jf="CHAT_DELETE_MESSAGE_REPONSE",sl="CHAT_FILE_CHAT_UPLOAD_PROGRESS",Fh="CHAT_FILE_CHAT_DOWNLOAD_PROGRESS";let pd=function(e){return e.ChatOnMessage="chat-on-message",e.ChatPrivilegeChange="chat-privilege-change",e.ChatDeleteMessage="chat-delete-message",e.ChatFileUploadProgress="chat-file-upload-progress",e.ChatFileDownloadProgress="chat-file-download-progress",e}({});const nB={[pd.ChatOnMessage]:[{event:Wa,payload:e=>e}],[pd.ChatPrivilegeChange]:[{event:fu,payload:e=>e}],[pd.ChatDeleteMessage]:[{event:Jf,payload:e=>e}],[pd.ChatFileUploadProgress]:[{event:sl,payload:e=>e}],[pd.ChatFileDownloadProgress]:[{event:Fh,payload:e=>e}]},Gk="COMMAND_RECEIVE_MESSAGE_EVENTS",uw="COMMAND_STATUS_EVENTS";let tC=function(e){return e.CommandChannelStatus="command-channel-status",e.CommandChannelMessage="command-channel-message",e}({});const iB={[tC.CommandChannelStatus]:[{event:uw,payload:e=>e}],[tC.CommandChannelMessage]:[{event:Gk,payload:e=>e}]};let Ti=function(e){return e.Recording="Recording",e.Paused="Paused",e.Stopped="Stopped",e.Ask="Ask",e.Accept="Accept",e.Decline="Decline",e}({}),Qt=function(e){return e[e.None=0]="None",e[e.Init=1]="Init",e[e.Start=2]="Start",e[e.Pause=3]="Pause",e[e.Stop=4]="Stop",e}({}),jc=function(e){return e[e.Stop=0]="Stop",e[e.Start=1]="Start",e[e.Pause=2]="Pause",e}({}),on=function(e){return e[e.None=0]="None",e[e.Deny=1]="Deny",e[e.Allow=2]="Allow",e}({}),oB=function(e){return e[e.None=0]="None",e[e.DenyAllRequest=1]="DenyAllRequest",e[e.AllowAllRequest=2]="AllowAllRequest",e}({});const ec="CLOUD_RECORDING_STATUS_CHANGE",Zf="CLOUD_RECORDING_ISO_STATUS_CHANGE",Yf="LOCAL_RECORDING_CHANGE",Qi="LOCAL_RECORDING_PERMISSION_CHANGE",Kk="RECORDING_FOR_IQ_STATUS_CHANGE",qk="RECORDING_FOR_IQ_OPERATION_CHANGE";let Qs=function(e){return e.RecordingChange="recording-change",e.IndividualRecordingChange="individual-recording-change",e.LocalRecordingChange="local-recording-change",e.LocalRecordingPermissionChange="local-recording-permission-change",e.MediaCaptureStatusChange="media-capture-status-change",e.MediaCapturePermissionChange="media-capture-permission-change",e.RecordingIqChange="recording-iq-change",e}({});const sB={[Qs.RecordingChange]:[{event:ec,payload:e=>{const{cmrServerStatus:t}=e;return t===Qt.Start?Ti.Recording:t===Qt.Pause?Ti.Paused:Ti.Stopped}}],[Qs.IndividualRecordingChange]:[{event:Zf,payload:e=>e}],[Qs.LocalRecordingChange]:[{event:Yf,payload:e=>e}],[Qs.LocalRecordingPermissionChange]:[{event:Qi,payload:e=>e}],[Qs.MediaCaptureStatusChange]:[{event:Yf,payload:e=>e}],[Qs.MediaCapturePermissionChange]:[{event:Qi,payload:e=>e}],[Qs.RecordingIqChange]:[{event:Kk,payload:e=>e}]};let Z=function(e){return e[e.InitSuccess=1]="InitSuccess",e[e.InitSuccessVideo=1.1]="InitSuccessVideo",e[e.InitSuccessAudio=1.2]="InitSuccessAudio",e[e.InitSuccessSharing=1.3]="InitSuccessSharing",e[e.UserGrantCaptureAudio=2]="UserGrantCaptureAudio",e[e.CurrentVideoResolution=3]="CurrentVideoResolution",e[e.JpegDecThreadOk=4]="JpegDecThreadOk",e[e.JpegData=5]="JpegData",e[e.SharingPara=6]="SharingPara",e[e.VideoDecodeMaxSize=7]="VideoDecodeMaxSize",e[e.CurrentCaptureVideoWidthHeight=8]="CurrentCaptureVideoWidthHeight",e[e.StartVideoCaptureSuccess=9]="StartVideoCaptureSuccess",e[e.StopVideoCaptureSuccess=10]="StopVideoCaptureSuccess",e[e.StartRemoteControlSuccess=11]="StartRemoteControlSuccess",e[e.CancelRemoteControlSuccess=12]="CancelRemoteControlSuccess",e[e.RemoteControlCopiedTextNotify=13]="RemoteControlCopiedTextNotify",e[e.MonitorLog=14]="MonitorLog",e[e.CurrentDesktopSharingWidthHeight=15]="CurrentDesktopSharingWidthHeight",e[e.DesktopSharingCaptureSuccess=16]="DesktopSharingCaptureSuccess",e[e.CheckChromeSharingExtensionResponse=17]="CheckChromeSharingExtensionResponse",e[e.SharingDecodeMaxSize=18]="SharingDecodeMaxSize",e[e.DataChannelOffer=19]="DataChannelOffer",e[e.AesGcmIvResponse=21]="AesGcmIvResponse",e[e.SharingDesktopStreamHaveAudio=23]="SharingDesktopStreamHaveAudio",e[e.JoinComputerAudioComplete=24]="JoinComputerAudioComplete",e[e.JoinSharingAudioComplete=25]="JoinSharingAudioComplete",e[e.LeaveComputerAudioComplete=26]="LeaveComputerAudioComplete",e[e.LeaveSharingAudioComplete=27]="LeaveSharingAudioComplete",e[e.HidStatusMute=28]="HidStatusMute",e[e.AudioStreamFailed=31]="AudioStreamFailed",e[e.VideoStreamFailed=32]="VideoStreamFailed",e[e.AudioSpeakerSetSuccess=33]="AudioSpeakerSetSuccess",e[e.AudiobridgeSetCcLangSuccess=36]="AudiobridgeSetCcLangSuccess",e[e.AudioLevelIndicator=38]="AudioLevelIndicator",e[e.SyncRendererTypeResponse=39]="SyncRendererTypeResponse",e[e.SendRemoteControlQrCode=55]="SendRemoteControlQrCode",e[e.StartVideoStreamInMaskSettingSuccess=66]="StartVideoStreamInMaskSettingSuccess",e[e.CurrentDecodeVideoQuality=66.5]="CurrentDecodeVideoQuality",e[e.CurrentDecodeVideoFps=66.6]="CurrentDecodeVideoFps",e[e.SharingFirstDecodeFrameReceivedSsrc=70]="SharingFirstDecodeFrameReceivedSsrc",e[e.StartVideoStreamInVbSettingSuccess=94]="StartVideoStreamInVbSettingSuccess",e[e.VbModelPreloading_3S=96]="VbModelPreloading_3S",e[e.VbModelPreloading_10S=97]="VbModelPreloading_10S",e[e.VbModelPreloadingOk=98]="VbModelPreloadingOk",e[e.NewActiveSpeakerFirstFrameCallback=111]="NewActiveSpeakerFirstFrameCallback",e[e.AudioBridgeFirstRecvData=114]="AudioBridgeFirstRecvData",e[e.AudioBridgeCanSendData=115]="AudioBridgeCanSendData",e[e.InitFailed=-1]="InitFailed",e[e.InitFailedVideo=-1.1]="InitFailedVideo",e[e.InitFailedAudio=-1.2]="InitFailedAudio",e[e.InitFailedSharing=-1.3]="InitFailedSharing",e[e.UserForbiddedCaptureAudio=-2]="UserForbiddedCaptureAudio",e[e.AudioWebsocketBroken=-3]="AudioWebsocketBroken",e[e.VideoWebsocketBroken=-4]="VideoWebsocketBroken",e[e.SharingDecThreadFailed=-5]="SharingDecThreadFailed",e[e.AudioZeroData=-6]="AudioZeroData",e[e.AudioCtxSamplerate=-7]="AudioCtxSamplerate",e[e.UserForbiddedCaptureVideo=-8]="UserForbiddedCaptureVideo",e[e.UserCameraIsTakenByOtherPrograms=-9]="UserCameraIsTakenByOtherPrograms",e[e.StopVideoCaptureFailed=-10]="StopVideoCaptureFailed",e[e.StartRemoteControlFailed=-11]="StartRemoteControlFailed",e[e.CancelRemoteControlFailed=-12]="CancelRemoteControlFailed",e[e.RemoteControlPasteTextLengthOverflow=-14]="RemoteControlPasteTextLengthOverflow",e[e.UserStopDesktopSharing=-15]="UserStopDesktopSharing",e[e.UserCancelPermissionRequest=-16]="UserCancelPermissionRequest",e[e.DesktopSharingChromeExtensionUninstalled=-17]="DesktopSharingChromeExtensionUninstalled",e[e.DesktopSharingPermissionDenied=-18]="DesktopSharingPermissionDenied",e[e.DesktopSharingTimeOut=-19]="DesktopSharingTimeOut",e[e.DesktopSharingError=-20]="DesktopSharingError",e[e.AudioSpeakerSetError=-21]="AudioSpeakerSetError",e[e.DesktopSharingSystemError=-22]="DesktopSharingSystemError",e[e.SharingDesktopStreamHaveNoAudio=-27]="SharingDesktopStreamHaveNoAudio",e.AudioQosData="AUDIO_QOS_DATA",e.VideoQosData="VIDEO_QOS_DATA",e.ShareQosData="VIDEOSHARE_QOS_DATA",e.NetworkQualityChange="NETWORK_QUALITY_CHANGE",e.NetworkQualityChangeAudio="NETWORK_QUALITY_CHANGE_AUDIO",e[e.AudioBridgeReconnectStart=-29]="AudioBridgeReconnectStart",e[e.AudioBridgeReconnectEnd=-31]="AudioBridgeReconnectEnd",e[e.WebglLostInMultiView=-32]="WebglLostInMultiView",e[e.MaskSettingParaError=-33]="MaskSettingParaError",e[e.VbSettingParaError=-34]="VbSettingParaError",e[e.NotifyUIFailover=-35]="NotifyUIFailover",e[e.AudiobridgeSetCcLangFailure=-39]="AudiobridgeSetCcLangFailure",e[e.RecoverWebrtcAudio=-44]="RecoverWebrtcAudio",e[e.SharingHealthCheckFailed=-129]="SharingHealthCheckFailed",e[e.VideoHealthCheckFailed=-130]="VideoHealthCheckFailed",e[e.AudioHealthCheckFailed=-131]="AudioHealthCheckFailed",e.AudioStreamMuted="AUDIO_STREAM_MUTED",e.AudioStreamUnmuted="AUDIO_STREAM_UNMUTED",e}({}),Wr=function(e){return e[e.EncodeSuccess=1]="EncodeSuccess",e[e.DecodeSuccess=2]="DecodeSuccess",e[e.EncodeFailed=-1]="EncodeFailed",e[e.DecodeFailed=-2]="DecodeFailed",e}({}),Iv=function(e){return e.Spotlight="Spotlight",e.Unmute="Unmute",e.AllowToTalk="Allow to talk",e}({}),qi=function(e){return e.Inherited="inherited",e.Active="active",e.PassiveByMuteOne="passive(mute one)",e.PassiveByMuteAll="passive(mute all)",e.SharingAudio="sharing audio",e}({}),tc=function(e){return e.Inherited="inherited",e.Active="active",e.Passive="passive",e.SharingAudio="sharing audio",e}({}),$c=function(e){return e.Active="active",e.Failover="failover",e.EndedBySystem="audio stream is ended by system",e.Pstn="pstn",e.MicrophoneError="microphone error",e}({}),hd=function(e){return e.Join="join",e.Leave="leave",e.Muted="muted",e.Unmuted="unmuted",e}({}),rn=function(e){return e[e.Calling=1]="Calling",e[e.Ringing=2]="Ringing",e[e.Accepted=3]="Accepted",e[e.Busy=4]="Busy",e[e.NotAvailable=5]="NotAvailable",e[e.HangUp=6]="HangUp",e[e.Fail=7]="Fail",e[e.Success=8]="Success",e[e.Timeout=9]="Timeout",e[e.Canceling=10]="Canceling",e[e.Canceled=11]="Canceled",e[e.CancelFailed=12]="CancelFailed",e}({});const aB=(()=>{const e=new ArrayBuffer(684),t=new Uint32Array(e);return t.set([1179011410,676,1163280727,544501094,16,65539,16e3,64e3,2097156,1635017060,640],0),new Blob([t],{type:"audio/wav"})})(),lB=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),uB=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);let xn=function(e){return e[e.HostGrab=0]="HostGrab",e[e.OnlyHost=1]="OnlyHost",e[e.AnyoneGrab=2]="AnyoneGrab",e[e.MultipleShare=3]="MultipleShare",e}({}),Fe=function(e){return e.Sharing="sharing",e.Paused="paused",e.End="ended",e}({}),si=function(e){return e[e.Video_90P=0]="Video_90P",e[e.Video_180P=1]="Video_180P",e[e.Video_360P=2]="Video_360P",e[e.Video_720P=3]="Video_720P",e[e.Video_1080P=4]="Video_1080P",e}({}),rC=function(e){return e.Active="Active",e.Inactive="Inactive",e}({}),zp=function(e){return e.Muted="Muted",e.Unmuted="Unmuted",e}({}),Av=function(e){return e.Started="Started",e.Stopped="Stopped",e.Failed="Failed",e}({}),nC=function(e){return e.Approved="Approved",e.Rejected="Rejected",e}({}),Cv=function(e){return e.PrivilegeChange="PrivilegeChange",e.StopScreenCapture="StopScreenCapture",e.ShareFromMainSession="ShareFromMainSession",e}({}),Qk=function(e){return e[e.ImageNotMatch=2]="ImageNotMatch",e[e.CanvasNotMatch=3]="CanvasNotMatch",e[e.VBModelNotMatch=4]="VBModelNotMatch",e}({});const Uu="blur";let Da=function(e){return e.User="user",e.Environment="environment",e.Left="left",e.Right="right",e}({});const kg=Object.values(Da),as=1e3,iC="__ZOOM_SDK_SHARING_VIDEO__",pa="__ZOOM_SDK_VIDEO_ZONE__",_v="__ZOOM_SDK_MEDIA_PLAYBACK_SOURCE_VIDEO__",rc="__ZOOM_SDK_DYMMY_VIDEO_PLAYER_CANVAS_ID__",Rv="__ZOOM_SDK_DUMMY_HIDDEN_SELF_VIEW_VIDEO_ID__",Xf={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,rate:0,bandwidth:0}},Cs={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,rate:0,bandwidth:0}};let Gr=function(e){return e[e.Request=11]="Request",e[e.Decline=12]="Decline",e[e.Approve=13]="Approve",e[e.GiveUp=14]="GiveUp",e[e.StartControl=15]="StartControl",e[e.ContinueControl=16]="ContinueControl",e[e.StopControl=17]="StopControl",e[e.SwitchCamera=20]="SwitchCamera",e}({}),ls=function(e){return e[e.Bk=0]="Bk",e[e.Center=1]="Center",e[e.ZoomIn=2]="ZoomIn",e[e.ZoomOut=3]="ZoomOut",e[e.Left=4]="Left",e[e.Right=5]="Right",e[e.Up=6]="Up",e[e.Down=7]="Down",e[e.SwitchCamera=8]="SwitchCamera",e}({}),bl=function(e){return e[e.Pan=192]="Pan",e[e.Tilt=48]="Tilt",e[e.Zoom=12]="Zoom",e[e.Focus=3]="Focus",e}({});(function(e){return e[e.ZoomIn=2]="ZoomIn",e[e.ZoomOut=3]="ZoomOut",e[e.Left=4]="Left",e[e.Right=5]="Right",e[e.Up=6]="Up",e[e.Down=7]="Down",e[e.SwitchCamera=8]="SwitchCamera",e})({});(function(e){return e[e.None=0]="None",e[e.ApproveAnother=3]="ApproveAnother",e[e.Stop=5]="Stop",e})({});let nc=function(e){return e[e.Null=0]="Null",e[e.Normal=1]="Normal",e[e.VideoMode=2]="VideoMode",e}({}),xi=function(e){return e[e.Null=0]="Null",e[e.VirtualBackground=1]="VirtualBackground",e[e.Mask=2]="Mask",e}({}),ze=function(e){return e.Computer="computer",e.Phone="phone",e}({}),em=function(e){return e[e.Decline=0]="Decline",e[e.Approve=1]="Approve",e[e.CacheClean=2]="CacheClean",e}({}),gr=function(e){return e.Unknown="unknown",e.Uninstalled="uninstalled",e.Installed="installed",e}({}),tm=function(e){return e.Unlaunched="unlaunched",e.Launched="launched",e}({}),Tv=function(e){return e.Started="started",e.Ended="ended",e}({}),Ov=function(e){return e[e.Max=30]="Max",e[e.Min=10]="Min",e[e.Default=24]="Default",e}({}),xd=function(e){return e[e.Loading=1]="Loading",e[e.Done=2]="Done",e}({}),oC=function(e){return e.Browser="Browser",e.Zoom="Zoom",e}({}),sC=function(e){return e.Denoise="backgroundNoiseSuppression",e.OriginalSound="originalSound",e}({}),nb=function(e){return e[e.Undefined=0]="Undefined",e[e.WebGL=1]="WebGL",e[e.WebGPU=2]="WebGPU",e[e.WebGL2=3]="WebGL2",e}({});(function(e){return e[e.H323=1]="H323",e[e.SIP=2]="SIP",e})({});let Bh=function(e){return e[e.Success=0]="Success",e[e.Ringing=1]="Ringing",e[e.Timeout=2]="Timeout",e[e.Busy=101]="Busy",e[e.Fail=104]="Fail",e}({}),fd=function(e){return e[e.AudioConnectionFailed=101]="AudioConnectionFailed",e[e.AudioStreamEnded=102]="AudioStreamEnded",e[e.MicrophonePermissionReset=103]="MicrophonePermissionReset",e[e.AudioStreamFailed=104]="AudioStreamFailed",e[e.MicrophoneMuted=105]="MicrophoneMuted",e[e.AudioStreamMuted=106]="AudioStreamMuted",e[e.AudioPlaybackInterrupted=107]="AudioPlaybackInterrupted",e[e.VideoConnectionFailed=201]="VideoConnectionFailed",e[e.VideoStreamEnded=202]="VideoStreamEnded",e[e.CameraPermissionReset=203]="CameraPermissionReset",e[e.WebGlContextInvalid=204]="WebGlContextInvalid",e[e.WasmOutOfMemory=205]="WasmOutOfMemory",e[e.VideoStreamFailed=206]="VideoStreamFailed",e[e.SharingStreamFailed=301]="SharingStreamFailed",e}({});const Jk="RECEIVE_VIDEO_ACTIVE_INDICATION",Zk="RECEIVE_VIDEO_MUTE_INDICATION",Yk="ASK_FOR_START_VIDEO_CONSENT",ib="RECEIVE_VIDEO_DIMENSION_CHANGE",Xk="CAPTURED_VIDEO_DIMENSION_CHANGE",ob="CAN_NOT_DETECT_CAMERA",sb="CAN_NOT_FIND_CAMERA",ab="VIDEO_USER_FORBIDDEN_CAPTURE",lb="VIDEO_CAMERA_IS_TAKEN",eD="VIDEO_BACKGROUND_FAILED",tD="VIDEO_ESTABLISH_STREAM_ERROR",dw="VIDEO_CAPTURE_START_SUCCESS",mu="VIDEO_CAPTURE_STOP_RESULT",gu="VIDEO_SPOTLIGHT_CHANGE",rD="VIDEO_FOLLOW_HOST_ORDER_CHANGE",nD="VIDEO_HOST_DRAG_LAYOUT_CHANGE",iD="VIDEO_NEW_USER_START",Hh="VIDEO_OLD_USER_STOP",rm="VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",ub="VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",db="VIDEO_STATISTIC_DATA",cb="VIDEO_CELL_DETAILED_DATA",pb="VIDEO_NETWORK_QUALITY_CHANGE",oD="VIDEO_FAR_END_CAMERA_CONTROL_REQUEST",hb="VIDEO_FAR_END_CAMERA_CONTROL_RESPONSE",nm="VIDEO_FAR_END_CAMERA_IN_CONTROL_CHANGE",sD="VIDEO_FAR_END_CAMERA_CAPABILITY_CHANGE",fb="VIDEO_MASK_SETTING_SUCCESS",aD="VIDEO_CAPTURE_SDK_SUCCESS",lD="VIDEO_PREFETCH_VIDEO_FRAME_CALLBACK",uD="VIDEO_CURRENT_USER_SSRC",dD="VIDEO_RENDER_ASPECT_RATIO_CHANGE",im="VIDEO_LEADERSHIP_USER_CHANGE",aC={startCaptureVideo:{success:dw,fail:[ob,sb,ab,tD,lb,eD]},switchCameraVideo:{success:aD,fail:[ob,sb,ab,lb]}};let cr=function(e){return e.VideoActiveChange="video-active-change",e.PeerVideoStateChange="peer-video-state-change",e.VideoSpotlightChange="video-spotlight-change",e.VideoMutedChange="video-muted-change",e.VideoCapturingChange="video-capturing-change",e.AskForStartVideoConsent="ask-for-start-video-consent",e.VideoDimensionChange="video-dimension-change",e.VideoFollowHostOrder="video-follow-host-order-change",e.VideoHostLayoutChange="video-host-layout-change",e.VideoVBPreloadChange="video-virtual-background-preload-change",e.VideoStatisticDataChange="video-statistic-data-change",e.VideoDetailedDataChange="video-detailed-data-change",e.VideoAspectRatioChange="video-aspect-ratio-change",e.NetworkQualityChange="network-quality-change",e.FarEndCameraRequestControl="far-end-camera-request-control",e.FarEndCameraResponseControl="far-end-camera-response-control",e.FarEndCameraInControlChange="far-end-camera-in-control-change",e.FarEndCameraCapabilityChange="far-end-camera-capability-change",e}({});const dB={[cr.VideoActiveChange]:[{event:Jk,payload:e=>({state:e.bVideoOn?rC.Active:rC.Inactive,userId:e.userId})}],[cr.VideoCapturingChange]:[{event:dw,payload:()=>({state:Av.Started})},{event:mu,payload:e=>({state:e!=null&&e.failed?Av.Failed:Av.Stopped})}],[cr.VideoMutedChange]:[{event:Zk,payload:e=>({state:e.isVideoMuted?zp.Muted:zp.Unmuted,userId:e.id})}],[cr.AskForStartVideoConsent]:[{event:Yk,payload:e=>({state:e.isVideoMuted?zp.Muted:zp.Unmuted,userId:e.id})}],[cr.VideoSpotlightChange]:[{event:gu,payload:e=>({spotlightList:e.spotlightList&&e.spotlightList.map(t=>({userId:t}))})},{event:im,payload:e=>{var t;return{spotlightList:(t=e.spotlightList)===null||t===void 0?void 0:t.map(r=>({userId:r}))}}}],[cr.VideoDimensionChange]:[{event:ib,payload:e=>({type:"received",width:e.width,height:e.height})},{event:Xk,payload:e=>({type:"captured",width:e.width,height:e.height})}],[cr.VideoFollowHostOrder]:[{event:rD,payload:e=>({isFollowHostOrder:e.bOn})}],[cr.VideoHostLayoutChange]:[{event:nD,payload:e=>Array.isArray(e.layout)?e.layout.map(t=>({userId:t})):[]}],[cr.PeerVideoStateChange]:[{event:iD,payload:e=>({action:"Start",...e})},{event:Hh,payload:e=>({action:"Stop",...e})}],[cr.VideoVBPreloadChange]:[{event:rm,payload:e=>({isReady:e})}],[cr.VideoStatisticDataChange]:[{event:db,payload:e=>{const{data:{rate:t,...r},...n}=e??{data:{}};return{data:{bitrate:t,...r},...n}}}],[cr.VideoDetailedDataChange]:[{event:cb,payload:e=>e}],[cr.VideoAspectRatioChange]:[{event:dD,payload:e=>e}],[cr.NetworkQualityChange]:[{event:pb,payload:e=>e}],[cr.FarEndCameraRequestControl]:[{event:oD,payload:e=>e}],[cr.FarEndCameraResponseControl]:[{event:hb,payload:e=>e}],[cr.FarEndCameraInControlChange]:[{event:nm,payload:e=>e}],[cr.FarEndCameraCapabilityChange]:[{event:sD,payload:e=>e}]},cD="AUDIO_ACTIVE_SPEAKER",zh="AUDIO_UNMUTE_CONSENT",Yl="AUDIO_CURRENT_USER_JOIN_BY_VOIP",mb="AUDIO_CURRENT_USER_JOIN_BY_PHONE",Dg="AUDIO_CURRENT_USER_LEAVE_AUDIO",cw="AUDIO_CURRENT_USER_MUTED",pw="AUDIO_CURRENT_USER_UNMUTED",pD="AUDIO_PARTICIPANT_AUDIO_UPDATE",hD="AUDIO_DIALOUT_RESULT_CODE",fD="AUDIO_DIALOUT_RESULT_SUCCESS",mD="AUDIO_DIALOUT_RESULT_FAIL",gD="AUDIO_DIALOUT_CANCEL_SUCCESS",vD="DIALOUT_CANCEL_FAIL",yD="AUDIO_MERGE_AUDIO_INDICATION",SD="USER_FORBIDDEN_MICROPHONE",bD="ESTABLISH_AUDIO_STREAM_ERROR",ED="AUDIO_AUTO_PLAY_FAILED",lC="INVALID_DEVICE_ID",wD="AUDIO_ALLOW_TALK_CHANGE",ju="SHARE_AUDIO_STATE_CHANGE",gb="AUDIO_STATISTIC_DATA",ID="AUDIO_CURRENT_USER_SSRC",vb="AUDIO_SET_SPEAKER_RESULT",AD="AUDIO_SHARE_SECONDARY_AUDIO_SUCCESS",CD="AUDIO_CRC_CALL_OUT_RESULT_CODE",_D="AUDIO_CRC_CALL_OUT_RESULT_SUCCESS",RD="AUDIO_CRC_CALL_OUT_RESULT_FAIL",TD="AUDIO_CURRENT_AUDIO_LEVEL_CHANGE";let fi=function(e){return e.ActiveSpeaker="active-speaker",e.UnmuteAudioConsent="unmute-audio-consent",e.CurrentAudioChange="current-audio-change",e.CurrentAudioLevelChange="current-audio-level-change",e.DialoutStateChange="dialout-state-change",e.MergeAudio="merged-audio",e.AutoPlayFailed="auto-play-audio-failed",e.AllowTalkChange="allow-talk-change",e.ShareAudioChange="share-audio-change",e.AudioStatisticDataChange="audio-statistic-data-change",e.CrcCallOutStateChange="crc-call-out-state-change",e}({});const Js={JoinComputerAudio:{success:Yl,fail:[SD,bD]},JoinAudioByCallMe:{success:fD,fail:[mD]},cancelDialOut:{success:gD,fail:[vD]},hangup:{success:Dg},crcCallOut:{success:_D,fail:[RD]}},cB={[fi.ActiveSpeaker]:[{event:cD,payload:e=>e}],[fi.UnmuteAudioConsent]:[{event:zh,payload:e=>({reason:e})}],[fi.CurrentAudioChange]:[{event:mb,payload:()=>({action:hd.Join,type:ze.Phone})},{event:Yl,payload:()=>({action:hd.Join,type:ze.Computer})},{event:Dg,payload:e=>{let{source:t}=e;return{action:hd.Leave,source:t}}},{event:cw,payload:e=>{let{source:t}=e;return{action:hd.Muted,source:t}}},{event:pw,payload:e=>{let{source:t}=e;return{action:hd.Unmuted,source:t}}}],[fi.DialoutStateChange]:[{event:hD,payload:e=>e}],[fi.MergeAudio]:[{event:yD,payload:e=>e}],[fi.AutoPlayFailed]:[{event:ED,payload:()=>{}}],[fi.AllowTalkChange]:[{event:wD,payload:e=>({enabled:e})}],[fi.ShareAudioChange]:[{event:ju,payload:e=>e}],[fi.AudioStatisticDataChange]:[{event:gb,payload:e=>{const{data:{rate:t,...r},...n}=e??{data:{}};return{data:{bitrate:t,...r},...n}}}],[fi.CrcCallOutStateChange]:[{event:CD,payload:e=>e}],[fi.CurrentAudioLevelChange]:[{event:TD,payload:e=>e}]},yb="SHARE_ACTIVE_INDICATION",Sb="SHARE_CHECK_CHROME_SHARING_EXTENSION",OD="SHARE_START_DESKTOP_SHARE_FAILED",PD="SHARE_DIMENSION_CHANGE",om="SHARE_RECEIVED_DIMENSION_CHANGE",kD="SHARE_VIDEO_STREAMS_END",DD="SHARE_PASSIVE_STOP_SHARE",MD="SHARE_PASSIVE_BO_STOP",hw="SHARE_NEW_USER_ADD",fw="SHARE_USER_REMOVE",ND="SHARE_USER_PAUSED",LD="SHARE_USER_RESUMED",sm="SHARE_AUTO_CHANGE_SOURCE",am="SHARE_REMOTE_CONTROL_APPROVE",Ga="SHARE_GRAB_REMOTE_CONTROL_CHANGE",bb="SHARE_REMOTE_CONTROL_CLIPBOARD_CHANGE",VD="SHARE_REMOTE_CONTROL_SUCCESS",xD="SHARE_REMOTE_CONTROL_FAILED",UD="SHARE_PRIVILEGE_CHANGE",jD="SHARE_READ_RECEIPT",Eb="SHARE_STATISTIC_DATA",$D="SHARE_REMOTE_CONTROL_REQUEST",ha="SHARE_REMOTE_CONTROL_APP_STATUS",Wh="SHARE_REMOTE_CONTROL_SESSION_STATUS",FD="SHARE_REMOTE_CONTROL_APP_SCHEME";let mn=function(e){return e.ShareActiveChange="active-share-change",e.ShareDimensionChange="share-content-dimension-change",e.SharePassiveStop="passively-stop-share",e.SharePeerStateChange="peer-share-state-change",e.ShareContentChange="share-content-change",e.SharePrivilegeChange="share-privilege-change",e.ShareReadReceipt="share-can-see-screen",e.ShareStatisticDataChange="share-statistic-data-change",e.RemoteControlApprovedChange="remote-control-approved-change",e.RemoteControlInControlChange="remote-control-in-control-change",e.RemoteControlClipboardChange="remote-control-clipboard-change",e.RemoteControlRequestChange="remote-control-request-change",e.RemoteControlAppStatusChange="remote-control-app-status-change",e.RemoteControlControlledStatusChange="remote-control-controlled-status-change",e}({});const pB={[mn.ShareActiveChange]:[{event:yb,payload:e=>{const{isActive:t,activeUserId:r,...n}=e;return{state:t?"Active":"Inactive",userId:r,...n}}}],[mn.ShareDimensionChange]:[{event:PD,payload:e=>({type:"sended",width:e.width,height:e.height})},{event:om,payload:e=>({type:"received",width:e.width,height:e.height})}],[mn.SharePassiveStop]:[{event:kD,payload:()=>({reason:Cv.StopScreenCapture})},{event:DD,payload:()=>({reason:Cv.PrivilegeChange})},{event:MD,payload:()=>({reason:Cv.ShareFromMainSession})}],[mn.SharePeerStateChange]:[{event:hw,payload:e=>({userId:e.id,action:"Start"})},{event:fw,payload:e=>({userId:e.id,action:"Stop"})},{event:ND,payload:e=>({userId:e.id,action:"Pause"})},{event:LD,payload:e=>({userId:e.id,action:"Resume"})}],[mn.ShareContentChange]:[{event:sm,payload:e=>e}],[mn.SharePrivilegeChange]:[{event:UD,payload:e=>({privilege:e})}],[mn.ShareReadReceipt]:[{event:jD,payload:()=>{}}],[mn.ShareStatisticDataChange]:[{event:Eb,payload:e=>{const{data:{rate:t,...r},...n}=e??{data:{}};return{data:{bitrate:t,...r},...n}}}],[mn.RemoteControlApprovedChange]:[{event:am,payload:e=>({state:e?nC.Approved:nC.Rejected})}],[mn.RemoteControlInControlChange]:[{event:Ga,payload:e=>({isControlling:e})}],[mn.RemoteControlClipboardChange]:[{event:bb,payload:e=>e}],[mn.RemoteControlRequestChange]:[{event:$D,payload:e=>e}],[mn.RemoteControlAppStatusChange]:[{event:ha,payload:e=>e}],[mn.RemoteControlControlledStatusChange]:[{event:Wh,payload:e=>e}]};let fo=function(e){return e.Question="question",e.UpdateQuestion="updateQuestion",e.Answer="answer",e.DeleteComment="deleteComment",e.DeleteQuestion="deleteQuestion",e.Dismiss="dismiss",e.Reopen="reopen",e.Upvote="upvote",e.AnswerLive="answerLive",e}({}),uC=function(e){return e.QaSettingChange="qa-setting-change",e.QaActionChange="qa-action-change",e}({});const hB={[uC.QaSettingChange]:[{event:"QA_SETTING_OPTION_CHANGE",payload:e=>e}],[uC.QaActionChange]:[{event:"QA_NEW_ASK_QUESTION",payload:e=>({action:fo.Question,data:e})},{event:"QA_UPDATE_ANONYMOUS_QUESTION",payload:e=>({action:fo.UpdateQuestion,data:e})},{event:"QA_ANSWER_QUESTION",payload:e=>({action:fo.Answer,data:e})},{event:"QA_ANSWER_REMOVE_COMMENT",payload:e=>({action:fo.DeleteComment,data:e})},{event:"QA_ANSWER_REMOVE_QUESTION",payload:e=>({action:fo.DeleteQuestion,data:e})},{event:"QA_ANSWER_DISMISS_QUESTION",payload:e=>({action:fo.Dismiss,data:e})},{event:"QA_ANSWER_REOPEN_QUESTION",payload:e=>({action:fo.Reopen,data:e})},{event:"QA_ANSWER_VOTE_QUESTION",payload:e=>({action:fo.Upvote,data:e})},{event:"QA_ANSWER_QUESTION_LIVE",payload:e=>({action:fo.AnswerLive,data:e})}]},W="INVALID_OPERATION",Pi="INTERNAL_ERROR",mw="OPERATION_TIMEOUT",Sr="INSUFFICIENT_PRIVILEGES",vu="IMPROPER_MEETING_STATE",Te="INVALID_PARAMETERS",BD="AUDIO_ENCODE_SUCCESS",HD="AUDIO_DECODE_SUCCESS",zD="VIDEO_ENCODE_SUCCESS",WD="VIDEO_DECODE_SUCCESS",GD="SHARING_ENCODE_SUCCESS",wb="SHARING_DECODE_SUCCESS",KD="AUDIO_ENCODE_FAIL",qD="AUDIO_DECODE_FAIL",QD="VIDEO_ENCODE_FAIL",JD="VIDEO_DECODE_FAIL",ZD="SHARING_ENCODE_FAIL",YD="SHARING_DECODE_FAIL",XD="MEDIA_DEVICE_CHANGE",Gh="MEDIS_SDK_PATHCH_LOADED",eM="AUDIO_BRIDGE_PEER_CONNECTION_RECEIVE_READY",tM="AUDIO_BRIDGE_PEER_CONNECTION_SEND_READY",rM="DEVICE_PERMISSION_CHANGE",nM="MEDIA_HEALTH_CHECK_FAILED";let Wp=function(e){return e.DeviceChange="device-change",e.MediaSDKChange="media-sdk-change",e.DevicePermissionChange="device-permission-change",e.MediaInternalError="media-internal-error",e}({});const fB={[Wp.DeviceChange]:[{event:XD,payload:()=>({})}],[Wp.MediaSDKChange]:[{event:BD,payload:()=>({type:"audio",action:"encode",result:"success"})},{event:KD,payload:()=>({type:"audio",action:"encode",result:"fail"})},{event:HD,payload:()=>({type:"audio",action:"decode",result:"success"})},{event:qD,payload:()=>({type:"audio",action:"decode",result:"fail"})},{event:zD,payload:()=>({type:"video",action:"encode",result:"success"})},{event:QD,payload:()=>({type:"video",action:"encode",result:"fail"})},{event:WD,payload:()=>({type:"video",action:"decode",result:"success"})},{event:JD,payload:()=>({type:"video",action:"decode",result:"fail"})},{event:GD,payload:()=>({type:"share",action:"encode",result:"success"})},{event:ZD,payload:()=>({type:"share",action:"encode",result:"fail"})},{event:wb,payload:()=>({type:"share",action:"decode",result:"success"})},{event:YD,payload:()=>({type:"share",action:"decode",result:"fail"})}],[Wp.DevicePermissionChange]:[{event:rM,payload:e=>e}],[Wp.MediaInternalError]:[{event:nM,payload:e=>e}]},iM="BREAKOUT_ROOM_ADD_TOKEN",Kh="BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",Ib="BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",Ab="BREAKOUT_ROOM_ROOM_COUTDOWN",oM="BREAKOUT_ROOM_BROADCAST_MESSAGE",sM="BREAKOUT_ROOM_ASK_HELP_REQUEST",gw="BREAKOUT_ROOM_ASK_HELP_RESPONSE",Ea="BREAKOUT_ROOM_ATTRIBUTE_INDICATION",qh="BREAKOUT_ROOM_JOIN_BO_RESPONSE",aM="BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP",Cb="BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",lM="BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS",uM="BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE",dM="BREAKOUT_ROOM_INVITE_TO_BACK_NOTIFICATION",cM="BREAKOUT_ROOM_IN_ROOM_USER_STATUS_UPDATE",pM="BREAKOUT_ROOM_BROADCAST_VOICE";let Zn=function(e){return e.InviteToJoin="invite-to-join",e.RoomCountdown="room-countdown",e.RoomTimeUp="room-time-up",e.ClosingRoomCountdown="closing-room-countdown",e.BroadcastMessage="broadcast-message",e.AskForHelp="ask-for-help",e.AskForHelpResponse="ask-for-help-response",e.RoomStateChange="room-state-change",e.MainSessionUserUpdate="main-session-user-updated",e.InviteToBack="invite-back-to-main-session",e.RoomUserUpdate="room-user-update",e.BroadcastVoice="broadcast-voice",e}({});const mB={[Zn.InviteToJoin]:[{event:Kh,payload:e=>e}],[Zn.RoomCountdown]:[{event:Ab,payload:e=>e}],[Zn.RoomTimeUp]:[{event:aM,payload:e=>e}],[Zn.ClosingRoomCountdown]:[{event:Ib,payload:e=>e}],[Zn.BroadcastMessage]:[{event:oM,payload:e=>e}],[Zn.AskForHelp]:[{event:sM,payload:e=>e}],[Zn.AskForHelpResponse]:[{event:gw,payload:e=>e}],[Zn.RoomStateChange]:[{event:Ea,payload:e=>({status:e.controlStatus})}],[Zn.MainSessionUserUpdate]:[{event:uM,payload:()=>({})}],[Zn.InviteToBack]:[{event:dM,payload:e=>e}],[Zn.RoomUserUpdate]:[{event:cM,payload:e=>e}],[Zn.BroadcastVoice]:[{event:pM,payload:e=>e}]};var _b=function(e){return e.StatusUpdate="archiving-status-update",e.OptionsUpdate="archiving-options-update",e}(_b||{});const gB={[_b.StatusUpdate]:[{event:"ARCHIVING_STATUS_UPDATE",payload:e=>e}],[_b.OptionsUpdate]:[{event:"ARCHIVING_OPTIONS_UPDATE",payload:e=>e}]};let Pv=function(e){return e.PollDataChange="poll-data-change",e.PollSizeUpdate="poll-size-update",e.PollStatusUpdate="poll-status-update",e}({});const vB={[Pv.PollDataChange]:[{event:"POLL_DATA_CHANGE",payload:e=>e}],[Pv.PollSizeUpdate]:[{event:"POLL_SIZE_UPDATE",payload:e=>e}],[Pv.PollStatusUpdate]:[{event:"POLL_STATUS_UPDATE",payload:e=>e}]};let dC=function(e){return e.ReactionReceived="reaction-received",e.ReactionRemoved="reaction-removed",e}({});const yB={[dC.ReactionReceived]:[{event:"REACTION_RECEIVED",payload:e=>e}],[dC.ReactionRemoved]:[{event:"REACTION_REMOVED",payload:e=>e}]},ms="SMART_SUMMARY_STATUS_CHANGE",gs="MEETING_QUERY_STATUS_CHANGE";let cC=function(e){return e.SummaryChange="summary-status-change",e.MeetingQueryChang="meeting-query-status-change",e}({});const SB={[cC.SummaryChange]:[{event:ms,payload:e=>e}],[cC.MeetingQueryChang]:[{event:gs,payload:e=>e}]},ic="LIVE_STREAM_STATUS_CHANGE",bB={"live-stream-status":[{event:ic,payload:e=>e}]},pC={...tB,...rB,...nB,...iB,...sB,...cB,...dB,...hB,...pB,...fB,...mB,...gB,"closed-caption-message":[{event:"CC_RECEIVE_MESSAGE",payload:e=>e}],"closed-caption-lt-status":[{event:"LT_STATUS_CHANGE",payload:e=>e}],"closed-caption-lt-message":[{event:"LT_RECEIVE_MESSAGE",payload:e=>e}],"closed-caption-status":[{event:"CC_ASSIGN_CC_EDITOR_SUCCESS",payload:e=>e},{event:"CC_STATUS_CHANGE",payload:e=>e}],...vB,...yB,...SB,...bB},oc=function(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}(),fa=new Map,Rb=new Array,Tb=[fs,mt,xr];let Ma,Ob;const T=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;oc.emit(e,t)};function Ka(e){return Tb.includes(e)?Ot(oc,e):(Ma&&Ob||(Ma=new Fn,Ob=Wt(...Tb.map(t=>Ot(oc,t))).subscribe(Ma)),Ot(oc,e).pipe(Zr(Ma)))}const So=e=>new Promise((t,r)=>{e.fail&&e.fail.length>0?jr(Ka(e.success).pipe(xe(1)),Wt(...e.fail.map(n=>Ka(n).pipe(xe(1),G(i=>Oa({type:n,payload:i})))))).subscribe({next:n=>t(n),error(n){typeof n.payload=="object"?r({type:n.type,...n.payload}):n.payload===void 0?r({type:n.type}):r(n)}}):Ka(e.success).pipe(xe(1)).subscribe(n=>t(n))}),Ce=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e4;return new Promise((n,i)=>{let o=re;typeof e=="string"?o=Ka(e).pipe(xe(1)):(o=Ka(e.event),e.operations&&(o=e.operations.reduce((s,a)=>s.pipe(a),o))),jr(o,Nt(r).pipe(G(()=>Oa("timeout")))).subscribe({next(s){if(t){const a=t(s);typeof a=="boolean"?a?n(""):i({type:Pi}):a.ret===0?n(a.body):i({type:Pi,reason:a.body})}else n(s)},error(){i({type:mw})}})})},Ge=(e,t)=>t!==void 0?Ka(e).pipe(xe(t)):Ka(e);function Pb(e){return jr(...Tb.map(t=>Ge(t,1)))}const vw=()=>{var e;Rb.forEach(t=>{t.unsubscribe()}),Rb.length=0,fa.clear(),Ma&&(Ma.complete(),(e=Ob)===null||e===void 0||e.unsubscribe(),Ma=void 0)},EB="SET_ATTENDEES_LIST",wB="SET_ASSISTANT_LIST",IB="RESET_PARTICIPANTS",AB="SET_IS_ADMIT_ALL_SILENT_USERS",CB="SET_CLEAR_RAISE_HAND",_B="SET_CLEAR_ATTENDEE_FEEDBACK",RB="ADD_FAILOVER_ATTENDEES",TB="REMOVE_FAILOVER_ATTENDEES",OB="UPDATE_ATTENDEE_DISPLAY_NAME",PB="REMOVE_XMPP_ATTENDEE_USER",kB="UPDATE_XMPP_ATTENDEE_LIST",DB="SET_ATTENDEE_EXTRA_KEY",{setAttendeesList:$u,setAssistantList:zW,setIsAdmitAllSilentUsers:hM,resetParticipants:fM,addFailoverAttendees:kb,removeFailoverAttendees:mM,setClearRaiseHand:gM,setClearAttendeeFeedback:vM,updateAttendeeDisplayName:yM,removeXmppAttendeeUser:SM,updateXmppAttendeeList:bM,setAttendeeExtraKey:Fc}=rr({[EB]:e=>e,[wB]:e=>e,[kB]:e=>e,[IB]:()=>({}),[AB]:e=>e,[TB]:e=>e,[RB]:e=>e,[CB]:()=>({}),[_B]:()=>({}),[OB]:e=>e,[PB]:e=>e,[DB]:e=>e});var Gp="NOT_FOUND",MB=function(e,t){return e===t};function EM(e,t){var r,n,i=typeof t=="object"?t:{equalityCheck:t},o=i.equalityCheck,s=o===void 0?MB:o,a=i.maxSize,l=a===void 0?1:a,u=i.resultEqualityCheck,d=function(h){return function(m,f){if(m===null||f===null||m.length!==f.length)return!1;for(var v=m.length,g=0;g<v;g++)if(!h(m[g],f[g]))return!1;return!0}}(s),c=l===1?(r=d,{get:function(h){return n&&r(n.key,h)?n.value:Gp},put:function(h,m){n={key:h,value:m}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}):function(h,m){var f=[];function v(g){var y=f.findIndex(function(b){return m(g,b.key)});if(y>-1){var S=f[y];return y>0&&(f.splice(y,1),f.unshift(S)),S.value}return Gp}return{get:v,put:function(g,y){v(g)===Gp&&(f.unshift({key:g,value:y}),f.length>h&&f.pop())},getEntries:function(){return f},clear:function(){f=[]}}}(l,d);function p(){var h=c.get(arguments);if(h===Gp){if(h=e.apply(null,arguments),u){var m=c.getEntries().find(function(f){return u(f.value,h)});m&&(h=m.value)}c.put(arguments,h)}return h}return p.clearCache=function(){return c.clear()},p}function wM(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var a,l=0,u={memoizeOptions:void 0},d=o.pop();if(typeof d=="object"&&(u=d,d=o.pop()),typeof d!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof d+"]");var c=u.memoizeOptions,p=c===void 0?r:c,h=Array.isArray(p)?p:[p],m=function(g){var y=Array.isArray(g[0])?g[0]:g;if(!y.every(function(b){return typeof b=="function"})){var S=y.map(function(b){return typeof b=="function"?"function "+(b.name||"unnamed")+"()":typeof b}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+S+"]")}return y}(o),f=e.apply(void 0,[function(){return l++,d.apply(null,arguments)}].concat(h)),v=e(function(){for(var g=[],y=m.length,S=0;S<y;S++)g.push(m[S].apply(null,arguments));return a=f.apply(null,g)});return Object.assign(v,{resultFunc:d,memoizedResultFunc:f,dependencies:m,lastResult:function(){return a},recomputations:function(){return l},resetRecomputations:function(){return l=0}}),v}}var dt=wM(EM);const qo=e=>{let{participants:{attendeesList:t}}=e;return t},IM=e=>{let{meeting:{userId:t}}=e;return t},Db=e=>{let{participants:{xmppAttendeeList:t}}=e;return t};let al=function(e){return e[e.Attendee=0]="Attendee",e[e.Host=1]="Host",e[e.Owner=4]="Owner",e[e.ViewOnly=8]="ViewOnly",e[e.HostOwner=5]="HostOwner",e[e.ViewOnlyCanTalk=24]="ViewOnlyCanTalk",e}({}),NB=function(e){return e[e.Host=10]="Host",e[e.Panelist=20]="Panelist",e[e.Attendee=30]="Attendee",e}({}),Mb=function(e){return e[e.Client=9]="Client",e[e.Phone=5]="Phone",e[e.H323=15]="H323",e[e.Assitant=51]="Assitant",e}({});const Bc=e=>(e&al.Host)===al.Host,ll=e=>(e&Mb.Phone)===Mb.Phone,lm=e=>e===al.ViewOnlyCanTalk,Xt=e=>(e&al.ViewOnly)===al.ViewOnly;let Na=function(e){return e[e.Automatically=1]="Automatically",e[e.Manually=2]="Manually",e[e.SelfSelect=3]="SelfSelect",e}({}),Ve=function(e){return e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Closing=3]="Closing",e[e.Closed=4]="Closed",e}({}),AM=function(e){return e[e.NoToken=1]="NoToken",e[e.GotToken=2]="GotToken",e[e.Started=3]="Started",e[e.Closing=4]="Closing",e[e.Closed=5]="Closed",e}({}),Ee=function(e){return e.Initial="initial",e.Invited="invited",e.Joining="joining",e.InRoom="in room",e.Leaving="leaving",e.TimeUp="time up",e.MainSession="main session",e}({}),Zs=function(e){return e.Join="joinRequest",e.Switch="switchRequest",e.Leave="leaveRequest",e.Broadcast="messageText",e.HelpReq="helpRequest",e.HelpRes="helpResponse",e.CoHostWantJoinThisBo="wantJoinThisBO",e.BOActivity="BOActivity",e}({});const hC="Subsession";let vs=function(e){return e[e.Received=0]="Received",e[e.Busy=1]="Busy",e[e.Ignore=2]="Ignore",e[e.AlreadyInRoom=3]="AlreadyInRoom",e}({}),fC=function(e){return e[e.AskToLeave=0]="AskToLeave",e[e.ClosingRoom=1]="ClosingRoom",e}({}),LB=function(e){return e[e.Active=0]="Active",e[e.Ask=1]="Ask",e}({}),kv=function(e){return e[e.Connect=1]="Connect",e[e.Muted=2]="Muted",e[e.Voip=4]="Voip",e}({}),mC=function(e){return e[e.Connect=8]="Connect",e[e.On=16]="On",e}({}),gC=function(e){return e[e.Share=32]="Share",e[e.ShareAudio=64]="ShareAudio",e}({});const CM=e=>{let{breakoutRoom:t}=e;return t&&t.controlStatus},_M=e=>{let{breakoutRoom:t}=e;return t&&t.currentRoom.status},ye=dt([IM,qo],(e,t)=>t.find(r=>r.userId===e)),An=dt([ye],e=>(e==null?void 0:e.isHost)||(e==null?void 0:e.bCoHost)),RM=dt([ye],e=>e==null?void 0:e.isHost),gp=dt([Db],e=>e.filter(t=>t.userRole===NB.Attendee)),VB=dt([qo],e=>e.filter(t=>t.bHold&&!t.bid)),et=dt([qo,CM,_M],(e,t,r)=>t!==Ve.InProgress&&t!==Ve.Closing||r!==Ee.InRoom?e.filter(n=>!n.bHold&&!n.bid):e.filter(n=>!n.bHold)),xB=dt([e=>{let{participants:{assistantList:t}}=e;return t}],e=>e),Nb=dt([et],e=>e.find(t=>t.isHost)),vC=dt([et],e=>e.filter(t=>t.bCoHost)),yw=dt([ye,et],(e,t)=>t.filter(r=>r.userId!==(e==null?void 0:e.userId)));dt([Db],e=>e.reduce((t,r)=>{const{jid:n}=r;return Object.assign(t,{[n]:r}),t},{})),dt([Db,e=>{let{meeting:{jid:t}}=e;return t}],(e,t)=>{var r;return(r=e.find(n=>n.jid===t))===null||r===void 0?void 0:r.userId});const UB=dt([qo],function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).some(e=>(e==null?void 0:e.bLocalRecord)===jc.Start)}),jB=dt([CM,e=>{let{meeting:t}=e;return t&&t.meetingOptions},qo,RM],(e,t,r,n)=>{const i=r.filter(a=>a.bCoHost),{moveToWRIfHostLeave:o}=t,s=e===Ve.InProgress;return n&&!!o&&i.length<=0&&!s&&r.length>1});dt([qo,_M,e=>{let{breakoutRoom:t}=e;return t&&t.mainSessionAttendeeList}],(e,t,r)=>(t===Ee.InRoom?r:e).filter(n=>{return!(n.bHold||n.isHost||n.audio===ze.Phone||ll(n==null?void 0:n.userType)||(i=n==null?void 0:n.caps,o=n==null?void 0:n.bMultiStreamVideoUser,((s,a)=>(l=>!!(128&l))(s)&&a!==void 0)(i,o)&&o));var i,o}));let Je=function(e){return e.Closed="closed",e.Connecting="connecting",e.Connected="connected",e}({});function nr(e){return 1<<e-1}let gn=function(e){return e[e.SupportASL=nr(1)]="SupportASL",e[e.SidecarPhase2=nr(2)]="SidecarPhase2",e[e.SupportBroadcastVoice=nr(4)]="SupportBroadcastVoice",e[e.SendMeetingTokenSeparately=nr(5)]="SendMeetingTokenSeparately",e[e.SupportPreview=nr(6)]="SupportPreview",e[e.WebCameraIndication=nr(7)]="WebCameraIndication",e[e.SupportFarEndCameraControl=nr(9)]="SupportFarEndCameraControl",e[e.SupportVideoShare=nr(10)]="SupportVideoShare",e[e.UnifyErrorType=nr(11)]="UnifyErrorType",e[e.WhiteBoard=nr(12)]="WhiteBoard",e[e.RequestRemoteControl=nr(14)]="RequestRemoteControl",e[e.SmartSummary=nr(15)]="SmartSummary",e[e.LocalRecording=nr(16)]="LocalRecording",e[e.LocalRecordingGrantPermission=nr(17)]="LocalRecordingGrantPermission",e[e.ShareMultiStream=nr(18)]="ShareMultiStream",e[e.VideoLTR=nr(19)]="VideoLTR",e[e.WebrtcAudioRtcpTime=nr(20)]="WebrtcAudioRtcpTime",e[e.SupportSend1080PVideo=nr(29)]="SupportSend1080PVideo",e[e.SupportSend1080PVideoShare=nr(30)]="SupportSend1080PVideoShare",e}({});const{setAsnIds:TM,setIsCanUnmute:OM,setDialoutSequence:PM,setDialoutResultCode:kM,setIsAllowToTalk:Lb,setAudioSsrc:DM,setIsMutedUponEntry:MM,setIsUserGrantCaptureAudio:NM,setIsMicrophoneForbidden:Sw,setWebrtcRestartCount:vp,setMicrophoneList:LM,setSpeakerList:VM,setActiveMicrophone:Hc,setActiveSpeaker:Mg,setCanPlayAudio:Fu,resetAudio:xM,setIsComputerAudioLoading:ma,setIsAllowToTalkAttendeeConnected:Vb,setIsMuteBeforeSharingAudio:Vo,addLocalShareAudioUser:UM,updateLocalShareAudioUser:jM,setIsJoinComputerAudioBeforeSharingAudio:Bu,setIsShareAudioEnabled:Ng,setIsShareAudioMuted:um,setIsSharingAudio:Hu,setAudioDataEncoding:dm,setAudioDataDecoding:cm,addLocallyMutedAudio:$M,removeLocallyMutedAudio:pm,updateUserAudioVolumeLocally:FM,removeLocalUserAudioVolume:BM,setCustomizedAudioOption:bw,setIsBackgroundNoiseSuppression:xb,setIsHidEnabled:HM,setAudioMediaPlaybackFile:Ub,setIsStopAllIncomingAudio:jb,setIsVerifiedAudioPermissionOnIosMobile:zM,setIsAudioBridgeSignalReconnecting:Ew,setAudioMutedSource:Ao,setAudioUnmutedSource:zc,setAudioOriginalSound:$b,setLeaveAudioSource:ul,setSecondaryAudioMicrophoneId:hm,setCrcCallOutSequence:WM,setCrcCallOutReturnCode:GM}=rr("SET_ASN_IDS","SET_IS_CAN_UNMUTE","SET_DIALOUT_SEQUENCE","SET_DIALOUT_RESULT_CODE","SET_IS_ALLOW_TO_TALK","SET_AUDIO_SSRC","SET_IS_MUTED_UPON_ENTRY","SET_IS_USER_GRANT_CAPTURE_AUDIO","SET_IS_MICROPHONE_FORBIDDEN","SET_WEBRTC_RESTART_COUNT","SET_MICROPHONE_LIST","SET_SPEAKER_LIST","SET_ACTIVE_MICROPHONE","SET_ACTIVE_SPEAKER","SET_CAN_PLAY_AUDIO","RESET_AUDIO","SET_IS_COMPUTER_AUDIO_LOADING","SET_IS_ALLOW_TO_TALK_ATTENDEE_CONNECTED","SET_IS_MUTE_BEFORE_SHARING_AUDIO","SET_IS_SHARING_AUDIO","ADD_LOCAL_SHARE_AUDIO_USER","UPDATE_LOCAL_SHARE_AUDIO_USER","SET_IS_JOIN_COMPUTER_AUDIO_BEFORE_SHARING_AUDIO","SET_IS_SHARE_AUDIO_ENABLED","SET_IS_SHARE_AUDIO_MUTED","SET_AUDIO_DATA_ENCODING","SET_AUDIO_DATA_DECODING","ADD_LOCALLY_MUTED_AUDIO","REMOVE_LOCALLY_MUTED_AUDIO","UPDATE_USER_AUDIO_VOLUME_LOCALLY","REMOVE_LOCAL_USER_AUDIO_VOLUME","SET_CUSTOMIZED_AUDIO_OPTION","SET_IS_BACKGROUND_NOISE_SUPPRESSION","SET_IS_HID_ENABLED","SET_AUDIO_MEDIA_PLAYBACK_FILE","SET_IS_STOP_ALL_INCOMING_AUDIO","SET_IS_VERIFIED_AUDIO_PERMISSION_ON_IOS_MOBILE","SET_IS_AUDIO_BRIDGE_SIGNAL_RECONNECTING","SET_AUDIO_MUTED_SOURCE","SET_AUDIO_UNMUTED_SOURCE","SET_AUDIO_ORIGINAL_SOUND","SET_LEAVE_AUDIO_SOURCE","SET_SECONDARY_AUDIO_MICROPHONE_ID","SET_CRC_CALL_OUT_SEQUENCE","SET_CRC_CALL_OUT_RETURN_CODE"),{setSharePrivilege:ww,setShareActiveNode:fm,setIsReceiveSharing:mm,setIsChromeExtensionInstalled:KM,setIsScreenShareForbidden:yC,setShareDimension:qM,setShareStatus:an,setShareSsrc:QM,setShareQuality:Iw,setReceivedShareDimension:Fb,setIsGrabRemoteControl:Qh,setIsSdkGrabControl:Bb,setIsReceiveSharingFromMainSession:JM,setIsSharingToBreakoutRoom:Ud,setIsSharingWithSecondCamera:ZM,setShringSecondCameraId:YM,setIsRequireReadReceipt:XM,setIsOptimizedForSharedVideo:gm,setShareDataEncoding:Hb,setShareDataDecoding:Wc,addShareCapturedEnsuredCanvas:eN,addShareRenderedEnsuredCanvas:tN,setRemoteControlCurrentSsrc:WW,setRemoteControllingSsrc:sc,setApprovedRemoteControlSsrc:yu,setRemoteControlAppDownloadUrl:rN,setRemoteControlAppInstallStatus:wa,remoteControlAppStatusFallbackCheck:SC,remoteControlAppLaunchedCheck:Dv,setIsEnableAutoDeleteRcApp:GW,setRemoteControlAppLaunchSheme:eo,addSharingUserIdSsrcMapping:zb,addRemoteControlledUser:nN,removeRemoteControlledUser:Wb,setRemoteControlSetting:Aw,setRemoteControlViewportDomSelector:iN,setIsFullHdVideoShareEnabled:oN,resetShare:sN}=rr("SET_SHARE_PRIVILEGE","SET_SHARE_ACTIVE_NODE","SET_IS_RECEIVE_SHARING","SET_IS_CHROME_EXTENSION_INSTALLED","SET_IS_SCREEN_SHARE_FORBIDDEN","SET_SHARE_DIMENSION","SET_SHARE_STATUS","SET_SHARE_SSRC","SET_SHARE_QUALITY","SET_RECEIVED_SHARE_DIMENSION","SET_IS_GRAB_REMOTE_CONTROL","SET_IS_SDK_GRAB_CONTROL","SET_IS_RECEIVE_SHARING_FROM_MAIN_SESSION","SET_IS_SHARING_TO_BREAKOUT_ROOM","SET_IS_SHARING_WITH_SECOND_CAMERA","SET_SHRING_SECOND_CAMERA_ID","SET_IS_REQUIRE_READ_RECEIPT","SET_IS_OPTIMIZED_FOR_SHARED_VIDEO","SET_SHARE_DATA_ENCODING","SET_SHARE_DATA_DECODING","ADD_SHARE_CAPTURED_ENSURED_CANVAS","ADD_SHARE_RENDERED_ENSURED_CANVAS","SET_REMOTE_CONTROL_CURRENT_SSRC","SET_REMOTE_CONTROLLING_SSRC","SET_APPROVED_REMOTE_CONTROL_SSRC","SET_REMOTE_CONTROL_APP_DOWNLOAD_URL","SET_REMOTE_CONTROL_APP_INSTALL_STATUS","REMOTE_CONTROL_APP_STATUS_FALLBACK_CHECK","REMOTE_CONTROL_APP_LAUNCHED_CHECK","SET_IS_ENABLE_AUTO_DELETE_RC_APP","SET_REMOTE_CONTROL_APP_LAUNCH_SHEME","ADD_SHARING_USER_ID_SSRC_MAPPING","ADD_REMOTE_CONTROLLED_USER","REMOVE_REMOTE_CONTROLLED_USER","SET_REMOTE_CONTROL_SETTING","SET_REMOTE_CONTROL_VIEWPORT_DOM_SELECTOR","SET_IS_FULL_HD_VIDEO_SHARE_ENABLED","RESET_SHARE"),{setVideoSsrc:aN,setActiveVideoId:lN,setCameraList:Cw,setActiveCamera:Gc,setIsCurrentUserStartedVideo:uN,setSpotlightVideo:Gb,setIsCaptureForbidden:vm,setVideoMaxQuality:dN,setIsVideoMuted:cN,setIsCaptureCameraLoading:Xl,setIsCameraTaken:ym,resetVideo:pN,setReceivedVideoDimension:Kb,addSubscribedVideoId:Jh,removeSubscribedVideoId:Zh,setIsFollowHostVideoLayout:hN,setHostDragLayout:fN,addRenderedVideoId:Su,removeRenderedVideoId:Sm,setIsSupportHdVideo:mN,setMaximumNumbeOfHdSubscriptions:gN,setIsCanUnmuteVideo:vN,setIsVbPreloadReady:qb,setIsVbConfiged:bm,setVbImageSrc:Yh,setVideoDataEncoding:Em,setVideoDataDecoding:wm,setHardwareAccelerationState:Ml,setVideoCaptureCustomizedOption:yN,setNetworkQuality:Qb,setVideoCameraPtzCapabilities:SN,setIsCurrentUserRequestCameraControlled:Im,setIsCurrentUserCameraInControl:Am,addVideoFarEndCameraControlUser:bN,removeVideoFarEndCameraControlUser:Cm,setVideoPtzCameraMoving:Jb,setVideoPtzCameraValue:_w,setIsControllingFarEndCamera:Zb,setNetworkQualityBroadcastTime:EN,setIsMaskConfiged:_m,setVideoBackgroundMode:$B,setVideoMask:Xh,setVideoCapturedDimension:wN,addVideoRenderedEnsuredCanvas:IN,setVideoMediaPlaybackFile:Yb,setPrefetchedVideoUser:bu,setVideoQosSubscriptionStatus:Xb,setIsSupportFullHdVideo:AN,addVideoPlayerAttachment:CN,removeVideoPlayerAttachment:ef,setIsWebGl2RendererType:_N,setIsWebGpuRendererType:RN,setVideoRendererType:TN,setIsVideoMirrored:ON,addSelfPreviewVideoTag:PN,removeSelfPreviewVideoTag:e0,setVideoLeadershipUserId:kN}=rr("SET_VIDEO_SSRC","SET_ACTIVE_VIDEO_ID","SET_CAMERA_LIST","SET_ACTIVE_CAMERA","SET_IS_CURRENT_USER_STARTED_VIDEO","SET_SPOTLIGHT_VIDEO","SET_IS_CAPTURE_FORBIDDEN","SET_VIDEO_MAX_QUALITY","SET_IS_VIDEO_MUTED","SET_IS_CAPTURE_CAMERA_LOADING","SET_IS_CAMERA_TAKEN","RESET_VIDEO","SET_RECEIVED_VIDEO_DIMENSION","ADD_SUBSCRIBED_VIDEO_ID","REMOVE_SUBSCRIBED_VIDEO_ID","SET_IS_FOLLOW_HOST_VIDEO_LAYOUT","SET_HOST_DRAG_LAYOUT","ADD_RENDERED_VIDEO_ID","REMOVE_RENDERED_VIDEO_ID","SET_IS_SUPPORT_HD_VIDEO","SET_MAXIMUM_NUMBE_OF_HD_SUBSCRIPTIONS","SET_IS_CAN_UNMUTE_VIDEO","SET_IS_VB_PRELOAD_READY","SET_IS_VB_CONFIGED","SET_VB_IMAGE_SRC","SET_VIDEO_DATA_ENCODING","SET_VIDEO_DATA_DECODING","SET_HARDWARE_ACCELERATION_STATE","SET_VIDEO_CAPTURE_CUSTOMIZED_OPTION","SET_NETWORK_QUALITY","SET_VIDEO_CAMERA_PTZ_CAPABILITIES","SET_IS_CURRENT_USER_REQUEST_CAMERA_CONTROLLED","SET_IS_CURRENT_USER_CAMERA_IN_CONTROL","ADD_VIDEO_FAR_END_CAMERA_CONTROL_USER","REMOVE_VIDEO_FAR_END_CAMERA_CONTROL_USER","SET_VIDEO_PTZ_CAMERA_MOVING","SET_VIDEO_PTZ_CAMERA_VALUE","SET_IS_CONTROLLING_FAR_END_CAMERA","SET_NETWORK_QUALITY_BROADCAST_TIME","SET_IS_MASK_CONFIGED","SET_VIDEO_BACKGROUND_MODE","SET_VIDEO_MASK","SET_VIDEO_CAPTURED_DIMENSION","ADD_VIDEO_RENDERED_ENSURED_CANVAS","SET_VIDEO_MEDIA_PLAYBACK_FILE","SET_PREFETCHED_VIDEO_USER","SET_VIDEO_QOS_SUBSCRIPTION_STATUS","SET_IS_SUPPORT_FULL_HD_VIDEO","ADD_VIDEO_PLAYER_ATTACHMENT","REMOVE_VIDEO_PLAYER_ATTACHMENT","SET_IS_WEB_GL2_RENDERER_TYPE","SET_IS_WEB_GPU_RENDERER_TYPE","SET_VIDEO_RENDERER_TYPE","SET_IS_VIDEO_MIRRORED","ADD_SELF_PREVIEW_VIDEO_TAG","REMOVE_SELF_PREVIEW_VIDEO_TAG","SET_VIDEO_LEADERSHIP_USER_ID"),{setQaSetting:KW,addQaQuestion:qW,addQaAnswer:QW,removeQaComment:JW,removeQaQuestion:ZW,dismissQaQuestion:YW,reopenQaQuestion:XW,voteQaQuestion:e5,answerQaQuestionLive:t5,updateAttendeeAnonymousQuestion:r5,setQaEnabled:n5,resetQa:FB}=rr("SET_QA_SETTING","ADD_QA_QUESTION","ADD_QA_ANSWER","REMOVE_QA_COMMENT","REMOVE_QA_QUESTION","DISMISS_QA_QUESTION","REOPEN_QA_QUESTION","VOTE_QA_QUESTION","ANSWER_QA_QUESTION_LIVE","UPDATE_ATTENDEE_ANONYMOUS_QUESTION","SET_QA_ENABLED","RESET_QA"),{setChatPrivilege:Rw,setPanelistChatPrivilege:DN,addChatMessageHistory:Kc,resetChat:MN,setIsAllowAttendeeChat:NN,setLatestChatMessageId:LN,removeChatMessage:tf,setFileChatSetting:VN,addChatFileRecord:Tw,updateChatFileRecord:ir,cancelSendFileChat:qc,addFailedChatFileTransfer:Ow,setChatFileMessageId:xN,cancelDownloadFileChat:Pw}=rr("SET_CHAT_PRIVILEGE","SET_PANELIST_CHAT_PRIVILEGE","ADD_CHAT_MESSAGE_HISTORY","RESET_CHAT","SET_IS_ALLOW_ATTENDEE_CHAT","SET_LATEST_CHAT_MESSAGE_ID","REMOVE_CHAT_MESSAGE","SET_FILE_CHAT_SETTING","ADD_CHAT_FILE_RECORD","UPDATE_CHAT_FILE_RECORD","CANCEL_SEND_FILE_CHAT","ADD_FAILED_CHAT_FILE_TRANSFER","SET_CHAT_FILE_MESSAGE_ID","CANCEL_DOWNLOAD_FILE_CHAT"),{setCcEditorInfo:UN,setTempSendCcText:i5,setCcLtMessage:o5,setTempReceiveLtText:s5,setTempReceiveCcText:a5,setGatewayInfoList:l5,setLtEnable:u5,setIsListenClosedCaption:d5,setCcEnable:c5,allowParticipantAskLt:p5,receiveAskStartLt:h5,setMeetingEnabledLtFeature:f5,updateLtStatus:m5,deleteMessage:g5,updateMessage:v5,resetClosedCaption:BB}=rr("SET_CC_EDITOR_INFO","SET_CC_LT_MESSAGE","SET_TEMP_SEND_CC_TEXT","SET_TEMP_RECEIVE_LT_TEXT","SET_TEMP_RECEIVE_CC_TEXT","SET_GATEWAY_INFO_LIST","SET_LT_ENABLE","SET_IS_LISTEN_CLOSED_CAPTION","SET_CC_ENABLE","ALLOW_PARTICIPANT_ASK_LT","RECEIVE_ASK_START_LT","SET_MEETING_ENABLED_LT_FEATURE","UPDATE_LT_STATUS","DELETE_MESSAGE","UPDATE_MESSAGE","RESET_CLOSED_CAPTION"),{addBreakoutRooms:jN,setBreakoutRoomAllocationPattern:t0,setBreakoutRoomSequenceId:Rm,setMeetingElapsedTime:r0,setStartRoomElapsedTime:$N,setBreakoutRoomOptions:FN,setBreakoutRoomControlStatus:BN,setBreakoutRooms:ac,setCurrentBreakoutRoom:Tm,setBreakoutRoomAttendeeStatus:qa,setBreakoutRoomConfId:n0,setBreakoutRoomToken:i0,resetBreakoutRoom:HN,setBreakoutRoomClosingRoomTime:o0,setBreakoutRoomBroadcastMessage:zN,setBreakoutRoomHostReplyType:kw,setBreakoutRoomHostReplyRequestId:WN,setMainSessionAttendeeList:GN,setIsHugeBreakoutRoom:KN,setBreakoutRoomPreAssignedRoomList:s0,setBreakoutRoomUserRoleUpdated:a0,setBreakoutRoomMeetingOptions:qN,setBreakoutRoomUserActivityStatus:QN,setBreakoutRoomIsBroadcastVoice:Om}=rr("ADD_BREAKOUT_ROOMS","SET_BREAKOUT_ROOM_ALLOCATION_PATTERN","SET_BREAKOUT_ROOM_SEQUENCE_ID","SET_MEETING_ELAPSED_TIME","SET_START_ROOM_ELAPSED_TIME","SET_BREAKOUT_ROOM_OPTIONS","SET_BREAKOUT_ROOM_CONTROL_STATUS","SET_BREAKOUT_ROOMS","SET_CURRENT_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_ATTENDEE_STATUS","SET_BREAKOUT_ROOM_CONF_ID","SET_BREAKOUT_ROOM_TOKEN","RESET_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_CLOSING_ROOM_TIME","SET_BREAKOUT_ROOM_BROADCAST_MESSAGE","SET_BREAKOUT_ROOM_HOST_REPLY_TYPE","SET_BREAKOUT_ROOM_HOST_REPLY_REQUEST_ID","SET_MAIN_SESSION_ATTENDEE_LIST","SET_IS_HUGE_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_PRE_ASSIGNED_ROOM_LIST","SET_BREAKOUT_ROOM_USER_ROLE_UPDATED","SET_BREAKOUT_ROOM_MEETING_OPTIONS","SET_BREAKOUT_ROOM_USER_ACTIVITY_STATUS","SET_BREAKOUT_ROOM_IS_BROADCAST_VOICE"),{setCloudRecordingStatus:JN,setCloudRecordingEnable:ZN,setCloudIsoRecordingEnable:YN,setAllowStopAutoRecording:XN,setAutomaticCloudRecordingEnable:eL,setIsZoomIQ:Dw,setZoomIQChanging:Mw,setLocalRecordStatus:Nw,setSupportLocalRecording:l0,setLocalGrantPermissionOption:tL,setLocalPermissionUserList:Eu,resetRecording:rL}=rr("SET_CLOUD_RECORDING_STATUS","SET_CLOUD_RECORDING_ENABLE","SET_CLOUD_ISO_RECORDING_ENABLE","SET_ALLOW_STOP_AUTO_RECORDING","SET_AUTOMATIC_CLOUD_RECORDING_ENABLE","SET_IS_ZOOM_I_Q","SET_ZOOM_I_Q_CHANGING","SET_LOCAL_RECORD_STATUS","SET_SUPPORT_LOCAL_RECORDING","SET_LOCAL_GRANT_PERMISSION_OPTION","SET_LOCAL_PERMISSION_USER_LIST","RESET_RECORDING"),{updateCmdJid:nL,removeCmdJid:iL,setCmdChannelConnectionStatus:oL,resetCmdChannel:sL}=rr("UPDATE_CMD_JID","REMOVE_CMD_JID","SET_CMD_CHANNEL_CONNECTION_STATUS","RESET_CMD_CHANNEL"),HB="SET_ARCHIVING_STATUS",zB="SET_ARCHIVING_SESSION_READY",WB="SET_ARCHIVING_OPTIONS",GB="RESET_ARCHIVING",{setArchivingStatus:y5,setArchivingSessionReady:S5,setArchivingOptions:b5,resetArchiving:KB}=rr({[HB]:e=>e,[zB]:e=>e,[WB]:e=>e,[GB]:()=>{}}),{setIsLiveTranscriptionEnabled:aL,setLiveTranscriptionMeetingOptions:lL,setIsLiveTranscriptionManualCaptionerEnabled:u0,setLiveTranscriptionGatewayId:uL,setLiveTranscriptionSupportedLanguage:dL,setIsLiveTranscriptionSubscribed:d0,setCurrentTranscriptionLang:La,setCurrentTranslationLang:Pm,addLiveTranscriptionMessage:c0,updateLiveTranscriptionMessage:cL,reduceLiveTranscriptionMessages:pL,setLiveTranscriptionEngineType:hL,removeLiveTranscriptionFailoverState:fL,setLiveTranscriptionLastCaptionMessage:mL,resetLiveTranscription:gL,setIsHostDisableCaptions:vL}=rr("SET_IS_LIVE_TRANSCRIPTION_ENABLED","SET_LIVE_TRANSCRIPTION_MEETING_OPTIONS","SET_IS_LIVE_TRANSCRIPTION_MANUAL_CAPTIONER_ENABLED","SET_LIVE_TRANSCRIPTION_GATEWAY_ID","SET_LIVE_TRANSCRIPTION_SUPPORTED_LANGUAGE","SET_IS_LIVE_TRANSCRIPTION_SUBSCRIBED","SET_CURRENT_TRANSCRIPTION_LANG","SET_CURRENT_TRANSLATION_LANG","ADD_LIVE_TRANSCRIPTION_MESSAGE","UPDATE_LIVE_TRANSCRIPTION_MESSAGE","REDUCE_LIVE_TRANSCRIPTION_MESSAGES","SET_LIVE_TRANSCRIPTION_ENGINE_TYPE","REMOVE_LIVE_TRANSCRIPTION_FAILOVER_STATE","SET_LIVE_TRANSCRIPTION_LAST_CAPTION_MESSAGE","RESET_LIVE_TRANSCRIPTION"," SET_IS_HOST_DISABLE_CAPTIONS"),{setPollData:E5,setPollingId:w5,setPollingWebLinks:I5,setPollingDocMaxSize:A5,setPollingDocSize:C5,setPollingDocLibraryMaxSize:_5,setPollingDocLibrarySize:R5,setIsRwgEnablePolling:T5,setHasPollingInMeeting:O5,resetPoll:qB}=rr("SET_POLL_DATA","SET_POLLING_ID","SET_POLLING_WEB_LINKS","SET_POLLING_DOC_MAX_SIZE","SET_POLLING_DOC_SIZE","SET_POLLING_DOC_LIBRARY_MAX_SIZE","SET_POLLING_DOC_LIBRARY_SIZE","SET_IS_RWG_ENABLE_POLLING","SET_HAS_POLLING_IN_MEETING","RESET_POLL"),{setLoggerInitOptions:Lw,setIsLaplaceInitialized:km,resetLogger:yL}=rr("SET_LOGGER_INIT_OPTIONS","SET_IS_LAPLACE_INITIALIZED","RESET_LOGGER"),{setIsLiveStreamEnable:SL,setLiveStreamStatus:Dm,resetLiveStream:bL}=rr("SET_IS_LIVE_STREAM_ENABLE","SET_LIVE_STREAM_STATUS","RESET_LIVE_STREAM");var bC,EC,wC={exports:{}},IC={exports:{}},QB=LP(Object.freeze({__proto__:null,default:{},loadAsync:function(){}})),JB=(EC||(EC=1,function(e,t){var r=function(P,I){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,A){E.__proto__=A}||function(E,A){for(var _ in A)A.hasOwnProperty(_)&&(E[_]=A[_])},r(P,I)};function n(P,I){function E(){this.constructor=P}r(P,I),P.prototype=I===null?Object.create(I):(E.prototype=I.prototype,new E)}var i,o=function(){return o=Object.assign||function(P){for(var I,E=1,A=arguments.length;E<A;E++)for(var _ in I=arguments[E])Object.prototype.hasOwnProperty.call(I,_)&&(P[_]=I[_]);return P},o.apply(this,arguments)};function s(){}function a(){a.init.call(this)}function l(P){return P._maxListeners===void 0?a.defaultMaxListeners:P._maxListeners}function u(P,I,E,A){var _,C,V;if(typeof E!="function")throw new TypeError('"listener" argument must be a function');if((C=P._events)?(C.newListener&&(P.emit("newListener",I,E.listener?E.listener:E),C=P._events),V=C[I]):(C=P._events=new s,P._eventsCount=0),V){if(typeof V=="function"?V=C[I]=A?[E,V]:[V,E]:A?V.unshift(E):V.push(E),!V.warned&&(_=l(P))&&_>0&&V.length>_){V.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+I+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=P,M.type=I,M.count=V.length,function($){typeof console.warn=="function"?console.warn($):console.log($)}(M)}}else V=C[I]=E,++P._eventsCount;return P}function d(P,I,E){var A=!1;function _(){P.removeListener(I,_),A||(A=!0,E.apply(P,arguments))}return _.listener=E,_}function c(P){var I=this._events;if(I){var E=I[P];if(typeof E=="function")return 1;if(E)return E.length}return 0}function p(P,I){for(var E=new Array(I);I--;)E[I]=P[I];return E}s.prototype=Object.create(null),a.EventEmitter=a,a.usingDomains=!1,a.prototype.domain=void 0,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.init=function(){this.domain=null,a.usingDomains&&i.active&&i.Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new s,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||isNaN(P))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=P,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(P){var I,E,A,_,C,V,M,$=P==="error";if(V=this._events)$=$&&V.error==null;else if(!$)return!1;if(M=this.domain,$){if(I=arguments[1],!M){if(I instanceof Error)throw I;var B=new Error('Uncaught, unspecified "error" event. ('+I+")");throw B.context=I,B}return I||(I=new Error('Uncaught, unspecified "error" event')),I.domainEmitter=this,I.domain=M,I.domainThrown=!1,M.emit("error",I),!1}if(!(E=V[P]))return!1;var ee=typeof E=="function";switch(A=arguments.length){case 1:(function(ie,be,le){if(be)ie.call(le);else for(var te=ie.length,ve=p(ie,te),Ae=0;Ae<te;++Ae)ve[Ae].call(le)})(E,ee,this);break;case 2:(function(ie,be,le,te){if(be)ie.call(le,te);else for(var ve=ie.length,Ae=p(ie,ve),me=0;me<ve;++me)Ae[me].call(le,te)})(E,ee,this,arguments[1]);break;case 3:(function(ie,be,le,te,ve){if(be)ie.call(le,te,ve);else for(var Ae=ie.length,me=p(ie,Ae),Me=0;Me<Ae;++Me)me[Me].call(le,te,ve)})(E,ee,this,arguments[1],arguments[2]);break;case 4:(function(ie,be,le,te,ve,Ae){if(be)ie.call(le,te,ve,Ae);else for(var me=ie.length,Me=p(ie,me),F=0;F<me;++F)Me[F].call(le,te,ve,Ae)})(E,ee,this,arguments[1],arguments[2],arguments[3]);break;default:for(_=new Array(A-1),C=1;C<A;C++)_[C-1]=arguments[C];(function(ie,be,le,te){if(be)ie.apply(le,te);else for(var ve=ie.length,Ae=p(ie,ve),me=0;me<ve;++me)Ae[me].apply(le,te)})(E,ee,this,_)}return!0},a.prototype.addListener=function(P,I){return u(this,P,I,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(P,I){return u(this,P,I,!0)},a.prototype.once=function(P,I){if(typeof I!="function")throw new TypeError('"listener" argument must be a function');return this.on(P,d(this,P,I)),this},a.prototype.prependOnceListener=function(P,I){if(typeof I!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(P,d(this,P,I)),this},a.prototype.removeListener=function(P,I){var E,A,_,C,V;if(typeof I!="function")throw new TypeError('"listener" argument must be a function');if(!(A=this._events))return this;if(!(E=A[P]))return this;if(E===I||E.listener&&E.listener===I)--this._eventsCount==0?this._events=new s:(delete A[P],A.removeListener&&this.emit("removeListener",P,E.listener||I));else if(typeof E!="function"){for(_=-1,C=E.length;C-- >0;)if(E[C]===I||E[C].listener&&E[C].listener===I){V=E[C].listener,_=C;break}if(_<0)return this;if(E.length===1){if(E[0]=void 0,--this._eventsCount==0)return this._events=new s,this;delete A[P]}else(function(M,$){for(var B=$,ee=B+1,ie=M.length;ee<ie;B+=1,ee+=1)M[B]=M[ee];M.pop()})(E,_);A.removeListener&&this.emit("removeListener",P,V||I)}return this},a.prototype.removeAllListeners=function(P){var I,E;if(!(E=this._events))return this;if(!E.removeListener)return arguments.length===0?(this._events=new s,this._eventsCount=0):E[P]&&(--this._eventsCount==0?this._events=new s:delete E[P]),this;if(arguments.length===0){for(var A,_=Object.keys(E),C=0;C<_.length;++C)(A=_[C])!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=new s,this._eventsCount=0,this}if(typeof(I=E[P])=="function")this.removeListener(P,I);else if(I)do this.removeListener(P,I[I.length-1]);while(I[0]);return this},a.prototype.listeners=function(P){var I,E=this._events;return E&&(I=E[P])?typeof I=="function"?[I.listener||I]:function(A){for(var _=new Array(A.length),C=0;C<_.length;++C)_[C]=A[C].listener||A[C];return _}(I):[]},a.listenerCount=function(P,I){return typeof P.listenerCount=="function"?P.listenerCount(I):c.call(P,I)},a.prototype.listenerCount=c,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var h="ZipInfo:";function m(P){var I;return(I=P==null?void 0:P.path)===null||I===void 0?void 0:I.startsWith(h)}function f(P){return typeof P=="string"&&P.startsWith(h)}function v(P,I){return(Array.isArray(P)?P:[P]).some(function(E){if(typeof E.version!="number")throw new Error("file version must be an int number");return E.version<I})}function g(P,I){return P.reduce(function(E,A){return E.then(function(_){return I(_,A)}).catch(function(){return I(void 0,A)})},Promise.resolve(void 0))}var y,S=function(P){function I(){return P!==null&&P.apply(this,arguments)||this}return n(I,P),I}(a),b="resource",R=function(P){function I(E){var A=P.call(this)||this;if(A.ready=!1,A.openError=!1,A.isEnable()){var _=E||{},C=_.nameSpaceId,V=_.indexDbVersion;A.dbName=function($){return"resource-manager"+($?"-"+$:"")}(C);var M=indexedDB.open(A.dbName,V||1);M.addEventListener("error",function(){A.openError=!0,A.checkReady(),A.emit("error",new Error("failed to open indexedDB"))}),M.addEventListener("success",function(){A.db=M.result,A.checkReady()}),M.addEventListener("upgradeneeded",function(){A.db=M.result,A.handleSuccess()}),setTimeout(function(){A.checkReady()},5e3)}else A.checkReady();return A}return n(I,P),I.prototype.checkReady=function(){this.ready||(this.ready=!0,this.emit("ready"))},I.prototype.handleSuccess=function(){if(!this.db.objectStoreNames||this.db.objectStoreNames.length===0||!this.db.objectStoreNames.contains(b)){var E=this.db.createObjectStore(b,{keyPath:"path",autoIncrement:!1});E.createIndex("path","path"),E.createIndex("sourceURL","sourceURL",{unique:!1})}},I.prototype.createAction=function(E){var A=this.db.transaction([b],E||"readonly");return{trans:A,store:A.objectStore(b)}},I.prototype.handleAction=function(E,A){return new Promise(function(_,C){var V=A();E.addEventListener("complete",function(){_(V.result)}),E.addEventListener("error",function(){C(E.error||new Error("transaction error"))}),E.addEventListener("abort",function(){C(E.error||new Error("transaction aborted"))})})},I.prototype.put=function(){for(var E=[],A=0;A<arguments.length;A++)E[A]=arguments[A];var _=this.createAction("readwrite"),C=_.trans,V=_.store;return this.handleAction(C,function(){return V.put.apply(V,E)})},I.prototype.getAllKeysFromIndex=function(E){for(var A=[],_=1;_<arguments.length;_++)A[_-1]=arguments[_];if(IDBObjectStore.prototype.getAllKeys){var C=this.createAction(),V=C.trans,M=C.store;return this.handleAction(V,function(){var $;return($=M.index(E)).getAllKeys.apply($,A)})}return this.openKeyCursor(E)},I.prototype.getAllFromIndex=function(E){for(var A=[],_=1;_<arguments.length;_++)A[_-1]=arguments[_];var C=this.createAction(),V=C.trans,M=C.store;return IDBObjectStore.prototype.getAll?this.handleAction(V,function(){var $;return($=M.index(E)).getAll.apply($,A)}):this.openCursor(E)},I.prototype.getFromIndex=function(E){for(var A=[],_=1;_<arguments.length;_++)A[_-1]=arguments[_];var C=this.createAction(),V=C.trans,M=C.store;return this.handleAction(V,function(){var $;return($=M.index(E)).get.apply($,A)})},I.prototype.deleteKey=function(){for(var E=[],A=0;A<arguments.length;A++)E[A]=arguments[A];var _=this.createAction("readwrite"),C=_.trans,V=_.store;return this.handleAction(C,function(){return V.delete.apply(V,E)})},I.prototype.handleCursorAction=function(E,A,_,C){return new Promise(function(V,M){A.addEventListener("success",function(){A.result?(_(C,A.result),A.result.continue()):V(C)}),A.addEventListener("error",function(){M(E.error||new Error("transaction error"))})})},I.prototype.openKeyCursor=function(E){for(var A,_=[],C=1;C<arguments.length;C++)_[C-1]=arguments[C];var V=this.createAction("readwrite"),M=V.trans,$=V.store;return this.handleCursorAction(M,(A=$.index(E)).openKeyCursor.apply(A,_),function(B,ee){return B.push(ee.key),B},[])},I.prototype.openCursor=function(E){for(var A,_=[],C=1;C<arguments.length;C++)_[C-1]=arguments[C];var V=this.createAction("readwrite"),M=V.trans,$=V.store;return this.handleCursorAction(M,(A=$.index(E)).openCursor.apply(A,_),function(B,ee){return B.push(ee.value),B},[])},I.prototype.isEnable=function(){return!!window.indexedDB&&!this.openError},I.prototype.saveFile=function(E){return this.db?this.put(E).then(function(){return!0}):Promise.resolve(!1)},I.prototype.removeFile=function(E){var A=this;return this.db?typeof E=="string"?this.getAllKeysFromIndex("path").then(function(_){var C=(_||[]).filter(function(V){return V===E||V.startsWith(""+E+t.sep)});return Promise.all(C.map(function(V){return A.deleteKey(V)}))}).then(function(){return!0}):this.deleteKey(E.path).then(function(){return!0}):Promise.resolve(!1)},I.prototype.clear=function(){if(!this.db)return Promise.resolve(!1);var E=this.createAction("readwrite"),A=E.trans,_=E.store;return this.handleAction(A,function(){return _.clear()}).then(function(){return!0})},I.prototype.findFileByPath=function(E){return this.db&&E?this.getFromIndex("path",E):Promise.resolve(void 0)},I.prototype.findFileBySourceURL=function(E){return this.db&&E?this.getAllFromIndex("sourceURL",E):Promise.resolve([])},I.prototype.isDirectory=function(E){var A=this;return this.db?new Promise(function(_){f(E)?_(!1):A.getAllKeysFromIndex("path").then(function(C){return(C||[]).some(function(V){return V.startsWith(""+E+t.sep)})}).then(_).catch(function(){return _(!1)})}):Promise.resolve(!1)},I.prototype.ls=function(E){var A=this;return this.db?this.getAllKeysFromIndex("path").then(function(_){var C=[];return Promise.all((_||[]).map(function(V){if(f(V))return Promise.resolve(void 0);if(E){if(V.startsWith(""+E+t.sep)){var M=V.split(""+E+t.sep)[1]||"";if(M.includes(t.sep)){var $=""+E+t.sep+M.split(t.sep)[0];return $&&!C.includes($)?(C.push($),Promise.resolve($)):Promise.resolve(void 0)}return A.getFromIndex("path",V)}return Promise.resolve(void 0)}if(V.includes(t.sep)){var B=V.split(t.sep)[0]||"";return B&&!C.includes(B)?(C.push(B),Promise.resolve(B)):Promise.resolve(void 0)}return A.getFromIndex("path",V)})).then(function(V){return V.filter(function(M){return!!M})})}):Promise.resolve([])},I}(S),w=function(P){function I(){var E=P!==null&&P.apply(this,arguments)||this;return E.memoryFiles=[],E}return n(I,P),I.prototype.isEnable=function(){return!0},I.prototype.saveFile=function(E){var A=this;return new Promise(function(_){A.memoryFiles.some(function(C,V){return C.path===E.path&&(A.memoryFiles.splice(V,1,E),!0)})||A.memoryFiles.push(E),_(!0)})},I.prototype.removeFile=function(E){var A=this;return new Promise(function(_){for(var C=A.memoryFiles.length-1;C>=0;C--){var V=A.memoryFiles[C];(typeof E=="string"&&(V.path===E||V.path.startsWith(""+E+t.sep))||E.path===V.path)&&A.memoryFiles.splice(C,1)}_(!0)})},I.prototype.clear=function(){var E=this;return new Promise(function(A){E.memoryFiles=[],A(!0)})},I.prototype.findFileByPath=function(E){var A=this;return new Promise(function(_){_(A.memoryFiles.filter(function(C){return C.path===E})[0])})},I.prototype.findFileBySourceURL=function(E){var A=this;return new Promise(function(_){_(A.memoryFiles.filter(function(C){return C.sourceURL===E}))})},I.prototype.isDirectory=function(E){var A=this;return new Promise(function(_){f(E)?_(!1):_(A.memoryFiles.some(function(C){return C.path.startsWith(""+E+t.sep)}))})},I.prototype.ls=function(E){var A=this;return new Promise(function(_){var C=[];A.memoryFiles.forEach(function(V){if(!m(V))if(E){if(V.path.startsWith(""+E+t.sep)){var M=V.path.split(""+E+t.sep)[1]||"";if(M.includes(t.sep)){var $=""+E+t.sep+M.split(t.sep)[0];return void($&&!C.includes($)&&C.push($))}C.push(V)}}else if(V.path.includes(t.sep)){var B=V.path.split(t.sep)[0]||"";B&&!C.includes(B)&&C.push(B)}else C.push(V)}),_(C)})},I}(S),O=function(P){function I(E){var A=P.call(this)||this;if(A.isLocalAvaliable=void 0,A.isEnable()){var _=(E||{}).nameSpaceId;A.storageName=function(C){return"resource-manager"+(C?"-"+C:"")}(_)}return A}return n(I,P),I.prototype.isEnable=function(){if(this.isLocalAvaliable!==void 0)return this.isLocalAvaliable;try{this.isLocalAvaliable=!0,localStorage.setItem("privateTest","")}catch{this.isLocalAvaliable=!1}return this.isLocalAvaliable},I.prototype.saveFile=function(E){var A=this;return this.isEnable()?new Promise(function(_){var C=A.getLocalFile();C.some(function(V,M){return V.path===E.path&&(C.splice(M,1,E),!0)})||C.push(E),localStorage.setItem(A.storageName,JSON.stringify(C)),_(!0)}):Promise.resolve(!1)},I.prototype.getLocalFile=function(){var E=localStorage.getItem(this.storageName),A=[];if(E)try{A=JSON.parse(E)||"[]"}catch(_){console.log(_)}return A},I.prototype.removeFile=function(E){var A=this;return this.isEnable()?new Promise(function(_){for(var C=A.getLocalFile(),V=C.length-1;V>=0;V--){var M=C[V];(typeof E=="string"&&(M.path===E||M.path.startsWith(""+E+t.sep))||E.path===M.path)&&C.splice(V,1)}localStorage.setItem(A.storageName,JSON.stringify(C)),_(!0)}):Promise.resolve(!1)},I.prototype.clear=function(){var E=this;return this.isEnable()?new Promise(function(A){localStorage.removeItem(E.storageName),A(!0)}):Promise.resolve(!1)},I.prototype.findFileByPath=function(E){var A=this;return this.isEnable()?new Promise(function(_){_(A.getLocalFile().filter(function(C){return C.path===E})[0])}):Promise.resolve(void 0)},I.prototype.findFileBySourceURL=function(E){var A=this;return this.isEnable()?new Promise(function(_){_(A.getLocalFile().filter(function(C){return C.sourceURL===E}))}):Promise.resolve([])},I.prototype.isDirectory=function(E){var A=this;return this.isEnable()?new Promise(function(_){f(E)?_(!1):_(A.getLocalFile().some(function(C){return C.path.startsWith(""+E+t.sep)}))}):Promise.resolve(!1)},I.prototype.ls=function(E){var A=this;return this.isEnable()?new Promise(function(_){var C=[];A.getLocalFile().forEach(function(V){if(!m(V))if(E){if(V.path.startsWith(""+E+t.sep)){var M=V.path.split(""+E+t.sep)[1]||"";if(M.includes(t.sep)){var $=""+E+t.sep+M.split(t.sep)[0];return void($&&!C.includes($)&&C.push($))}C.push(V)}}else if(V.path.includes(t.sep)){var B=V.path.split(t.sep)[0]||"";B&&!C.includes(B)&&C.push(B)}else C.push(V)}),_(C)}):Promise.resolve([])},I}(S);(y=e.FileStoreEnum||(e.FileStoreEnum={})).MEMORY="memoryStore",y.INDEX_DB="indexedDBStore",y.STORAGE="storageStore";var D=function(P){function I(E){var A=P.call(this)||this;return A.indexedDBStore=new R(E),A.memoryStore=new w,A.storageStore=new O(E),A}return n(I,P),I.prototype.saveFile=function(E,A,_){var C=this;A===void 0&&(A=!0);var V=(_||{}).forceSpecifyStore;return(A?this.findFileByPath(E.path,_):Promise.resolve(void 0)).then(function(M){if(M!=null&&M.version&&v(E,M.version))throw new Error("there is an higher version file existed already");var $=o(o({},E),{createTime:M&&M.createTime||Date.now(),updateTime:Date.now()});return V&&C[V]&&C[V].isEnable()&&(V!==e.FileStoreEnum.STORAGE||C.isLocalStorageAvaliable($))?C[V].saveFile($):C[C.saveToTargetStoreRule($)].saveFile($)})},I.prototype.isLocalStorageAvaliable=function(E){var A=E.data;return t.getDataFormat(A)==="string"&&A.length<=102400&&this.storageStore.isEnable()},I.prototype.saveToTargetStoreRule=function(E){return this.indexedDBStore.isEnable()?e.FileStoreEnum.INDEX_DB:this.isLocalStorageAvaliable(E)?e.FileStoreEnum.STORAGE:e.FileStoreEnum.MEMORY},I.prototype.removeFile=function(E,A){var _=(A||{}).forceSpecifyStore;return _&&this[_]?this[_].removeFile(E):Promise.all([this.indexedDBStore.removeFile(E),this.storageStore.removeFile(E),this.memoryStore.removeFile(E)]).then(function(){return!0})},I.prototype.clear=function(E){var A=(E||{}).forceSpecifyStore;return A&&this[A]?this[A].clear():Promise.all([this.indexedDBStore.clear(),this.storageStore.clear(),this.memoryStore.clear()]).then(function(){return!0})},I.prototype.findFileByPath=function(E,A){var _=this,C=(A||{}).forceSpecifyStore;return C&&this[C]?this[C].findFileByPath(E):g(this.searchInTargetStoreRule(),function(V,M){return V?Promise.resolve(V):_[M].findFileByPath(E)})},I.prototype.findFileBySourceURL=function(E,A){var _=this,C=(A||{}).forceSpecifyStore;return C&&this[C]?this[C].findFileBySourceURL(E):g(this.searchInTargetStoreRule(),function(V,M){return _[M].findFileBySourceURL(E).then(function($){return V?V.filter(function(B){return!$.some(function(ee){return ee.path===B.path})}).concat($||[]):$||[]})})},I.prototype.searchInTargetStoreRule=function(){return[e.FileStoreEnum.INDEX_DB,e.FileStoreEnum.STORAGE,e.FileStoreEnum.MEMORY]},I.prototype.isDirectory=function(E){var A=this;return E?g(this.searchInTargetStoreRule(),function(_,C){return _?Promise.resolve(!0):A[C].isDirectory(E)}):Promise.resolve(!0)},I.prototype.ls=function(E){var A=this;return this.isDirectory(E).then(function(_){if(!_)throw new Error("path: "+E+" is an invalid directory path");return g(A.searchInTargetStoreRule(),function(C,V){return A[V].ls(E).then(function(M){return C?(M||[]).concat(C.filter(function($){return!M.some(function(B){return typeof $=="string"?B===$:typeof B!="string"&&B.path===$.path})})):M})})})},I}(a),U=function(P){function I(){return P!==null&&P.apply(this,arguments)||this}return n(I,P),I}(a),x=function(P){function I(E){var A=P.call(this)||this,_=E||{},C=_.storeOptions,V=_.downloadManagerOptions;return A.downloadManager=new t.IDownloadManager(V),A.store=new D(C),A.store.indexedDBStore.on("ready",function(){return A.emit("ready")}),A}return n(I,P),I.prototype.getFile=function(E,A,_){var C=this,V=new U,M=Promise.resolve(void 0),$=A||{},B=$.downloadOptions,ee=$.forceDownload,ie=$.saveRootPath;ee?M=Promise.resolve(void 0):typeof E=="string"?M=this.store.findFileByPath(E,_):E!=null&&E.sourceURL?M=this.store.findFileBySourceURL(E.sourceURL):B&&(B.domParams||B.socketParams||B.xhrParams)&&(M=this.store.findFileBySourceURL(this.genSourceURL(B)));var be=null,le=new Promise(function(te){be=te});return V.getDownloadTask=function(){return le},M=M.then(function(te){if(te&&(!Array.isArray(te)||te.length)){var ve=te;if(Array.isArray(ve)){var Ae=ve.find(function(Me){return m(Me)});if(!Ae)return;ve=ve.filter(function(Me){return!m(Me)});var me=Ae.data;if(typeof me!="string"||!JSON.parse(me||"[]").every(function(Me){return ve.some(function(F){return F.path===Me})}))return}if(!(_!=null&&_.targetVersion)||!v(ve,_.targetVersion))return V.emit("checkExpire",!1),ve;V.emit("checkExpire",!0)}}).then(function(te){if(!te&&B){var ve=C.downloadManager.download(B);return be(ve),new Promise(function(Ae,me){ve.on("complete",function(Me){setTimeout(function(){var F=Array.isArray(Me)?Me.map(function(N){var Y=N.data,oe=N.path,ge=N.extName;return{path:C.genFilePath(ie,oe),sourceURL:C.genSourceURL(B),data:Y,fileFormat:ge||C.getFileFormat(B),version:(_==null?void 0:_.targetVersion)||1}}):{path:C.genFilePath(ie,void 0),sourceURL:C.genSourceURL(B),data:Me,fileFormat:C.getFileFormat(B),version:(_==null?void 0:_.targetVersion)||1};if(Array.isArray(F)&&typeof E=="string"&&E){var j=F.find(function(N){return N.path===E});Ae(j||F)}else Ae(F);V.emit("beforeSet",F),C.beforeWrite(F,_).then(function(){V.emit("afterSet")}).catch(function(N){return V.emit("afterSet",N)})},0)}),ve.on("abort",me),ve.on("error",me),ve.on("timeout",function(){return me(new Error("download timeout"))})})}return be(void 0),te}).catch(function(te){return be(void 0),Promise.reject(te)}),V.getResult=function(){return M},V},I.prototype.genSourceURL=function(E){var A=E.domParams,_=E.type,C=E.xhrParams;if(_===t.DownloaderType.SOCKET)return null;var V=(_===t.DownloaderType.DOM?A:C)||{},M=V.url,$=M===void 0?"":M,B=V.body;return B&&Object.keys(B).length?$+($.includes("?")?"&":"?")+"downloadBodyParams="+JSON.stringify(B):$},I.prototype.updateFile=function(E,A){return this.saveStore(E,!0,A)},I.prototype.beforeWrite=function(E,A){var _=this;return Array.isArray(E)?Promise.all(E.concat(function(C){var V=C[0].sourceURL||"";return{path:""+h+V,sourceURL:V,data:JSON.stringify(C.map(function(M){return M.path}))}}(E)).map(function(C){return _.saveStore(C,!1,A)})).then(function(C){return C.filter(function(V){return!m(V)})}):this.saveStore(E,!0,A)},I.prototype.getFileFormat=function(E){var A=E||{},_=A.xhrParams,C=A.domParams,V=A.socketParams,M=A.type;return M===t.DownloaderType.DOM&&(C!=null&&C.fileFormat)?C.fileFormat:M===t.DownloaderType.SOCKET&&(V!=null&&V.fileFormat)?V.fileFormat:_!=null&&_.fileFormat?_.fileFormat:"unknow"},I.prototype.genFilePath=function(E,A){return A?""+(E||"")+(E?t.sep:"")+A:E||""},I.prototype.saveStore=function(E,A,_){return A===void 0&&(A=!0),this.store.saveFile(E,A,_).then(function(C){if(C)return E;throw new Error("fail to save file in local store")})},I.prototype.remove=function(E,A){return this.store.removeFile(E,A)},I.prototype.clear=function(E){return this.store.clear(E)},I.prototype.list=function(E){return this.store.ls(E)},I.prototype.updateVersion=function(E,A){var _=this;return this.store.findFileByPath(E).then(function(C){if(C)return _.saveStore(o(o({},C),{version:A})).then(function(){});throw new Error("the target path: "+E+" isn't existed")})},I.prototype.updateSourceURL=function(E,A){var _=this;return this.store.findFileByPath(E).then(function(C){if(C)return _.saveStore(o(o({},C),{sourceURL:A})).then(function(){});throw new Error("the target path: "+E+" isn't existed")})},I}(a);e.IResourceManager=x,Object.defineProperty(e,"__esModule",{value:!0})}(wC.exports,(bC||(bC=1,function(e,t){var r=function(F,j){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,Y){N.__proto__=Y}||function(N,Y){for(var oe in Y)Y.hasOwnProperty(oe)&&(N[oe]=Y[oe])},r(F,j)};function n(F,j){function N(){this.constructor=F}r(F,j),F.prototype=j===null?Object.create(j):(N.prototype=j.prototype,new N)}var i,o=function(){return o=Object.assign||function(F){for(var j,N=1,Y=arguments.length;N<Y;N++)for(var oe in j=arguments[N])Object.prototype.hasOwnProperty.call(j,oe)&&(F[oe]=j[oe]);return F},o.apply(this,arguments)},s=function(F,j){var N=new Uint8Array(F.byteLength+j.byteLength);return N.set(new Uint8Array(F),0),N.set(new Uint8Array(j),F.byteLength),N.buffer},a="/";(i=e.TransformDataFormat||(e.TransformDataFormat={})).STRING="string",i.BLOB="blob",i.ARRAY_BUFFER="arraybuffer";var l,u=function(F){return Blob&&F instanceof Blob?"blob":ArrayBuffer&&F instanceof ArrayBuffer?"arrayBuffer":typeof F},d=[],c=function(){for(var F=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],j="",N=0;N<32;N++)j+=F[Math.round(61*Math.random())];return d.indexOf(j)!==-1?c():(d.push(j),j)},p=function(F){return F.arrayBuffer?F.arrayBuffer():new Promise(function(j,N){var Y=new FileReader;Y.readAsArrayBuffer(F),Y.onload=function(oe){j(oe.target&&oe.target.result)},Y.onerror=function(oe){N(oe)}})},h=function(F){return F.text?F.text():new Promise(function(j,N){var Y=new FileReader;Y.readAsText(F),Y.onload=function(oe){j(oe.target&&oe.target.result)},Y.onerror=function(oe){N(oe)}})},m=function(F,j){return Promise.resolve(new Blob([new Uint8Array(F)],{type:j}))},f=function(F,j){var N=new Blob([F],{type:j||"text/plain"});return h(N)},v=function(F,j){return Promise.resolve(new Blob([F],{type:j||"text/plain"}))},g=function(F,j){return p(new Blob([F],{type:j||"text/plain"}))};function y(F){var j=(F||"").split(".");return j[j.length-1]||""}function S(F){var j=(F||"").lastIndexOf(a);return j<0?"":F.slice(0,j)}function b(F){var j=(F||"").lastIndexOf(a),N=j<0?F:F.slice(j+1),Y=(N||"").lastIndexOf(".");return Y<0?N:N.slice(0,Y)}function R(F){return["png","jpg","jpeg","svg"].includes(y(F))}function w(F){return y(F)==="json"}function O(F){return y(F)==="version"}function D(F,j){return F.reduce(function(N,Y){var oe,ge=Y.data,Ie=Y.file,De=y(Ie.name),ke=S(Ie.name),je=b(Ie.name),Le=((j==null?void 0:j.combineExtNames)||[]).includes(De)&&typeof ge=="string",Ne=Le?""+(ke?""+ke+a+De:De):Ie.name;return Le&&N.some(function(Ye){return Ye.path===Ne&&(Ye.data[je]=ge,!0)})||N.push({path:Ne,extName:De,data:Le?(oe={},oe[je]=ge,oe):ge,shouldCombine:Le}),N},[]).map(function(N){var Y=N.data,oe=N.shouldCombine,ge=function(Ie,De){var ke={};for(var je in Ie)Object.prototype.hasOwnProperty.call(Ie,je)&&De.indexOf(je)<0&&(ke[je]=Ie[je]);if(Ie!=null&&typeof Object.getOwnPropertySymbols=="function"){var Le=0;for(je=Object.getOwnPropertySymbols(Ie);Le<je.length;Le++)De.indexOf(je[Le])<0&&Object.prototype.propertyIsEnumerable.call(Ie,je[Le])&&(ke[je[Le]]=Ie[je[Le]])}return ke}(N,["data","shouldCombine"]);return o(o({},ge),{data:oe?JSON.stringify(Y):Y})})}function U(F,j){return t.loadAsync(F).then(function(N){return Promise.all(N.filter(function(Y,oe){return!oe.dir}).map(function(Y){var oe=function(ge){return w(ge.name)?"string":R(ge.name)?"base64":O(ge.name)?"text":"blob"}(Y);return j!=null&&j.setUnZipFormat&&(oe=j.setUnZipFormat(Y)||oe),Y.async(oe).then(function(ge){var Ie=ge,De=y(Y.name),ke=De==="svg"?"svg+xml":De;return oe==="base64"&&R(Y.name)&&!ge.startsWith("data")&&(Ie="data:image/"+ke+";base64,"+Ie),{data:Ie,file:Y}})}))}).then(function(N){return D(N,j)})}function x(F,j){var N=j||{},Y=N.encoding,oe=N.blobType,ge=N.unZipOptions;if(function(st){return u(st)==="blob"&&(st.type.includes("compressed")||st.type.includes("zip"))}(F)&&!(ge!=null&&ge.disableUnZip))return U(F,ge);if(!Y)return Promise.resolve(F);var Ie=u(F),De=Ie==="string",ke=Ie==="blob",je=Ie==="arrayBuffer";if(Y===e.TransformDataFormat.BLOB){var Le=F;if(De)return h(Le);if(je)return p(Le)}else if(Y===e.TransformDataFormat.ARRAY_BUFFER){var Ne=F;if(De)return f(Ne,oe);if(ke)return m(Ne,oe)}else if(Y===e.TransformDataFormat.STRING){var Ye=F;if(ke)return v(Ye,oe);if(je)return g(Ye,oe)}return Promise.resolve(F)}function P(F){var j=0,N=!1,Y=function(){j>90||N||(F(j+=(100-j)/50),requestAnimationFrame(Y))};return Y(),{finish:function(){j===100||N||(j=100,F(100))},abort:function(){j===100||N||(N=!0)},get curProgress(){return j}}}function I(){}function E(){E.init.call(this)}function A(F){return F._maxListeners===void 0?E.defaultMaxListeners:F._maxListeners}function _(F,j,N,Y){var oe,ge,Ie;if(typeof N!="function")throw new TypeError('"listener" argument must be a function');if((ge=F._events)?(ge.newListener&&(F.emit("newListener",j,N.listener?N.listener:N),ge=F._events),Ie=ge[j]):(ge=F._events=new I,F._eventsCount=0),Ie){if(typeof Ie=="function"?Ie=ge[j]=Y?[N,Ie]:[Ie,N]:Y?Ie.unshift(N):Ie.push(N),!Ie.warned&&(oe=A(F))&&oe>0&&Ie.length>oe){Ie.warned=!0;var De=new Error("Possible EventEmitter memory leak detected. "+Ie.length+" "+j+" listeners added. Use emitter.setMaxListeners() to increase limit");De.name="MaxListenersExceededWarning",De.emitter=F,De.type=j,De.count=Ie.length,function(ke){typeof console.warn=="function"?console.warn(ke):console.log(ke)}(De)}}else Ie=ge[j]=N,++F._eventsCount;return F}function C(F,j,N){var Y=!1;function oe(){F.removeListener(j,oe),Y||(Y=!0,N.apply(F,arguments))}return oe.listener=N,oe}function V(F){var j=this._events;if(j){var N=j[F];if(typeof N=="function")return 1;if(N)return N.length}return 0}function M(F,j){for(var N=new Array(j);j--;)N[j]=F[j];return N}I.prototype=Object.create(null),E.EventEmitter=E,E.usingDomains=!1,E.prototype.domain=void 0,E.prototype._events=void 0,E.prototype._maxListeners=void 0,E.defaultMaxListeners=10,E.init=function(){this.domain=null,E.usingDomains&&l.active&&l.Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new I,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},E.prototype.setMaxListeners=function(F){if(typeof F!="number"||F<0||isNaN(F))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=F,this},E.prototype.getMaxListeners=function(){return A(this)},E.prototype.emit=function(F){var j,N,Y,oe,ge,Ie,De,ke=F==="error";if(Ie=this._events)ke=ke&&Ie.error==null;else if(!ke)return!1;if(De=this.domain,ke){if(j=arguments[1],!De){if(j instanceof Error)throw j;var je=new Error('Uncaught, unspecified "error" event. ('+j+")");throw je.context=j,je}return j||(j=new Error('Uncaught, unspecified "error" event')),j.domainEmitter=this,j.domain=De,j.domainThrown=!1,De.emit("error",j),!1}if(!(N=Ie[F]))return!1;var Le=typeof N=="function";switch(Y=arguments.length){case 1:(function(Ne,Ye,st){if(Ye)Ne.call(st);else for(var it=Ne.length,Ut=M(Ne,it),at=0;at<it;++at)Ut[at].call(st)})(N,Le,this);break;case 2:(function(Ne,Ye,st,it){if(Ye)Ne.call(st,it);else for(var Ut=Ne.length,at=M(Ne,Ut),At=0;At<Ut;++At)at[At].call(st,it)})(N,Le,this,arguments[1]);break;case 3:(function(Ne,Ye,st,it,Ut){if(Ye)Ne.call(st,it,Ut);else for(var at=Ne.length,At=M(Ne,at),fn=0;fn<at;++fn)At[fn].call(st,it,Ut)})(N,Le,this,arguments[1],arguments[2]);break;case 4:(function(Ne,Ye,st,it,Ut,at){if(Ye)Ne.call(st,it,Ut,at);else for(var At=Ne.length,fn=M(Ne,At),Dn=0;Dn<At;++Dn)fn[Dn].call(st,it,Ut,at)})(N,Le,this,arguments[1],arguments[2],arguments[3]);break;default:for(oe=new Array(Y-1),ge=1;ge<Y;ge++)oe[ge-1]=arguments[ge];(function(Ne,Ye,st,it){if(Ye)Ne.apply(st,it);else for(var Ut=Ne.length,at=M(Ne,Ut),At=0;At<Ut;++At)at[At].apply(st,it)})(N,Le,this,oe)}return!0},E.prototype.addListener=function(F,j){return _(this,F,j,!1)},E.prototype.on=E.prototype.addListener,E.prototype.prependListener=function(F,j){return _(this,F,j,!0)},E.prototype.once=function(F,j){if(typeof j!="function")throw new TypeError('"listener" argument must be a function');return this.on(F,C(this,F,j)),this},E.prototype.prependOnceListener=function(F,j){if(typeof j!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(F,C(this,F,j)),this},E.prototype.removeListener=function(F,j){var N,Y,oe,ge,Ie;if(typeof j!="function")throw new TypeError('"listener" argument must be a function');if(!(Y=this._events))return this;if(!(N=Y[F]))return this;if(N===j||N.listener&&N.listener===j)--this._eventsCount==0?this._events=new I:(delete Y[F],Y.removeListener&&this.emit("removeListener",F,N.listener||j));else if(typeof N!="function"){for(oe=-1,ge=N.length;ge-- >0;)if(N[ge]===j||N[ge].listener&&N[ge].listener===j){Ie=N[ge].listener,oe=ge;break}if(oe<0)return this;if(N.length===1){if(N[0]=void 0,--this._eventsCount==0)return this._events=new I,this;delete Y[F]}else(function(De,ke){for(var je=ke,Le=je+1,Ne=De.length;Le<Ne;je+=1,Le+=1)De[je]=De[Le];De.pop()})(N,oe);Y.removeListener&&this.emit("removeListener",F,Ie||j)}return this},E.prototype.removeAllListeners=function(F){var j,N;if(!(N=this._events))return this;if(!N.removeListener)return arguments.length===0?(this._events=new I,this._eventsCount=0):N[F]&&(--this._eventsCount==0?this._events=new I:delete N[F]),this;if(arguments.length===0){for(var Y,oe=Object.keys(N),ge=0;ge<oe.length;++ge)(Y=oe[ge])!=="removeListener"&&this.removeAllListeners(Y);return this.removeAllListeners("removeListener"),this._events=new I,this._eventsCount=0,this}if(typeof(j=N[F])=="function")this.removeListener(F,j);else if(j)do this.removeListener(F,j[j.length-1]);while(j[0]);return this},E.prototype.listeners=function(F){var j,N=this._events;return N&&(j=N[F])?typeof j=="function"?[j.listener||j]:function(Y){for(var oe=new Array(Y.length),ge=0;ge<oe.length;++ge)oe[ge]=Y[ge].listener||Y[ge];return oe}(j):[]},E.listenerCount=function(F,j){return typeof F.listenerCount=="function"?F.listenerCount(j):V.call(F,j)},E.prototype.listenerCount=V,E.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var $=function(F){function j(N){var Y=F.call(this)||this;return Y.timeout=(N==null?void 0:N.timeout)||3e4,Y}return n(j,F),j.prototype.clearTimeoutCheck=function(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)},j.prototype.startTimeoutCheck=function(){var N=this;!this.timeoutTimer&&!this.finished&&this.timeout>0&&(this.timeoutTimer=setTimeout(function(){N.finished||(N.finished=!0,N.data=null,N.emit("timeout")),N.clearTimeoutCheck()},this.timeout))},j}(E),B=function(F){function j(N){var Y=F.call(this,N)||this;return Y.uuid=c(),Y.domParams=N||{},Y}return n(j,F),j.prototype.jsonp=function(){var N=this;if(!this.finished){var Y=this.domParams,oe=Y.url,ge=Y.jsonpCallbackName,Ie=ge===void 0?"callback":ge,De=Y.body,ke=Y.integrity;this.script=document.createElement("script"),ke&&(this.script.integrity=ke,this.script.crossOrigin="anonymous");var je="";De&&Object.entries(De).forEach(function(Le){var Ne=Le[0],Ye=Le[1];je+=(je?"&":"")+Ne+"="+Ye}),je+=(je?"&":"")+Ie+"="+this.uuid,this.script.src=oe+(oe.includes("?")?"":"?")+je,this.jsonpCallback(),this.progressMonitory=P(function(Le){N.finished||N.emit("progressUpdated",Le)}),document.body.appendChild(this.script)}},j.prototype.clearSideEffect=function(N){if(N===void 0&&(N=!1),document.body.removeChild(this.script),N){var Y=this.uuid;window[this.uuid]=function(){window[Y]&&delete window[Y]}}else delete window[this.uuid];this.script=null,this.uuid=null,this.finished=!0,this.data=null,this.clearTimeoutCheck()},j.prototype.jsonpCallback=function(){var N=this;this.script.onerror=function(Y){var oe;N.finished||(N.clearSideEffect(),(oe=N.progressMonitory)===null||oe===void 0||oe.abort(),N.emit("error",new Error(typeof Y=="string"?Y:"load jsonp script failed")))},window[this.uuid]=function(Y){var oe;if(!N.finished){var ge=N.domParams,Ie=ge.encoding,De=ge.blobType,ke=ge.unZipOptions,je=ge.beforeTransformData,Le=ge.afterTransformData;(oe=N.progressMonitory)===null||oe===void 0||oe.finish(),N.clearSideEffect(),(je?je(Y||""):Promise.resolve(Y||"")).then(function(Ne){return x(Ne,{encoding:Ie,blobType:De,unZipOptions:ke}).then(function(Ye){return(Le?Le(Ye):Promise.resolve(Ye)).then(function(st){return N.emit("finished",st)})})}).catch(function(Ne){return N.emit("error",Ne)})}}},j.prototype.abort=function(){this.clearSideEffect(!0)},j}($),ee=function(F){function j(N){var Y=F.call(this,N)||this;return Y.socketParams=N||{},Y}return n(j,F),j.prototype.write=function(N,Y){N&&!this.finished&&(N instanceof Error?this.handleError(N):(this.data?this.appendData(N):this.data=N,this.handlePerCentUpdate(Y)))},j.prototype.handlePerCentUpdate=function(N){N===void 0||this.finished||this.emit("progressUpdated",N)},j.prototype.handleError=function(N){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.emit("error",N)},j.prototype.appendData=function(N){u(N)===u(this.data)?typeof N=="string"?this.data+=N:Blob&&N instanceof Blob?this.data=new Blob([this.data,N],{type:N.type}):ArrayBuffer&&N instanceof ArrayBuffer&&(this.data=s(this.data,N)):this.handleError(new Error("every piece of the data format must be the same"))},j.prototype.end=function(N){var Y=this;if(!this.finished){this.handlePerCentUpdate(100),N&&this.write(N);var oe=this.socketParams,ge=oe.encoding,Ie=oe.blobType,De=oe.unZipOptions,ke=oe.beforeTransformData,je=oe.afterTransformData;(ke?ke(this.data):Promise.resolve(this.data)).then(function(Le){return x(Le,{encoding:ge,blobType:Ie,unZipOptions:De}).then(function(Ne){return(je?je(Ne):Promise.resolve(Ne)).then(function(Ye){return Y.emit("finished",Ye)})})}).catch(function(Le){return Y.emit("error",Le)}),this.data=null,this.finished=!0,this.clearTimeoutCheck()}},j.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck()},j}($),ie=function(F){function j(N){var Y=F.call(this,N)||this;return Y.xhrParams=N||{},Y.xhrParams.headers=o({},Y.xhrParams.headers||{}),Y}return n(j,F),j.prototype.supportFetch=function(){return!!window.fetch&&window.AbortController&&window.Request},j.prototype.ajax=function(){var N=this;if(!this.finished)if(this.xhrParams.url){var Y=this.xhrParams,oe=Y.headers,ge=oe===void 0?{}:oe,Ie=Y.url,De=Y.body,ke=De===void 0?{}:De,je=Y.method,Le=je===void 0?"POST":je,Ne=Y.encoding,Ye=Y.integrity;this.controller=this.supportFetch()?new AbortController:new XMLHttpRequest;var st=this.supportFetch()?P(function(it){N.finished||N.emit("progressUpdated",it)}):null;(this.supportFetch()?fetch(new Request(Ie,o({method:Le,headers:ge,body:Le==="GET"?void 0:JSON.stringify(ke),signal:this.controller.signal},Ye?{integrity:Ye,mode:"cors"}:{}))).then(function(it){return it.ok?Ne===e.TransformDataFormat.STRING?it.text():Ne===e.TransformDataFormat.ARRAY_BUFFER?it.arrayBuffer():it.blob():Promise.reject(new Error("xhr download "+Ie+" failed!"))}):new Promise(function(it,Ut){var at=new XMLHttpRequest;N.controller=at,at.open(Le,Ie),at.responseType=Ne===e.TransformDataFormat.STRING?"text":Ne===e.TransformDataFormat.ARRAY_BUFFER?"arraybuffer":"blob",Object.entries(ge).forEach(function(At){var fn=At[0],Dn=At[1];at.setRequestHeader(fn,Dn)}),at.onload=function(){var At=at.status,fn=at.response,Dn=at.statusText;At>=200&&At<300||At===304?it(fn):Ut(new Error(At+": "+Dn))},at.onprogress=function(At){var fn=At||{},Dn=fn.total,gl=fn.loaded;gl===void 0||N.finished||(Dn?N.emit("progressUpdated",gl/Dn*100):gl&&!st&&(st=P(function(rd){N.finished||N.emit("progressUpdated",rd)})))},at.onerror=function(){Ut(new Error("xhr download "+Ie+" failed!"))},at.send(JSON.stringify(ke))})).then(function(it){if(!N.finished){var Ut=N.xhrParams,at=Ut.encoding,At=Ut.blobType,fn=Ut.unZipOptions,Dn=Ut.beforeTransformData,gl=Ut.afterTransformData;st==null||st.finish(),N.finished=!0,N.clearTimeoutCheck(),(Dn?Dn(it):Promise.resolve(it)).then(function(rd){return x(rd,{encoding:at,blobType:At,unZipOptions:fn}).then(function(nI){return(gl?gl(nI):Promise.resolve(nI)).then(function(cx){return N.emit("finished",cx)})})}).catch(function(rd){return N.emit("error",rd)})}}).catch(function(it){N.finished||(N.finished=!0,N.clearTimeoutCheck(),st==null||st.abort(),N.emit("error",it))})}else this.emit("error",new Error("xhrDownloader url params invalid!"))},j.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.controller.abort()},j}($),be=0;E.defaultMaxListeners=500;var le,te=new E,ve="ThreadPoolReady",Ae=function(){be-=1,te.emit(ve)};(le=e.DownloaderType||(e.DownloaderType={})).XHR="xhr",le.DOM="dom",le.SOCKET="socket";var me=function(F){function j(N){var Y=F.call(this)||this;return Y.aborted=!1,Y.downloadParmas=o({type:e.DownloaderType.XHR},N),Y.id=c(),Y}return n(j,F),j.prototype.start=function(){var N=this;be+=1,this.progress=0,this.emit("downloadStart"),this.onDownloadStartCallback&&this.onDownloadStartCallback();var Y=this.downloadParmas,oe=Y.type,ge=Y.xhrParams,Ie=Y.domParams,De=Y.socketParams;switch(oe){case e.DownloaderType.DOM:this.downloader=new B(Ie),this.downloader.jsonp();break;case e.DownloaderType.SOCKET:this.downloader=new ee(De);break;default:this.downloader=new ie(ge),this.downloader.ajax()}return this.downloader.startTimeoutCheck(),this.downloader.on("error",function(ke){N.emit("error",ke),N.onErrorCallback&&N.onErrorCallback(ke),Ae()}).on("finished",function(ke){N.emit("complete",ke),N.onCompleteCallback&&N.onCompleteCallback(ke),Ae()}).on("progressUpdated",function(ke){N.progress=ke,N.emit("progressUpdated",ke),N.onProgressUpdatedCallback&&N.onProgressUpdatedCallback(ke)}).on("timeout",function(){N.emit("timeout"),N.onTimeoutCallback&&N.onTimeoutCallback(),Ae()}),this},j.prototype.abort=function(){if(this.aborted)return this;this.aborted=!0,this.downloader&&!this.downloader.finished&&this.downloader.abort();var N=new Error("file download has been aborted");return this.emit("abort",N),this.onAbortCallback&&this.onAbortCallback(N),Ae(),this},j.prototype.onDownloadStart=function(N){return this.onDownloadStartCallback=N,this},j.prototype.onProgressUpdated=function(N){return this.onProgressUpdatedCallback=N,this},j.prototype.onError=function(N){return this.onErrorCallback=N,this},j.prototype.onComplete=function(N){return this.onCompleteCallback=N,this},j.prototype.onAbort=function(N){return this.onAbortCallback=N,this},j.prototype.onTimeout=function(N){return this.onTimeoutCallback=N,this},j.prototype.isInProgress=function(){return this.progress!==void 0},j.prototype.isFinished=function(){return this.progress===100},j}(E),Me=function(){function F(j){this.taskList=[],this.options=j||{};var N=this.options.threadLimit;if((N===void 0?6:N)>6)throw new Error("threadLimit must be lower than 6");te.on(ve,this.startNextTask.bind(this))}return F.prototype.download=function(j){var N=new me(j),Y=this.removeTask.bind(this,N);return N.on("abort",Y),this.taskList.push(N),this.checkTaskReady(N),N},F.prototype.startNextTask=function(){var j=this.taskList.find(function(N){return!N.isInProgress()});j&&this.checkTaskReady(j)},F.prototype.checkTaskReady=function(j){var N=this.options.threadLimit,Y=N===void 0?6:N;if(!(this.taskList.findIndex(function(ge){return!ge.isInProgress()})>=Y||be+1>6)){var oe=this.removeTask.bind(this,j);j.on("complete",oe),j.on("error",oe),j.on("timeout",oe),setTimeout(function(){return j.start()},0)}},F.prototype.removeTask=function(j){var N=this;this.taskList.some(function(Y,oe){return Y===j&&(setTimeout(function(){return j.removeAllListeners()},0),N.taskList.splice(oe,1),!0)})},F}();e.DownloadTask=me,e.IDownloadManager=Me,e.appendBuffer=s,e.arrayBufferToBlob=m,e.arrayBufferToString=f,e.blobToArrayBuffer=p,e.blobToText=h,e.genUuid=c,e.getDataFormat=u,e.getExtName=y,e.getFileName=b,e.getFullPathName=S,e.isImgFile=R,e.isJsonFile=w,e.isVersionFile=O,e.monitorProgress=P,e.sep=a,e.stringToArrayBuffer=g,e.stringToBlob=v,e.transformData=x,Object.defineProperty(e,"__esModule",{value:!0})}(IC.exports,QB)),IC.exports))),wC.exports);class EL{constructor(t){this._cancelError=new Error("request for lock canceled"),this._locked=void 0,this._queue=[],this._waiters=[],this._currentReleaser=void 0,t&&(this._cancelError=t),this._locked=!1}acquire(){const t=this.isLocked(),r=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return t||this._dispatch(),r}async runExclusive(t){const r=await this.acquire();try{return await t()}finally{r()}}async waitForUnlock(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()}isLocked(){return this._locked}release(){if(this._currentReleaser){const t=this._currentReleaser;this._currentReleaser=void 0,t()}}cancel(){this._queue.forEach(t=>t.reject(this._cancelError)),this._queue=[]}_dispatch(){const t=this._queue.shift();if(!t)return;let r=!1;this._currentReleaser=()=>{r||(r=!0,this._locked=!1,this._resolveWaiters(),this._dispatch())},this._locked=!0,t.resolve(this._currentReleaser)}_resolveWaiters(){this._waiters.forEach(t=>t.resolve()),this._waiters=[]}}const Lr=(e,t,r)=>pp([t,r].map((n,i)=>{if(n!=="initial")return X([n==="success"]);{const o=i===0?"ENCODE":"DECODE";return jr(Ge(`${e.toUpperCase()}_${o}_SUCCESS`,1).pipe(ne(()=>!0)),Ge(`${e.toUpperCase()}_${o}_FAIL`,1).pipe(ne(()=>!1)))}})),dl=e=>{const t=ye(e.value);return t?qe(t):Ge(mp,1).pipe(_r(Hs),fe(e),ne(r=>{let[,n]=r;return ye(n)}))};function AC(e,t){var r,n;const i=e==="audio"?(r=t.audio)===null||r===void 0?void 0:r.audioSsrc:(n=t.video)===null||n===void 0?void 0:n.videoSsrc,o=e==="audio"?ID:uD;return e==="audio"&&Gt()||i?Promise.resolve():Ce(o)}const Qc=()=>X(navigator.mediaDevices.enumerateDevices()).pipe(ne(e=>{const t=[],r=[],n=[];return e.forEach(i=>{const{kind:o,deviceId:s,label:a}=i,l=a.replace(/\([\w,\d]+:[\w,\d]+\)/i,"").trim();switch(o){case"audioinput":s==="communications"||/ZoomAudioDevice/i.test(l)||/Zoom-\S*/.test(l)||/CubebAggregateDevice\S*/.test(l)||/Microsoft Teams Audio/i.test(l)||t.push({deviceId:s,label:l});break;case"audiooutput":s==="communications"||/ZoomAudioDevice/i.test(l)||/Microsoft Teams Audio/i.test(l)||r.push({deviceId:s,label:l});break;case"videoinput":n.push({deviceId:s,label:l})}}),{microphones:t,speakers:r,cameras:n}}));function p0(e){const{x:t,y:r,width:n,height:i}=e.getBoundingClientRect();return{scaleWidth:n,scaleHeight:i,srcOffsetX:t,srcOffsetY:r}}function rf(e){if(e){let r=e;try{const n=e.width;e.width=n}catch{var t;r=e.cloneNode(!0),(t=e.parentNode)===null||t===void 0||t.replaceChild(r,e)}return r}return e}function h0(){try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(lB)}catch{return!1}}function Kp(){var e;return(e=WebAssembly)===null||e===void 0?void 0:e.validate(uB)}const wL=(()=>{const e=new EL;return{withAudioAction:t=>function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return new Promise(async(o,s)=>{let a=!1;const l=setTimeout(()=>{a=!0,e.release()},3e4);try{await e.acquire(),a||clearTimeout(l),o(t(...n))}catch(u){a||(clearTimeout(l),s(u))}})},processAudioAction:t=>e.acquire().then(()=>t()),completeAudioAction:()=>{e.release()},cancelAllAudioAction:()=>{e.cancel()}}})();function Lg(e){const t=["joinComputerAudio","joinSharingAudio","leaveComputerAudio","leaveSharingAudio"];return new Proxy(e,{get:(r,n)=>typeof n=="string"&&t.includes(n)?function(){return wL.withAudioAction(r[n].bind(r))(...arguments)}:Reflect.get(r,n)})}function Mm(e){var t;const{browserVersion:r,isChrome:n,isFirefox:i,isSafari:o,isAndroidOrIOSBrowser:s,isSupportMediaStreamTrackProcessor:a,isSupportOffscreenCanvas:l}=ae,u=Number(r==null||(t=r.match(/^\d+/))===null||t===void 0?void 0:t[0]),d=n&&u>=91,c=i&&u>=89,p=o&&xc(r,"17.4")>=0,h=navigator.hardwareConcurrency>2;let m=Tg();return e&&!m&&(m=l&&a),!s&&m&&(d||c||p)&&h}const Mv=(e,t)=>{const r=document.createElement("link");return r.rel="preload",r.href=e,r.as=t,r.crossOrigin="anonymous",r},Ys=(e,t,r)=>{const n=[],i=[],o=Array.isArray(e)?e:[e];return jk.filter(s=>{var a;return o.includes(s.category)&&(s.tag===t||((a=s.tag)===null||a===void 0?void 0:a.split(",").includes(t)))}).forEach(s=>{s.type==="worker"?n.push(`${r}${s.name}`):s.type==="wasm"&&i.push(`${r}${s.name}`)}),{workers:n,wasms:i}};function IL(e,t,r){const n={};if(typeof window.SharedArrayBuffer!="function"){const{isIOSMobile:i,isSafari:o,isSupportOffscreenCanvas:s,isSupportMediaStreamTrackProcessor:a}=ae;Object.assign(n,{enableMultiDecodeVideoWithoutSAB:!!t&&(i||o||s&&a)}),s&&a&&Object.assign(n,{enableVirtualBackgroundWithoutSAB:!!r})}return Mm(r)&&Object.assign(n,{resourceManager:JB.IResourceManager,file:[{path:`${e}/vb-resource/dualModel.bin`,type:"bin"},{path:`${e}/vb-resource/tf.min.js`,type:"js"}]}),n}function Vw(e,t){const{media:{isAudioBridgeReceiveReady:r,isAudioBridgeSendReady:n},audio:{customizeAudioOption:i}}=e,o=t!==void 0?t:!(i==null||!i.speakerOnly);return pp([r?X([!0]):Ge(eM,1).pipe(_n(!0)),n||o?X([!0]):Ge(tM,1).pipe(_n(!0))])}function Nv(e,t,r){if(e.deviceId===t)return!0;if(t==="default"){const n=r.find(i=>i.deviceId===t);if(n)return n.label.indexOf(e.label)>-1}return!1}function md(e){return e.find(t=>t.deviceId==="default")}const f0=(()=>{let e,t=!1;return{watch:function(r){t=!0,e=Promise.race([r,_g(()=>!0,1e4)]).then(()=>{e=void 0,t=!1}).finally(()=>{e=void 0,t=!1})},acquire:function(){return t&&e?e:Promise.resolve()}}})(),nf=(e,t)=>Ce({event:lw,operations:[z(r=>r[`${e}`]!==void 0),xe(1)]},r=>r[`${e}`]===t);function CC(e,t,r,n){const i={play:()=>e.play(),pause:()=>e.pause(),get paused(){return e.paused},get muted(){return e.muted},set muted(o){e.muted=o},get currentTime(){return e.currentTime},set currentTime(o){e.currentTime=o},get loop(){return e.loop},set loop(o){e.loop=o}};if(t==="audio"){const{audio:{mediaPlaybackFile:o}}=r;Object.defineProperty(i,"playback",{get(){const s=e.dataset.playback;return s!==void 0?s==="1":!(o==null||!o.playback)},set(s){n.enablePlayAudioFileLocally(s),e.dataset.playback=s?"1":"0"}})}return i}function AL(){var e,t;return"orientation"in window.screen?(e=screen.orientation.type)===null||e===void 0?void 0:e.startsWith("landscape"):"orientation"in window?Math.abs(window.orientation)===90:"matchMedia"in window?!((t=window.matchMedia("(orientation: landscape)"))===null||t===void 0||!t.matches):screen.availWidth>screen.availHeight}function CL(){return"orientation"in window.screen?Ot(screen.orientation,"change").pipe(Zr(Pb()),ne(()=>{var e;return(e=screen.orientation.type)===null||e===void 0?void 0:e.startsWith("landscape")})):Ot(window,"orientationchange").pipe(Zr(Pb()),ne(e=>{var t;const r=(t=e.target)===null||t===void 0||(t=t.screen)===null||t===void 0||(t=t.orientation)===null||t===void 0?void 0:t.angle;return Math.abs(r)===90}))}class Kr{constructor(){this.audioPlaybackUrl=void 0,this.videoPlaybackUrl=void 0,this._audioElement=void 0,this._videoElement=void 0,this.videoSrc=void 0,this.isUsingSameFile=void 0}static getInstance(){return this.instance===void 0&&(this.instance=new Kr),this.instance}static destroyInstance(){if(this.instance){this.instance.stopAudioElement(),this.instance.stopVideoElement();const r=document.getElementById(_v);var t;r&&((t=r.parentNode)===null||t===void 0||t.removeChild(r)),this.instance=void 0}}setAudioElement(t){return this._audioElement===void 0&&(this._audioElement=new Audio),new Promise((r,n)=>{if(this.videoSrc===t.url)this._audioElement.pause(),this.isUsingSameFile=!0,this._videoElement.muted=!1,(o=this._videoElement).currentTime>0&&!o.paused&&!o.ended&&o.readyState>2?r(""):this._videoElement.play().then(()=>{r("")}).catch(()=>{n()});else{var i;this.isUsingSameFile=!1;const s=ae.isFirefox?"canplay":"canplaythrough",a=()=>{this._audioElement.play().then(()=>{this._audioElement.removeEventListener(s,a),r("")})},l=()=>{this._audioElement.removeEventListener(s,a),this._audioElement.removeEventListener("error",l),n()};this._audioElement.addEventListener(s,a),this._audioElement.addEventListener("error",l),this._audioElement.src=t.url,this._audioElement.loop=!!t.loop,Oi(t.url)&&this._audioElement.setAttribute("crossorigin",""),this._audioElement.currentTime=Math.max((i=t.currentTime)!==null&&i!==void 0?i:0,1e-4),ae.isIOSMobile&&this._audioElement.load()}var o})}setVideoElement(t){return this._videoElement===void 0&&(this._videoElement=document.createElement("video")),new Promise((r,n)=>{var i;this.videoSrc=t.url;const o=ae.isFirefox?"canplay":"canplaythrough",s=()=>{this._videoElement.play().then(()=>{this._videoElement.removeEventListener(o,s),r("")})},a=()=>{this._videoElement.removeEventListener(o,s),this._videoElement.removeEventListener("error",a),n()};this._videoElement.addEventListener(o,s),this._videoElement.addEventListener("error",a),this._videoElement.src=t.url,this.isUsingSameFile||(this._videoElement.muted=!0),this._videoElement.loop=!!t.loop,this._videoElement.currentTime=Math.max((i=t.currentTime)!==null&&i!==void 0?i:0,1e-4),this._videoElement.playsInline=!0,Oi(t.url)&&this._videoElement.setAttribute("crossorigin",""),ae.isSafari&&!document.getElementById(_v)&&(this._videoElement.id=_v,this._videoElement.setAttribute("style","position:fixed;top:-10000px;left:-10000px"),document.body.appendChild(this._videoElement)),ae.isIOSMobile&&this._videoElement.load()})}get audioElement(){return this.isUsingSameFile?this._videoElement:this._audioElement}get videoElement(){return this._videoElement}stopAudioElement(){this.isUsingSameFile||this._audioElement&&(this._audioElement.currentTime=0,this._audioElement.pause())}stopVideoElement(){this._videoElement&&this._videoElement.pause(),this.videoSrc=void 0}}Kr.instance=void 0;const Va=function(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const{socket:{zoomSocketStatus:r,xmppSocketStatus:n,mainSessionSocketStatus:i},meeting:{meetingStatus:o}}=e,s=[];if(o===Lt.Joined){var a;const l=Oe.getInstance(),u=He.createAgent();if(((a=ye(e))===null||a===void 0?void 0:a.audio)===ze.Computer&&l.leaveComputerAudio(),l.disconnect(),f0.watch(l.destroy()),e.video&&(e.video.subscribedVideoList.length>0&&e.video.subscribedVideoList.forEach(d=>{u.unsubscribeVideo(d)}),e.video.isCurrentUserStartedVideo&&T(mu)),e.share&&e.share.isReceiveSharing){const d=e.share.activeNodeId;e.share.remoteControlledUserList.length>0&&e.share.remoteControlledUserList.forEach(c=>{u.sharingRequestRemoteControl(c,!1)}),u.unsubscribeSharing(d)}Kr.destroyInstance()}if(t||(Pe.clearSession(),[tt.WebclientTk,tt.WebclientZsk,tt.WebclientZtk,tt.WebclientRecordingToken].forEach(l=>{sessionStorage.removeItem(l)}),ur.destroy()),r!==Je.Closed&&s.push(Li()),n!==Je.Closed&&s.push(FP()),i!==Je.Closed&&s.push(HP()),t){const l=ye(e);s.push(JS({audio:l==null?void 0:l.audio,muted:l==null?void 0:l.muted,video:l==null?void 0:l.bVideoOn,isFailover:t}))}else s.push(JS({audio:!1,muted:void 0,video:!1,isFailover:t}));return s.push(GP(),tk(),fM(),xM(t),sN(),pN(t),FB(),MN(),rL(),BB(),HN(),sL(),KB(),gL(t),qB(),yL(t),bL(t),nw(Lt.Closed)),s},qp=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Ce({event:lo,operations:[ne(i=>i.find(o=>o.userId===e.userId&&(!e.key||o[`${e.key}`]!==void 0))),z(i=>!!i),xe(1)]},...r)},ZB={[`${Ki.AudioBridgeEnable}`]:{mask:240,action:Ck},[`${Ki.AudioDecodeInWorklet}`]:{mask:15,action:QP},[`${Ki.VideoFullHD}`]:{mask:15,action:AN},[`${Ki.VideoShareFullHD}`]:{mask:15,action:oN},[`${Ki.WebGL2Render}`]:{mask:15,action:_N},[`${Ki.WebGPURender}`]:{mask:15,action:RN},[`${Ki.ZMKFromRWG}`]:{mask:15,action:Mk}};function YB(e){if(!e)return"";const t=e.match(/rid=(.*)/);return t?t[1]:""}function Xu(e){return nl(ne((t,r)=>e(t,r)),z(t=>t!=null))}function _L(e){return nl(G((t,r)=>e(t,r)||re))}function xo(e){return nl(G((t,r)=>e(t,r)),G(t=>Array.isArray(t)?X(t):qe(t)))}const XB={period:500,rules:[{peak:50,throttle:300},{peak:60,throttle:400}]},Lv={[`${ot}`]:()=>({payloads:{add:[],update:[],remove:[]},onThrottle(e){e.add&&this.payloads.add.push(...e.add),e.update&&this.payloads.update.push(...e.update),e.remove&&this.payloads.remove.push(...e.remove)}})};function RL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:XB;return t=>new Ft(r=>{const n=new Map;let i=0,o=null;const{period:s,rules:a}=e;let l=null;o||(o=((c,p)=>{const h=performance.now();let m=0,f=!1;return setTimeout(function v(){m+=p,c();const g=performance.now()-h-m,y=setTimeout(v,Math.max(p-g,0));f&&clearTimeout(y)},p),()=>{f=!0}})(()=>{i=0},s));const u=Object.keys(Lv),d=t.subscribe({next(c){if(c&&c.evt&&o!==null){i+=1;const{evt:p,body:h}=c,m=String(p);if(u.indexOf(m)>=0)if(l){const f=n.get(m);if(f)f.onThrottle(h);else{const v=Lv[m]();v.onThrottle(h),n.set(m,v)}}else{let f=0;if(a.forEach(v=>{i>v.peak&&(f=v.throttle)}),f>0){const v=Lv[m]();v.onThrottle(h),n.set(m,v),l=setTimeout(()=>{n.forEach((g,y)=>{const S={evt:Number(y),body:g.payloads};r.next(S)}),n.clear(),l=null},f)}else r.next(c)}else r.next(c)}else r.next(c)},error(c){r.error(c)},complete(){r.complete()}});return()=>{d.unsubscribe(),o&&(o(),o=null),i=0}})}let _C=function(e){return e[e.Unknown=0]="Unknown",e[e.Windows=1]="Windows",e[e.Mac=2]="Mac",e[e.Pad=3]="Pad",e[e.Mobile=4]="Mobile",e[e.CallIn=5]="CallIn",e[e.Linux=6]="Linux",e[e.WebClient=7]="WebClient",e[e.ChromeOs=8]="ChromeOs",e}({});const RC=262144,TC=1048576,TL=e=>!(4&~e),Qp=e=>(e&TC)===TC,OL=e=>{let{share:{isReceiveSharing:t}}=e;return t},PL=e=>{let{share:{activeNodeId:t}}=e;return t},e3=dt([et,OL,PL],function(){let e=arguments.length>2?arguments[2]:void 0;if(arguments.length>1&&arguments[1]){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).find(r=>r.userId===e&&r.sharerOn===!0);if(t){let{os:r}=t;const{pwaOS:n}=t;return n==="mac"?r=_C.Mac:n==="win"&&(r=_C.Windows),{...t,os:r}}}return null}),xa=dt([et],e=>e.filter(t=>t.sharerOn)),kL=dt([xa],e=>e.some(t=>!!t.bVideoShare)),ga=dt([e=>{let{share:{remoteControlledUserList:t}}=e;return t},OL,PL],(e,t,r)=>!!t&&e.some(n=>sn(n,r)));var Vv,t3=new Uint8Array(16);function r3(){if(!Vv&&!(Vv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Vv(t3)}for(var n3=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,kr=[],xv=0;xv<256;++xv)kr.push((xv+256).toString(16).substr(1));function Nm(e,t,r){var n=(e=e||{}).random||(e.rng||r3)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(kr[i[o+0]]+kr[i[o+1]]+kr[i[o+2]]+kr[i[o+3]]+"-"+kr[i[o+4]]+kr[i[o+5]]+"-"+kr[i[o+6]]+kr[i[o+7]]+"-"+kr[i[o+8]]+kr[i[o+9]]+"-"+kr[i[o+10]]+kr[i[o+11]]+kr[i[o+12]]+kr[i[o+13]]+kr[i[o+14]]+kr[i[o+15]]).toLowerCase();if(!function(a){return typeof a=="string"&&n3.test(a)}(s))throw TypeError("Stringified UUID is invalid");return s}(n)}function Jc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var DL=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,i3=typeof self=="object"&&self&&self.Object===Object&&self,uo=DL||i3||Function("return this")(),Uv=function(){return uo.Date.now()},o3=/\s/,s3=/^\s+/,zu=uo.Symbol,ML=Object.prototype,a3=ML.hasOwnProperty,l3=ML.toString,gd=zu?zu.toStringTag:void 0,u3=Object.prototype.toString,OC=zu?zu.toStringTag:void 0;function ed(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":OC&&OC in Object(e)?function(t){var r=a3.call(t,gd),n=t[gd];try{t[gd]=void 0;var i=!0}catch{}var o=l3.call(t);return i&&(r?t[gd]=n:delete t[gd]),o}(e):function(t){return u3.call(t)}(e)}function Wu(e){return e!=null&&typeof e=="object"}var d3=/^[-+]0x[0-9a-f]+$/i,c3=/^0b[01]+$/i,p3=/^0o[0-7]+$/i,h3=parseInt;function PC(e){if(typeof e=="number")return e;if(function(n){return typeof n=="symbol"||Wu(n)&&ed(n)=="[object Symbol]"}(e))return NaN;if(Jc(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Jc(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=function(n){return n&&n.slice(0,function(i){for(var o=i.length;o--&&o3.test(i.charAt(o)););return o}(n)+1).replace(s3,"")}(e);var r=c3.test(e);return r||p3.test(e)?h3(e.slice(2),r?2:8):d3.test(e)?NaN:+e}var hr,_t,Lm,ro,f3=Math.max,m3=Math.min;(function(e){e[e.PLAIN=0]="PLAIN",e[e.RSA=1]="RSA",e[e.AESGCM256=2]="AESGCM256"})(hr||(hr={})),function(e){e[e.info=0]="info",e[e.debug=1]="debug",e[e.log=2]="log",e[e.warn=3]="warn",e[e.error=4]="error"}(_t||(_t={})),function(e){e[e.PROTECT_LOCAL_KEY=0]="PROTECT_LOCAL_KEY"}(Lm||(Lm={})),function(e){e.beforeInit="beforeInit",e.afterInit="afterInit",e.beforeLog="beforeLog",e.hitSizeLimit="hitSizeLimit",e.afterLog="afterLog",e.beforeReport="beforeReport",e.afterReport="afterReport"}(ro||(ro={}));class xw{constructor(){}}var kC,DC,MC={exports:{}},NC={exports:{}},g3=LP(Object.freeze({__proto__:null,default:{}}));function NL(){return kC||(kC=1,NC.exports=(e=e||function(t){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&ka!==void 0&&ka.crypto&&(r=ka.crypto),!r)try{r=g3}catch{}var n=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function f(){}return function(v){var g;return f.prototype=v,g=new f,f.prototype=null,g}}(),o={},s=o.lib={},a=s.Base={extend:function(f){var v=i(this);return f&&v.mixIn(f),v.hasOwnProperty("init")&&this.init!==v.init||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var f=this.extend();return f.init.apply(f,arguments),f},init:function(){},mixIn:function(f){for(var v in f)f.hasOwnProperty(v)&&(this[v]=f[v]);f.hasOwnProperty("toString")&&(this.toString=f.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=a.extend({init:function(f,v){f=this.words=f||[],this.sigBytes=v??4*f.length},toString:function(f){return(f||d).stringify(this)},concat:function(f){var v=this.words,g=f.words,y=this.sigBytes,S=f.sigBytes;if(this.clamp(),y%4)for(var b=0;b<S;b++){var R=g[b>>>2]>>>24-b%4*8&255;v[y+b>>>2]|=R<<24-(y+b)%4*8}else for(var w=0;w<S;w+=4)v[y+w>>>2]=g[w>>>2];return this.sigBytes+=S,this},clamp:function(){var f=this.words,v=this.sigBytes;f[v>>>2]&=4294967295<<32-v%4*8,f.length=t.ceil(v/4)},clone:function(){var f=a.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var v=[],g=0;g<f;g+=4)v.push(n());return new l.init(v,f)}}),u=o.enc={},d=u.Hex={stringify:function(f){for(var v=f.words,g=f.sigBytes,y=[],S=0;S<g;S++){var b=v[S>>>2]>>>24-S%4*8&255;y.push((b>>>4).toString(16)),y.push((15&b).toString(16))}return y.join("")},parse:function(f){for(var v=f.length,g=[],y=0;y<v;y+=2)g[y>>>3]|=parseInt(f.substr(y,2),16)<<24-y%8*4;return new l.init(g,v/2)}},c=u.Latin1={stringify:function(f){for(var v=f.words,g=f.sigBytes,y=[],S=0;S<g;S++){var b=v[S>>>2]>>>24-S%4*8&255;y.push(String.fromCharCode(b))}return y.join("")},parse:function(f){for(var v=f.length,g=[],y=0;y<v;y++)g[y>>>2]|=(255&f.charCodeAt(y))<<24-y%4*8;return new l.init(g,v)}},p=u.Utf8={stringify:function(f){try{return decodeURIComponent(escape(c.stringify(f)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(f){return c.parse(unescape(encodeURIComponent(f)))}},h=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=p.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var v,g=this._data,y=g.words,S=g.sigBytes,b=this.blockSize,R=S/(4*b),w=(R=f?t.ceil(R):t.max((0|R)-this._minBufferSize,0))*b,O=t.min(4*w,S);if(w){for(var D=0;D<w;D+=b)this._doProcessBlock(y,D);v=y.splice(0,w),g.sigBytes-=O}return new l.init(v,O)},clone:function(){var f=a.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0});s.Hasher=h.extend({cfg:a.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){return f&&this._append(f),this._doFinalize()},blockSize:16,_createHelper:function(f){return function(v,g){return new f.init(g).finalize(v)}},_createHmacHelper:function(f){return function(v,g){return new m.HMAC.init(f,g).finalize(v)}}});var m=o.algo={};return o}(Math),e)),NC.exports;var e}var LC,jv,LL=DC?MC.exports:(DC=1,MC.exports=NL().enc.Utf8),VC={exports:{}},VL=(LC||(LC=1,VC.exports=(jv=NL(),function(){var e=jv,t=e.lib.WordArray;function r(n,i,o){for(var s=[],a=0,l=0;l<i;l++)if(l%4){var u=o[n.charCodeAt(l-1)]<<l%4*2|o[n.charCodeAt(l)]>>>6-l%4*2;s[a>>>2]|=u<<24-a%4*8,a++}return t.create(s,a)}e.enc.Base64={stringify:function(n){var i=n.words,o=n.sigBytes,s=this._map;n.clamp();for(var a=[],l=0;l<o;l+=3)for(var u=(i[l>>>2]>>>24-l%4*8&255)<<16|(i[l+1>>>2]>>>24-(l+1)%4*8&255)<<8|i[l+2>>>2]>>>24-(l+2)%4*8&255,d=0;d<4&&l+.75*d<o;d++)a.push(s.charAt(u>>>6*(3-d)&63));var c=s.charAt(64);if(c)for(;a.length%4;)a.push(c);return a.join("")},parse:function(n){var i=n.length,o=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var a=0;a<o.length;a++)s[o.charCodeAt(a)]=a}var l=o.charAt(64);if(l){var u=n.indexOf(l);u!==-1&&(i=u)}return r(n,i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),jv.enc.Base64)),VC.exports),Vm=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function a(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){var d;u.done?i(u.value):(d=u.value,d instanceof r?d:new r(function(c){c(d)})).then(s,a)}l((n=n.apply(e,[])).next())})};const v3=e=>{try{const t=VL.parse(e);return LL.stringify(t)}catch{return e}},xm=e=>{for(var t=e.length,r=e.length-1;r>=0;r--){var n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t},xL=()=>Vm(void 0,void 0,void 0,function*(){return yield self.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}),y3=(e,t,r)=>Vm(void 0,void 0,void 0,function*(){try{return yield self.crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,e)}catch(n){throw n}}),S3=(e,t)=>{const r=typeof e=="string"?function(n){const i=new ArrayBuffer(n.length),o=new Uint8Array(i);for(let s=0,a=n.length;s<a;s++)o[s]=n.charCodeAt(s);return i}(e):e;return self.crypto.subtle.encrypt({name:"RSA-OAEP"},t,r)},UL={},Um=(e,t)=>{UL[t]=e},b3=UL,Uw=e=>{try{return JSON.stringify(e)}catch{return"json stringify failed"}},E3=e=>{try{return JSON.parse(e)}catch{return e}},xC=e=>{let t=0;return t+=xm(e.message),e.tags.forEach(r=>{t+=xm(r)}),t};class w3{constructor(t){this.uuid="randomUUID"in self.crypto?self.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,p=>(p^crypto.getRandomValues(new Uint8Array(1))[0]&15>>p/4).toString(16));const{databaseName:r,maxSize:n,publicKey:i,reportUrl:o,plugins:s,idbManager:a,logManager:l,currentSize:u,externalKeys:d,codecWorkerFilePath:c}=t;this.databaseName=r,this.maxSize=n,this.publicKey=i??"",this.reportUrl=o??"",this.plugins=s??[],this.idbManager=a,this.logManager=l,this.currentSize=u??0,this.externalKeys=d,this.commonMethods=Object.assign({},b3)}getLocalAESGCM256Key(){var t;return function(r,n,i,o){return new(i||(i=Promise))(function(s,a){function l(c){try{d(o.next(c))}catch(p){a(p)}}function u(c){try{d(o.throw(c))}catch(p){a(p)}}function d(c){var p;c.done?s(c.value):(p=c.value,p instanceof i?p:new i(function(h){h(p)})).then(l,u)}d((o=o.apply(r,[])).next())})}(this,void 0,void 0,function*(){if(this.localAESGCM256Key)return this.localAESGCM256Key;this.localAESGCM256Key=yield xL();const r=this.externalKeys?(t=this.externalKeys.filter(n=>n.usage===Lm.PROTECT_LOCAL_KEY)[0])===null||t===void 0?void 0:t.key:void 0;return yield this.idbManager.saveAESGCM256Key(this.uuid,this.localAESGCM256Key,r),this.localAESGCM256Key})}updateCurrentSize(t){var r;let n=(r=this.currentSize)!==null&&r!==void 0?r:0;if(t instanceof Map)for(const[i,o]of t)n+=xC(o);else n+=xC(t);return this.currentSize=n,n>=this.maxSize}}const $v=(...e)=>{const t={},r=[];for(const i of e)i.forEach(o=>{t[o.id]||(t[o.id]=!0,r.push(o))});const n=new Map;return r.sort((i,o)=>(i==null?void 0:i.id)-(o==null?void 0:o.id)).forEach(i=>{n.set(i.id,i)}),n},Jp=(e,t)=>{const r=new Map;return t.forEach(n=>{e(n)&&r.set(n.id,n)}),r};class I3{constructor(){this.getStore=()=>({byTag:Object.assign({},this.store.byTag),byTime:new Map(this.store.byTime)}),this.pushByTime=t=>{for(const r of t)this.store.byTime.set(r.id,r)},this.pushByTag=t=>{t.forEach(r=>{const n=r.tags;Array.isArray(n)&&n.forEach(i=>{this.store.byTag[i]||(this.store.byTag[i]=new Map),this.store.byTag[i].set(r.id,r)})})},this.addLog=t=>{let r=t;Array.isArray(t)||(r=[t]),this.pushByTime(r),this.pushByTag(r)},this.syncFromIDB=t=>function(r,n,i,o){return new(i||(i=Promise))(function(s,a){function l(c){try{d(o.next(c))}catch(p){a(p)}}function u(c){try{d(o.throw(c))}catch(p){a(p)}}function d(c){var p;c.done?s(c.value):(p=c.value,p instanceof i?p:new i(function(h){h(p)})).then(l,u)}d((o=o.apply(r,[])).next())})}(this,void 0,void 0,function*(){const r=yield t.getAllLogs();this.addLog(r)}),this.reset=()=>{this.store={byTag:{},byTime:new Map}},this.deleteLogs=t=>{for(const r of t){const n=this.store.byTime.get(r);if(!n)continue;const{tags:i}=n;for(const o of i)this.store.byTag[o].delete(r);this.store.byTime.delete(r)}},this.filterStore=t=>{const r=((i,o)=>{if(!o)return i.byTime;if(typeof o=="string")return i.byTag[o]||new Map;if(Array.isArray(o)){if(o.every(s=>typeof s=="string"))return $v(...o.map(s=>i.byTag[s]).filter(s=>!!s))}else{if(typeof o=="function")return Jp(o,i.byTime);if(typeof o=="object")if(o.tags&&o.filter){if(typeof o.tags=="string")return Jp(o.filter,i.byTag[o.tags]);if(Array.isArray(o.tags)&&o.tags.every(s=>typeof s=="string"))return $v(...o.tags.map(s=>{const a=i.byTag[s];return a?Jp(o.filter,a):new Map}))}else{if(o.filter)return Jp(o.filter,i.byTime);if(o.tags){if(typeof o=="string")return i.byTag[o]||new Map;if(Array.isArray(o)&&o.every(s=>typeof s=="string"))return $v(...o.map(s=>i.byTag[s]))}}else console.error("Wrong filter type")}return new Map})(this.store,t),n=new Map;for(const[i,o]of r){const s=Object.assign(Object.assign({},o),{message:E3(v3(o.message))});n.set(i,s)}return n},this.store={byTag:{},byTime:new Map}}}function _s(e,t,r){const n=e.plugins;if(!Array.isArray(n))return r;let i=r;return n.forEach(o=>{const s=o[t];if(typeof s=="function"){const a=s(e,i);a&&(i=a)}}),i}const jL=(e,t,r,n,i,o={})=>function(s,a,l,u){return new(l||(l=Promise))(function(d,c){function p(f){try{m(u.next(f))}catch(v){c(v)}}function h(f){try{m(u.throw(f))}catch(v){c(v)}}function m(f){var v;f.done?d(f.value):(v=f.value,v instanceof l?v:new l(function(g){g(v)})).then(p,h)}m((u=u.apply(s,[])).next())})}(void 0,void 0,void 0,function*(){const{noCache:s,extraProperties:a={}}=o,l=((d,c,p,h,m,f)=>{const v=Array.isArray(c)?c:[c],g=Date.now();return Object.assign({message:d,logLevel:p,tags:v,encryptMode:h,timestamp:g,laplaceSessionId:m},f)})(`${t}`,r,n,i,e.uuid,a),u=_s(e,ro.beforeLog,l);if(s)_s(e,ro.afterLog,l);else{const{idbManager:d,logManager:c}=e,p=yield d.makeNextId();u.message=(m=>{try{const f=LL.parse(m);return VL.stringify(f)}catch{return m}})(u.message);const h=Object.assign(Object.assign({},u),{id:p});e.updateCurrentSize(h)&&_s(e,ro.hitSizeLimit,h),c.addLog(h),yield d.addLog(h),_s(e,ro.afterLog,h)}});Um(jL,"commonLog");const A3=e=>new Promise(t=>{const r=new XMLHttpRequest;r.open(e.type||"GET",e.url,!0),r.withCredentials=e.withCredentials,r.onerror=n=>{t({error:n,report:e.reportItem})},r.onreadystatechange=function(){if(r.readyState===4){const n=r.status;t(n>=200&&n<300?{report:e.reportItem}:{error:`Request failed, status: ${n}, responseText: ${r.responseText}`,report:e.reportItem})}},Object.entries(e.headers).forEach(([n,i])=>{i&&n&&r.setRequestHeader(n,i)}),r.send(e.data)}),El=(e,t=2)=>{let r=`${e}`;for(;r.length<t;)r=`0${r}`;return r},$L=e=>{const t=new Date(e);return`${t.getUTCFullYear()}-${El(t.getUTCMonth()+1)}-${El(t.getUTCDate())} ${El(t.getUTCHours())}:${El(t.getUTCMinutes())}:${El(t.getUTCSeconds())}.${El(t.getUTCMilliseconds(),3)}`},FL={version:"000001",flag:"0"},C3=(e,t)=>Array.from(e.values()).reduce((r,n)=>{const i=((a,l)=>{const{message:u,logLevel:d,tags:c,timestamp:p,encryptMode:h,id:m}=a,f=function(g,y){var S={};for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&y.indexOf(b)<0&&(S[b]=g[b]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var R=0;for(b=Object.getOwnPropertySymbols(g);R<b.length;R++)y.indexOf(b[R])<0&&Object.prototype.propertyIsEnumerable.call(g,b[R])&&(S[b[R]]=g[b[R]])}return S}(a,["message","logLevel","tags","timestamp","encryptMode","id"]),v=Object.assign(Object.assign({time:$L(p),logLevel:_t[d],message:u,tags:c},l),f);return Uw(v)})(n,t),o=xm(i),s=r[r.length-1];return s.currentSize+o>30720?r.push({messages:[i],ids:[n.id],currentSize:o}):(s.messages.push(i),s.ids.push(n.id),s.currentSize+=o),r},[{messages:[],ids:[],currentSize:0}]).filter(r=>r.currentSize>0).map(r=>({messages:r.messages.join(`
`),ids:r.ids,meta:FL})),BL=(e,t,r)=>((n,i,o)=>Promise.all(n.map(s=>Object.assign({url:i||"",type:"POST",withCredentials:!1,headers:{},data:Uw({messages:s.messages,meta:s.meta}),reportItem:s},o)).map(A3)))(e,t.reportUrl,r).then(n=>{n.forEach(i=>{var o;_s(t,ro.afterReport,{report:i.report,error:(o=i.error)!==null&&o!==void 0?o:null})})}),HL=(e,t,r)=>function(n,i,o,s){return new(o||(o=Promise))(function(a,l){function u(p){try{c(s.next(p))}catch(h){l(h)}}function d(p){try{c(s.throw(p))}catch(h){l(h)}}function c(p){var h;p.done?a(p.value):(h=p.value,h instanceof o?h:new o(function(m){m(h)})).then(u,d)}c((s=s.apply(n,[])).next())})}(void 0,void 0,void 0,function*(){const n=e.logManager.filterStore(t);if(!n||(n==null?void 0:n.size)===0||!r)return;const{xhrOptions:i={},additionalContext:o}=r,s=_s(e,ro.beforeReport,n),a=C3(s,o);BL(a,e,i)});Um(HL,"commonReport");var zL=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function a(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){var d;u.done?i(u.value):(d=u.value,d instanceof r?d:new r(function(c){c(d)})).then(s,a)}l((n=n.apply(e,[])).next())})};const WL=(e,t,r)=>zL(void 0,void 0,void 0,function*(){const{idbManager:n,logManager:i}=e;if(Array.isArray(r)&&(yield n.deleteLogs(r),i.deleteLogs(r),!t))return;const o=e.logManager.filterStore(t),s=[];for(const[l,u]of o)s.push(u.id);let a=s;Array.isArray(s)||(a=[s]),yield n.deleteLogs(a),i.deleteLogs(a)}),GL=e=>zL(void 0,void 0,void 0,function*(){const{idbManager:t,logManager:r}=e;yield t.reset(),r.reset()});function $s(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function KL(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=$s(r);return(i,o)=>n.then(s=>o(s.transaction(t,i).objectStore(t)))}let Fv;function lc(){return Fv||(Fv=KL("keyval-store","keyval")),Fv}function UC(e,t=lc()){return t("readwrite",r=>(e.forEach(n=>r.delete(n)),$s(r.transaction)))}function _3(e=lc()){return e("readonly",t=>{if(t.getAll&&t.getAllKeys)return Promise.all([$s(t.getAllKeys()),$s(t.getAll())]).then(([n,i])=>n.map((o,s)=>[o,i[s]]));const r=[];return e("readonly",n=>function(i){return i.openCursor().onsuccess=function(){this.result&&((o=>{r.push([o.key,o.value])})(this.result),this.result.continue())},$s(i.transaction)}(n).then(()=>r))})}Um(WL,"commonDelete"),Um(GL,"commonReset");const jC={default:{queue:[],isRunning:!1,listeners:[]}},jw=e=>{let t=jC[e];return t||(t={queue:[],isRunning:!1,listeners:[]},jC[e]=t),t};function qL(e){return function(t,r,n,i){return new(n||(n=Promise))(function(o,s){function a(d){try{u(i.next(d))}catch(c){s(c)}}function l(d){try{u(i.throw(d))}catch(c){s(c)}}function u(d){var c;d.done?o(d.value):(c=d.value,c instanceof n?c:new n(function(p){p(c)})).then(a,l)}u((i=i.apply(t,[])).next())})}(this,void 0,void 0,function*(){const t=jw(e),{queue:r,listeners:n}=t;for(;r.length>0&&!t.isRunning;){const i=r.shift();t.isRunning=!0;try{const o=yield i.task();i.resolution(o)}catch(o){i.rejection(o)}t.isRunning=!1,qL(e)}n.length&&n.forEach(i=>{i()})})}function Zp(e,t="default"){const r=jw(t);try{return new Promise((n,i)=>{r.queue.push({task:e,resolution:n,rejection:i}),qL(t)})}catch(n){return Promise.reject(n)}}const $C=(e,t)=>{jw(e).listeners.push(t)};var Mn=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function a(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){var d;u.done?i(u.value):(d=u.value,d instanceof r?d:new r(function(c){c(d)})).then(s,a)}l((n=n.apply(e,[])).next())})};const Bv="change_meta",Hv="change_log",wl=()=>Promise.resolve();class R3{constructor(t){this.waitingForReset=!1,this.resetting=!1,this.isChangingMeta=!1,this.isChangingLog=!1,this.dbFailCount={read:0,write:0},this.get=r=>function(n,i=lc()){return i("readonly",o=>$s(o.get(n)))}(r,this.store),this.set=(r,n)=>Mn(this,void 0,void 0,function*(){try{return!(this.dbFailCount.write>3)&&(yield function(i,o,s=lc()){return s("readwrite",a=>(a.put(o,i),$s(a.transaction)))}(r,n,this.store))}catch(i){i instanceof DOMException&&(i&&i.name==="QuotaExceededError"?(yield this.deleteOldLogsForSetNewOne(),yield this.set(r,n)):this.dbFailCount.write+=1),console.error(i)}}),this.deleteOldLogsForSetNewOne=()=>Mn(this,void 0,void 0,function*(){var r;const n=yield this.getAllLogs(),i=[];for(let o=0;o<13;o++){const s=(r=n[o])===null||r===void 0?void 0:r.id;(s||s===0)&&i.push(`${s}`)}return UC(i,this.store)}),this.adjustMaxId=()=>Mn(this,void 0,void 0,function*(){return this.resetting?wl():(this.isChangingMeta=!0,yield Zp(()=>Mn(this,void 0,void 0,function*(){var r;const n=yield this.getAllLogs(),i=n[n.length-1],o=(r=i==null?void 0:i.id)!==null&&r!==void 0?r:0;return yield this.set("maxId",o),o}),Bv))}),this.makeNextId=()=>Mn(this,void 0,void 0,function*(){return this.resetting?wl():(this.isChangingMeta=!0,yield Zp(()=>Mn(this,void 0,void 0,function*(){const r=yield this.get("maxId");if(!r&&r!==0)return yield this.set("maxId",0),0;const n=r+1;return yield this.set("maxId",n),n}),Bv))}),this.addLog=r=>Mn(this,void 0,void 0,function*(){if(this.resetting)return wl();this.isChangingLog=!0,yield Zp(()=>Mn(this,void 0,void 0,function*(){const{id:n}=r;return this.set(`${n}`,r)}),Hv)}),this.getAllLogs=()=>Mn(this,void 0,void 0,function*(){return(yield _3(this.store)).filter(([r])=>r!=="maxId").sort((r,n)=>{var i,o;return((i=r[1])===null||i===void 0?void 0:i.id)-((o=n[1])===null||o===void 0?void 0:o.id)}).map(([,r])=>r)}),this.deleteLogs=r=>Mn(this,void 0,void 0,function*(){if(this.resetting)return wl();this.isChangingLog=!0,yield Zp(()=>Mn(this,void 0,void 0,function*(){return UC(r.map(n=>`${n}`),this.store)}),Hv),yield this.adjustMaxId()}),this.saveAESGCM256Key=(r,n,i)=>Mn(this,void 0,void 0,function*(){if(i){const o=yield self.crypto.subtle.exportKey("raw",n),s=yield((a,l,u)=>Vm(void 0,void 0,void 0,function*(){return new Promise((d,c)=>{requestAnimationFrame(()=>Vm(void 0,void 0,void 0,function*(){var p;const h=(p=l==null?void 0:l.algorithm)===null||p===void 0?void 0:p.name;let m;if(h==="RSA-OAEP"?m=S3:h==="AES-GCM"&&(m=y3),!m)throw new Error("Unsupported encrypt key type");if(typeof a=="string"){const f=new TextEncoder,v=yield m(f.encode(a),l,u);d(v)}else{const f=yield m(a,l,u);d(f)}}))})}))(o,i,new Uint8Array(16));yield this.set(`aes-gcm-256-${r}`,s)}else yield this.set(`aes-gcm-256-${r}`,n)}),this.reset=()=>Mn(this,void 0,void 0,function*(){return this.resetting?wl():(this.waitingForReset=!0,this.isChangingLog||this.isChangingMeta?wl():(this.resetting=!0,yield function(r=lc()){return r("readwrite",n=>(n.clear(),$s(n.transaction)))}(this.store),this.resetting=!1,void(this.waitingForReset=!1)))}),this.store=KL(t,t+"-store"),$C(Bv,()=>{if(this.isChangingMeta=!1,this.waitingForReset)return this.reset()}),$C(Hv,()=>{if(this.isChangingLog=!1,this.waitingForReset)return this.reset()})}}var Ct=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function a(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){var d;u.done?i(u.value):(d=u.value,d instanceof r?d:new r(function(c){c(d)})).then(s,a)}l((n=n.apply(e,[])).next())})};const T3={databaseName:"laplace-default-db",maxSize:49283072};class m0{constructor(t){this.commonLogWithContext=(n,i,o,s,a)=>Ct(this,void 0,void 0,function*(){yield jL(this.runtimeMetaManager,n,i,o,s,a)}),this.commonReportWithContext=(n,i)=>Ct(this,void 0,void 0,function*(){yield HL(this.runtimeMetaManager,n,i)}),this.commonDeleteWithContext=n=>Ct(this,void 0,void 0,function*(){yield WL(this.runtimeMetaManager,n)}),this.resetWithContext=()=>Ct(this,void 0,void 0,function*(){yield GL(this.runtimeMetaManager)}),this.initLocalAESGCM256Key=()=>Ct(this,void 0,void 0,function*(){return yield xL()}),this.doNotUseDirtyGetStore=()=>this.runtimeMetaManager.logManager.getStore(),this.log=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.log,hr.PLAIN,{extraProperties:o})}),this.info=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.info,hr.PLAIN,{extraProperties:o})}),this.warn=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.warn,hr.PLAIN,{extraProperties:o})}),this.debug=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.debug,hr.PLAIN,{extraProperties:o})}),this.error=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.error,hr.PLAIN,{extraProperties:o})}),this.logWithEncryption=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.log,hr.AESGCM256,{extraProperties:o})}),this.infoWithEncryption=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.info,hr.AESGCM256,{extraProperties:o})}),this.debugWithEncryption=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.debug,hr.AESGCM256,{extraProperties:o})}),this.warnWithEncryption=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.warn,hr.AESGCM256,{extraProperties:o})}),this.errorWithEncryption=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.error,hr.AESGCM256,{extraProperties:o})}),this.logWithoutCache=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.log,hr.PLAIN,{extraProperties:o,noCache:!0})}),this.infoWithoutCache=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.info,hr.PLAIN,{extraProperties:o,noCache:!0})}),this.warnWithoutCache=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.warn,hr.PLAIN,{extraProperties:o,noCache:!0})}),this.debugWithoutCache=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.debug,hr.PLAIN,{extraProperties:o,noCache:!0})}),this.errorWithoutCache=(n,i,o)=>Ct(this,void 0,void 0,function*(){yield this.commonLogWithContext(n,i,_t.error,hr.PLAIN,{extraProperties:o,noCache:!0})}),this.getLogs=n=>{const i=this.runtimeMetaManager.logManager;return i?i.filterStore(n):new Map},this.report=(...n)=>((i,o,s={})=>function(a,l,u,d){return new(u||(u=Promise))(function(c,p){function h(v){try{f(d.next(v))}catch(g){p(g)}}function m(v){try{f(d.throw(v))}catch(g){p(g)}}function f(v){var g;v.done?c(v.value):(g=v.value,g instanceof u?g:new u(function(y){y(g)})).then(h,m)}f((d=d.apply(a,[])).next())})}(void 0,void 0,void 0,function*(){var a,l;const u=(a=s.sampleRate)!==null&&a!==void 0?a:1;if(Math.random()>u)return;if(xm(o)>30720)throw new Error("ERROR: Laplace .report(strMsg) size bigger than 30KB is NOT allowed.");const d=Object.assign({message:Object.assign({strMsg:o},s.extraMsg),time:$L(Date.now())},s.extraData);return!((l=s==null?void 0:s.tags)===null||l===void 0)&&l.length&&(d.tags=s==null?void 0:s.tags),BL([{messages:JSON.stringify(d),meta:FL}],i,s.xhrOptions)}))(this.runtimeMetaManager,...n),this.reportByHttps=(n,i)=>Ct(this,void 0,void 0,function*(){yield this.commonReportWithContext(n,i)}),this.deleteLog=n=>Ct(this,void 0,void 0,function*(){yield this.commonDeleteWithContext(n)}),this.deleteAll=()=>Ct(this,void 0,void 0,function*(){yield this.resetWithContext()});const{runtimeMetaManager:r}=t;this.runtimeMetaManager=r}}m0.init=e=>Ct(void 0,void 0,void 0,function*(){const{databaseName:t="laplace-default-db"}=e,r=new R3(t),n=new I3,i=new w3(Object.assign(Object.assign(Object.assign({},T3),e),{idbManager:r,logManager:n}));_s(i,ro.beforeInit),yield n.syncFromIDB(i.idbManager);const o=new m0({runtimeMetaManager:i});return _s(i,ro.afterInit),o});class O3 extends xw{constructor(t){super(),this.config={verbose:!1},this.beforeLog=(r,n)=>{const{verbose:i}=this.config;switch(i&&console.log("beforeLog, ","state: ",n,"meta: ",r),n.logLevel){case _t.error:console.error(n.message);break;case _t.warn:console.warn(n.message);break;case _t.log:console.log(n.message);break;case _t.debug:console.debug(n.message);break;case _t.info:console.info(n.message)}},this.afterLog=(r,n)=>{const{verbose:i}=this.config;i&&console.log("afterLog, ","state: ",n,"meta: ",r)},this.beforeReport=(r,n)=>{const{verbose:i}=this.config;i&&console.log("beforeReport, ","pluginParams: ",n,"meta: ",r)},this.afterReport=(r,n)=>{const{verbose:i}=this.config;i&&console.log("afterReport, ","pluginParams: ",n,"runtimeMetaManager: ",r)},t&&(this.config=t)}}const FC=e=>{const t=[];for(const[r,n]of e)t.push(n);return t};class P3 extends xw{constructor(t){super(),this.config={debug:!1},this.debugLog=r=>{const{debug:n}=this.config;n&&console.log(`[AutoCleanLogPlugin]: ${r}`)},this.afterInit=r=>{const{expireBefore:n}=this.config;if(!n)return void this.debugLog("early return on beforeInit because expireBefore is falsy");const{logManager:i,commonMethods:{commonDelete:o}}=r,s=i.getStore().byTime,a=(typeof n=="function"?FC(s).filter(n):FC(s).filter(l=>l.timestamp<n)).map(l=>l.id);o(r,void 0,a),this.debugLog(`afterInit, clean log id: ${a}`)},this.afterReport=(r,{report:n,error:i})=>{if(i)return this.debugLog("error"),void console.error(i);const{cleanAfterReport:o}=this.config;if(!o)return void this.debugLog("early return on afterReport because cleanAfterReport is falsy");const{commonMethods:{commonDelete:s}}=r;s(r,void 0,n.ids),this.debugLog(`afterReport, clean log id: ${n.ids}`)},t&&(this.config=t)}}var BC,HC,k3=function(){if(HC)return BC;HC=1;var e="Expected a function",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s=typeof ka=="object"&&ka&&ka.Object===Object&&ka,a=typeof self=="object"&&self&&self.Object===Object&&self,l=s||a||Function("return this")(),u=Object.prototype.toString,d=Math.max,c=Math.min,p=function(){return l.Date.now()};function h(f){var v=typeof f;return!!f&&(v=="object"||v=="function")}function m(f){if(typeof f=="number")return f;if(function(y){return typeof y=="symbol"||function(S){return!!S&&typeof S=="object"}(y)&&u.call(y)=="[object Symbol]"}(f))return NaN;if(h(f)){var v=typeof f.valueOf=="function"?f.valueOf():f;f=h(v)?v+"":v}if(typeof f!="string")return f===0?f:+f;f=f.replace(t,"");var g=n.test(f);return g||i.test(f)?o(f.slice(2),g?2:8):r.test(f)?NaN:+f}return BC=function(f,v,g){var y=!0,S=!0;if(typeof f!="function")throw new TypeError(e);return h(g)&&(y="leading"in g?!!g.leading:y,S="trailing"in g?!!g.trailing:S),function(b,R,w){var O,D,U,x,P,I,E=0,A=!1,_=!1,C=!0;if(typeof b!="function")throw new TypeError(e);function V(ie){var be=O,le=D;return O=D=void 0,E=ie,x=b.apply(le,be)}function M(ie){var be=ie-I;return I===void 0||be>=R||be<0||_&&ie-E>=U}function $(){var ie=p();if(M(ie))return B(ie);P=setTimeout($,function(be){var le=R-(be-I);return _?c(le,U-(be-E)):le}(ie))}function B(ie){return P=void 0,C&&O?V(ie):(O=D=void 0,x)}function ee(){var ie=p(),be=M(ie);if(O=arguments,D=this,I=ie,be){if(P===void 0)return function(le){return E=le,P=setTimeout($,R),A?V(le):x}(I);if(_)return P=setTimeout($,R),V(I)}return P===void 0&&(P=setTimeout($,R)),x}return R=m(R)||0,h(w)&&(A=!!w.leading,U=(_="maxWait"in w)?d(m(w.maxWait)||0,R):U,C="trailing"in w?!!w.trailing:C),ee.cancel=function(){P!==void 0&&clearTimeout(P),E=0,O=I=D=P=void 0},ee.flush=function(){return P===void 0?x:B(p())},ee}(f,v,{leading:y,maxWait:v,trailing:S})}}(),D3=JE(k3);const M3=["RESOURCE_ERROR","JS_ERROR","UNHANDLED_PROMISE_REJECTION"];class N3 extends xw{constructor(t){super(),this.config={debug:!1,publicTags:[]},this.errorCount=0,this.hashErrors={},this.runtimeMetaManager=null,this.addPublicTags=r=>{var n;return(n=this.config.publicTags)===null||n===void 0?void 0:n.concat(r).filter(i=>i)},this.debugLog=r=>{const{debug:n}=this.config;n&&console.log("[AutoLogErrorPlugin]:",r)},this.ignore=r=>{var n,i,o,s,a;return((n=this.config)===null||n===void 0?void 0:n.maxErrorCount)!==void 0&&this.errorCount>=((i=this.config)===null||i===void 0?void 0:i.maxErrorCount)||!!(!((o=this.config)===null||o===void 0)&&o.ignoredErrorMsgKeywords)&&r&&((a=(s=this.config)===null||s===void 0?void 0:s.ignoredErrorMsgKeywords)===null||a===void 0?void 0:a.some(l=>r==null?void 0:r.includes(l)))},this.report=D3(()=>{if(this.runtimeMetaManager===null)return;const{autoReport:r}=this.config,{commonMethods:{commonReport:n}}=this.runtimeMetaManager;return n(this.runtimeMetaManager,M3,r)},600,{trailing:!0,leading:!1}),this.afterInit=r=>{if(this.runtimeMetaManager=r,!self.addEventListener)return;const{commonMethods:{commonLog:n}}=r,i=(o,s,a)=>{this.debugLog(a),this.errorCount+=1;try{return function(l){const u=new TextEncoder().encode(l);return crypto.subtle.digest("SHA-1",u).then(d=>Array.from(new Uint8Array(d)).map(c=>c.toString(16).padStart(2,"0")).join(""))}(o).then(l=>this.hashErrors[l]?"dismissed":(this.hashErrors[l]=!0,n(r,o,this.addPublicTags([].concat(s)),_t.error,hr.PLAIN,{extraProperties:{messageHash:l}}).then(this.report))).catch(console.error)}catch(l){return console.error(l),Promise.resolve(l)}};try{self.addEventListener("error",o=>{var s,a,l,u,d,c,p;if(!this.ignore(o==null?void 0:o.message)){if(o!=null&&o.target&&(!((s=o==null?void 0:o.target)===null||s===void 0)&&s.src||!((a=o==null?void 0:o.target)===null||a===void 0)&&a.href)){const h=`Load Resource Error in ${(l=o==null?void 0:o.target)===null||l===void 0?void 0:l.tagName} element: ${((u=o==null?void 0:o.target)===null||u===void 0?void 0:u.src)||((d=o==null?void 0:o.target)===null||d===void 0?void 0:d.href)}`;return i(h,"RESOURCE_ERROR",o)}{const h=`Javascript Runtime Error in ${o==null?void 0:o.filename} (${o==null?void 0:o.lineno}:${o==null?void 0:o.colno}): ${o==null?void 0:o.message}
Stack: ${(p=(c=o==null?void 0:o.error)===null||c===void 0?void 0:c.stack)!==null&&p!==void 0?p:o==null?void 0:o.stack}`;return i(h,"JS_ERROR",o)}}}),self.addEventListener("unhandledrejection",o=>{var s;if(this.ignore((s=o==null?void 0:o.reason)===null||s===void 0?void 0:s.message))return;let a;const l=o==null?void 0:o.reason;return a=typeof l=="string"?`Promise Error: ${l}`:l instanceof Error?`Promise Error: ${l.message} ${l.name} ${l.stack}`:typeof l=="object"?`Promise Error with reason: ${Uw(l)}`:`Promise Error with unrecognized reason: ${l}`,i(a,"UNHANDLED_PROMISE_REJECTION",o)})}catch(o){console.error(o)}this.debugLog("afterInit, add listener")},t&&(this.config=t),this.config.publicTags=[].concat(t==null?void 0:t.publicTags)}}let Xs=function(e){return e.DeviceAudioStreamCaptured="device audio stream captured",e.AudioJoinComplete="audio join complete",e.AudioLeaveComplete="audio leave complete",e.SharingAudioStartComplete="sharing audio start complete",e.SharingAudioStopComplete="sharing audio stop complete",e.AudioBridgeReconnectStart="audio bridge reconnect start",e.AudioBridgeReconnectEnd="audio bridge reconnect end",e}({}),ea=function(e){return e.VBSettingSuccess="video VB setting success",e.VBSettingFailed="init video VB failed",e.VBPreloadSuccess="preload video VB success",e.VBPreloading3S="preload video VB 3s",e.VBPreloading10S="preload video VB 10s",e.StartCaptureVideoSuccess="start capture video success",e.StopCaptureVideoSuccess="stop capture video success",e}({});function Er(e){return`{E}${e}{/E}`}const L3=["exception flow","MEDIA SDK"],V3={enable:!1,enableReport:!1,gatewayEndPoint:"",newGatewayEndPoint:"",logLevel:{debug:!1,log:!1,info:!1,print:!1,warn:!1,error:!1},performanceReportRatio:.25,trackingCount:7},zC=["debug","log","info","print","warn","error"],Il=(e,t)=>[...e,...t].filter(r=>!!r);class Or{static getInstance(){return this.agentInstance||(this.agentInstance=new Or),this.agentInstance}constructor(){var t=this;this.laplace=void 0,this.trackingId=void 0,this.logConfig=void 0,this.reportUrl=void 0,this.publicTags=void 0,this.accountId=void 0,this.disableAutoReport=void 0,this.debouncedReport=void 0,this.initConfig=async r=>{let n,i=V3;try{r.logConfig&&(i=JSON.parse(r.logConfig),i.gatewayEndPoint&&(this.reportUrl=i.gatewayEndPoint),i.newGatewayEndPoint&&(this.reportUrl=i.newGatewayEndPoint));const{enable:l,enableReport:u,reportUrl:d,logLevel:c,encryptKeys:p,trackingId:h,accountId:m}=r;if(l!==void 0&&(i={...i,enable:!!l}),u!==void 0&&(i={...i,enableReport:!!u}),d&&(this.reportUrl=d),typeof c=="string"){const f=zC.indexOf(c),v=zC.reduce((g,y,S)=>S<f?{...g,[`${y}`]:!1}:{...g,[`${y}`]:!0},{});i={...i,logLevel:v}}else c!==void 0&&(i={...i,logLevel:c});if(h&&(this.trackingId=h,i={...i,enable:!0,enableReport:!0}),p!==void 0){const f=Array.isArray(p)?p:[p];n=await Promise.all(f.map(v=>function(g){return window.crypto.subtle.importKey("raw",new TextEncoder().encode(g.slice(0,32)),"AES-GCM",!1,["encrypt","decrypt"])}(v).then(g=>({usage:Lm.PROTECT_LOCAL_KEY,key:g}))))}m!==void 0&&(this.accountId=m)}catch(l){console.error("parse log config error",l)}const o=new Date().getTime()-6048e5,s=i.enableReport&&this.reportUrl?{gzip:!1,encrypt:!1,additionalContext:{trackingId:this.trackingId}}:void 0;this.publicTags=["VideoSDK",this.trackingId];const a=[r.debugMode&&new O3({verbose:!1}),new P3({debug:!1,cleanAfterReport:!0,expireBefore:o}),new N3({debug:!1,autoReport:s,ignoredErrorMsgKeywords:["table index is out of bounds"],maxErrorCount:223,publicTags:this.accountId?[...this.publicTags,Er(this.accountId)]:this.publicTags})].filter(Boolean);return{laplaceConfig:{databaseName:"ZM-VSDK-LOG-DATABASE",maxSize:49283072,publicKey:r.logEncryptionPubKey,reportUrl:this.reportUrl,externalKeys:n,plugins:a},logConfig:i}},this.handleInitLaplaceSuccess=(r,n)=>{var i;this.laplace=r;const o=Pe.get(XS.VSDKLogTrackingId);let s=[];try{s=JSON.parse(o?window.atob(o):"[]")}catch{}s.length>=((i=n==null?void 0:n.trackingCount)!==null&&i!==void 0?i:7)&&s.shift();const a=s.reduce((l,u)=>({...l,[`${u}`]:!0}),{});r.deleteLog(l=>{var u;return!((u=l.tags)!==null&&u!==void 0&&u.some(d=>a[d]))}),s.push(this.trackingId),Pe.set(XS.VSDKLogTrackingId,window.btoa(JSON.stringify(s)),We.LocalStorage),this.debouncedReport=function(l){const u=[];let d;const c=function(p,h,m){var f,v,g,y,S,b,R=0,w=!1,O=!1,D=!0;if(typeof p!="function")throw new TypeError("Expected a function");function U(A){var _=f,C=v;return f=v=void 0,R=A,y=p.apply(C,_)}function x(A){var _=A-b;return b===void 0||_>=h||_<0||O&&A-R>=g}function P(){var A=Uv();if(x(A))return I(A);S=setTimeout(P,function(_){var C=h-(_-b);return O?m3(C,g-(_-R)):C}(A))}function I(A){return S=void 0,D&&f?U(A):(f=v=void 0,y)}function E(){var A=Uv(),_=x(A);if(f=arguments,v=this,b=A,_){if(S===void 0)return function(C){return R=C,S=setTimeout(P,h),w?U(C):y}(b);if(O)return clearTimeout(S),S=setTimeout(P,h),U(b)}return S===void 0&&(S=setTimeout(P,h)),y}return h=PC(h)||0,Jc(m)&&(w=!0,g=(O="maxWait"in m)?f3(PC(m.maxWait)||0,h):g,D="trailing"in m||D),E.cancel=function(){S!==void 0&&clearTimeout(S),R=0,f=b=v=S=void 0},E.flush=function(){return S===void 0?y:I(Uv())},E}((p,h)=>{const m=l(p,h);return u.length=0,m},arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,{leading:!0,trailing:!0,maxWait:1e4});return window.addEventListener("beforeunload",()=>{c.cancel&&c.cancel(),u.length>0&&l(u,d)}),(p,h)=>(Array.isArray(p)?u.push(...p):typeof p=="string"&&u.push(p),d=h,c(u,h))}(this.laplace.reportByHttps.bind(this.laplace))},this.init=async r=>{const{laplaceConfig:n,logConfig:i}=await this.initConfig(r);return i.enable?(this.logConfig=i,m0.init(n).then(o=>{this.handleInitLaplaceSuccess(o,i)}).catch(o=>{throw{type:Pi,reason:"Logger init failed.",error:o}})):Promise.reject({type:W,reason:"Logger feature is not enabled."})},this.check=r=>{var n;return!(!this.checkLaplace()||((n=this.logConfig)===null||n===void 0||(n=n.logLevel)===null||n===void 0||!n[r])&&(console.warn(`Logger ${r} is not enabled.`),1))},this.log=(r,n,i)=>{if(this.check("log"))try{var o;return(o=this.laplace.logWithEncryption(r,Il(n,i)))===null||o===void 0?void 0:o.catch(()=>{})}catch{return}},this.logWithExtraProperties=(r,n,i)=>{if(this.check("log"))try{var o;return(o=this.laplace.log(r,n,i))===null||o===void 0?void 0:o.catch(()=>{})}catch{return}},this.warn=(r,n,i)=>{if(this.check("warn"))try{var o;return(o=this.laplace.warnWithEncryption(r,Il(n,i)))===null||o===void 0?void 0:o.catch(()=>{})}catch{return}},this.info=(r,n,i)=>{if(this.check("info"))try{var o;return(o=this.laplace.infoWithEncryption(r,Il(n,i)))===null||o===void 0?void 0:o.catch(()=>{})}catch{return}},this.debug=(r,n,i)=>{if(this.check("debug"))try{var o;return(o=this.laplace.debugWithEncryption(r,Il(n,i)))===null||o===void 0?void 0:o.catch(()=>{})}catch{return}},this.error=(r,n,i)=>{if(this.check("error"))try{var o;return(o=this.laplace.errorWithEncryption(r,Il(n,i)))===null||o===void 0?void 0:o.catch(()=>{})}catch{return}},this.checkLaplace=()=>{var r;return!((r=this.laplace)===null||r===void 0||!r.log)},this.makeLogger=r=>{var n;const i=Il((n=this.publicTags)!==null&&n!==void 0?n:[],r);return{log:(o,s)=>this.log(o,i,s??[]),logWithExtraProperties:(o,s)=>this.logWithExtraProperties(o,i,s),warn:(o,s)=>this.warn(o,i,s??[]),info:(o,s)=>this.info(o,i,s??[]),debug:(o,s)=>this.debug(o,i,s??[]),error:(o,s)=>this.error(o,i,s??[]),directReport:(o,s)=>{const a=typeof o!="string"?JSON.stringify(o):o,l=(Array.isArray(s)?s:[s]).filter(Boolean);l.push("MEDIA SDK Direct"),this.report(a,l,"info")}}},this.reportToGlobalTracing=function(r){var n;let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!t.checkLaplace())return Promise.reject({type:W,reason:"Logger has not been enabled or initialized."});if((n=t.logConfig)===null||n===void 0||!n.enableReport||!t.reportUrl)return Promise.reject({type:W,reason:"Please use getLogs to obtain log data and report by yourself."});if(function(){try{return!!Pe.get(Uc.DisableAutoReportLogs)}catch{return!1}}()&&!i)return Promise.resolve();const o=function(s){let a=!0;return s&&(a=!(Array.isArray(s)?s:[s]).some(l=>L3.some(u=>`${l}`.indexOf(u)>-1))),a}(r);return(i||o?t.laplace.reportByHttps.bind(t.laplace):t.debouncedReport)(r,{gzip:!1,encrypt:!1,xhrOptions:{url:t.reportUrl},additionalContext:{trackingId:t.trackingId}})},this.report=function(r,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"warn";if(t.checkLaplace()&&t.logConfig.enableReport&&t.reportUrl){var o,s;const a=Array.isArray(n)?n:[n],l=t.accountId?[...a,Er(t.accountId)]:a;(o=(s=t.makeLogger(l))[`${i}`])===null||o===void 0||(o=o.call(s,r))===null||o===void 0||o.then(()=>{t.reportToGlobalTracing(a)})}},this.getLogs=(r,n)=>{if(!this.checkLaplace())return console.warn("Logger has not been enabled or initialized."),[];const i=r.getState(),{meeting:{meetingNumber:o,userId:s,userEmail:a,userName:l}}=i,u={meetingNumber:o,userId:s,userEmail:a,userName:l},d=this.laplace.getLogs(n),c=[];for(const[,p]of d)c.push({...p,...u});return c},this.doNotUseDirtyGetStore=()=>this.checkLaplace()?this.laplace.doNotUseDirtyGetStore():(console.warn("Logger has not been enabled or initialized."),{byTag:{},byTime:new Map}),this.trackingId=Nm()}}Or.agentInstance=void 0;const QL=Or.getInstance(),JL=[{type:"MediaMeta",methods:["sendUserNodeList","updateUserMediaSN","updateMediaParams","subscribeToQos","unsubscribeFromQos","sendUserAudioStatus","destroy","createMainSessionChannel","notifySDKMeetingReady"]},{type:"Audio",methods:["joinComputerAudio","leaveComputerAudio","joinSharingAudio","leaveSharingAudio","changeSpeaker","changeMicrophone","enableAudioEncode","pauseOrResumeAudio","setSharingAudioVolume","enableShareAudioToBreakoutRoom","enableAudioDenoise","enableSyncButtonsOnHeadset","stopAllIncomingAudio","preInitAudioBridge","setAudioCodecMode","muteOrUnmuteOtherAudio","adjustOtherAudioVolume","changeAudioProfile","unmuteAudio","muteAudio"]},{type:"Video",methods:["startCaptureVideo","stopCaptureVideo","renderVideo","stopRenderVideo","changeCamera","updateRenderedVideoCanvasDimension","adjustRenderedVideoPosition","mirrorVideo","enableHardwareAccelerationForVideoDecode","enableHardwareAccelerationForVideoEncode","startVirtualBackgroundSetting","updateVirtualBackgroundImage","stopVirtualBackgroundSetting","startMaskSetting","updateMaskBackgroundImage","updateMaskClip","stopMaskSetting","enableVideoObserver","prefetchVideoSsrc","cancelPrefetchVideoSsrc","setMobileRotateMode","changeActiveVideoSsrc","updateVideoHDValue","updateVideoFullhdValue","clearVideoCanvas"]},{type:"Sharing",methods:["stopDesktopSharing","startDesktopSharing","pauseDesktopSharing","resumeDesktopSharing","renderSharing","stopRenderSharing","switchSharingSource","ajustmentReceivedSharingCanvas","changeSharingSecondCamera","updateRenderedSharingDimension","addReceivedSharingChannelType","removeReceivedSharingChannelType","switchSharingMode","ajustmentSharingCanvas"]},{type:"RemoteControl",methods:["startRemoteControl","stopRemoteControl","resendRemoteControlPositionPDU","updateRemoteControlProperties","ajustmentReceivedSharingCanvas","startRemoteControlQRCheck"]},{type:"LiveTranscription",methods:["selectLanguageChannelForNewLTT"]},{type:"RemoteCamera",methods:["movePTZCamera"]}].reduce((e,t)=>{const{type:r,methods:n}=t;return[...e,...n.map(i=>({name:i,type:r}))]},[]),x3=JL.map(e=>e.name),U3=function(e){const t=JL.find(o=>o.name===e);if(t){const{type:o}=t;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];const s=n==null?void 0:n.map(a=>Hf(a));QL.makeLogger([o,`${o} Media SDK`]).info(`${e},params:${JSON.stringify(s)}`)}};function Xr(e){return new Proxy(e,{get:(t,r)=>typeof r=="string"&&x3.includes(r)?function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];try{Reflect.apply(U3,void 0,[r,...i])}catch{}return Reflect.apply(Reflect.get(t,r),t,i)}:Reflect.get(t,r)})}const of=Or.getInstance().makeLogger(["Remote Control"]),j3=Xr(Oe.getInstance());function wu(e,t,r,n){let{share:{activeNodeId:i,shareQuality:o}}=t;const{share:{isReceiveSharingFromMainSession:s}}=t;r&&(i=r),n!==void 0&&(o=n);const a=kL(t);e.subscribeSharing(i,o,s,a)}class ZL{constructor(){this.checkerSubject=void 0,this.checkerSubscription=void 0}startCheck(t){return this.checkerSubject&&this.stopCheck(),this.checkerSubject=new Fn,this.checkerSubscription=Nt(t).subscribe(this.checkerSubject),this.checkerSubject}stopCheck(){var t;this.checkerSubject&&(this.checkerSubject.complete(),(t=this.checkerSubscription)===null||t===void 0||t.unsubscribe(),this.checkerSubject=void 0)}}const YL=new ZL,XL=new ZL;function jd(){return YL.stopCheck()}function g0(){return XL.stopCheck()}function jm(e,t){jd(),g0();const{share:{remoteControllingSsrc:r},meeting:{userId:n}}=e;r&&(eV(),t.takeBackRemoteControlPermission(n,r))}async function WC(e,t,r,n,i){const{share:{isSDKGrabControl:o,isGrabRemoteControl:s}}=r;if(!s){n.subscribeGrabRemoteControl(e,!0);try{await dr(Ge(Ga,1).pipe(z(l=>!!l)))}catch{}}const a=e3(r);a&&(o?(i.resendRemoteControlPositionPDU(),i.updateRemoteControlProperties({os:a.os,isControllerNow:!0,dimension:t&&p0(t)})):t&&i.startRemoteControl(t,a.os,p0(t)))}function eV(){of.log("qr scanning stop"),j3.startRemoteControlQRCheck(!1)}function $m(e,t,r){var n;const{audio:i,share:{isReceiveSharingFromMainSession:o}}=t;if((i==null||(n=i.localShareAudioUserMutedList)===null||n===void 0?void 0:n.length)>0){const{localShareAudioUserMutedList:s}=i,a=s.find(l=>l.userId===e);s.filter(l=>l.userId!==e).forEach(l=>{r.setSharingAudioVolume(l.userId,!0,l.isFromMainSession)}),r.setSharingAudioVolume(e,!(a==null||!a.muted),!!o)}}const mi=He.createAgent(),pr=Xr(Oe.getInstance()),mo=He.createAgent(),go=Xr(Oe.getInstance());function _i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Iu(e){return!!e&&!!e[Wn]}function Qa(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===z3}(e)||Array.isArray(e)||!!e[XC]||!!(!((t=e.constructor)===null||t===void 0)&&t[XC])||$w(e)||Fw(e))}function Zc(e,t,r){r===void 0&&(r=!1),Gu(e)===0?(r?Object.keys:Gw)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function Gu(e){var t=e[Wn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:$w(e)?2:Fw(e)?3:0}function v0(e,t){return Gu(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function tV(e,t,r){var n=Gu(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function $w(e){return B3&&e instanceof Map}function Fw(e){return H3&&e instanceof Set}function va(e){return e.o||e.t}function Bw(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=W3(e);delete t[Wn];for(var r=Gw(t),n=0;n<r.length;n++){var i=r[n],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Hw(e,t){return t===void 0&&(t=!1),zw(e)||Iu(e)||!Qa(e)||(Gu(e)>1&&(e.set=e.add=e.clear=e.delete=$3),Object.freeze(e),t&&Zc(e,function(r,n){return Hw(n,!0)},!0)),e}function $3(){_i(2)}function zw(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function oo(e){var t=G3[e];return t||_i(18,e),t}function GC(){return Yc}function zv(e,t){t&&(oo("Patches"),e.u=[],e.s=[],e.v=t)}function Fm(e){y0(e),e.p.forEach(F3),e.p=null}function y0(e){e===Yc&&(Yc=e.l)}function KC(e){return Yc={p:[],l:Yc,h:e,m:!0,_:0}}function F3(e){var t=e[Wn];t.i===0||t.i===1?t.j():t.g=!0}function Wv(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||oo("ES5").S(t,e,n),n?(r[Wn].P&&(Fm(t),_i(4)),Qa(e)&&(e=Bm(t,e),t.l||Hm(t,e)),t.u&&oo("Patches").M(r[Wn].t,e,t.u,t.s)):e=Bm(t,r,[]),Fm(t),t.u&&t.v(t.u,t.s),e!==rV?e:void 0}function Bm(e,t,r){if(zw(t))return t;var n=t[Wn];if(!n)return Zc(t,function(a,l){return qC(e,n,t,a,l,r)},!0),t;if(n.A!==e)return t;if(!n.P)return Hm(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=Bw(n.k):n.o,o=i,s=!1;n.i===3&&(o=new Set(i),i.clear(),s=!0),Zc(o,function(a,l){return qC(e,n,i,a,l,r,s)}),Hm(e,i,!1),r&&e.u&&oo("Patches").N(n,r,e.u,e.s)}return n.o}function qC(e,t,r,n,i,o,s){if(Iu(i)){var a=Bm(e,i,o&&t&&t.i!==3&&!v0(t.R,n)?o.concat(n):void 0);if(tV(r,n,a),!Iu(a))return;e.m=!1}else s&&r.add(i);if(Qa(i)&&!zw(i)){if(!e.h.D&&e._<1)return;Bm(e,i),t&&t.A.l||Hm(e,i)}}function Hm(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Hw(t,r)}function Gv(e,t){var r=e[Wn];return(r?va(r):e)[t]}function QC(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function S0(e){e.P||(e.P=!0,e.l&&S0(e.l))}function Kv(e){e.o||(e.o=Bw(e.t))}function b0(e,t,r){var n=$w(t)?oo("MapSet").F(t,r):Fw(t)?oo("MapSet").T(t,r):e.O?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:GC(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=a,u=E0;s&&(l=[a],u=$d);var d=Proxy.revocable(l,u),c=d.revoke,p=d.proxy;return a.k=p,a.j=c,p}(t,r):oo("ES5").J(t,r);return(r?r.A:GC()).p.push(n),n}function JC(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Bw(e)}var ZC,Yc,Ww=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",B3=typeof Map<"u",H3=typeof Set<"u",YC=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",rV=Ww?Symbol.for("immer-nothing"):((ZC={})["immer-nothing"]=!0,ZC),XC=Ww?Symbol.for("immer-draftable"):"__$immer_draftable",Wn=Ww?Symbol.for("immer-state"):"__$immer_state",z3=""+Object.prototype.constructor,Gw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,W3=Object.getOwnPropertyDescriptors||function(e){var t={};return Gw(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},G3={},E0={get:function(e,t){if(t===Wn)return e;var r=va(e);if(!v0(r,t))return function(i,o,s){var a,l=QC(o,s);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!Qa(n)?n:n===Gv(e.t,t)?(Kv(e),e.o[t]=b0(e.A.h,n,e)):n},has:function(e,t){return t in va(e)},ownKeys:function(e){return Reflect.ownKeys(va(e))},set:function(e,t,r){var n=QC(va(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=Gv(va(e),t),o=i==null?void 0:i[Wn];if(o&&o.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(function(s,a){return s===a?s!==0||1/s==1/a:s!=s&&a!=a}(r,i)&&(r!==void 0||v0(e.t,t)))return!0;Kv(e),S0(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return Gv(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Kv(e),S0(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=va(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){_i(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){_i(12)}},$d={};Zc(E0,function(e,t){$d[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),$d.deleteProperty=function(e,t){return $d.set.call(this,e,t,void 0)},$d.set=function(e,t,r){return E0.set.call(this,e[0],t,r,e[0])};var K3=function(){function e(r){var n=this;this.O=YC,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var l=n;return function(f){var v=this;f===void 0&&(f=a);for(var g=arguments.length,y=Array(g>1?g-1:0),S=1;S<g;S++)y[S-1]=arguments[S];return l.produce(f,function(b){var R;return(R=o).call.apply(R,[v,b].concat(y))})}}var u;if(typeof o!="function"&&_i(6),s!==void 0&&typeof s!="function"&&_i(7),Qa(i)){var d=KC(n),c=b0(n,i,void 0),p=!0;try{u=o(c),p=!1}finally{p?Fm(d):y0(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(f){return zv(d,s),Wv(f,d)},function(f){throw Fm(d),f}):(zv(d,s),Wv(u,d))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===rV&&(u=void 0),n.D&&Hw(u,!0),s){var h=[],m=[];oo("Patches").M(i,u,h,m),s(h,m)}return u}_i(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var d=arguments.length,c=Array(d>1?d-1:0),p=1;p<d;p++)c[p-1]=arguments[p];return n.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(c))})};var s,a,l=n.produce(i,o,function(u,d){s=u,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,s,a]}):[l,s,a]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Qa(r)||_i(8),Iu(r)&&(r=function(o){return Iu(o)||_i(22,o),function s(a){if(!Qa(a))return a;var l,u=a[Wn],d=Gu(a);if(u){if(!u.P&&(u.i<4||!oo("ES5").K(u)))return u.t;u.I=!0,l=JC(a,d),u.I=!1}else l=JC(a,d);return Zc(l,function(c,p){u&&function(h,m){return Gu(h)===2?h.get(m):h[m]}(u.t,c)===p||tV(l,c,s(p))}),d===3?new Set(l):l}(o)}(r));var n=KC(this),i=b0(this,r,void 0);return i[Wn].C=!0,y0(n),i},t.finishDraft=function(r,n){var i=(r&&r[Wn]).A;return zv(i,n),Wv(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!YC&&_i(20),this.O=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var o=n[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(n=n.slice(i+1));var s=oo("Patches").$;return Iu(r)?s(r,n):this.produce(r,function(a){return s(a,n)})},e}(),Ln=new K3,k=Ln.produce;Ln.produceWithPatches.bind(Ln),Ln.setAutoFreeze.bind(Ln),Ln.setUseProxies.bind(Ln),Ln.applyPatches.bind(Ln),Ln.createDraft.bind(Ln),Ln.finishDraft.bind(Ln);const e2={ssrc:0,status:Fe.End,shareDimension:{width:0,height:0},receivedShareDimension:{width:1920,height:1080,logicWidth:1920,logicHeight:1080},sharePrivilege:xn.OnlyHost,activeNodeId:0,activeSsrc:0,shareQuality:1,isRemoteSharingActive:!1,isReceiveSharing:!1,isGrabRemoteControl:!1,isSDKGrabControl:!1,isChromeExtensionInstalled:!1,isScreenShareForbidden:!1,isReceiveSharingFromMainSession:!1,isSharingToBreakoutRoom:!1,isSharingWithSecondCamera:!1,secondCameraId:"default",isRequireReadReceipt:!1,capturedEnsuredCanvas:[],renderedEnsuredCanvas:[],remoteControllingSsrc:0,remoteControlApprovedSsrc:0,remoteControlAppDownloadUrl:"",remoteControlAppInstallStatus:gr.Unknown,isEnableAutoDeleteRcApp:!1,remoteControlledUserList:[],isRemoteControlEnabled:!1,isFullHDVideoShareEnabled:!1,userSsrcMapping:{},statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0}}},q3=pn({[`${ww}`]:k((e,t)=>{let{payload:r}=t;e.sharePrivilege=r}),[`${fm}`]:k((e,t)=>{let{payload:r}=t;e.isRemoteSharingActive=r.bStatus===1,e.activeNodeId=r.activeNodeID,e.activeSsrc=r.ssrc}),[`${mm}`]:k((e,t)=>{let{payload:r}=t;e.isReceiveSharing=r}),[`${KM}`]:k((e,t)=>{let{payload:r}=t;e.isChromeExtensionInstalled=r}),[`${qM}`]:k((e,t)=>{let{payload:r}=t;e.shareDimension={...r}}),[`${an}`]:k((e,t)=>{let{payload:r}=t;e.status=r}),[`${QM}`]:k((e,t)=>{let{payload:r}=t;e.ssrc=r}),[`${Iw}`]:k((e,t)=>{let{payload:r}=t;e.shareQuality=r}),[`${Fb}`]:k((e,t)=>{let{payload:r}=t;e.receivedShareDimension={...r}}),[`${nN}`]:k((e,t)=>{let{payload:r}=t;e.remoteControlledUserList.includes(r)||e.remoteControlledUserList.push(r)}),[`${Wb}`]:k((e,t)=>{let{payload:r}=t;const n=e.remoteControlledUserList.indexOf(r);n>=0&&e.remoteControlledUserList.splice(n,1)}),[`${Qh}`]:k((e,t)=>{let{payload:r}=t;e.isGrabRemoteControl=r,r===!1&&(e.remoteControlViewportDomSelector=void 0)}),[`${Bb}`]:k((e,t)=>{let{payload:r}=t;e.isSDKGrabControl=r}),[`${JM}`]:k((e,t)=>{let{payload:r}=t;e.isReceiveSharingFromMainSession=r}),[`${Ud}`]:k((e,t)=>{let{payload:r}=t;e.isSharingToBreakoutRoom=r}),[`${ZM}`]:k((e,t)=>{let{payload:r}=t;e.isSharingWithSecondCamera=r}),[`${YM}`]:k((e,t)=>{let{payload:r}=t;e.secondCameraId=r}),[`${XM}`]:k((e,t)=>{let{payload:r}=t;e.isRequireReadReceipt=r}),[`${gm}`]:k((e,t)=>{let{payload:r}=t;e.isOptimizedForSharedVideo=r}),[`${Hb}`]:k((e,t)=>{let{payload:r}=t;const{data:{encoding:n,rate:i,...o}}=r;e.statistic.encode={bitrate:i,...o}}),[`${Wc}`]:k((e,t)=>{let{payload:r}=t;const{data:{encoding:n,rate:i,...o}}=r;e.statistic.decode={bitrate:i,...o}}),[`${eN}`]:k((e,t)=>{let{payload:r}=t;e.capturedEnsuredCanvas.includes(r)||e.capturedEnsuredCanvas.push(r)}),[`${tN}`]:k((e,t)=>{let{payload:r}=t;e.renderedEnsuredCanvas.includes(r)||e.renderedEnsuredCanvas.push(r)}),[`${sc}`]:k((e,t)=>{let{payload:r}=t;e.remoteControllingSsrc=r}),[`${yu}`]:k((e,t)=>{let{payload:r}=t;e.remoteControlApprovedSsrc=r}),[`${rN}`]:k((e,t)=>{let{payload:r}=t;e.remoteControlAppDownloadUrl=r}),[`${wa}`]:k((e,t)=>{let{payload:r}=t;(e.remoteControlAppInstallStatus!==gr.Installed||gr.Unknown)&&(e.remoteControlAppInstallStatus=r)}),[`${eo}`]:k((e,t)=>{let{payload:r}=t;e.remoteControlAppLaunchSheme=r}),[`${zb}`]:k((e,t)=>{let{payload:r}=t;const{userId:n,ssrc:i}=r;Object.assign(e.userSsrcMapping,{[`${n}`]:i})}),[`${Aw}`]:k((e,t)=>{let{payload:r}=t;Object.assign(e,r)}),[`${iN}`]:k((e,t)=>{let{payload:r}=t;e.remoteControlViewportDomSelector=r}),[`${oN}`]:k((e,t)=>{let{payload:r}=t;e.isFullHDVideoShareEnabled=r}),[`${sN}`]:()=>({...e2})},e2),Q3={remoteControlEpics0:e=>e.pipe(he(`${qn}`),ne(t=>{const{payload:{meetingOptions:r,rcAutoDelete:n,jwtRc:i,opRc:o}}=t,s=(r==null?void 0:r.isRemoteControlEnbaled)&&o&&i===1;return Aw({isRemoteControlEnabled:s,isEnableAutoDeleteRcApp:n===1})})),remoteControlEpics1:(e,t)=>se(e,16391).pipe(G(r=>{const{payload:{body:{bOn:n,sendID:i,receiveID:o}}}=r,{meeting:{userId:s},share:{status:a,activeNodeId:l,isGrabRemoteControl:u}}=t.value,d=[];if(a===Fe.End&&d.push(sc(0)),a!==Fe.End)if(sn(s,i))if(n){jd(),g0(),a===Fe.Paused&&(mo.resumeSharing(),go.resumeDesktopSharing(),d.push(an(Fe.Sharing))),d.push(sc(o));const p=et(t.value).find(h=>sn(h.userId,o));p&&d.push(zb({userId:p.userId,ssrc:o}))}else d.push(sc(0));else{var c;const p=(c=et(t.value))===null||c===void 0?void 0:c.find(h=>sn(h.userId,i));p&&(d.push(zb({userId:p.userId,ssrc:i})),T($D,{userId:p.userId,displayName:p.displayName,isSharingEntireScreen:go.isSharingEntireScreen()}))}else if(!o||sn(o,s)){const p=ye(t.value);if(!Xt(p.userRole)&&!ae.isAndroidOrIOSBrowser){const h=i&&sn(l,i);n?(d.push(nN(l)),h&&(u||mo.subscribeGrabRemoteControl(l,!0))):(d.push(Wb(l)),h&&(u&&(mo.subscribeGrabRemoteControl(l,!1),d.push(Qh(!1)),T(Ga,!1)),go.updateRemoteControlProperties({isControllerNow:!1}))),T(am,n)}}return X(d)})),remoteControlEpics2:(e,t)=>se(e,16395).pipe(fe(t),z(r=>{let[n,i]=r;return n.payload.body.id===i.meeting.userId}),ne(r=>{let[n]=r;const{payload:{body:{bOn:i}}}=n;return go.updateRemoteControlProperties({isControllerNow:i}),T(Ga,i),Qh(i)})),remoteControlEpics3:e=>Re(e,[Z.StartRemoteControlSuccess,Z.StartRemoteControlFailed,Z.CancelRemoteControlSuccess]).pipe(Xu(t=>t.payload.type===Z.StartRemoteControlSuccess?(T(VD),Bb(!0)):t.payload.type===Z.CancelRemoteControlSuccess?Bb(!1):void(t.payload.type===Z.StartRemoteControlFailed&&T(xD)))),remoteControlEpics4:e=>Re(e,[Z.RemoteControlCopiedTextNotify,Z.RemoteControlPasteTextLengthOverflow]).pipe(de(t=>{if(t.payload.type===Z.RemoteControlCopiedTextNotify){const{payload:{data:r}}=t;T(bb,{content:r.data,x:r.x,y:r.y})}else T(bb,{error:"length of pasted text is too long"})}),_e(re)),remoteControlEpics5:(e,t)=>se(e,4342).pipe(z(r=>r.payload.body.result===0),G(r=>{const{payload:{body:{downloadUrl:n,ssrc:i,urlScheme:o}}}=r,{share:{remoteControlApprovedSsrc:s,status:a}}=t.value,l=[],{isMacOS:u}=ae;if(a!==Fe.End){if(!s||s===i){jd();try{const m=JSON.parse(n||"{}"),f=u?m.macDownloadUrl:m.winDownloadUrl;l.push(rN(f))}catch(m){console.warn("unsupported JSON string",m)}}const d={},c=et(t.value).find(m=>sn(m.userId,i));c&&Object.assign(d,{controllerName:bt(c.displayName)}),Object.assign(d,{ssrc:i});const{deviceId:p}=go.getShareStreamInfo();p&&Object.assign(d,{DeviceID:p});const h=`${o}&${new URLSearchParams(d).toString()}`;l.push(eo(h),wa(gr.Unknown)),T(FD,h)}return X(l)})),remoteControlEpics6:e=>e.pipe(he(`${SC}`),G(()=>YL.startCheck(1e4).pipe(ne(()=>(T(ha,gr.Unknown),wa(gr.Unknown)))))),remoteControlEpics7:(e,t)=>e.pipe(he(`${Dv}`),z(()=>{const{share:{remoteControlAppInstallStatus:r}}=t.value;return r===gr.Installed}),G(()=>XL.startCheck(12e4).pipe(G(()=>{T(ha,tm.Unlaunched);const{share:{remoteControlApprovedSsrc:r,isEnableAutoDeleteRcApp:n},meeting:{userId:i}}=t.value,o=[],{isMacOS:s}=ae;return r&&(mo.remoteControlConsent(em.CacheClean,r,i,{...go.getShareStreamInfo(),platform:s?"mac":"win"},n),o.push(eo(""),yu(0))),X(o)})))),remoteControlEpics8:(e,t)=>e.pipe(he(`${eo}`),z(r=>!!r.payload),G(r=>{const{payload:n}=r,i=[];let o;if(n){(function(a){if(!a.startsWith("zoomprc://"))return;const l=Do("__ZOOM_SDK_RC_APP_SCHEME_@__");let u=document.getElementById(l);u||(u=document.createElement("iframe"),u.id=l,u.style.display="none",document.body.appendChild(u)),u.contentWindow.location.href=a})(n),i.push(Dv());const s=performance.now();document.hasFocus()?o=Lc(25).pipe(Pa(()=>{const a=performance.now()-s<500;return a||T(ha,gr.Uninstalled),a&&t.value.share.remoteControlAppInstallStatus===gr.Unknown}),Be(()=>{const a=performance.now()-s,l=[];return document.hasFocus()||(a>75?l.push(SC()):jd(),T(ha,gr.Installed),l.push(wa(gr.Installed),Dv())),X(l)}),function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return function(u){return Nc(u,qe.apply(void 0,Bo([],ao(a))))}}(wa(gr.Uninstalled))):(T(ha,gr.Unknown),i.push(wa(gr.Unknown)))}return o?Wt(o,X(i)):X(i)})),remoteControlEpics9:(e,t)=>se(e,rb).pipe(G(()=>(T(Wh,Tv.Ended),jm(t.value,mo),X([eo(""),yu(0)])))),remoteControlEpics10:(e,t)=>e.pipe(he(`${an}`),z(r=>{const{share:{remoteControllingSsrc:n,remoteControlApprovedSsrc:i}}=t.value;return!(r.payload!==Fe.End||!n&&!i)}),de(()=>{const{share:{remoteControllingSsrc:r,remoteControlApprovedSsrc:n,isEnableAutoDeleteRcApp:i},meeting:{userId:o}}=t.value,{isMacOS:s}=ae;r&&jm(t.value,mo),n!==r&&mo.remoteControlConsent(em.Decline,n,o,{...go.getShareStreamInfo(),platform:s?"mac":"win"},i)}),_e(re)),remoteControlEpics11:(e,t)=>se(e,16430).pipe(G(()=>(jd(),g0(),T(ha,tm.Launched),t.value.share.status!==Fe.End&&function(r,n){(async function(i){const{media:{assetsPath:o}}=i,s=`${o}/qrscanner.min.js`;return"WebQrscanner"in window?Promise.resolve(""):new Promise((a,l)=>{of.log(`load qr scanner script start. url:${s}`),Ig(s,()=>{of.log("load qr scanner script done."),a("")},l)})})(r).then(()=>{of.log("qr scanning start"),n.startRemoteControlQRCheck(!0)})}(t.value,go),X([eo(""),yu(0)])))),remoteControlEpics12:e=>Re(e,Z.CurrentDesktopSharingWidthHeight).pipe(de(()=>{mo.syncSharedContentMetaWithRcApp(go.getShareStreamInfo())}),_e(re)),remoteControlEpics13:(e,t)=>Re(e,Z.SendRemoteControlQrCode).pipe(de(r=>{const{payload:{data:n}}=r,{share:{status:i}}=t.value;i!==Fe.End&&Array.isArray(n)&&n.length>0&&n.forEach(o=>{o!=null&&o.startsWith("zrc_")&&mo.sendRemoteControlAuth(o)})}),_e(re)),remoteControlEpics14:e=>se(e,16434).pipe(de(t=>{const{payload:{body:{result:r}}}=t;r===0&&(eV(),T(Wh,Tv.Started))}),_e(re)),remoteControlEpics15:(e,t)=>se(e,ot).pipe(z(r=>{var n,i;const{meeting:{userId:o},share:{remoteControlledUserList:s}}=t.value,{payload:{body:a}}=r;return s.length>0&&(((n=a.update)===null||n===void 0?void 0:n.some(l=>l.id!==o&&l.bShareOn===!1))||((i=a.remove)===null||i===void 0?void 0:i.some(l=>l.id!==o)))}),G(r=>{var n,i,o,s;const{payload:{body:a}}=r,{share:{remoteControlledUserList:l,activeNodeId:u,isGrabRemoteControl:d},meeting:{userId:c}}=t.value,p=((n=(i=a.update)===null||i===void 0?void 0:i.filter(m=>m.id!==c&&m.bShareOn===!1))!==null&&n!==void 0?n:[]).concat((o=(s=a.remove)===null||s===void 0?void 0:s.filter(m=>m.id!==c))!==null&&o!==void 0?o:[]),h=[];return l.forEach(m=>{p.find(f=>f.id===m)&&(h.push(Wb(m)),m===u&&d&&(h.push(Qh(!1)),T(Ga,!1)))}),X(h)})),remoteControlEpics16:(e,t)=>e.pipe(he(`${Vr}`),de(()=>{const{share:{remoteControllingSsrc:r,status:n}}=t.value;n===Fe.Sharing&&r&&T(Wh,Tv.Ended)}),_e(re))},J3={epics0:(e,t)=>se(e,zn).pipe(z(r=>{var n;return((n=r.payload.body)===null||n===void 0?void 0:n.lockShare)!==void 0}),fe(t),de(r=>{let[n,i]=r;const{share:{sharePrivilege:o}}=i,{payload:{body:{lockShare:s}}}=n;o!==s&&T(UD,s)}),ne(r=>{let[n]=r;return ww(n.payload.body.lockShare)})),epics1:e=>se(e,20227).pipe(ne(t=>QM(t.payload.body.ssrc))),epics2:(e,t)=>se(e,eb).pipe(fe(t),z(r=>{let[n,i]=r;const{payload:{body:o}}=n,{share:{isReceiveSharingFromMainSession:s}}=i;return!s||s&&o.fromMainSession}),ne(r=>{let[n,i]=r;const{share:{isReceiveSharing:o,activeNodeId:s,isReceiveSharingFromMainSession:a},breakoutRoom:l}=i,{payload:{body:u}}=n;if(o&&u.bStatus===1){let d=!1;(l==null?void 0:l.currentRoom.status)===Ee.InRoom&&l.mainSessionAttendeeList.length>0&&(d=l.mainSessionAttendeeList.findIndex(c=>c.userId===s)>-1),mi.unsubscribeSharing(s,d),wu(mi,i,u.activeNodeID),pr.switchSharingSource(u.ssrc,a),$m(u.activeNodeID,t.value,pr),T(sm,{userId:u.activeNodeID})}else if(u.bStatus===1){const d={activeUserId:u.activeNodeID,isActive:!0};a&&Object.assign(d,{isFromMainSession:!0}),T(yb,d)}else if(o){const d={activeUserId:u.activeNodeID,isActive:!1};a&&Object.assign(d,{isFromMainSession:!0}),T(yb,d)}return fm(u)})),epics3:e=>Re(e,Z.CheckChromeSharingExtensionResponse).pipe(ne(t=>(T(Sb,t.payload.data),KM(t.payload.data)))),epics4:(e,t)=>Re(e,[Z.SharingDesktopStreamHaveAudio,Z.SharingDesktopStreamHaveNoAudio]).pipe(z(r=>r.payload.type!==Z.SharingDesktopStreamHaveAudio||!t.value.audio.secondaryAudioMicrophoneId),fe(t),ne(r=>{let[n,i]=r;const{meeting:{userId:o},share:{isSharingToBreakoutRoom:s,isOptimizedForSharedVideo:a}}=i,{payload:{type:l}}=n,u=l===Z.SharingDesktopStreamHaveAudio;return mi.startSharing(o,{bShareToBO:s,bShareAudio:u,bShareVideo:!!a}),pr.switchSharingMode(a?nc.VideoMode:nc.Normal),yC(!1)})),epics5:e=>Re(e,[Z.DesktopSharingError,Z.DesktopSharingChromeExtensionUninstalled,Z.DesktopSharingPermissionDenied,Z.DesktopSharingSystemError]).pipe(G(t=>{const r=[];let n="";return[Z.DesktopSharingPermissionDenied,Z.DesktopSharingSystemError].includes(t.payload.type)&&(r.push(yC(!0)),t.payload.type===Z.DesktopSharingSystemError?ae.isMacOS&&(n="To use screen share on Chrome, please allow screen recording access in system setting."):n="To use screen share, please allow the permission request."),T(OD,{reason:n}),X(r)})),epics6:e=>Re(e,Z.CurrentDesktopSharingWidthHeight).pipe(z(t=>!!t.payload.data),ne(t=>{T(PD,t.payload.data);const{payload:{data:{width:r,height:n}}}=t;return pr.ajustmentSharingCanvas(r,n),qM(t.payload.data)})),epics7:(e,t)=>Re(e,Z.SharingDecodeMaxSize).pipe(z(r=>!!r.payload.data),fe(t),Xu(r=>{let[n,i]=r;const{share:{shareQuality:o,activeNodeId:s}}=i,{payload:{data:{fps:a}}}=n,l=Number(a);if(o!==l)return wu(mi,i,s,l),Iw(l)})),epics8:e=>se(e,20226).pipe(de(t=>{var r,n;if(T(om,(r=t.payload)===null||r===void 0?void 0:r.body),(n=t.payload)!==null&&n!==void 0&&n.body){const{payload:{body:{width:i,height:o}}}=t;pr.ajustmentReceivedSharingCanvas(i,o)}}),ne(t=>Fb(t.payload.body))),epics9:e=>Re(e,Z.SharingPara).pipe(de(t=>{var r,n;if(T(om,(r=t.payload.data)===null||r===void 0?void 0:r.body),(n=t.payload.data)!==null&&n!==void 0&&n.body){const{payload:{data:{body:{width:i,height:o}}}}=t;pr.ajustmentReceivedSharingCanvas(i,o)}}),ne(t=>{var r;return Fb((r=t.payload.data)===null||r===void 0?void 0:r.body)})),epics10:(e,t)=>Re(e,Z.UserStopDesktopSharing).pipe(fe(t),ne(r=>{let[,n]=r;const{meeting:{userId:i},share:{status:o}}=n;return o!==Fe.End&&(mi.stopSharing(i),pr.stopDesktopSharing(),T(kD)),an(Fe.End)})),epics11:(e,t)=>se(e,ot).pipe(fe(t),z(r=>{let[n,i]=r;const{meeting:{userId:o}}=i,s=n.payload.body.update;return s&&s.length>0&&s.findIndex(a=>a.id===o&&a.bShareOn!==void 0)>-1}),G(r=>{let[n,i]=r;const{meeting:{userId:o},share:{status:s,isReceiveSharing:a,activeNodeId:l}}=i,{payload:{body:{update:u}}}=n,d=u.find(h=>h.id===o&&h.bShareOn===!1),c=u.find(h=>h.id===o&&h.bShareOn===!0),p=[];return d&&s!==Fe.End&&(mi.stopSharing(o),pr.stopDesktopSharing(),p.push(an(Fe.End)),T(DD)),c&&s===Fe.End&&(a&&(pr.stopRenderSharing(),mi.unsubscribeSharing(l),p.push(mm(!1))),p.push(an(Fe.Sharing))),X(p)})),epics12:(e,t)=>se(e,ot).pipe(fe(t),z(r=>{let[n,i]=r;const{meeting:{userId:o}}=i,s=n.payload.body.update;return s&&s.length>0&&s.findIndex(a=>a.id!==o&&a.bShareOn!==void 0)>-1}),G(r=>{let[n,i]=r;const{payload:{body:{update:o}}}=n,{share:{activeNodeId:s,isReceiveSharing:a}}=i,l=xa(i),u=o.filter(p=>p.bShareOn===!0&&p.bSharePause===!1),d=o.filter(p=>p.bShareOn===!0&&p.bSharePause===!0),c=o.filter(p=>p.bShareOn===!1);return u.length>0&&u.forEach(p=>{l.findIndex(h=>h.userId===p.id)===-1?T(hw,p):T(LD,p)}),d.length>0&&d.forEach(p=>{T(ND,p)}),c.length>0&&(c.forEach(p=>{T(fw,p)}),a&&c.some(p=>p.id===s))?jr(se(e,eb).pipe(xe(1),_e(re)),Nt(50).pipe(_e(Oa("timeout")))).pipe(ui(()=>{const{share:{activeNodeId:p,isReceiveSharingFromMainSession:h}}=t.value,m=l.filter(f=>f.userId!==p);if(m.length>0){const f=m[0],{userId:v}=f;return mi.unsubscribeSharing(p,h),wu(mi,t.value,v),pr.switchSharingSource(v,h),$m(v,t.value,pr),T(sm,{userId:v}),qe(fm({activeNodeID:v,bStatus:1,ssrc:v}))}return re})):re})),epics13:(e,t)=>se(e,iw).pipe(fe(t),Be(r=>{let[n,i]=r;const{payload:{body:{encryptKey:o,additionalType:s}}}=n,{media:{sharingDecodeStatus:a,sharingEncodeStatus:l},meeting:{confId:u,userId:d,zoomId:c,meetingId:p,meetingNumber:h,isWebinar:m}}=i;return dl(t).pipe(Be(f=>{let v=l;return(!ae.isSupportSendScreenSharing||m&&f&&Xt(f.userRole))&&(v="failed"),Lr("sharing",v,a).pipe(de(g=>{let[y,S]=g;const b={userId:d,sn:Hn(c),confId:u,encryptKey:Hn(o),encryptType:s,meetingId:p,meetingNumber:h};if(y&&(pr==null||pr.updateMediaParams({iVType:Zt.SHARING_ENCODE,isFromMainSession:!1,updateParams:b})),S){pr.updateMediaParams({iVType:Zt.SHARING_DECODE,isFromMainSession:!1,updateParams:b});const{participants:{attendeesList:R}}=t.value;if(R.length>0){const w=R.map(O=>({userid:O.userId,sn:O.zoomID&&Hn(O.zoomID)}));pr.updateUserMediaSN({added:w,isFromMainSession:!1,iVType:Zt.SHARING_DECODE})}}}),_e(re))}))})),epics14:(e,t)=>Mi(e,20235).pipe(fe(t),de(r=>{let[n,i]=r;const{media:{sharingDecodeStatus:o}}=i,{type:s,payload:{body:a}}=n,l=s===`${Lo}`;Lr("sharing","success",o).subscribe(u=>{let[,d]=u;d&&pr.addReceivedSharingChannelType({isFromMainSession:l,...a})})}),_e(re)),epics15:(e,t)=>Mi(e,20236).pipe(fe(t),de(r=>{let[n,i]=r;const{media:{sharingDecodeStatus:o}}=i,{type:s,payload:{body:{ssrc:a}}}=n,l=s===`${Lo}`;Lr("sharing","success",o).subscribe(u=>{let[,d]=u;d&&pr.removeReceivedSharingChannelType({isFromMainSession:l,ssrc:a})})}),_e(re)),epics16:e=>Re(e,Z.SharingFirstDecodeFrameReceivedSsrc).pipe(z(t=>!!t.payload.data),de(t=>{const{payload:{data:{ssrc:r}}}=t;mi.sendReceivingSharingReady(r)}),_e(re)),epics17:(e,t)=>se(e,20233).pipe(z(()=>!!t.value.share.isRequireReadReceipt),de(r=>{const{payload:{body:{bReceiveOk:n}}}=r;n&&T(jD)}),_e(re)),epics18:(e,t)=>se(e,zn).pipe(z(r=>{var n;return((n=r.payload.body)===null||n===void 0?void 0:n.lockShare)!==void 0}),G(r=>{const{payload:{body:{lockShare:n}}}=r,{share:{isOptimizedForSharedVideo:i,isSharingToBreakoutRoom:o},audio:{isSharingAudio:s},meeting:{userId:a}}=t.value,l=[];return n===xn.MultipleShare&&i&&(mi.startSharing(a,{bShareAudio:s,bShareToBO:o,bShareVideo:!1}),pr.switchSharingMode(nc.Normal),l.push(gm(!1))),X(l)})),epics19:(e,t)=>Re(e,Z.ShareQosData).pipe(fe(t),ne(r=>{var n;let[i,o]=r;const{meeting:{isWebinar:s},media:{sharingEncodeStatus:a,sharingDecodeStatus:l},share:{status:u,isReceiveSharing:d},participants:{xmppAttendeeList:c}}=o;let p=yw(o).length>0;s&&(p=p||!!c.length);const h=u!==Fe.End&&a==="success"&&p,m=d&&l==="success";return(n=i.payload.data)!==null&&n!==void 0&&n.encoding?h?(T(Eb,i.payload),Hb(i.payload)):Hb(Cs):m?(T(Eb,i.payload),Wc(i.payload)):Wc(Cs)}))},Z3=hn(J3,Q3),Yn=He.createAgent();let Ji=function(e){return e.Add="add",e.List="list",e.Remove="memberremove",e.rename="rename",e.update="UPDATE",e}({}),Ro=function(e){return e.Open="open",e.Message="message",e.Error="error",e.Close="close",e}({});class fl{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1}static getInstance(){return this.xmppInstance||(this.xmppInstance=new fl),this.xmppInstance}on(t,r){let n=this.eventHandlers.get(t);n||(n=[]),n.push(r),this.eventHandlers.set(t,n)}off(t,r){const n=this.eventHandlers.get(t);if(n){const i=n.filter(o=>o!==r);this.eventHandlers.set(t,i)}}emit(t,r){const n=this.eventHandlers.get(t);n&&n instanceof Array&&n.slice(0).forEach(i=>{try{i(r)}catch(o){console.error(o)}})}sendMessageToRwg(t){this.seq+=1;const r=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(t,{seq:r}))),r}connect(t,r){this.websocket=r?new window.ZoomTPModule.ZoomTPWebSocket(t):new WebSocket(t),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var t;(t=this.websocket)===null||t===void 0||t.close()}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",t=>{this.emit(Ro.Open,t)}),this.websocket.addEventListener("message",t=>{const{data:r}=t;var n;if(r instanceof ArrayBuffer)new Uint8Array(r)[0]===0&&((n=this.websocket)===null||n===void 0||n.send(r));else try{this.emit(Ro.Message,JSON.parse(r))}catch{console.warn("Unsupported format",r)}}),this.websocket.addEventListener("close",t=>{this.emit(Ro.Close,t)}),this.websocket.addEventListener("error",t=>{this.emit(Ro.Error,t)}))}join(t){return{seq:this.sendMessageToRwg({evt:24576,body:{clientCap:t}})}}raiseHand(){return{seq:this.sendMessageToRwg({evt:24580,body:null})}}lowerHand(t){return{seq:this.sendMessageToRwg({evt:24578,jids:t||[]})}}sendWebinarMseeage(t,r,n){const i={msg:t,jid:r?[r]:[],type:n,bcm:arguments.length>3&&arguments[3]!==void 0&&arguments[3]};return{seq:this.sendMessageToRwg({evt:24582,body:i})}}sendAnswer(t,r,n){return{seq:this.sendMessageToRwg({evt:24584,body:{question_attendeejid:r.jid,question_attendeename:r.displayName,question_text:r.questionText,question_id:r.questionId,question_anonymous:r.isAnonymous,question_time:r.questionTime,text:t,isPrivate:n}})}}answerOnline(t,r){return{seq:this.sendMessageToRwg({evt:24586,body:{question_attendeejid:t.jid,question_attendeename:t.displayName,question_text:t.questionText,question_id:t.questionId,question_anonymous:t.isAnonymous,question_time:t.questionTime,isLiveStart:r}})}}dismissQuestion(t){return{seq:this.sendMessageToRwg({evt:24590,body:{question_attendeejid:t.jid,question_attendeename:t.displayName,question_text:t.questionText,question_id:t.questionId,question_anonymous:t.isAnonymous,question_time:t.questionTime,bOpen:!1}})}}deleteQuestion(t){return{seq:this.sendMessageToRwg({evt:24614,body:{question_id:t,bDelete:!0}})}}deleteComment(t){return{seq:this.sendMessageToRwg({body:{comment_id:t,bDelete:!0},evt:24616})}}reopenQuestion(t){return{seq:this.sendMessageToRwg({body:{question_attendeejid:t.jid,question_attendeename:t.displayName,question_text:t.questionText,question_id:t.questionId,question_anonymous:t.isAnonymous,question_time:t.questionTime,bOpen:!0},evt:24590})}}askQuestion(t,r){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=arguments.length>3?arguments[3]:void 0;const o=Bf();return{seq:this.sendMessageToRwg({body:{id:o,text:t,isAnonymous:n,bAllowAttendeeViewAllQuestion:i,name:r},evt:24592}),questionId:o}}upOrDownVote(t,r){return{seq:this.sendMessageToRwg({body:{question_attendeejid:t.jid,question_attendeename:t.displayName,question_text:t.questionText,question_id:t.questionId,question_anonymous:t.isAnonymous,question_time:t.questionTime,bUpVote:r},evt:24598})}}rename(t,r){return{seq:this.sendMessageToRwg({body:{jid:t,displayName:r},evt:24600})}}setSkinTome(t){return{seq:this.sendMessageToRwg({body:{skinTone:t},evt:24618})}}}fl.xmppInstance=null;const Y3=Or.getInstance();let ta,t2;const X3=He.createAgent();let en=null;function nV(e){switch(e.responseType){case"json":if("response"in e)return e.response;var t=e;return JSON.parse(t.responseText);case"document":return e.responseXML;default:return"response"in e?e.response:(t=e).responseText}}var eH=function(e,t,r,n){n===void 0&&(n="download_load"),this.originalEvent=e,this.xhr=t,this.request=r,this.type=n;var i=t.status,o=t.responseType;this.status=i??0,this.responseType=o??"";var s=t.getAllResponseHeaders();this.responseHeaders=s?s.split(`
`).reduce(function(u,d){var c=d.indexOf(": ");return u[d.slice(0,c)]=d.slice(c+2),u},{}):{},this.response=nV(t);var a=e.loaded,l=e.total;this.loaded=a,this.total=l},zm=dp(function(e){return function(t,r,n){var i;this.message=t,this.name="AjaxError",this.xhr=r,this.request=n,this.status=r.status,this.responseType=r.responseType;try{i=nV(r)}catch{i=r.responseText}this.response=i}}),tH=function(){function e(t,r){return zm.call(this,"ajax timeout",t,r),this.name="AjaxTimeoutError",this}return e.prototype=Object.create(zm.prototype),e}(),rH=ne(function(e){return e.response}),Zo,ii=(Zo=function(e){return function(t){return new Ft(function(r){var n,i,o,s=Zd({async:!0,crossDomain:!1,withCredentials:!1,method:"GET",timeout:0,responseType:"json"},t),a=s.queryParams,l=s.body,u=s.headers,d=s.url;if(!d)throw new TypeError("url is required");if(a)if(d.includes("?")){var c=d.split("?");if(2<c.length)throw new TypeError("invalid url");o=new URLSearchParams(c[1]),new URLSearchParams(a).forEach(function(M,$){return o.set($,M)}),d=c[0]+"?"+o}else d=d+"?"+(o=new URLSearchParams(a));var p={};if(u)for(var h in u)u.hasOwnProperty(h)&&(p[h.toLowerCase()]=u[h]);var m=s.crossDomain;m||"x-requested-with"in p||(p["x-requested-with"]="XMLHttpRequest");var f=s.withCredentials,v=s.xsrfCookieName,g=s.xsrfHeaderName;if((f||!m)&&v&&g){var y=(i=(n=document==null?void 0:document.cookie.match(new RegExp("(^|;\\s*)("+v+")=([^;]*)")))===null||n===void 0?void 0:n.pop())!==null&&i!==void 0?i:"";y&&(p[g]=y)}var S,b=function(M,$){var B;if(!M||typeof M=="string"||function(ee){return typeof FormData<"u"&&ee instanceof FormData}(M)||function(ee){return typeof URLSearchParams<"u"&&ee instanceof URLSearchParams}(M)||function(ee){return Jv(ee,"ArrayBuffer")}(M)||function(ee){return Jv(ee,"File")}(M)||function(ee){return Jv(ee,"Blob")}(M)||function(ee){return typeof ReadableStream<"u"&&ee instanceof ReadableStream}(M))return M;if(function(ee){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(ee)}(M))return M.buffer;if(typeof M=="object")return $["content-type"]=(B=$["content-type"])!==null&&B!==void 0?B:"application/json;charset=utf-8",JSON.stringify(M);throw new TypeError("Unknown body type")}(l,p),R=Zd(Zd({},s),{url:d,headers:p,body:b});S=t.createXHR?t.createXHR():new XMLHttpRequest;var w=t.progressSubscriber,O=t.includeDownloadProgress,D=O!==void 0&&O,U=t.includeUploadProgress,x=U!==void 0&&U,P=function(M,$){S.addEventListener(M,function(){var B,ee=$();(B=w==null?void 0:w.error)===null||B===void 0||B.call(w,ee),r.error(ee)})};P("timeout",function(){return new tH(S,R)}),P("abort",function(){return new zm("aborted",S,R)});var I=function(M,$){return new eH($,S,R,M+"_"+$.type)},E=function(M,$,B){M.addEventListener($,function(ee){r.next(I(B,ee))})};x&&[qv,Qv,n2].forEach(function(M){return E(S.upload,M,nH)}),w&&[qv,Qv].forEach(function(M){return S.upload.addEventListener(M,function($){var B;return(B=w==null?void 0:w.next)===null||B===void 0?void 0:B.call(w,$)})}),D&&[qv,Qv].forEach(function(M){return E(S,M,r2)});var A=function(M){var $="ajax error"+(M?" "+M:"");r.error(new zm($,S,R))};S.addEventListener("error",function(M){var $;($=w==null?void 0:w.error)===null||$===void 0||$.call(w,M),A()}),S.addEventListener(n2,function(M){var $,B,ee=S.status;if(ee<400){($=w==null?void 0:w.complete)===null||$===void 0||$.call(w);var ie=void 0;try{ie=I(r2,M)}catch(be){return void r.error(be)}r.next(ie),r.complete()}else(B=w==null?void 0:w.error)===null||B===void 0||B.call(w,M),A(ee)});var _=R.user,C=R.method,V=R.async;for(var h in _?S.open(C,d,V,_,R.password):S.open(C,d,V),V&&(S.timeout=R.timeout,S.responseType=R.responseType),"withCredentials"in S&&(S.withCredentials=R.withCredentials),p)p.hasOwnProperty(h)&&S.setRequestHeader(h,p[h]);return b?S.send(b):S.send(),function(){S&&S.readyState!==4&&S.abort()}})}(typeof e=="string"?{url:e}:e)},Zo.get=function(e,t){return ii({method:"GET",url:e,headers:t})},Zo.post=function(e,t,r){return ii({method:"POST",url:e,body:t,headers:r})},Zo.delete=function(e,t){return ii({method:"DELETE",url:e,headers:t})},Zo.put=function(e,t,r){return ii({method:"PUT",url:e,body:t,headers:r})},Zo.patch=function(e,t,r){return ii({method:"PATCH",url:e,body:t,headers:r})},Zo.getJSON=function(e,t){return rH(ii({method:"GET",url:e,headers:t}))},Zo),nH="upload",r2="download",qv="loadstart",Qv="progress",n2="load",iH=Object.prototype.toString;function Jv(e,t){return iH.call(e)==="[object "+t+"]"}const i2=Or.getInstance(),Zv=e=>{const{meeting:{encryptedRWC:t,encryptedGEORWC:r,discardedRwcList:n,meetingOptions:i}}=e;let o=[];return i!=null&&i.isEnableGeoFenceRWC&&r&&(r==null?void 0:r.length)>0?o=r.filter(s=>!n.includes(s.rwc)).reduce((s,a)=>{const{dl:l,rwc:u,rwcToken:d}=a,c=s.find(p=>p.dl===l);if(c)c.items.push({rwc:u,rwcToken:d});else{const p={dl:l,items:[]};p.items.push({rwc:u,rwcToken:d}),s.push(p)}return s},[]):t&&(o=[{dl:0,items:Object.keys(t).map(s=>({rwc:s,rwcToken:t[s]}))}]),o},Yv=e=>Wt(...e.map(t=>t.dl===0?X(t.items):Nt(t.dl).pipe(G(()=>X(t.items))))),o2=()=>jr(Ge(fs,1),Ge(mt,1),Ge(xr,1)),s2=(e,t)=>e.pipe(he(`${rw}`),fe(t),z(r=>{let[,n]=r;return n.meeting.encryptedRWC!==void 0||n.meeting.encryptedGEORWC!==void 0&&n.meeting.encryptedGEORWC.length>0}),Be(r=>{let[,n]=r;const{meeting:{ts:i,auth:o,meetingNumber:s,meetingOptions:a,meetingId:l,userName:u},breakoutRoom:d}=n,c=a==null?void 0:a.isEnableGeoFenceRWC,p=Zv(n);if(p.length>0){const h={serversLength:p.reduce((f,v)=>f+v.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0,retryCounts:0};let m;return c&&(m=new l$,Yv(p).subscribe(f=>{var v;return(v=m)===null||v===void 0?void 0:v.next(f)})),(c?m:Yv(p)).pipe(Zr(o2()),Pa(()=>{const{meeting:{meetingStatus:f,meetingId:v}}=t.value,g=f===Lt.Initial&&!!v&&h.pingFailedServerList.length<h.serversLength&&h.serversLength>0;return!g&&m&&m.complete(),g}),de(()=>{if(h.pingRwcServerCounts=h.pingRwcServerCounts+1,c&&h.pingRwcServerCounts===h.serversLength){const f=1e3*Math.floor(5*Math.pow(2,h.retryCounts));h.retryCounts=h.retryCounts+1,i2.makeLogger(["Join Meeting Flow"]).info(`ping rwc retry,current rwc list:${JSON.stringify(Zv(t.value))},retry counts:${h.retryCounts}, ${JSON.stringify({meetingId:l,meetingNumber:Er(s),userName:Er(u)})}`,["Ping RWC Retry"]),Nt(f).pipe(ne(()=>{const v=Zv(t.value);return Object.assign(h,{serversLength:v.reduce((g,y)=>g+y.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0}),v})).subscribe(v=>{Yv(v).subscribe(g=>{m.next(g)})})}}),G(f=>{const{rwc:v,rwcToken:g}=f,y=((S,b,R,w,O,D)=>{const U={ts:w,auth:O,rwcToken:R,dmz:1};return D&&Object.assign(U,{confID:D}),`https://${S}/wc/ping/${b}?${new URLSearchParams(U).toString()}`})(v,s,g,i,o,d==null?void 0:d.currentRoom.boConfId);return ii({url:y,crossDomain:Oi(y)}).pipe(Zr(o2()),G(S=>{let b={};return b=S.response?{...S.response,rwc:v,fromNginx:!1}:{rwc:v,rwg:v,rwcToken:g,fromNginx:!0},X([zP(b),Dh()])}),ui(()=>{const{pingFailedServerList:S,serversLength:b}=h;return S.push(y),S.length===b?(c&&m&&m.complete(),i2.report(`ping rwc error, ${JSON.stringify({meetingId:l,meetingNumber:Er(s),userName:Er(u)})}`,["Join Meeting Flow","Ping RWC Error"],"error"),T(mt,{reason:"connection error",errorCode:wi.CommonError}),X([...Va(t.value)])):re}))}),Bn(gk(performance.now())))}return re}));let a2=0;const oH=Or.getInstance(),Xv={meetingStatus:Lt.Initial,isWindowOpen:!1,apiKey:"",signature:"",signatureType:"",lang:"en-US",tk:"",customerKey:"",mtkGuid:"",pingRWCTimestamp:0,meetingInfoTimestamp:0,passWord:"",meetingNumber:0,userName:"",userEmail:"",sdkUrl:"",sdkOrigin:"",proxy:1,cv:"",meetingId:"",tid:"",ts:"",auth:"",sign:"",isSupportCallOut:!1,tollNumbers:void 0,recordingEnable:!1,callOutCountry:void 0,inviteEmail:"",xmppConfig:null,isSupportH323:!1,h323GatewayInfo:"",h323Password:"",trackAuth:"",isOriginHost:!1,isWebinar:!1,encryptedRWC:void 0,meetingOptions:{},meetingTopic:"",bLock:!1,bHoldUponEntry:!1,viewOnly:0,listenOnlyPhone:0,bAllowRaiseHand:!1,bAllowAttendeeRename:!1,bBroadcast:void 0,bAllowPlayChimeForEnterOrExit:!1,bIbDisableShare:!1,bIbDisableChat:!1,bAllowShowCount:!1,encryptKey:"",bNoHostTimeOut:!1,confId:"",conId:"",e2eEncrypt:!1,zoomId:"",jid:"",xtoken:"",groups:void 0,svcUrl:"",encType:NaN,userGUID:"",userId:NaN,isHost:!1,isCoHost:!1,participantID:0,isOnHold:!1,isMeetingReset:!1,bRecord:!1,audioVideoBeforeOnHold:void 0,region:void 0,network:void 0,joinMeetingTimeStamp:0,activeAppInfo:void 0,recordingDisclaimerForRecorder:{},recordingDisclaimer:{},ccUrl:"",sessionIdleTimeoutMins:40,reportDomain:"",isAudioBridgeEnabled:!0,discardedRwcList:[],sharePronounType:void 0,stayAwake:!1,wrInfo:{},meetingInfo:{},isNewJoinFlow:!1,gatewayUserList:[],logConfig:"",logEncryptionPubKey:"",failover:{count:0,isCurrentFailoverRecorded:!1,reason:-1,interval:0,joinMeetingSuccessTimestamp:0,sequence:""},enableLongPollingCheckStart:!1,rsPwd:"",chatModerationPolicy:{},isAlternativeHost:!1,isAssistant:!1,isRlbTP:!1,isRlbTPReady:!1},sH=pn({[`${qn}`]:k((e,t)=>{let{payload:r}=t;r.customerKey=e.customerKey||r.customerKey||"",Object.assign(e,r),e.meetingStatus=Lt.Initial}),[`${xF}`]:k((e,t)=>{let{payload:r}=t;r.customerKey=e.customerKey||r.customerKey||"",Object.assign(e,r)}),[`${UF}`]:k((e,t)=>{let{payload:r}=t;e.isWindowOpen=r}),[`${mk}`]:k((e,t)=>{let{payload:r}=t;r.useSDK?e.signatureType="sdk":e.signatureType="api",e.apiKey=r.apiKey,e.signature=r.signature,e.lang=r.language}),[`${jF}`]:k((e,t)=>{let{payload:r}=t;e.ztk=r}),[`${$F}`]:k((e,t)=>{let{payload:r}=t;e.zsk=r}),[`${FF}`]:k((e,t)=>{let{payload:r}=t;e.tk=r.tk,e.mtkGuid=r.mtkGuid}),[`${gk}`]:k((e,t)=>{let{payload:r}=t;e.pingRWCTimestamp=r}),[`${Dk}`]:k((e,t)=>{let{payload:r}=t;e.meetingInfoTimestamp=r}),[`${Ho}`]:k((e,t)=>{let{payload:r}=t;e.confId=r.confID,e.conId=r.conID,e.e2eEncrypt=r.e2eEncrypt,e.meetingNumber=parseInt(r.mn,10),e.zoomId=r.zoomID,e.meetingStatus=Lt.Joined,e.jid=r.jid,e.xtoken=r.xtoken,e.groups=r.groups,e.svcUrl=r.svcUrl,e.encType=r.encType,e.userGUID=r.userGUID,e.userId=r.userID,e.role=r.role,e.participantID=r.participantID,e.reportDomain=r.reportDomain,e.abToken=r.ABtoken,e.supportLocalAB=!!r.supportLocalAB,e.mediasdkConfig=r.mediasdkConfig,r.enableWebTransport&&(e.enableWebtransport=r.enableWebTransport,e.webtransportPort=r.WebTransportPort)}),[`${Wf}`]:k((e,t)=>{let{payload:r}=t;if(r.gatewayUser){var n;const{userId:o,sn:s}=r.gatewayUser,a=(n=e.gatewayUserList)===null||n===void 0?void 0:n.find(l=>l.userId===o);var i;a?a.sn=s:(i=e.gatewayUserList)===null||i===void 0||i.push(r.gatewayUser)}else Object.assign(e,r)}),[`${vk}`]:k((e,t)=>{let{payload:r}=t;e.isHost=r}),[`${yk}`]:k((e,t)=>{let{payload:r}=t;e.isCoHost=r}),[`${Ql}`]:k((e,t)=>{let{payload:r}=t;e.isOnHold=r}),[`${Sk}`]:k((e,t)=>{let{payload:r}=t;e.isMeetingReset=r}),[`${bk}`]:k((e,t)=>{let{payload:r}=t;e.audioVideoBeforeOnHold=r}),[`${ZS}`]:k((e,t)=>{let{payload:r}=t;e.currentUserAudioBeforeReset=r}),[`${YS}`]:k((e,t)=>{let{payload:r}=t;e.isCurrentUserMutedBeforeReset=r}),[`${nw}`]:k((e,t)=>{let{payload:r}=t;e.meetingStatus=r}),[`${Ek}`]:k((e,t)=>{let{payload:r}=t;e.region=r.region,e.network=r.network}),[`${wk}`]:k((e,t)=>{let{payload:r}=t;e.isCurrentUserStartVideoBeforeReset=r}),[`${Ik}`]:k((e,t)=>{let{payload:r}=t;e.joinMeetingTimeStamp=r}),[`${BF}`]:k((e,t)=>{let{payload:r}=t;e.activeAppInfo=r}),[`${Ld}`]:k((e,t)=>{let{payload:r}=t;e.idleStartTime=r}),[`${Ak}`]:k((e,t)=>{let{payload:r}=t;e.sessionIdleTimeoutMins=r}),[`${Ck}`]:k((e,t)=>{let{payload:r}=t;e.isAudioBridgeEnabled=r}),[`${_k}`]:k((e,t)=>{var r;let{payload:n}=t;const i=(r=e.encryptedGEORWC)===null||r===void 0||(r=r.find(s=>s.rwc===n))===null||r===void 0?void 0:r.dc;if(i){var o;const s=(o=e.encryptedGEORWC)===null||o===void 0?void 0:o.filter(a=>a.dc===i);s&&e.discardedRwcList.some(a=>(s==null?void 0:s.findIndex(l=>l.rwc===a))>=0)&&e.discardedRwcList.push(...s.map(a=>a.rwc)),e.discardedRwcList.push(n)}}),[`${Rk}`]:k((e,t)=>{let{payload:r}=t;e.sharePronounType=r}),[`${Tk}`]:k((e,t)=>{let{payload:r}=t;e.stayAwake=r}),[`${Ok}`]:k((e,t)=>{let{payload:r}=t;e.failover.joinMeetingSuccessTimestamp=r}),[`${Pk}`]:k(e=>{Object.assign(e.failover,{...Xv.failover,count:e.failover.count,joinMeetingSuccessTimestamp:e.failover.joinMeetingSuccessTimestamp})}),[`${Gf}`]:k((e,t)=>{let{payload:r}=t;const{count:n,reason:i,interval:o,sequence:s}=r;e.failover.count=n,e.failover.reason=i,e.failover.interval=o,e.failover.isCurrentFailoverRecorded=!0,e.failover.sequence=s}),[`${kk}`]:k((e,t)=>{let{payload:r}=t;e.quicklyLeave=r}),[`${Mk}`]:k((e,t)=>{let{payload:r}=t;e.isEnableZmkFromRWG=r}),[`${jh}`]:k((e,t)=>{let{payload:r}=t;e.isRlbTP=r}),[`${Nk}`]:k((e,t)=>{let{payload:r}=t;e.isRlbTPReady=r}),[`${JS}`]:(e,t)=>{let{payload:r}=t;const{isFailover:n}=r,i={isMeetingReset:!0,apiKey:e.apiKey,signatureType:e.signatureType,signature:e.signature,lang:e.lang,proxy:1,stayAwake:e.stayAwake};return n&&Object.assign(i,{currentUserAudioBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.audio:r.audio,isCurrentUserMutedBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.muted:r.muted,isCurrentUserStartVideoBeforeReset:e.audioVideoBeforeOnHold?e.audioVideoBeforeOnHold.video:r.video,meetingNumber:e.meetingNumber,userName:e.userName,passWord:e.passWord,userEmail:e.userEmail,sdkUrl:e.sdkUrl,sdkOrigin:e.sdkOrigin,cv:e.cv,zsk:e.zsk,ztk:e.ztk,idleStartTime:e.idleStartTime,sessionIdleTimeoutMins:e.sessionIdleTimeoutMins,customerKey:e.customerKey,failover:e.failover,stayAwake:e.stayAwake,quicklyLeave:e.quicklyLeave}),{...Xv,...i}}},Xv),aH={meetingFailoverReportEpic0:(e,t)=>e.pipe(he(`${qn}`),Be(()=>{const r=t.value.meeting.failover.joinMeetingSuccessTimestamp===0&&!!Pe.get(tt.WebclientZoomId);return e.pipe(he(`${Ho}`),xe(1),G(()=>{const n=[],{count:i,sequence:o}=Pe.get(tt.WebclientFailoverCount)||{};let{meeting:{failover:{count:s,reason:a,interval:l}}}=t.value;const{meeting:{pingRWCTimestamp:u}}=t.value;if(r){s=i+1,a=lr.RefreshPage,l=0;const p=o?`${o}-${a}`:`${a}`;Pe.set(tt.WebclientFailoverCount,{count:s,sequence:p},We.SessionStorage),n.push(Gf({count:s,reason:a,interval:l,sequence:p}))}const d=performance.now();let c=`WCL_M, JMCT(${d-u})`;return s>0&&a!==lr.NormalCase&&(c=`${c},FAILOVER(${s},${a},${(l/1e3).toFixed(1)})`),X3.sendRWGConnectionPerformance(c),n.push(Pk(),Ok(d)),X(n)}))})),meetingFailoverReportEpic1:(e,t)=>e.pipe(he(`${Vr}`),G(r=>{const{payload:n}=r,{meeting:{failover:{joinMeetingSuccessTimestamp:i,isCurrentFailoverRecorded:o},userGUID:s,userId:a,meetingId:l}}=t.value,u=[];if(!o){let{count:d,sequence:c}=Pe.get(tt.WebclientFailoverCount)||{};c=c?`${c}-${n}`:`${n}`,n!==lr.NormalCase&&(d+=1,Pe.set(tt.WebclientFailoverCount,{count:d,sequence:c},We.SessionStorage));const p=performance.now()-i;u.push(Gf({reason:n,count:d,interval:p,sequence:c,userGUID:s,userId:a,meetingId:l}))}return X(u)}))},lH={sessionIdleEpic0:(e,t)=>e.pipe(he(`${Ho}`),fe(t),z(r=>{let[,n]=r;return n.meeting.zlkJwtToken!==void 0}),Be(()=>(ta&&ta.complete(),ta=new Fn,t2=Lc(6e4).pipe(ne(()=>performance.now())).subscribe(ta),ta.pipe(ne(r=>JA(r)))))),sessionIdleEpic1:e=>e.pipe(he(`${Li}`)).pipe(de(()=>{ta&&(ta.complete(),t2.unsubscribe())}),_e(re)),sessionIdleEpic2:(e,t)=>e.pipe(he(`${JA}`),fe(t),G(r=>{var n;let[i,o]=r;const{meeting:{idleStartTime:s,sessionIdleTimeoutMins:a,isOriginHost:l,isWebinar:u},participants:{attendeesList:d,xmppAttendeeList:c},recording:p,breakoutRoom:h}=o,m=i.payload,f=[];if(d.length!==1||u&&c.length!==0||(h==null||(n=h.currentRoom)===null||n===void 0?void 0:n.status)===Ee.InRoom||(p==null?void 0:p.cmrStatus)===Qt.Start)f.push(Ld(void 0));else if(s){const v=l&&Bc(d[0].userRole)?a:40;m-s>60*v*1e3&&(console.warn(`No active for ${v} minutes, will end the session.`),Y3.report(`Session idle timeout(${v} minutes), end the session automatically!`,["Join Meeting Flow","Session idle"],"warn"),f.push(xu()),Nt(500).subscribe(()=>{vw()}))}else f.push(Ld(m));return X(f)})),sessionIdleEpic3:(e,t)=>e.pipe(he(`${hl}`),z(r=>[ot,zn].includes(r.payload.evt)&&t.value.meeting.idleStartTime!==void 0),_r(Ko),G(()=>{var r;const{participants:{attendeesList:n,xmppAttendeeList:i},recording:o,breakoutRoom:s}=t.value,a=[];return(n.length>1||i.length>0||(o==null?void 0:o.cmrStatus)===Qt.Start||(s==null||(r=s.currentRoom)===null||r===void 0?void 0:r.status)===Ee.InRoom)&&a.push(Ld(void 0)),X(a)})),sessionIdleEpic4:e=>e.pipe(he(`${Vu}`,`${xu}`),_n(Ld(void 0)))},uH={meetingMainEpics0:(e,t)=>se(e,0).pipe(de(r=>{var n;if(((n=r.payload.body)===null||n===void 0?void 0:n.status)==="READY"){const{meeting:{zlkJwtToken:i,signatureType:o,sign:s,passWord:a,isHost:l,isOriginHost:u,ztk:d,zsk:c,tk:p,userEmail:h},breakoutRoom:m}=t.value,f=i?{zlkJwtToken:i}:{signType:o,sign:s};if(a&&a!==""&&(i?Object.assign(f,{mpwd:bt(a)}):l&&u||Object.assign(f,{mpwd:a})),(m==null?void 0:m.currentRoom.status)===Ee.Joining){const{currentRoom:{boId:g,boConfId:y,boToken:S}}=m;g&&y&&S&&Object.assign(f,{botk:S})}if(!i){d&&Object.assign(f,{zak:d}),(sessionStorage.getItem(tt.WebclientZsk)||c)&&Object.assign(f,{zak:c}),p&&Object.assign(f,{tk:p});const g=Pe.get(tt.WebclientWebinarToken);g!==void 0&&Object.assign(f,{tk:g});const y=sessionStorage.getItem(tt.WebclientRecordingToken);y&&Object.assign(f,{localRecordToken:y}),h&&Object.assign(f,{email:h})}Yn.sendLaunchParams(f);const v=Pe.get(tt.WebclientMeetingToken);v&&Yn.joinMeeting(v)}}),_e(re)),meetingMainEpics1:(e,t)=>{return se(e,Og).pipe(fe(t),(r=n=>{let[i,o]=n;const{payload:{body:{res:s,userID:a,zoomID:l,mn:u,participantID:d,meetingtoken:c,role:p}}}=i,{meeting:{userEmail:h,userName:m,isMeetingReset:f,apiKey:v,zsk:g,signatureType:y}}=o;if(wn.Success===s){const{WebclientParticipantId:b,WebclientZoomId:R,WebclientUserEmail:w,WebclientUserName:O,WebclientMeetingToken:D}=tt;Pe.set(R,l,We.SessionStorage),Pe.set(b,d,We.SessionStorage),h&&Pe.set(w,h,We.SessionStorage),Pe.set(O,m,We.SessionStorage),c&&Pe.set(D,c,We.SessionStorage),g&&Yn.sendSdkKeyToMonitor(y,v,a);const U=[Ho(i.payload.body),Ik(performance.now())];return f&&U.push(Sk(!1)),(p&al.Owner)===al.Owner&&(T(mt,{reason:"dont support assisnt join through widget",errorCode:-1}),Yn.leaveMeeting()),T(Bk,{meetingNumber:u}),X(U)}if(wn.MeetingLocked===s)T(mt,Hi(s));else if(wn.UserFull===s)T(mt,Object.assign({},Hi(s),{lmUrl:i.payload.body.lmURL}));else if(wn.MeetingIsOver===s)T(mt,Hi(s));else if(wn.MMRIBReject===s)T(mt,Hi(s));else if(wn.MMRConfParticipantExists===s)T(mt,Hi(s));else if([wn.UserHasBeenRemoved,wn.WebinarBlockedEmail].includes(s))T(mt,Hi(s));else if(wn.MeetingNotStarted===s){var S;const b=Hi(s),{meeting:{meetingNumber:R,passWord:w,userName:O,userEmail:D,inviteEmail:U,meetingTopic:x,region:P,network:I,userId:E,lang:A,meetingId:_,participantID:C,wrInfo:V,meetingInfo:M,isNewJoinFlow:$,enableLongPollingCheckStart:B,tid:ee,signature:ie,rsPwd:be}}=o;Object.assign(b,{meetingInfo:{meetingNumber:R,password:w,userName:O,userEmail:D,inviteEmail:U,meetingTopic:x,region:P,network:I,userId:E,lang:A,webEndpoint:ik(),meetingId:_,participantId:C,wrInfo:Object.assign({},V,{isNew:$}),scheduleInfo:M,enableLongPollingCheckStart:B,rid:YB(ee),role:Number((S=il(ie))===null||S===void 0?void 0:S.role),rsPwd:be}}),T(mt,b)}else T(mt,Hi(s));return X(Va(o,!1))},nl(Be((n,i)=>r(n)||re))));var r},meetingMainEpics2:(e,t)=>se(e,zn).pipe(fe(t),ne(r=>{let[n,i]=r;const{payload:{body:o}}=n,{meeting:{zoomId:s,encType:a,gcmSessinKey:l}}=i;if((o==null?void 0:o.encryptKey)!==void 0&&ur.init(s,o.encryptKey,a),(o==null?void 0:o.gatewayKey)!==void 0){const u=Oe.getInstance(),[,d,c]=o.gatewayKey.split(".");u.sendUserNodeList([{userid:Number(d),sn:c&&Hn(c)}],l)}return T(lw,o),Wf(o)})),meetingMainEpics3:(e,t)=>se(e,7939).pipe(fe(t),G(r=>{let[n,i]=r;const{payload:{body:o}}=n;if(o.reason!==void 0){if(ho.Reconnect===o.reason)return Y$.WaitingRoomFailover===o.subReason?T(xr,{reason:Ir.OnHold}):T(xr,{reason:Ir.Failover}),qe(Vr(lr.NormalCase));ho.KickedByHost===o.reason?T(fs,{reason:"kicked by host"}):[ho.EndByHost,ho.EndByNone,ho.EndByAdmin,ho.EndByHostStartAnotherMeeting].includes(o.reason)?T(fs,{reason:"ended by host"}):ho.FreeMeetingTimeout===o.reason?T(fs,{reason:"free meeting ended"}):[ho.DuplicateSession,ho.MeetingTransfer].includes(o.reason)&&T(fs,{reason:"duplicated session"})}return i.meeting.isMeetingReset?re:X(Va(i,!1))})),meetingMainEpics4:(e,t)=>e.pipe(he(`${Vr}`),fe(t),G(r=>{let[,n]=r;const i=Va(n,!0);let o;if(n.meeting.zlkJwtToken){const s=function(l){if(l){const{meeting:{topic:u,passWord:d,userName:c,zlkJwtToken:p,lang:h,cv:m,customerKey:f}}=l;return{topic:u,passWord:d,userName:c,zlkJwtToken:p,lang:h,cv:m,customerKey:f}}return null}(n),a={topic:s==null?void 0:s.topic,password:s!=null&&s.passWord?encodeURIComponent(s==null?void 0:s.passWord):"",userName:s==null?void 0:s.userName,zlk:s==null?void 0:s.zlkJwtToken,lang:s==null?void 0:s.lang,cv:s==null?void 0:s.cv,customerKey:s==null?void 0:s.customerKey};o=qe(Lu(a)).pipe(Mu(1e3))}else{const s=function(a){var l;const{meeting:{apiKey:u,signature:d,signatureType:c,meetingNumber:p,userName:h,lang:m,passWord:f,userEmail:v,sdkUrl:g,sdkOrigin:y,proxy:S,cv:b,ztk:R,zsk:w,tk:O}}=a;let D=R||sessionStorage.getItem(tt.WebclientZtk),U=w||sessionStorage.getItem(tt.WebclientZsk);const x=Number((l=il(d))===null||l===void 0?void 0:l.role)===1;return x||(D=U,U=""),{apiKey:u,signature:d,signatureType:c,meetingNumber:p,userName:h,lang:m,passWord:f?encodeURIComponent(f):"",userEmail:v,sdkUrl:g,sdkOrigin:y,proxy:S,cv:b,ztk:D,zsk:U,tk:O||sessionStorage.getItem(tt.WebclientTk),ulsm:x&&U?1:0}}(n);o=qe(zf(s)).pipe(Mu(1e3))}return Nc(X(i),o)})),meetingMainEpics5:e=>Mi(e,7940).pipe(de(t=>{T("MEETING_HOST_CHANGE_INDICATION",t.payload.body.bHost)}),ne(t=>vk(t.payload.body))),meetingMainEpics6:e=>Mi(e,7941).pipe(de(t=>{T("MEETING_COHOST_CHANGE_INDICATION",t.payload.body.bCoHost)}),ne(t=>yk(t.payload.body))),meetingMainEpics7:e=>Mi(e,7945).pipe(de(t=>{const{payload:{body:{opt:r}}}=t;Pe.set(tt.WebclientOpt,r,We.SessionStorage)}),_e(re)),meetingMainEpics8:(e,t)=>se(e,7942).pipe(de(r=>{const{payload:{body:{bHold:n}}}=r;Pe.set(tt.WebclientIsOnHold,n?1:0,We.SessionStorage),T(aw,n)}),fe(t),G(r=>{let[n,i]=r;const o=[Ql(n.payload.body.bHold)];if(n.payload.body.bHold){const s=ye(i);if(s){o.push(bk({audio:s.audio,video:s.bVideoOn,muted:s.muted}));const a=Xr(Oe.getInstance());if(s.audio==="computer"&&(a.leaveComputerAudio(),Yn.joinOrLeaveVoip(!1)),s.bVideoOn&&a.stopCaptureVideo(),s.sharerOn&&(Yn.stopSharing(s.userId),a.stopDesktopSharing(),o.push(an(Fe.End))),i.video&&i.video.subscribedVideoList.length>0&&i.video.subscribedVideoList.forEach(l=>{Yn.unsubscribeVideo(l)}),i.share&&i.share.isReceiveSharing){const l=i.share.activeNodeId;i.share.remoteControlledUserList.length>0&&(i.share.remoteControlledUserList.forEach(u=>{Yn.sharingRequestRemoteControl(u,!1)}),ga(i)&&a.stopRemoteControl()),Yn.unsubscribeSharing(l),a.stopRenderSharing()}}}return X(o)})),meetingMainEpics9:e=>se(e,7954).pipe(ne(t=>Ek(t.payload.body))),meetingMainEpics10:e=>se(e,4216).pipe(de(t=>{T("MEETING_CLAIM_HOST_KEY_RESPONSE",t.payload.body.bresult)}),_e(re)),meetingMainEpics11:(e,t)=>e.pipe(he(`${Vu}`,`${xu}`),fe(t),G(r=>{let[n,i]=r;const o=jB(i),{socket:{zoomSocketStatus:s},meeting:{meetingId:a}}=i;return s===Je.Connected&&(n.type===`${Vu}`?Yn.leaveMeeting(o):n.type===`${xu}`&&Yn.endMeeting()),a&&T(fs,{}),X(Va(i,!1))})),meetingMainEpics12:(e,t)=>e.pipe(he(`${QS}`),fe(t),G(r=>{let[n,i]=r;if(n.type===`${QS}`&&i.meeting.meetingNumber&&!i.meeting.zlkJwtToken){const o={mn:i.meeting.meetingNumber.toString(),name:i.meeting.userName,customerKey:i.meeting.customerKey?bt(i.meeting.customerKey):""},{jbhLeave:s}={jbhLeave:`https://${Ag}/wc/jbhLeave`},a=`${s}/?${new URLSearchParams(o).toString()}`;fetch(a,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"}})}return re})),meetingMainEpics13:e=>se(e,2).pipe(de(()=>{console.warn("Upgrade to latest version to optimize meeting experience")}),_e(re)),meetingMainEpics14:e=>se(e,1).pipe(de(t=>{const{payload:{body:{upgradeVersion:r}}}=t,n=Hi(1e4);if(n&&n.reason){const i=n.reason.replace(/{(\d+)}/g,()=>r);n.reason=i}T(mt,n)}),_e(re)),meetingMainEpics15:e=>se(e,4265).pipe(ne(t=>{const{payload:{body:r}}=t,{nShareType:n}=r;return T(Hk,{userSharePronounType:n}),Rk(n)})),meetingMainEpics16:e=>se(e,4128).pipe(de(t=>{const{payload:{body:{meetingtoken:r}}}=t,{WebclientMeetingToken:n}=tt;r&&Pe.set(n,r,We.SessionStorage)}),_e(re)),meetingMainEpics17:(e,t)=>e.pipe(he(`${Ho}`),z(()=>!!t.value.meeting.quicklyLeave),Be(()=>Ot(window,"beforeunload").pipe(de(()=>{Yn.leaveMeeting()}),_e(re)))),meetingMainEpics18:(e,t)=>se(e,8025).pipe(z(r=>!!r.payload.body.Zmk&&!!t.value.meeting.isEnableZmkFromRWG),ne(r=>{const{payload:{body:{Zmk:n}}}=r;return Wf({zmk:n})})),meetingMainEpics19:(e,t)=>e.pipe(he(`${qn}`),G(r=>{const{payload:{mediaSDKPath:n}}=r,{media:{skipJsMedia:i,patchJsMedia:o,assetsPath:s}}=t.value,a=`${!i&&o&&fk(s)&&n?Rg(n):s}/tp.min.js`;return X(window.ZoomTPModule===void 0||typeof window.ZoomTPModule.ZoomTPWebSocket!="function"?new Promise((l,u)=>Ig(a,()=>l(""),()=>u())):Promise.resolve("")).pipe(G(()=>{const{logger:l}=t.value,u=l?Or.getInstance().makeLogger(["TP MODULE"]):void 0;return X(window.ZoomTPModule.initTPModule({options:"",logInstance:u}).then(()=>(T($h,!0),Nk(!0))).catch(()=>(T($h,!1),jh(!1))))}),ui(()=>(setTimeout(()=>{Or.getInstance().report(`Unable to load tp.min.js,url:${a}`,["TP MODULE"],"error")},5e3),T($h,!1),X([jh(!1)]))),Bn(jh(!0)))}))},dH=hn(uH,{wakeLockEpic0:(e,t)=>e.pipe(he(`${Ho}`),fe(t),z(r=>{let[,n]=r;return!!n.meeting.stayAwake}),de(async()=>{try{const{isSafari:r,isIOSMobile:n}=ae;en&&en.release().then(()=>{en=null}),"wakeLock"in navigator&&((r||n)&&await dr(jr(Ot(document,"click").pipe(xe(1)),Ot(document,"touchend").pipe(xe(1)))),en=await navigator.wakeLock.request("screen"),en.addEventListener("release",()=>{}))}catch{}}),Be(()=>Ot(document,"visibilitychange").pipe(G(async()=>{if(document.visibilityState==="visible"){const{isSafari:r,isIOSMobile:n}=ae;en&&en.release().then(()=>{en=null}),"wakeLock"in navigator&&((r||n)&&await dr(jr(Ot(document,"click").pipe(xe(1)),Ot(document,"touchend").pipe(xe(1)))),en=await navigator.wakeLock.request("screen"))}else en&&en.release().then(()=>{en=null})}),_e(re)))),wakeLockEpic1:e=>e.pipe(he(`${Li}`)).pipe(de(()=>{en&&en.release().then(()=>{en=null})}),_e(re))},aH,lH,{meetingInfoEpic:(e,t)=>e.pipe(he(`${Lu}`),Be(r=>{const n=Object.assign({},r.payload,{password:bt(r.payload.password),topic:bt(r.payload.topic)}),{videoSDKUrl:i}={videoSDKUrl:`https://${Ag}/wc/lsdk`};return function(o,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"zoomsdkjsonpcallback";return new Ft(l=>{a2++;const u=`${a}${a2}`,d=document.createElement("script");Object.keys(s).forEach(c=>(s[c]===void 0||s[c]===null)&&delete s[c]),d.src=`${o}?${new URLSearchParams(Object.assign(s,{callback:u})).toString()}`,d.async=!0,d.onerror=c=>l.error(c),document.getElementsByTagName("head")[0].appendChild(d),window[u]=c=>{d.parentNode&&d.parentNode.removeChild(d),delete window[u],l.next(c),l.complete()}})}(i,n).pipe(Zr(e.pipe(he(`${Vu}`),xe(1))),ui(o=>qe({status:!1,result:o.toString(),errorCode:-3e3})),G(o=>{const[s,a]=(l=qe(o),[z(u=c=>c.status===!0&&c.result!==void 0,d)(Cr(l)),z(O$(u,d))(Cr(l))]);var l,u,d;return a.subscribe(c=>{oH.report(`get meeting info error, ${JSON.stringify(c)}`,["Join Meeting Flow","Get Meeting Info Error"],"error"),c.state||(c.errorCode===3e3&&c.errorMessage==="Meeting password is incorrect"?T(mt,{errorCode:wi.WrongPasscode,reason:"Incorrect passcode."}):c.errorCode===3e3&&c.errorMessage==="The role type error"?T(mt,{errorCode:wi.RoleTypeMissing,reason:"Role type error"}):c.errorCode===-3e3?T(mt,{errorCode:wi.CommonError,reason:"connection error"}):c.errorCode===3e3?T(mt,{reason:c.errorMessage,errorCode:wi.CommonError}):c.errorCode===300?T(mt,{reason:"This account does not exist or does not belong to you",errorCode:wi.CommonError}):c.errorCode===124&&c.errorMessage==="Parse lite sdk topic and pwd fail"?T(mt,{reason:"Topic is invalid",errorCode:wi.CommonError}):c.errorCode===124&&c.errorMessage==="The java web token is expired or more than 2 days or ineffective."?T(mt,{reason:"The token has expired, is over 2 days old, or is ineffective.",errorCode:wi.CommonError}):c.errorCode===124&&T(mt,{reason:"Verify JWT failed",errorCode:wi.CommonError}))}),s.pipe(_L(c=>{if(c.status===!0){const{result:{mid:h,websdkClientFeatureOptions:m,showRecommendVersion:f}}=c;Pe.init(h);const v=((b,R)=>{if(b.result){const{result:{mn:w,ts:O,auth:D,track_auth:U,mid:x,tid:P,encryptedRWC:I,encryptedGEORWC:E,user_identity:A,meetingOptions:_,can_recording:C,wcXMPPConfig:V,call_out_country_json:M,isOriginalHost:$,support_call_out:B,liveTranscription:ee,logConfig:ie,logEncryptionPubKey:be,toll_numbers_json:le,h323Password:te,liveStreamInfo:ve,rc_auto_delete:Ae,jwt_rc:me,op_rc:Me,mediaSDKVersion:F,mediaSDKPathPrefix:j,zmk:N,fileTransfer:Y,fileServerDomain:oe,accountId:ge}}=b,{lang:Ie,password:De,topic:ke,zlk:je,cv:Le,userName:Ne}=R;return{meetingNumber:w,meetingId:x,tid:P,ts:O,auth:D,passWord:De,trackAuth:U,customerKey:A,encryptedRWC:JSON.parse(I||"{}"),encryptedGEORWC:JSON.parse(E||"{}"),meetingOptions:JSON.parse(_||"{}"),recordingEnable:C==="1",topic:ke,userName:Pe.get(tt.WebclientUserName)||Ne,cv:Le,zlkJwtToken:je,xmppConfig:JSON.parse(V||"{}"),callOutCountry:JSON.parse(M||"{}"),lang:Ie,isOriginHost:$,isSupportCallOut:B==="1",liveTranscription:JSON.parse(ee||"{}"),logConfig:ie,logEncryptionPubKey:be,tollNumbers:le===void 0?void 0:JSON.parse(le),h323Password:te,liveStreamInfo:JSON.parse(ve||"{}"),rcAutoDelete:Ae,jwtRc:me,opRc:Me,mediaSDKPath:F&&j?`${Rg(j)}/${F}`:void 0,zmk:N,fileTransfer:JSON.parse(Y||"{}"),fileServerDomain:oe,accountId:ge}}return b})(c,r.payload);var p;f&&(r==null||(p=r.payload)===null||p===void 0||p.lang,console.log("Update VideoSDK-Web to the latest version to optimize meeting experience","https://developers.zoom.us/docs/video-sdk/web/"));const g=[qe(qn(v)),j$(s2,t,rw())],y=(b=>{const R=[];if(b){const w=b.split("").reverse();Object.keys(Ki).filter(O=>/M:\d+(,\d+)*;V:\d+(,\d+)*/.test(Ki[O])).forEach(O=>{const D=Ki[O];let[U,x]=D.split(";");U.startsWith("V:")&&([U,x]=[x,U]);const P=x.slice(2).split(",").map(A=>w[Number(A)-1]).reverse().join(""),I=parseInt(P,16),E=ZB[D];E&&(Array.isArray(E)?E:[E]).forEach(A=>{const _=A.mask?(I&A.mask)>0:I;R.push(qe(A.action(_)))})})}return R})(m);y.length>0&&g.unshift(...y);const S=(b=>{const R=[];if(b){const O=b.split("").reverse(),D=[];HF.forEach(U=>{var x;const[P,I]=U.split("-"),E=Number(I)-1;D.length<E&&(D.length=E+1),D[E]=(x=O[Number(P)-1])!==null&&x!==void 0?x:"0"});for(let U=0;U<D.length;U++){var w;D[U]=(w=D[U])!==null&&w!==void 0?w:"0"}R.push(qe(ek(D.reverse().join(""))))}return R})(m);return S.length>0&&g.unshift(...S),Nc(...g)}}))}),Bn(Dk(performance.now())))})),pingRWCEpic:s2});function Yp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var cH=function e(t,r){function n(i,o,s){if(typeof document<"u"){typeof(s=Yp({},r,s)).expires=="number"&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in s)s[l]&&(a+="; "+l,s[l]!==!0&&(a+="="+s[l].split(";")[0]));return document.cookie=i+"="+t.write(o,i)+a}}return Object.create({set:n,get:function(i){if(typeof document<"u"&&(!arguments.length||i)){for(var o=document.cookie?document.cookie.split("; "):[],s={},a=0;a<o.length;a++){var l=o[a].split("="),u=l.slice(1).join("=");try{var d=decodeURIComponent(l[0]);if(s[d]=t.read(u,d),i===d)break}catch{}}return i?s[i]:s}},remove:function(i,o){n(i,"",Yp({},o,{expires:-1}))},withAttributes:function(i){return e(this.converter,Yp({},this.attributes,i))},withConverter:function(i){return e(Yp({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const{WebclientIsOnHold:pH,WebclientOpt:hH,WebclientParticipantId:fH,WebclientZoomId:mH,WebclientMeetingToken:gH}=tt,{WebclientDeviceId:l2}=XS;function u2(e){let{retryCount:t,rwgServerList:r,userName:n,auth:i,trackAuth:o,meetingId:s,customerKey:a,tid:l,lang:u,ts:d,bid:c,botk:p,confID:h,zlkJwtToken:m,isAudioBridgeEnabled:f,isMeetingReset:v,cameraDevicesList:g,isFullHDVideoEnabled:y,isFullHDVideoShareEnabled:S}=e;const b=cH.get("_zm_mtk_guid");let R=Pe.get(l2);if(R||(R=Nm(),Pe.set(l2,R,We.LocalStorage)),r.length>t){var w;const O=r[t],D={dn2:bt(n),auth:i,browser:`${ae.browser}${ae.browserVersion} ${(w=window)!==null&&w!==void 0&&w.crossOriginIsolated?"SAB":""}`,trackAuth:o,mid:s,tid:l,lang:u,ts:d,"ZM-CID":R,_ZM_MTG_TRACK_ID:b||"",customer_key:bt(a),cfs:0,islch:1};if(m)try{const{vendor:I}=il(m);I&&Object.assign(D,{vendor:I})}catch(I){console.log(I)}O.rwcAuth?Object.assign(D,{rwcAuth:O.rwcAuth}):O.rwcToken&&Object.assign(D,{rwcToken:O.rwcToken});const U=Vk()?1:ae.isIE||ae.isSupportEssentialAudioAndVideoAbility?2:0;Object.assign(D,{as_type:U}),[{key:hH,queryKey:"opt"},{key:fH,queryKey:"participantID"},{key:mH,queryKey:"zoomid"}].forEach(I=>{const E=Pe.get(I.key);E!==void 0&&(D[I.queryKey]=E)});const x=c&&p&&h;x&&Object.assign(D,{bid:bt(c),confID:h}),Pe.get(gH)&&Object.assign(D,{isdj:1}),Gt()&&(Object.assign(D,{from:ae.isAndroidBrowser?"android":"ios"}),f&&Object.assign(D,{useABAudio:1})),Object.assign(D,{clientCaps:vH({isAudioBridgeEnabled:f&&Gt(),isBO:x,isFullHDVideoEnabled:y,isFullHDVideoShareEnabled:S})});const P=v?g.length>0?1:0:1;return Object.assign(D,{isCamera:P}),Object.assign(D,{clientOS:ae.isAndroidOrIOSBrowser?ae.isIOSMobile?"ios":"android":ae.isMacOS?"mac":"win"}),Object.assign(D,{audioFeature:Oe.getAudioFeatureFlag()}),{queryObject:{...D},rwgServer:O}}return null}function vH(e){const{isAudioBridgeEnabled:t,isBO:r,isFullHDVideoEnabled:n,isFullHDVideoShareEnabled:i}=e;let o=gn.WebCameraIndication|gn.SendMeetingTokenSeparately|gn.SmartSummary|gn.LocalRecording|gn.LocalRecordingGrantPermission|gn.UnifyErrorType;const s=Oe.getPTZCapability();return(s.pan||s.tilt||s.zoom)&&(o|=gn.SupportFarEndCameraControl),Oe.isSupportVideoShare()&&(o|=gn.SupportVideoShare),t&&Oe.isSupportAudioBridgeAVSync()&&(o|=gn.WebrtcAudioRtcpTime),Oe.isSupportShareMultiStream()&&(o|=gn.ShareMultiStream),Oe.isSupportVideoLTR()&&(o|=gn.VideoLTR),r||(o|=gn.RequestRemoteControl),n&&Oe.isSupportFullHDVideo()&&(o|=gn.SupportSend1080PVideo),i&&Oe.isSupportFullHDVideoShare()&&(o|=gn.SupportSend1080PVideoShare),o}function eu(e,t){return t?nl(Mu(t),z(()=>{const{socket:{zoomSocketStatus:r},meeting:{meetingStatus:n,isMeetingReset:i}}=e.value;return r!==Je.Closed&&n===Lt.Joined&&!i})):nl(z(()=>{const{socket:{zoomSocketStatus:r},meeting:{meetingStatus:n,isMeetingReset:i}}=e.value;return r!==Je.Closed&&n===Lt.Joined&&!i}))}const Al=He.createAgent();let Xp;const ra=fl.getInstance();let eh;const Cl=Pg.getInstance();let th;const d2={zoomSocketStatus:Je.Closed,xmppSocketStatus:Je.Closed,mainSessionSocketStatus:Je.Closed,retryCount:0,rwgServerList:[]},yH=pn({[`${ql}`]:k((e,t)=>{let{payload:r}=t;e.zoomSocketStatus=r.status}),[`${zP}`]:k((e,t)=>{let{payload:r}=t;const{rwgServerList:n}=e;n.find(i=>i.rwg===r.rwg)||n.push(r)}),[`${WP}`]:k((e,t)=>{let{payload:r}=t;e.retryCount=r}),[`${Mh}`]:k((e,t)=>{let{payload:r}=t;e.xmppSocketStatus=r}),[`${Nh}`]:k((e,t)=>{let{payload:r}=t;e.mainSessionSocketStatus=r}),[`${GP}`]:()=>d2},d2),SH={epics0:(e,t)=>e.pipe(he(`${Dh}`),fe(t),z(r=>{let[,n]=r;return n.socket.zoomSocketStatus===Je.Closed&&!!n.meeting.meetingId}),Be(r=>{let[,n]=r;return function(i){const{media:{patchedMediaSDKStatus:o},meeting:{isRlbTP:s,isRlbTPReady:a}}=i;return pp([o===xd.Loading?Ge(Gh,1).pipe(_r(Hs)):X([0]),s?a?X([0]):Ge($h,1).pipe(_r(Hs)):X([0])])}(n).pipe(Be(()=>{const{socket:{retryCount:i,rwgServerList:o},meeting:s,breakoutRoom:a,video:l,share:u}=t.value;let d;const c={...s,retryCount:i,rwgServerList:o};if(l){const{cameraDevicesList:m,isFullHDVideoEnabled:f}=l;Object.assign(c,{cameraDevicesList:m,isFullHDVideoEnabled:f})}if(u){const{isFullHDVideoShareEnabled:m}=u;Object.assign(c,{isFullHDVideoShareEnabled:m})}if(a&&a.currentRoom.status===Ee.Joining){const{currentRoom:{boId:m,boConfId:f,boToken:v}}=a;Object.assign(c,{bid:m,botk:v,confID:f})}if(d=s.zlkJwtToken?function(m){const f=u2(m);if(f){const{queryObject:v,rwgServer:g}=f,{topic:y,cv:S,meetingNumber:b}=m;return Object.assign(v,{topic:bt(y),iccv:S}),`wss://${g.rwg}/instantsdk/${b}?${new URLSearchParams(v).toString()}`}return null}(c):function(m){const f=u2(m);if(f){const{queryObject:v,rwgServer:g}=f,{cv:y,meetingNumber:S}=m;return Object.assign(v,{jscv:y,browser:v.browser+" ComponentView"}),[{key:pH,queryKey:"cfs"}].forEach(b=>{const R=Pe.get(b.key);R!==void 0&&(v[b.queryKey]=R)}),`wss://${g.rwg}/wc/api/${S}?${new URLSearchParams(v).toString()}`}return null}(c),d){const m=(p=d,h=s.isRlbTP,Al.connect(p,h),Xp=new Fn,As(f=>Al.on(Qr.Message,f),f=>Al.off(Qr.Message,f),f=>f.data).subscribe(Xp),Xp);return Wt(m.pipe(z(f=>typeof f=="string"),ne(f=>{try{return JSON.parse(f)}catch(v){return console.error(v),{evt:0}}}),RL(),Xu(f=>{if(f.evt!==0||!f.body||f.body.test!=="invalid parameters!")return hl(f);T(mt,{errorCode:wi.InvalidParameter,reason:"Invalid parameter"})}),Bn(ql({status:Je.Connecting,rwgUrl:d}))),m.pipe(z(f=>f instanceof ArrayBuffer),ne(f=>U$(f))))}var p,h;return re}))})),epics1:(e,t)=>e.pipe(he(`${Dh}`),fe(t),z(r=>{let[,n]=r;return n.socket.zoomSocketStatus===Je.Closed&&!!n.meeting.meetingId}),Be(()=>{const[r,n,i,o]=[Qr.Open,Qr.Close,Qr.Error,Qr.Inactive].map(s=>As(a=>Al.on(s,a),a=>Al.on(s,a)));return Wt(r.pipe(G(()=>Wt(qe(ql({status:Je.Connected})),Nt(6e4).pipe(fe(t),z(s=>{let[,a]=s;return a.meeting.meetingStatus===Lt.Initial&&!a.meeting.isMeetingReset}),ne(()=>(T(xr,{reason:Ir.Failover}),Vr(lr.NoHeartbeat))))))),n.pipe(eu(t),ne(()=>(T(xr,{reason:Ir.Failover}),Vr(lr.Disconnect)))),o.pipe(eu(t),ne(()=>(T(xr,{reason:Ir.Failover}),Vr(lr.NoHeartbeat)))),i.pipe(fe(t),G(s=>{let[,a]=s;const{meeting:{meetingStatus:l,isMeetingReset:u},socket:{rwgServerList:d,retryCount:c}}=a,p=[];if(l===Lt.Initial&&d!=null&&d.length){const h=d[c];return Nt(5e3).pipe(z(()=>t.value.meeting.meetingStatus===Lt.Initial),G(()=>{const{socket:{rwgServerList:m,retryCount:f}}=t.value,v=[];return m.length>f+1?v.push(WP(f+1),Li({retry:!0})):(T(mt,{reason:"connection error",errorCode:wi.CommonError}),v.push(...Va(t.value))),X(v)}),Bn(_k(h==null?void 0:h.rwc)))}return u||l!==Lt.Joined||(T(xr,{reason:Ir.Failover}),p.push(Vr(lr.OnError))),X(p)})))})),epics2:(e,t)=>e.pipe(he(`${Li}`),Be(r=>r.payload&&r.payload.retry?qe(Dh()).pipe(Mu(1e3),Bn(ql({status:Je.Closed}))):qe(ql({status:Je.Closed}))),Mu(100),de(()=>{var r;t.value.socket.zoomSocketStatus===Je.Closed&&(Al.close(),(r=Xp)===null||r===void 0||r.complete())}))},bH=hn(SH,{xmppEpics0:(e,t)=>e.pipe(he(`${Ho}`),G(()=>{const{meeting:{meetingOptions:r,zlkJwtToken:n,isWebinar:i}}=t.value,o=[];return(r.isPollingEnabled||n||i)&&o.push(Sv()),X(o)})),xmppEpics1:(e,t)=>e.pipe(he(`${Sv}`),fe(t),z(r=>{let[,n]=r;return n.socket.xmppSocketStatus==="closed"}),Be(r=>{let[,n]=r;const{meeting:{svcUrl:i,meetingNumber:o,conId:s,isRlbTP:a}}=n,l=function(u,d,c){return`wss://${u}/wc/media/${d}?type=x&cid=${c}`}(i,o,s);return((u,d)=>(ra.connect(u,d),eh=new Fn,As(c=>ra.on(Ro.Message,c),c=>ra.off(Ro.Message,c)).subscribe(eh),eh))(l,a).pipe(z(u=>(u==null?void 0:u.evt)!==void 0),ne(u=>BP(u)),Bn(Mh(Je.Connecting)))})),xmppEpics2:(e,t)=>e.pipe(he(`${Sv}`),Be(()=>{const[r,n,i]=[Ro.Open,Ro.Close,Ro.Error].map(o=>As(s=>ra.on(o,s),s=>ra.on(o,s)));return Wt(r.pipe(de(()=>{const o=function(){const{isSupportEssentialAudioAndVideoAbility:s,isSupportAudioWorklet:a}=ae;return s&&a?11:10}();ra.join(o)}),_n(Mh(Je.Connected))),n.pipe(eu(t,500),ne(()=>(T(xr,{reason:Ir.Failover}),Vr(lr.DisconnectXmpp)))),i.pipe(eu(t,500),ne(()=>(T(xr,{reason:Ir.Failover}),Vr(lr.OnErrorXmppChannel)))))})),xmppEpics3:e=>e.pipe(he(`${FP}`),_n(Mh(Je.Closed)),Mu(100),de(()=>{var t;ra.close(),(t=eh)===null||t===void 0||t.complete()}))},{mainSessionEpics0:(e,t)=>e.pipe(he(`${BS}`),fe(t),z(r=>{let[,n]=r;return n.socket.mainSessionSocketStatus==="closed"}),Be(r=>{let[,n]=r;const{meeting:{svcUrl:i,meetingNumber:o,conId:s,isRlbTP:a}}=n,l=function(u,d,c){return`wss://${u}/wc/media/${d}?type=m&cid=${c}&mode=2`}(i,o,s);return((u,d)=>(Cl.connect(u,d),th=new Fn,As(c=>Cl.on(Qr.Message,c),c=>Cl.off(Qr.Message,c)).pipe(ne(c=>c.data)).subscribe(th),th))(l,a).pipe(ne(u=>{try{return JSON.parse(u)}catch(d){return console.error(d),{evt:0}}}),z(u=>u.evt!==0),RL(),ne(u=>Lo(u)),Bn(Nh(Je.Connecting)))})),mainSessionEpics1:(e,t)=>e.pipe(he(`${BS}`),Be(()=>{const[r,n,i]=[Qr.Open,Qr.Close,Qr.Error].map(o=>As(s=>Cl.on(o,s),s=>Cl.on(o,s)));return Wt(r.pipe(_n(Nh(Je.Connected))),n.pipe(eu(t,500),ne(()=>(T(xr,{reason:Ir.Failover}),Vr(lr.DisconnectMChannel)))),i.pipe(eu(t,500),ne(()=>(T(xr,{reason:Ir.Failover}),Vr(lr.OnErrorMChannel)))))})),mainSessionEpics2:e=>e.pipe(he(`${HP}`),_n(Nh(Je.Closed)),de(()=>{var t;Cl.close(),(t=th)===null||t===void 0||t.complete()}))}),EH={id:"userId",type:e=>ll(e)?{userType:e,avatarBackgroundType:Math.floor(8*Math.random())+1}:{userType:e},role:e=>({userRole:e,isHost:Bc(e)}),dn2:e=>({displayName:Vi(e)}),bShareOn:"sharerOn",bSharePause:"sharerPause",bLocalRecordStatus:e=>({bLocalRecord:e}),bGuest:"isGuest",bCapsRequestLT:"isRequestLT",customerKey:"userIdentity"},uc=e=>{const t={};return["add","remove","update"].forEach(r=>{const n=r,i=e[n];i!=null&&(t[n]=i.reduce((o,s)=>{const a=Object.keys(s).reduce((u,d)=>{const c=EH[d];return typeof c=="function"?Object.assign(u,c(s[d])):typeof c=="string"?Object.assign(u,{[`${c}`]:s[d]}):Object.assign(u,{[`${d}`]:s[d]}),u},{}),l=o.find(u=>u.userId===a.userId);return l!==void 0?Object.assign(l,a):o.push(a),o},[]))}),t},wH={name:"displayName",node:e=>({userId:Number(e)}),role:e=>({userRole:Number(e)})},ey=e=>Object.keys(e).reduce((t,r)=>{const n=wH[r];return typeof n=="function"?Object.assign(t,n(e[r])):typeof n=="string"?Object.assign(t,{[`${n}`]:e[r]}):Object.assign(t,{[`${r}`]:e[r]}),t},{}),c2={attendeesList:[],assistantList:[],xmppAttendeeList:[],allowTalkAttendeesList:[],failoverAttendeesList:[],isAdmitAllSilentUsers:!1},IH=pn({[`${$u}`]:k((e,t)=>{let{payload:r}=t;r.add!==void 0&&r.add.length>0&&r.add.forEach(n=>{if(n.userType===Mb.Assitant){const i=e.assistantList.find(o=>o.userId===n.userId);i!==void 0?Object.assign(i,n):e.assistantList.push(n)}else if(lm(n.userRole)){const i=e.allowTalkAttendeesList.find(o=>o.userId===n.userId);i!==void 0?Object.assign(i,n):e.allowTalkAttendeesList.push(n)}else{const i=e.attendeesList.find(o=>o.userId===n.userId);i!==void 0?Object.assign(i,n):e.attendeesList.push(n)}}),r.update!==void 0&&r.update.length>0&&r.update.forEach(n=>{const i=e.attendeesList.find(o=>o.userId===n.userId);if(i!==void 0)Object.assign(i,n);else{const o=e.allowTalkAttendeesList.find(s=>s.userId===n.userId);if(o!==void 0)Object.assign(o,n);else{const s=e.assistantList.find(a=>a.userId===n.userId);s!==void 0&&Object.assign(s,n)}}}),r.remove!==void 0&&r.remove.length>0&&r.remove.forEach(n=>{const i=e.attendeesList.findIndex(o=>o.userId===n.userId);if(i!==-1)e.attendeesList.splice(i,1);else{const o=e.allowTalkAttendeesList.findIndex(s=>s.userId===n.userId);if(o!==-1)e.allowTalkAttendeesList.splice(o,1);else{const s=e.assistantList.findIndex(a=>a.userId===n.userId);s!==-1&&e.assistantList.splice(s,1)}}})}),[`${bM}`]:k((e,t)=>{let{payload:r}=t;const{xmppAttendeeList:n}=e,i=n.map(o=>o.jid);r.forEach(o=>{const{jid:s}=o,a=i.indexOf(s);a!==-1?Object.assign(n[a],o):n.push(o)})}),[`${hM}`]:k((e,t)=>{let{payload:r}=t;e.isAdmitAllSilentUsers=r}),[`${gM}`]:k(e=>{e.attendeesList.forEach(t=>{t.bRaiseHand&&(t.bRaiseHand=!1)})}),[`${vM}`]:k(e=>{e.attendeesList.forEach(t=>{t.feedback>0&&(t.feedback=0)})}),[`${kb}`]:k((e,t)=>{let{payload:r}=t;e.failoverAttendeesList.push(r)}),[`${mM}`]:k((e,t)=>{let{payload:r}=t;r.forEach(n=>{const i=e.failoverAttendeesList.findIndex(o=>o.zoomID===n.zoomID);i!==-1&&e.failoverAttendeesList.splice(i,1)})}),[`${yM}`]:k((e,t)=>{let{payload:r}=t;const{jid:n,name:i}=r,o=e.xmppAttendeeList.find(s=>s.jid===n);o&&(o.displayName=i)}),[`${SM}`]:k((e,t)=>{let{payload:r}=t;const{jid:n}=r,i=e.xmppAttendeeList.findIndex(o=>o.jid===n);n!==-1&&e.xmppAttendeeList.splice(i,1)}),[`${Fc}`]:k((e,t)=>{let{payload:r}=t;const{userId:n,key:i,value:o}=r,s=e.attendeesList.find(a=>a.userId===n);s&&(s[`${i}`]=o)}),[`${fM}`]:()=>c2},c2),AH={epics0:(e,t)=>se(e,ot).pipe(ne(r=>uc(r.payload.body)),fe(t),G(r=>{let[n,i]=r,o=[$u(n)];const{meeting:{userId:s,isWebinar:a,isOnHold:l},participants:{attendeesList:u,failoverAttendeesList:d,allowTalkAttendeesList:c}}=i,p=c.map(m=>m.userId);if(n.add){const m=n.add.filter(v=>v.userId===s);m.length>0&&m.forEach(v=>{v.bHold!==void 0&&o.push(Ql(v.bHold)),u.some(g=>g.userId===v.userId)?T(vr,v):T(mp,v)});const f=n.add.filter(v=>v.userId!==s);if(f.length>0){const v=f.filter(y=>!lm(y.userRole)).map(y=>{const S={...y};if(ll(y.userType)){var b;const w=(b=i.audio)===null||b===void 0?void 0:b.dialout.find(O=>O.phoneNodeId===y.userId);w&&Object.assign(S,{phoneNumber:w.phoneNumber})}const R=d.find(w=>w.zoomID===y.zoomID);return R&&Object.assign(S,{source:R.isOnHold?"on hold":"failover"}),S}),g=v.filter(y=>!!y.source).map(y=>({zoomID:y.zoomID}));if(o.push(mM(g)),T(ow,v),a){const y=f.filter(S=>lm(S.userRole));y.length>0&&T(hs,y.map(S=>({userId:S.userId,isAllowToTalk:!0})))}}}if(n.update){const m=n.update.filter(v=>v.userId===s);m.length>0&&m.forEach(v=>{T(vr,v),v.bHold!==void 0&&o.push(Ql(v.bHold))});const f=n.update.filter(v=>!(v.userId===s||p.includes(v.userId)));if(f.length>0&&T(lo,f),a){const v=n.update.filter(g=>g.userId!==s&&p.includes(g.userId));v.length>0&&T(hs,v)}}if(n.remove){const m=n.remove.map(f=>{const v=u.find(g=>g.userId===f.userId);return v?f.action===2&&f.nUserStatus===1?v.bHold?(o.push(kb({zoomID:v.zoomID,isOnHold:!0})),{...f,...v,reason:"on hold"}):(o.push(kb({zoomID:v.zoomID,isOnHold:!1})),{...f,...v,reason:"failover"}):{...f,...v}:null}).filter(f=>!!f);if(T(sw,m),a){const f=n.remove.filter(v=>p.includes(v.userId));f.length>0&&T(hs,f.map(v=>({userId:v.userId,isAllowToTalk:!1})))}}const h=o.filter(m=>m.type===`${Ql}`);if(h.length>0){const m=h[h.length-1];o=o.filter(f=>f.type!==`${Ql}`),m.payload!==l&&(o.push(m),T(aw,!l))}return X(o)})),epics1:(e,t)=>pu(e,24595).pipe(G(r=>{const{payload:{body:{action:n,data:i}}}=r,{meeting:{jid:o},participants:{xmppAttendeeList:s}}=t.value,a=[];if(n===Ji.rename){i.forEach(u=>{a.push(yM(u))});const l=i.map(u=>ey(u));T(hs,l)}if(n===Ji.Remove){i.forEach(u=>{a.push(SM(u))});const l=i.map(u=>({...ey(u),removed:!0}));T(Fk,l)}if([Ji.Add,Ji.List,Ji.update].includes(n)){const l=i.map(u=>{const d=ey(u);return Object.keys(d).reduce((c,p)=>(d[p]!==""&&Object.assign(c,{[p]:d[p]}),c),{})});if(T(hs,l),a.push(bM(l)),n===Ji.update){const u=i.find(d=>d.jid===o);if(u&&u.bRaiseHand!==void 0){const d=s.find(c=>c.jid===o);(d==null?void 0:d.bRaiseHand)!==u.bRaiseHand&&T("MEETING_WEBINAR_ATTENDEE_RAISE_HAND",{bRaiseHand:u.bRaiseHand})}}}return X(a)})),epics2:e=>se(e,7951).pipe(de(t=>{t.payload.body.bStarted===!1&&T("ADMIT_ALL_SILENT_USERS_END",t.payload.body.bStarted)}),ne(t=>hM(t.payload.body.bStarted))),epics3:e=>se(e,7946).pipe(z(t=>{var r;return["bRaiseHand","feedback"].includes((r=t.payload.body)===null||r===void 0?void 0:r.key)&&t.payload.body.value===0}),ne(t=>(T(lo,{}),t.payload.body.key==="bRaiseHand"?gM():vM())))},CH=hn(AH),p2={audioEncodeStatus:"initial",audioDecodeStatus:"initial",videoEncodeStatus:"initial",videoDecodeStatus:"initial",sharingEncodeStatus:"initial",sharingDecodeStatus:"initial",assetsPath:"",mediaConstraints:void 0,fileWithVersion:!1,enforceMultipleVideos:!1,enforceVirtualBackground:!1,enableAudioQos:!0,enableVideoQos:!0,isAudioBridgeReceiveReady:!1,isAudioBridgeSendReady:!1,isMediaAgentInitialized:!1,disableRenderLimits:!1,adaptedABOptionForMediaSDK:""},_H=pn({[`${zS}`]:k((e,t)=>{let{payload:r}=t;e.audioDecodeStatus=r}),[`${HS}`]:k((e,t)=>{let{payload:r}=t;e.audioEncodeStatus=r}),[`${Lh}`]:k((e,t)=>{let{payload:r}=t;e.sharingDecodeStatus=r}),[`${KS}`]:k((e,t)=>{let{payload:r}=t;e.sharingEncodeStatus=r}),[`${GS}`]:k((e,t)=>{let{payload:r}=t;e.videoDecodeStatus=r}),[`${WS}`]:k((e,t)=>{let{payload:r}=t;e.videoEncodeStatus=r}),[`${XE}`]:k((e,t)=>{let{payload:r}=t;e.mediaConstraints=r.mediaConstraints,e.assetsPath=r.assetsPath,e.fileWithVersion=r.fileWithVersion,e.enforceMultipleVideos=!!r.enforceMultipleVideos,e.enforceVirtualBackground=r.enforceVirtualBackground,e.skipJsMedia=r.skipJsMedia,e.patchJsMedia=r.patchJsMedia,e.alternativeNameForVideoPlayer=r.alternativeNameForVideoPlayer,r.enforceMultipleVideos&&typeof r.enforceMultipleVideos=="object"&&(e.disableRenderLimits=!!r.enforceMultipleVideos.disableRenderLimits)}),[`${qP}`]:k((e,t)=>{let{payload:r}=t;const{type:n,encryptKey:i,additionalType:o}=r,s={encryptKey:i,additionalType:o};n==="audio"?e.audioEncrypt=s:n==="video"?e.videoEncrypt=s:n==="sharing"&&(e.sharingEncrypt=s)}),[`${QP}`]:k((e,t)=>{let{payload:r}=t;e.isEnableDecoderInWorklet=r}),[`${Vh}`]:k((e,t)=>{let{payload:r}=t;e.patchedMediaSDKStatus=r}),[`${JP}`]:k((e,t)=>{let{payload:r}=t;e.assetsPath=r}),[`${ZP}`]:k((e,t)=>{let{payload:r}=t;e.enableAudioQos=r.audioQos,e.enableVideoQos=r.videoQos}),[`${YP}`]:k((e,t)=>{let{payload:r}=t;e.isAudioBridgeReceiveReady=r}),[`${XP}`]:k((e,t)=>{let{payload:r}=t;e.isAudioBridgeSendReady=r}),[`${ew}`]:k((e,t)=>{let{payload:r}=t;e.isMediaAgentInitialized=r}),[`${ek}`]:k((e,t)=>{let{payload:r}=t;e.adaptedABOptionForMediaSDK=r}),[`${tk}`]:e=>({...p2,mediaConstraints:e.mediaConstraints,assetsPath:e.assetsPath,fileWithVersion:e.fileWithVersion,enforceMultipleVideos:e.enforceMultipleVideos,disableRenderLimits:e.disableRenderLimits,enforceVirtualBackground:e.enforceVirtualBackground,alternativeNameForVideoPlayer:e.alternativeNameForVideoPlayer})},p2),wr=new class{constructor(){this.state={mediaSDK:void 0,mediaSDKInstanceMap:new Map,tagName:"video-player",renderCountMap:new Map},this.onceMap=new WeakMap,this.subscribers=[]}get(e){return this.state[e]}dispatch(e,t,r){t&&Object.assign(this.state,t),e&&this.notifySubscribers(e,r)}subscribe(e){return this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);t!==-1&&this.subscribers.splice(t,1)}}once(e,t){this.onceMap.set(t,{event:e,unSubscribe:this.subscribe(t)})}notifySubscribers(e,t){const r=[];this.subscribers.forEach(n=>{n(e,this.state,t);const i=this.onceMap.get(n);if(i){const{event:o,unSubscribe:s}=i;o===e&&(r.push(s),this.onceMap.delete(n))}}),r.forEach(n=>n())}};var Tr,Wm;(function(e){e[e.ADD_RENDER_VIDEO=1]="ADD_RENDER_VIDEO",e[e.STOP_RENDER_VIDEO=2]="STOP_RENDER_VIDEO",e[e.START_SHARING=23]="START_SHARING",e[e.STOP_SHARING=24]="STOP_SHARING",e[e.SWITCH_CANVAS_FOR_VIDEO_CAPTURE=25]="SWITCH_CANVAS_FOR_VIDEO_CAPTURE",e[e.UPDATE_SHARING_DECODE_PARAM=44]="UPDATE_SHARING_DECODE_PARAM",e[e.UPDATE_CANVAS_SIZE=46]="UPDATE_CANVAS_SIZE",e[e.ZOOM_RENDER=48]="ZOOM_RENDER",e[e.REMOVE_EXPIRED_CANVAS=76]="REMOVE_EXPIRED_CANVAS",e[e.WEBGL_LOST_REPLACE_CANVAS=77]="WEBGL_LOST_REPLACE_CANVAS",e[e.UPDATE_VIDEO_QUALITY=78]="UPDATE_VIDEO_QUALITY",e[e.SEND_RENDER_LOG=79]="SEND_RENDER_LOG"})(Tr||(Tr={})),function(e){e[e.WEBGL_LOST_IN_MULTI_VIEW=-32]="WEBGL_LOST_IN_MULTI_VIEW",e[e.MOBILE_CAPTURE_DEVICE_CHANGE=135]="MOBILE_CAPTURE_DEVICE_CHANGE"}(Wm||(Wm={}));const Xc="default-sesssion-key";var Gm,h2,f2,To;function m2(e,t,r,n,i){const o=document.createElement("canvas");o.id=n;const s=aV(o,e,t);return i(`VPISC:${window.devicePixelRatio},${s}`),o.style.pointerEvents="none",o.style.position="absolute",o.style.left="0px",o.style.top="0px",o.style.width=e+"px",o.width=e*Ts(o),o.style.height=t+"px",o.height=t*Ts(o),o.ariaHidden="true",o.style.zIndex=r,o}function g2(e,t){const r=w0(()=>{if(e){aV(e,t.clientWidth,t.clientHeight),[Tr.UPDATE_CANVAS_SIZE,Tr.UPDATE_SHARING_DECODE_PARAM].forEach(o=>{var s,a;(a=Rs((s=t==null?void 0:t.getSessionId)===null||s===void 0?void 0:s.call(t)))===null||a===void 0||a.Notify_MeidaSDK(o,{width:t.clientWidth*Ts(e),height:t.clientHeight*Ts(e),canvas:e})}),e.style.width=t.clientWidth+"px",e.style.height=t.clientHeight+"px";try{e.width=t.clientWidth*Ts(e),e.height=t.clientHeight*Ts(e)}catch{}wr.dispatch("resize",void 0,e.id)}},300),n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),i=new ResizeObserver(r);return n.addEventListener("change",r),i.observe(t),()=>{(function(o){Km.delete(o)})(e),i==null||i.disconnect(),n.removeEventListener("change",r)}}function iV(e,t){Object.defineProperties(e,t.reduce((r,n)=>(r[n]={get:()=>e.getAttribute(n),set:i=>{i?e.setAttribute(n,i):e.removeAttribute(n)}},r),{}))}function oV(e,t){Object.entries(t).forEach(([r,n])=>{e.getAttribute(r)||e.setAttribute(r,n)})}function v2(e,t){const r=e.getAttribute(t);return!(!r||r!=="true")}function Rs(e=Xc){var t;return(t=wr.get("mediaSDKInstanceMap").get(e))===null||t===void 0?void 0:t()}function Kw(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let e=new Date().getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{let n=16*Math.random();return e>0?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(t+n)%16|0,t=Math.floor(t/16)),(r==="x"?n:3&n|8).toString(16)})}function w0(e,t){let r;return function(...n){clearTimeout(r),r=setTimeout(()=>{e(...n)},t)}}function sV(e,t){const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const i of r){const o=e[i],s=t[i];if(typeof o=="object"&&typeof s=="object"){if(!sV(o,s))return!1}else if(o!==s)return!1}return!0}function Yo(e){return!e||e==="0"}(function(e){e.Video="video",e.Share="share"})(Gm||(Gm={})),function(e){e.DEFAULT="",e.MAIN="main"}(h2||(h2={})),function(e){e.Video_90P="0",e.Video_180P="1",e.Video_360P="2",e.Video_720P="3",e.Video_1080P="4"}(f2||(f2={})),function(e){e[e.Unknown=0]="Unknown",e[e.VideoTag=1]="VideoTag",e[e.WebGL=2]="WebGL",e[e.WebGL2=3]="WebGL2",e[e.WebGPU=4]="WebGPU"}(To||(To={}));const Km=new Map;function aV(e,t,r){const n=t>=2*window.screen.width||r>=2*window.screen.height?1:window.devicePixelRatio,i=Km.get(e);return Km.set(e,n),i&&i!==n&&wr.dispatch("scale",void 0,e.id),n}function Ts(e){return Km.get(e)||window.devicePixelRatio}function Ua(e,t){t&&(e==null||e.Notify_MeidaSDK(Tr.SEND_RENDER_LOG,{message:t}))}function y2(e,t){const r=wr.get("renderCountMap"),n=r.get(e)||0;r.set(e,t?n+1:n-1)}function ty(e,t){const{left:r,top:n,bottom:i,right:o,width:s,height:a}=e.getBoundingClientRect(),l=t.getBoundingClientRect();return{left:r-l.left,top:n-l.top,bottom:l.bottom-i,right:l.right-o,width:s,height:a}}const lV=[];for(let e=0;e<=1;e+=.01)lV.push(e);class qw{constructor(t,r){if(this.getRenderParams=r,this.el=document.createElement("div"),this.position=null,this.id="",this.srcObject=null,this.removePositionObserve=null,this.viewId=`${wr.get("tagName")}-${Kw()}`,this.getSDK=()=>{var n,i;return Rs((i=(n=this.container)===null||n===void 0?void 0:n.getSessionId)===null||i===void 0?void 0:i.call(n))},!t)throw new Error(`The ${wr.get("tagName")} must have a ${wr.get("tagName")}-container as its ancestor element.`);this.container=t,this.el.style.width="100%",this.el.style.height="100%",this.debounceUpdateVideoPosition=w0(this.updateVideoPosition.bind(this),300)}getElement(){return this.el}init(){this.removeSubscribe=wr.subscribe((t,r,n)=>{n===this.getCanvas().id&&(t==="resize"?(this.updateVideoPosition(),setTimeout(()=>{this.updateVideoPosition()},300)):t==="scale"&&Ua(this.getSDK(),`VPSC:${Ts(this.getCanvas())}`))})}getCanvas(){return this.container.getCanvas()}initObservePosition(){this.stopObservePosition(),this.removePositionObserve=function(t,r,n={}){const{wrapper:i=document.documentElement}=n,o=w0(r,300);let s,a;const l=(u=1,d=!1)=>{s&&(s.disconnect(),s=null);const{top:c,left:p,width:h,height:m,right:f,bottom:v}=ty(t,i);if(!h||!m)return void r({hide:!0,cross:!1,width:0,height:0,top:0,left:0,bottom:0,right:0});const g=((w,O,D,U)=>w<0||O<0||D<0||U<0)(c,v,p,f),y=((w,O,D,U,x,P)=>w<=0&&w+P<=0||O<=0&&O+P<=0||D<=0&&D+x<=0||U<=0&&U+x<=0)(c,v,p,f,h,m),S={root:i,threshold:g?lV:u};g||(S.rootMargin=`${-c}px ${-f}px ${-v}px ${-p}px`);let b=!0,R=!0;d&&(R=!1),r({hide:y,cross:g,top:c,left:p,width:h,height:m,bottom:v,right:f}),o({hide:y,cross:g,top:c,left:p,width:h,height:m,bottom:v,right:f},!0),s=new IntersectionObserver(([w])=>{if(w.intersectionRatio===0)return R?l(1,!0):void 0;if(u!==w.intersectionRatio){if(!b)return l();l(w.intersectionRatio===0?1e-7:w.intersectionRatio)}w.intersectionRatio===1&&g&&l(),b=!1},S),s.observe(t)};return l(),a=new ResizeObserver(()=>l()),a.observe(t),()=>{s==null||s.disconnect(),s=null,a==null||a.disconnect(),a=null}}(this.el,(t,r)=>{r?setTimeout(()=>{this.updateVideoPosition()},300):this.debounceUpdateVideoPosition(t)},{wrapper:this.container})}stopObservePosition(){this.removePositionObserve&&(this.removePositionObserve(),this.removePositionObserve=null)}getCurrentPosition(t){return this.transformRectToPosition(ty(t,this.container))}transformRectToPosition(t){const{left:r,width:n,height:i,bottom:o,top:s}=t,a=Ts(this.getCanvas());return{x:r*a,y:o*a,width:n*a,height:i*a,left:r*a,bottom:o*a,top:s*a}}playVideo(t){this.initObservePosition(),typeof t=="string"?this.id=t:this.srcObject=t;const r=this.getCurrentPosition(this.el);this.addRender(Object.assign(Object.assign(Object.assign(Object.assign({},r),{canvas:this.getCanvas(),zone:this.viewId,userId:Number(this.id),ssrc:Number(this.id)}),this.getRenderParams()),this.srcObject?{srcObject:this.srcObject}:{})),this.position=r}updateVideoPosition(t){if(!this.id&&!this.srcObject)return;const r=this.transformRectToPosition(t||ty(this.el,this.container));this.position&&sV(r,this.position)||(this.zoomRender(Object.assign(Object.assign(Object.assign(Object.assign({},r),{userId:Number(this.id),canvas:this.getCanvas(),RGBA:this.container.getRGBA(),zone:this.viewId}),this.getRenderParams()),this.srcObject?{srcObject:this.srcObject}:{})),this.position=r)}stopVideo(){this.stopObservePosition(),(this.id||this.srcObject)&&this.position&&((this.id||this.srcObject)&&this.stopRender(Object.assign(Object.assign(Object.assign(Object.assign({},this.position),{userId:Number(this.id),canvas:this.getCanvas(),RGBA:this.container.getRGBA(),zone:this.viewId}),this.getRenderParams()),this.srcObject?{srcObject:this.srcObject}:{})),this.position=null,this.id="",this.srcObject=null)}updateVideoQuality(t){var r;this.id&&((r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Tr.UPDATE_VIDEO_QUALITY,{userId:this.id,videoQuality:t}))}refresh(){this.debounceUpdateVideoPosition()}destroy(){var t;this.stopVideo(),(t=this.removeSubscribe)===null||t===void 0||t.call(this)}}class Qw{constructor(t){this.container=t,this.id="",this.srcObject=null,this.getSDK=()=>{var r,n;return Rs((n=(r=this.container)===null||r===void 0?void 0:r.getSessionId)===null||n===void 0?void 0:n.call(r))},this.el=document.createElement("video"),this.el.style.width="100%",this.el.style.height="100%",this.el.setAttribute("autoplay","true"),this.el.setAttribute("muted","true"),this.el.setAttribute("playsinline","true")}getElement(){return this.el}init(){}playVideo(t){typeof t=="string"?this.id=t:this.srcObject=t,this.addRender(Object.assign({userId:Number(this.id),videodom:this.el},this.srcObject?{srcObject:this.srcObject}:{}))}stopVideo(){(this.id||this.srcObject)&&(this.stopRender(Object.assign({userId:Number(this.id),videodom:this.el},this.srcObject?{srcObject:this.srcObject}:{})),this.id="",this.srcObject=null)}updateVideoQuality(t){}destroy(){this.stopVideo()}}class RH extends qw{addRender({width:t,height:r,x:n,y:i,canvas:o,zone:s,userId:a,left:l,bottom:u,top:d,fillMode:c,videoQuality:p}){var h;this.getSDK()&&(y2(this.container,!0),function(m){var f,v;const g=wr.get("renderCountMap").get(m)||0,y=((v=(f=JsMediaSDK_Instance==null?void 0:JsMediaSDK_Instance.util)===null||f===void 0?void 0:f.getMaxCountRender)===null||v===void 0?void 0:v.call(f))||25,S=g>=0&&g<=y,b=wr.get("tagName");S||console.error(`In your environment, the maximum number of ${b} that can be accommodated in each ${b}-container is ${y}. The current number has exceeded this limit, which may cause video rendering issues.`)}(this.container)),(h=this.getSDK())===null||h===void 0||h.Notify_MeidaSDK(Tr.ADD_RENDER_VIDEO,{width:t,height:r,x:n,y:i,canvas:o,zone:s,userId:a,left:l,bottom:u,top:d,fillMode:c,videoQuality:p})}zoomRender({width:t,height:r,x:n,y:i,userId:o,canvas:s,RGBA:a,zone:l,left:u,bottom:d,top:c}){var p;(p=this.getSDK())===null||p===void 0||p.Notify_MeidaSDK(Tr.ZOOM_RENDER,{width:t,height:r,x:n,y:i,userId:o,canvas:s,RGBA:a,zone:l,left:u,bottom:d,top:c})}stopRender({width:t,height:r,x:n,y:i,userId:o,canvas:s,doNotClean:a,RGBA:l,zone:u,left:d,bottom:c,top:p,videoQuality:h}){var m;this.getSDK()&&y2(this.container,!1),(m=this.getSDK())===null||m===void 0||m.Notify_MeidaSDK(Tr.STOP_RENDER_VIDEO,{width:t,height:r,x:n,y:i,userId:o,canvas:s,doNotClean:a,RGBA:l,zone:u,left:d,bottom:c,top:p,videoQuality:h})}}class TH extends Qw{addRender({userId:t,videodom:r}){var n;(n=this.getSDK())===null||n===void 0||n.Notify_MeidaSDK(Tr.ADD_RENDER_VIDEO,{userId:t,videodom:r})}stopRender({userId:t,videodom:r}){var n;(n=this.getSDK())===null||n===void 0||n.Notify_MeidaSDK(Tr.STOP_RENDER_VIDEO,{userId:t,videodom:r})}}class OH extends qw{addRender({width:t,height:r,userId:n,canvas:i,isFromMainSession:o}){var s;(s=this.getSDK())===null||s===void 0||s.Notify_MeidaSDK(Tr.START_SHARING,{width:t,height:r,canvas:i,ssrc:n,isFromMainSession:o})}zoomRender(){}stopRender({canvas:t}){var r;(r=this.getSDK())===null||r===void 0||r.Notify_MeidaSDK(Tr.STOP_SHARING,{canvas:t})}}class S2 extends Qw{addRender({userId:t,videodom:r}){var n,i;(n=this.getSDK())===null||n===void 0||n.Notify_MeidaSDK(Tr.SWITCH_CANVAS_FOR_VIDEO_CAPTURE,[r]),(i=this.getSDK())===null||i===void 0||i.Notify_MeidaSDK(Tr.ADD_RENDER_VIDEO,{userId:t,videodom:r})}stopRender({userId:t,videodom:r}){var n;(n=this.getSDK())===null||n===void 0||n.Notify_MeidaSDK(Tr.STOP_RENDER_VIDEO,{userId:t,videodom:r})}}var zo,uV,A0,dV;const ru=class ru{constructor(){$g(this,zo)}preview(t,r,n){const i=r.getContext("webgl"),o=po(this,zo,uV).call(this,i,ru.VERTEX_SHADER,ru.FRAGMENT_SHADER),s=i.getAttribLocation(o,"position"),a=i.getUniformLocation(o,"videoTexture");i.useProgram(o);const l=po(this,zo,dV).call(this,i);i.bindBuffer(i.ARRAY_BUFFER,l),i.enableVertexAttribArray(s),i.vertexAttribPointer(s,2,i.FLOAT,!1,0,0),this.frame({glContext:i,program:o,positionAttributeLocation:s,textureLocation:a,positionBuffer:l,viewport:n,source:t})}frame(t){const r=t.glContext;t.glContext.clearColor(0,0,0,1),t.glContext.clear(t.glContext.COLOR_BUFFER_BIT),t.glContext.viewport(t.viewport.x,t.viewport.y,t.viewport.w,t.viewport.h),t.glContext.enable(t.glContext.DEPTH_TEST);const n=t.glContext.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n),r.uniform1i(t.textureLocation,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t.source),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),t.glContext.drawArrays(t.glContext.TRIANGLE_STRIP,0,4),requestAnimationFrame(()=>this.frame(t))}};zo=new WeakSet,uV=function(t,r,n){const i=po(this,zo,A0).call(this,t,t.VERTEX_SHADER,r),o=po(this,zo,A0).call(this,t,t.FRAGMENT_SHADER,n);let s=t.createProgram();return t.attachShader(s,i),t.attachShader(s,o),t.linkProgram(s),s},A0=function(t,r,n){const i=t.createShader(r);return t.shaderSource(i,n),t.compileShader(i),i},dV=function(t){const r=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),r},Se(ru,"VERTEX_SHADER",`
    attribute vec2 position;
    varying vec2 texCoord;

    void main() {
      texCoord = (position + 1.0) * 0.5;
      // gl_Position = vec4(position, 0.0, 1.0);
      gl_Position = vec4(position.x, -position.y, 0.0, 1.0);
    }
  `),Se(ru,"FRAGMENT_SHADER",`
    precision mediump float;
    varying vec2 texCoord;
    uniform sampler2D videoTexture;

    void main() {
      gl_FragColor = texture2D(videoTexture, texCoord);
    }
  `);let I0=ru;var Wo,cV,_0,pV;const nu=class nu{constructor(){$g(this,Wo)}preview(t,r,n){const i=r.getContext("webgl2"),o=po(this,Wo,cV).call(this,i,nu.VERTEX_SHADER,nu.FRAGMENT_SHADER),s=i.getAttribLocation(o,"position"),a=i.getUniformLocation(o,"videoTexture");i.useProgram(o);const l=po(this,Wo,pV).call(this,i);i.bindBuffer(i.ARRAY_BUFFER,l),i.enableVertexAttribArray(s),i.vertexAttribPointer(s,2,i.FLOAT,!1,0,0),this.frame({glContext:i,program:o,positionAttributeLocation:s,textureLocation:a,positionBuffer:l,viewport:n,source:t})}frame(t){const r=t.glContext;t.glContext.clearColor(0,0,0,1),t.glContext.clear(t.glContext.COLOR_BUFFER_BIT),t.glContext.viewport(t.viewport.x,t.viewport.y,t.viewport.w,t.viewport.h),t.glContext.enable(t.glContext.DEPTH_TEST);const n=t.glContext.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n),r.uniform1i(t.textureLocation,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t.source),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),t.glContext.drawArrays(t.glContext.TRIANGLE_STRIP,0,4),requestAnimationFrame(()=>this.frame(t))}};Wo=new WeakSet,cV=function(t,r,n){const i=po(this,Wo,_0).call(this,t,t.VERTEX_SHADER,r),o=po(this,Wo,_0).call(this,t,t.FRAGMENT_SHADER,n);let s=t.createProgram();return t.attachShader(s,i),t.attachShader(s,o),t.linkProgram(s),s},_0=function(t,r,n){const i=t.createShader(r);return t.shaderSource(i,n),t.compileShader(i),i},pV=function(t){const r=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),r},Se(nu,"VERTEX_SHADER",`#version 300 es
    in vec2 position;
    out vec2 texCoord;

    void main() {
      texCoord = (position + 1.0) * 0.5;
      gl_Position = vec4(position.x, -position.y, 0.0, 1.0);
    }
  `),Se(nu,"FRAGMENT_SHADER",`#version 300 es
    precision mediump float;
    in vec2 texCoord;
    uniform sampler2D videoTexture;
    out vec4 fragColor;

    void main() {
      fragColor = texture(videoTexture, texCoord);
    }
  `);let C0=nu;const iu=class iu{constructor(){}async preview(t,r,n){if(!t||!r||!n)throw new Error("Invalid arguments: source, target, or viewport is missing");const i=await navigator.gpu.requestAdapter(),o=await i.requestDevice(),s=navigator.gpu.getPreferredCanvasFormat(),a=r.getContext("webgpu");a.configure({device:o,format:s,alphaMode:"opaque"});const l=o.createSampler({}),u=o.createRenderPipeline({layout:"auto",vertex:{module:o.createShaderModule({code:iu.VERTEX_SHADER}),entryPoint:"vert_main"},fragment:{module:o.createShaderModule({code:iu.FRAG_SHADER_VF}),entryPoint:"frag_main",targets:[{format:s}]},primitive:{topology:"triangle-list"}}),d={device:o,context:a,pipeline:u,sampler:l,source:t,viewport:n};this.frame(d)}frame(t){const r=t.device.createCommandEncoder(),n={colorAttachments:[{view:t.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store"}]},i=r.beginRenderPass(n);i.setPipeline(t.pipeline);const o=t.device.createBindGroup({layout:t.pipeline.getBindGroupLayout(0),entries:[{binding:0,resource:t.sampler},{binding:1,resource:t.device.importExternalTexture({source:t.source})}]});i.setBindGroup(0,o),i.setViewport(t.viewport.x,t.viewport.y,t.viewport.w,t.viewport.h,0,1),i.draw(6),i.end(),t.device.queue.submit([r.finish()]),requestAnimationFrame(()=>this.frame(t))}};Se(iu,"VERTEX_SHADER",`
    struct VertexOutput {
      @builtin(position) Position: vec4<f32>,
      @location(0) uv: vec2<f32>,
    }

    @vertex
    fn vert_main(@builtin(vertex_index) VertexIndex: u32) -> VertexOutput {
      var pos = array<vec2<f32>, 6>(
        vec2<f32>( 1.0,  1.0),
        vec2<f32>( 1.0, -1.0),
        vec2<f32>(-1.0, -1.0),
        vec2<f32>( 1.0,  1.0),
        vec2<f32>(-1.0, -1.0),
        vec2<f32>(-1.0,  1.0)
      );

      var uv = array<vec2<f32>, 6>(
        vec2<f32>(1.0, 0.0),
        vec2<f32>(1.0, 1.0),
        vec2<f32>(0.0, 1.0),
        vec2<f32>(1.0, 0.0),
        vec2<f32>(0.0, 1.0),
        vec2<f32>(0.0, 0.0)
      );

      var output : VertexOutput;
      output.Position = vec4<f32>(pos[VertexIndex], 0.0, 1.0);
      output.uv = uv[VertexIndex];
      return output;
    }
  `),Se(iu,"FRAG_SHADER_VF",`
    @group(0) @binding(0) var mySampler: sampler;
    @group(0) @binding(1) var vfTexture: texture_external;

    @fragment
    fn frag_main(@location(0) uv : vec2<f32>) -> @location(0) vec4<f32> {
      var color0: vec4<f32> = textureSampleBaseClampToEdge(vfTexture, mySampler, uv);
      return color0;
    }
  `);let R0=iu;class ja{constructor(){}preview(t,r,n,i){let o=null;t==1?n.srcObject=r:t==2?(o=new I0,o.preview(r,n,i)):t==3?(o=new C0,o.preview(r,n,i)):t==4&&(o=new R0,o.preview(r,n,i))}static getInstance(){return ja.instance||(ja.instance=new ja),ja.instance}}class PH extends qw{constructor(){super(...arguments),this.rendersProxy=ja.getInstance(),this.videoSource=null}createSource(t,r,n){return function(i,o,s,a){return new(s||(s=Promise))(function(l,u){function d(h){try{p(a.next(h))}catch(m){u(m)}}function c(h){try{p(a.throw(h))}catch(m){u(m)}}function p(h){var m;h.done?l(h.value):(m=h.value,m instanceof s?m:new s(function(f){f(m)})).then(d,c)}p((a=a.apply(i,[])).next())})}(this,0,void 0,function*(){const i=document.createElement("video");return i.width=r,i.height=n,i.loop=!0,i.autoplay=!0,i.muted=!0,i.srcObject=t,yield i.play(),i})}addRender(t){t.renderType&&t.srcObject&&!this.videoSource&&(this.videoSource&&(this.videoSource=null),this.createSource(t.srcObject,t.width,t.height).then(r=>{this.videoSource=r,this.rendersProxy.preview(t.renderType,this.videoSource,t.canvas,{x:t.x,y:t.renderType===To.WebGPU?t.top:t.y,w:t.width,h:t.height})}))}zoomRender(t){t.renderType&&this.videoSource&&(this.videoSource.width!==t.width&&(this.videoSource.width=t.width),this.videoSource.height!==t.height&&(this.videoSource.height=t.height))}stopRender(t){t.renderType&&this.videoSource&&(this.videoSource.srcObject=null,this.videoSource=null)}}class kH extends Qw{constructor(){super(...arguments),this.rendersProxy=ja.getInstance()}addRender(t){t.srcObject&&t.videodom&&this.rendersProxy.preview(To.VideoTag,t.srcObject,t.videodom)}stopRender(t){t.videodom.srcObject=null}}const Eo="node-id",dc="media-type",sf="video-quality",hV="share-source",fV="fill-mode",mV="stop-no-clean",T0="refresh-key";class Ku extends HTMLElement{static get observedAttributes(){return[Eo,dc,sf,T0]}constructor(){super(),this.container=null,this._srcObject=null,iV(this,Ku.customAttributes),this.getRenderParams=this.getParsedParams.bind(this),this.callback=(t,r)=>{t===Wm.MOBILE_CAPTURE_DEVICE_CHANGE&&r===this.getAttribute(Eo)&&this.initRender()}}initRender(){var t,r,n,i,o;if(this.render&&this.render.destroy(),(t=this.getContainer())===null||t===void 0?void 0:t.useInsideRender()){const d=(r=this.getContainer())===null||r===void 0?void 0:r.getInsideRenderType();if(d===To.VideoTag)this.render=new kH(this.getContainer());else{if(![To.WebGL,To.WebGL2,To.WebGPU].includes(d))return void console.error("Inside render type error.");this.render=new PH(this.getContainer(),this.getRenderParams)}return this.shadowRoot&&(this.shadowRoot.innerHTML="",this.shadowRoot.appendChild(this.render.getElement())),this.render.init(),void(this.srcObject&&this.render.playVideo(this.srcObject))}const s=this.getAttribute(Eo),a=s&&((n=this.getCurrentMediaSDK())===null||n===void 0?void 0:n.isPreviewVideotag(s));let l=0;this.getAttribute(dc)===Gm.Share?(this.render=new OH(this.getContainer(),this.getRenderParams),l=2):!((i=this.getCurrentMediaSDK())===null||i===void 0)&&i.getWebRTCFlag()?(this.render=new TH(this.getContainer()),l=4):a?(this.render=new S2(this.getContainer()),l=1):(this.render=new RH(this.getContainer(),this.getRenderParams),l=3),this.getCurrentMediaSDK()&&Ua(this.getCurrentMediaSDK(),`VPREN:${l}`),this.innerHTML="",this.appendChild(this.render.getElement()),this.render.init();const u=this.getAttribute(Eo);Yo(u)||(o=this.render)===null||o===void 0||o.playVideo(u)}get srcObject(){return this._srcObject}set srcObject(t){var r,n,i,o;!this._srcObject&&t?(r=this.render)===null||r===void 0||r.playVideo(t):this._srcObject&&t?((n=this.render)===null||n===void 0||n.stopVideo(),(i=this.render)===null||i===void 0||i.playVideo(t)):this._srcObject&&((o=this.render)===null||o===void 0||o.stopVideo()),this._srcObject=t}getContainer(){return this.container||(this.container=this.closest(`${wr.get("tagName")}-container`)),this.container}getCurrentMediaSDK(){var t,r;return Rs((r=(t=this.getContainer())===null||t===void 0?void 0:t.getSessionId)===null||r===void 0?void 0:r.call(t))}getParsedParams(){var t,r;return{fillMode:v2(this,fV),doNotClean:v2(this,mV),isFromMainSession:this.getAttribute(hV)==="main",videoQuality:this.getAttribute(sf),renderType:(r=(t=this.getContainer())===null||t===void 0?void 0:t.getInsideRenderType())!==null&&r!==void 0?r:To.Unknown}}connectedCallback(){var t;this.style.display="block",oV(this,Ku.defaultValues),this.initRender(),(t=this.getCurrentMediaSDK())===null||t===void 0||t.addCallback(this.callback),this.removeSubscribe=wr.subscribe((r,n,i)=>{var o,s,a,l;r==="failover"&&i===(((s=(o=this.getContainer())===null||o===void 0?void 0:o.getSessionId)===null||s===void 0?void 0:s.call(o))||Xc)&&(this.initRender(),Yo(this.getAttribute(Eo))||(a=this.render)===null||a===void 0||a.playVideo(this.getAttribute(Eo)),this.srcObject&&((l=this.render)===null||l===void 0||l.playVideo(this.srcObject)))})}disconnectedCallback(){var t,r,n;(t=this.removeSubscribe)===null||t===void 0||t.call(this),(r=this.render)===null||r===void 0||r.destroy(),this.callback&&((n=this.getCurrentMediaSDK())===null||n===void 0||n.removeCallback(this.callback))}attributeChangedCallback(t,r,n){var i,o,s,a,l;if(this.render)switch(t){case Eo:!((i=this.getCurrentMediaSDK())===null||i===void 0)&&i.getWebRTCFlag()||!!(!((o=this.getCurrentMediaSDK())===null||o===void 0)&&o.isPreviewVideotag(n))!=this.render instanceof S2&&this.initRender(),Yo(r)&&!Yo(n)?this.render.playVideo(n):Yo(r)||Yo(n)?Yo(r)||this.render.stopVideo():(this.render.stopVideo(),this.render.playVideo(n));break;case dc:this.initRender();break;case sf:(s=this.render)===null||s===void 0||s.updateVideoQuality(n);break;case T0:Yo(n)||(l=(a=this.render)===null||a===void 0?void 0:a.refresh)===null||l===void 0||l.call(a)}}}Ku.customAttributes=[Eo,dc,sf,hV,fV,mV,T0],Ku.defaultValues={[Eo]:"",[dc]:Gm.Video};const b2="session-id",rh="z-index",vd="inside-render",E2="label";class qu extends HTMLElement{static get observedAttributes(){return[b2,rh,vd]}constructor(){super(),this.canvasId="video-player-canvas-"+(this.getAttribute(E2)?`${this.getAttribute(E2)}-`:"")+Kw(),this.needInitCanvas=!1,this.callback=null,iV(this,qu.customAttributes);const t=this.attachShadow({mode:"open"}),r=document.createElement("slot");this.appendCanvas=n=>{t.insertBefore(n,r)},t.appendChild(r)}connectedCallback(){this.style.display="block",this.style.position||(this.style.position="relative"),oV(this,qu.defaultValues),this.needInitCanvas&&this.initCanvasEvents(),this.removeSubscribe=wr.subscribe((t,r,n)=>{t==="failover"&&n===(this.getSessionId()||Xc)&&(this.replaceCanvas(),this.initCanvasEvents())})}disconnectedCallback(){var t,r,n,i;(t=this.removeListener)===null||t===void 0||t.call(this),(r=this.removeSubscribe)===null||r===void 0||r.call(this),this.canvas&&((n=Rs(this.getSessionId()))===null||n===void 0||n.Notify_MeidaSDK(Tr.REMOVE_EXPIRED_CANVAS,{canvasId:this.canvasId}),this.canvas.remove(),this.canvas=void 0),this.callback&&((i=Rs(this.getSessionId()))===null||i===void 0||i.removeCallback(this.callback))}attributeChangedCallback(t,r,n){t===rh&&this.canvas&&n&&(this.canvas.style.zIndex=n)}adoptedCallback(){}createCanvas(){this.getCurrentMediaSDK()&&Ua(this.getCurrentMediaSDK(),"VPCC"),this.canvas=m2(this.clientWidth,this.clientHeight,this.getAttribute(rh)||"",this.canvasId,t=>Ua(this.getCurrentMediaSDK(),t)),this.appendCanvas(this.canvas),this.isConnected?this.initCanvasEvents():this.needInitCanvas=!0}initCanvasEvents(){var t;this.removeListener=g2(this.canvas,this),this.callback=(r,n)=>{var i,o;r===Wm.WEBGL_LOST_IN_MULTI_VIEW&&n.replaceCanvas&&n.canvasId===((i=this.canvas)===null||i===void 0?void 0:i.id)&&(this.replaceCanvas(),(o=Rs(this.getSessionId()))===null||o===void 0||o.Notify_MeidaSDK(Tr.WEBGL_LOST_REPLACE_CANVAS,{canvasId:this.canvasId,canvas:this.canvas}))},(t=this.getCurrentMediaSDK())===null||t===void 0||t.addCallback(this.callback)}replaceCanvas(){var t;if(this.getCurrentMediaSDK()&&Ua(this.getCurrentMediaSDK(),"VPRC"),this.canvas){(t=this.removeListener)===null||t===void 0||t.call(this);const r=m2(this.clientWidth,this.clientHeight,this.getAttribute(rh)||"",this.canvasId,n=>Ua(this.getCurrentMediaSDK(),n));this.removeListener=g2(r,this),this.shadowRoot&&this.shadowRoot.replaceChild(r,this.canvas),this.canvas=r}}getCanvas(){return this.canvas||this.createCanvas(),this.canvas}useInsideRender(){return this.getAttribute(vd)!==null&&this.getAttribute(vd)!==void 0&&this.getAttribute(vd)!=="false"&&this.getAttribute(vd)!=="0"}getInsideRenderType(){return Number(this.getAttribute("inside-render-type"))}getSessionId(){return this.getAttribute(b2)||void 0}getCurrentMediaSDK(){return Rs(this.getSessionId())}getRGBA(){return function(t){let r=0,n=0,i=0,o=0;if(t[0]==="r")if(t[3]==="a"){const s=t.slice(5,-1).split(",").map(a=>parseInt(a.trim(),10));r=s[0],n=s[1],i=s[2],o=s[3]}else{const s=t.slice(4,-1).split(",").map(a=>parseInt(a.trim(),10));r=s[0],n=s[1],i=s[2]}else if(t[0]==="#"){let s=t.slice(1);s.length===3&&(s=s.split("").map(l=>l.repeat(2)).join(""));const a=parseInt(s,16);r=a>>16&255,n=a>>8&255,i=255&a}return{R:r/255,G:n/255,B:i/255,A:o}}(getComputedStyle(this).getPropertyValue("background-color"))}}function O0(e){const{audio:{isBackgroundNoiseSuppression:t,originalSound:r,highBitrate:n}}=e,i={currentSelect:sC.Denoise},o={highfidelity:!1,stereo:!1};if(r){Object.assign(i,{currentSelect:sC.OriginalSound});const s={};typeof r=="boolean"?Object.assign(s,o):Object.assign(s,{highfidelity:!!r.hifi,stereo:!!r.stereo}),Object.assign(i,{originalSound:s})}return Object.assign(i,{backgroundNoiseSuppression:t?oC.Zoom:oC.Browser,highBitrate:n}),i}function ep(e,t,r,n){const{meeting:{userId:i},audio:{localShareAudioUserMutedList:o},share:{isReceiveSharingFromMainSession:s}}=n;return o.filter(a=>a.userId!==t).forEach(a=>{e.setSharingAudioVolume(a.userId,!0,a.isFromMainSession)}),e.setSharingAudioVolume(t,r,!!s),t===i?um(r):jM({userId:t,muted:r})}async function Ja(e,t,r){var n,i;const{audio:{audioSsrc:o,activeMicrophone:s,activeSpeaker:a,isAllowToTalk:l,customizeAudioOption:{speakerOnly:u,mute:d,microphoneId:c,speakerId:p},isUsingMediaPlayback:h,mediaPlaybackFile:m,isHIDEnabled:f,microphoneDevicesList:v,isVerifiedAudioPermissionOnIOSMobile:g,speakerDevicesList:y},meeting:{svcUrl:S,conId:b,reportDomain:R,isAudioBridgeEnabled:w,userId:O,supportLocalAB:D,abToken:U}}=t,x=ye(t),P=!!u||Xt(x.userRole)&&!l,I=r??!P;Gt()&&(w||console.warn("Cannot start audio due to the service is not ready."),await dr(Vw(t,!I)).then(_=>{let[C,V]=_;return C&&V?Promise.resolve():Promise.reject()}));let E=s,A=a;if(c!==void 0||p!==void 0){let _=v,C=y;if(v.length===0){const{microphones:V,speakers:M}=await dr(Qc());_=V,C=M}c&&_.findIndex(V=>V.deviceId===c)>-1&&(E=c),p&&C.findIndex(V=>V.deviceId===p)>-1&&(A=p)}if(h&&m!=null&&m.url){const _=Kr.getInstance();await _.setAudioElement(m),E=_.audioElement,m.playback!==void 0&&(e.enablePlayAudioFileLocally(!!m.playback),E.dataset.playback=m.playback?"1":"0")}else Kr.getInstance().stopAudioElement();return P&&!g&&ae.isIOSMobile&&await async function(){await navigator.mediaDevices.getUserMedia({audio:!0})}(),(n=e.joinComputerAudio(o,E,A,I,O0(t),Gt()?{rwgHost:S,cid:b,nginxHost:R,abToken:U,supportLocalAB:D,useWebRTCOnDesktop:!ae.isAndroidOrIOSBrowser}:void 0,f?{microphoneLabel:(i=v.find(_=>_.deviceId===s))===null||i===void 0?void 0:i.label,defaultMuted:!(x==null||!x.muted)}:void 0))===null||n===void 0?void 0:n.then(()=>{d&&(He.createAgent().mute(O,!0),e.muteAudio()),x!=null&&x.muted?e.muteAudio():e.unmuteAudio()})}async function Jw(e,t,r){const n=[],{audio:{isJoinComputerAudioBeforeSharingAudio:i,mutedBeforeSharingAudio:o}}=r,s=ye(r);return i===!0&&(await Ja(e,r),n.push(Bu(void 0)),o===!1&&(n.push(zc(tc.SharingAudio)),t.mute(s.userId,!1)),n.push(Vo(void 0))),n}async function w2(e,t,r){const{audio:{isSharingAudio:n},meeting:{userId:i}}=r,o=[];if(o.push(ep(e,i,!0,r)),n){await e.leaveSharingAudio(!1),o.push(Hu(!1));const s=await Jw(e,t,r);o.push(...s),setTimeout(()=>{T(ju,{state:"off"})},0)}return o.push(Ng(!1)),o}async function P0(e,t,r){const{audio:{audioSsrc:n,activeMicrophone:i,activeSpeaker:o},meeting:{svcUrl:s,conId:a,reportDomain:l,supportLocalAB:u,abToken:d}}=r,c=ye(r),p=[];if(!to()){const h=await async function(m,f){const v=[],g=ye(f),{audio:{isMicrophoneForbidden:y}}=f;return(g==null?void 0:g.audio)===ze.Computer&&(v.push(Bu(!0)),v.push(Vo(g.muted)),g.muted||m.muteAudio(),await m.leaveComputerAudio(),v.push(vp(0)),y&&v.push(Sw(!1))),v}(e,r);p.push(...h)}return await e.leaveSharingAudio(!0),await e.joinSharingAudio({ssrc:n,microphoneDeviceId:i,speakerDeviceId:o,isCaptureAudio:Xt(c.userRole),audioBridge:Gt()?{rwgHost:s,cid:a,nginxHost:l,abToken:d,supportLocalAB:u,useWebRTCOnDesktop:!ae.isAndroidOrIOSBrowser}:void 0}),p.push(Ng(!0)),p.push(Hu(!0)),p.push(ep(e,c.userId,!1,r)),p.findIndex(h=>h.type===`${Bu}`&&h.payload===!0)>-1&&(p.push(Ao(qi.SharingAudio)),t.mute(r.meeting.userId,!0)),setTimeout(()=>{T(ju,{state:"on"})},0),p}qu.customAttributes=[],qu.defaultValues={};const tp=()=>{if(xk())return!0;{var e;let{browser:r}=ae;if(r=(e=r)===null||e===void 0?void 0:e.toLocaleLowerCase(),r.indexOf("safari")>-1&&r.indexOf("ios-safari")===-1){var t;const n=(t=navigator.userAgent.match(/version\/(\d+\.?\d+)/i))===null||t===void 0?void 0:t[1];return xc(n||"","15.2")>=0&&xc(n||"","17.1")<0}return!1}};function I2(e,t,r){for(let n=0;n<r.length&&t.length!==0;n++){const{userId:i,displayName:o}=r[n];if(t.includes(i)){const s=e.find(a=>a.userId===i);s&&(s.displayName=o,t.splice(t.indexOf(i),1))}}}function to(){return Oe.isSupportOpenMicWhenShareAudio()}function A2(e){return Oe.isSupportAudioDenoise(e)}function C2(){return Oe.isSupportStereoAudio()}function _2(){var e;return typeof((e=window.navigator.hid)===null||e===void 0?void 0:e.requestDevice)=="function"}function k0(e,t,r){const{audio:{isAllowToTalk:n,customizeAudioOption:i},media:{audioDecodeStatus:o,audioEncodeStatus:s}}=e;return{encodeInitStatus:Xt(t.userRole)&&!n||r||i!=null&&i.speakerOnly||Gt()?"success":s,decodeInitStatus:Gt()?"success":o}}function qm(e,t,r){Gt()?Vw(t,r).subscribe(n=>{let[i,o]=n;i&&o&&e.joinOrLeaveVoip(!0)}):e.joinOrLeaveVoip(!0)}const ji=He.createAgent(),vn=Lg(Xr(Oe.getInstance())),R2=e=>!e.muted,yd=He.createAgent(),na=Lg(Xr(Oe.getInstance())),ry=He.createAgent(),_l=Lg(Xr(Oe.getInstance())),T2=[rn.Canceled,rn.CancelFailed],nh={asnIds:{asn1:{userId:0,displayName:null},asn2:{userId:0,displayName:null},asn3:{userId:0,displayName:null}},microphoneDevicesList:[],speakerDevicesList:[],activeMicrophone:"default",activeSpeaker:"default",isMicrophoneForbidden:!1,audioSsrc:0,bCanUnmute:!1,bMutedUponEntry:!1,isAllowToTalk:void 0,dialout:[],crcDevice:[],canPlayAudio:!1,mutedSource:void 0,unmutedSource:void 0,isUserGrantCaptureAudio:!1,webrtcRestartCount:0,isComputerAudioLoading:!1,isUsingMediaPlayback:!1,customizeAudioOption:{},localShareAudioUserMutedList:[],locallyMutedAudioList:[],localUserAudioVolumeList:[],isStopAllImcomingAudio:!1,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,bandwidth:0,bitrate:0}}},DH=pn({[`${TM}`]:k((e,t)=>{let{payload:r}=t;e.asnIds={...r}}),[`${OM}`]:k((e,t)=>{let{payload:r}=t;e.bCanUnmute=r}),[`${PM}`]:k((e,t)=>{let{payload:r}=t;const{sequence:n,phoneNumber:i}=r;e.dialout.findIndex(o=>o.sequence===n)===-1&&e.dialout.push({sequence:n,phoneNumber:i,returnCode:-1,uuid:Nm()})}),[`${kM}`]:k((e,t)=>{let{payload:r}=t;const{sequence:n,code:i,nodeId:o}=r,s=e.dialout.find(a=>a.sequence===n);s&&(s.returnCode=i,o&&(s.phoneNodeId=o))}),[`${Lb}`]:k((e,t)=>{let{payload:r}=t;e.isAllowToTalk=r,e.isAllowToTalkAttendeeConnected=!1}),[`${Ao}`]:k((e,t)=>{let{payload:r}=t;e.mutedSource=r}),[`${zc}`]:k((e,t)=>{let{payload:r}=t;e.unmutedSource=r}),[`${DM}`]:k((e,t)=>{let{payload:r}=t;e.audioSsrc=r}),[`${MM}`]:k((e,t)=>{let{payload:r}=t;e.bMutedUponEntry=r}),[`${NM}`]:k((e,t)=>{let{payload:r}=t;e.isUserGrantCaptureAudio=r}),[`${Sw}`]:k((e,t)=>{let{payload:r}=t;e.isMicrophoneForbidden=r}),[`${vp}`]:k((e,t)=>{let{payload:r}=t;e.webrtcRestartCount=r}),[`${LM}`]:k((e,t)=>{let{payload:r}=t;e.microphoneDevicesList=r}),[`${VM}`]:k((e,t)=>{let{payload:r}=t;e.speakerDevicesList=r}),[`${Hc}`]:k((e,t)=>{let{payload:r}=t;e.activeMicrophone=r}),[`${Mg}`]:k((e,t)=>{let{payload:r}=t;e.activeSpeaker=r}),[`${Fu}`]:k((e,t)=>{let{payload:r}=t;e.canPlayAudio=r}),[`${ma}`]:k((e,t)=>{let{payload:r}=t;e.isComputerAudioLoading=r}),[`${bw}`]:k((e,t)=>{let{payload:r}=t;if(r){const{speakerOnly:n,mute:i,backgroundNoiseSuppression:o,originalSound:s,syncButtonsOnHeadset:a,mediaFile:l,microphoneId:u,speakerId:d,highBitrate:c}=r;e.customizeAudioOption.speakerOnly=n,e.customizeAudioOption.mute=i,e.customizeAudioOption.microphoneId=u,e.customizeAudioOption.speakerId=d,e.isBackgroundNoiseSuppression=!!o,e.isHIDEnabled=!!a,e.originalSound=s,e.highBitrate=!!c,hp(e.mediaPlaybackFile,l)||(e.mediaPlaybackFile=l,e.isUsingMediaPlayback=!(l==null||!l.url)),i&&(e.mutedSource=qi.Inherited)}}),[`${Vb}`]:k((e,t)=>{let{payload:r}=t;e.isAllowToTalkAttendeeConnected=r}),[`${Vo}`]:k((e,t)=>{let{payload:r}=t;e.mutedBeforeSharingAudio=r}),[`${Hu}`]:k((e,t)=>{let{payload:r}=t;e.isSharingAudio=r}),[`${um}`]:k((e,t)=>{let{payload:r}=t;e.isShareAudioMuted=r}),[`${UM}`]:k((e,t)=>{let{payload:r}=t;const{userId:n,isFromMainSession:i}=r;e.localShareAudioUserMutedList.findIndex(o=>o.userId===n)===-1&&e.localShareAudioUserMutedList.push({userId:n,isFromMainSession:i,muted:!1})}),[`${jM}`]:k((e,t)=>{let{payload:r}=t;const n=e.localShareAudioUserMutedList.find(i=>i.userId===r.userId);n&&(n.muted=r.muted)}),[`${Bu}`]:k((e,t)=>{let{payload:r}=t;e.isJoinComputerAudioBeforeSharingAudio=r}),[`${Ng}`]:k((e,t)=>{let{payload:r}=t;e.isShareAudioEnabled=r}),[`${dm}`]:k((e,t)=>{let{payload:r}=t;const{data:{encoding:n,rate:i,...o}}=r;e.statistic.encode={bitrate:i,...o}}),[`${cm}`]:k((e,t)=>{let{payload:r}=t;const{data:{encoding:n,rate:i,...o}}=r;e.statistic.decode={bitrate:i,...o}}),[`${$M}`]:k((e,t)=>{let{payload:r}=t;e.locallyMutedAudioList.findIndex(n=>n===r)===-1&&e.locallyMutedAudioList.push(r)}),[`${pm}`]:k((e,t)=>{let{payload:r}=t;const n=e.locallyMutedAudioList.findIndex(i=>i===r);n!==-1&&e.locallyMutedAudioList.splice(n,1)}),[`${FM}`]:k((e,t)=>{let{payload:r}=t;const n=e.localUserAudioVolumeList.find(i=>i.userId===r.userId);n?n.volume=r.volume:e.localUserAudioVolumeList.push(r)}),[`${BM}`]:k((e,t)=>{let{payload:r}=t;const n=e.localUserAudioVolumeList.findIndex(i=>i.userId===r.userId);n!==-1&&e.localUserAudioVolumeList.splice(n,1)}),[`${xb}`]:k((e,t)=>{let{payload:r}=t;e.isBackgroundNoiseSuppression=r}),[`${HM}`]:k((e,t)=>{let{payload:r}=t;e.isHIDEnabled=r}),[`${Ub}`]:k((e,t)=>{let{payload:r}=t;e.mediaPlaybackFile=r,e.isUsingMediaPlayback=!(r==null||!r.url)}),[`${jb}`]:k((e,t)=>{let{payload:r}=t;e.isStopAllImcomingAudio=r}),[`${zM}`]:k((e,t)=>{let{payload:r}=t;e.isVerifiedAudioPermissionOnIOSMobile=r}),[`${Ew}`]:k((e,t)=>{let{payload:r}=t;e.isAudioBridgeSignalReconnecting=r}),[`${$b}`]:k((e,t)=>{let{payload:r}=t;e.originalSound=r}),[`${ul}`]:k((e,t)=>{let{payload:r}=t;e.leaveAudioSource=r}),[`${hm}`]:k((e,t)=>{let{payload:r}=t;e.secondaryAudioMicrophoneId=r}),[`${WM}`]:k((e,t)=>{let{payload:r}=t;const{sequence:n,ip:i,protocol:o}=r;e.crcDevice.findIndex(s=>s.sequence===n)===-1&&e.crcDevice.push({sequence:n,ip:i,protocol:o,transId:0,uuid:Nm()})}),[`${GM}`]:k((e,t)=>{let{payload:r}=t;const{sequence:n,transID:i,result:o}=r,s=e.crcDevice.find(a=>a.sequence===n);s&&Object.assign(s,{transId:i,returnCode:o})}),[`${xM}`]:(e,t)=>{let{dialout:r,crcDevice:n,locallyMutedAudioList:i,localUserAudioVolumeList:o,customizeAudioOption:s,originalSound:a,highBitrate:l,isHIDEnabled:u,isBackgroundNoiseSuppression:d,isStopAllImcomingAudio:c,mediaPlaybackFile:p,isUsingMediaPlayback:h,isVerifiedAudioPermissionOnIOSMobile:m,activeSpeaker:f,activeMicrophone:v}=e,{payload:g}=t;return g?{...nh,dialout:r,crcDevice:n,locallyMutedAudioList:i,localUserAudioVolumeList:o,customizeAudioOption:{...nh.customizeAudioOption,speakerOnly:s.speakerOnly},originalSound:a,highBitrate:l,isHIDEnabled:u,isBackgroundNoiseSuppression:d,isStopAllImcomingAudio:c,mediaPlaybackFile:p,isUsingMediaPlayback:h,isVerifiedAudioPermissionOnIOSMobile:m,activeSpeaker:f,activeMicrophone:v}:{...nh}}},nh),MH={dialEpics0:(e,t)=>se(e,8198).pipe(fe(t),z(r=>{let[n,i]=r;const{audio:{dialout:o}}=i,{payload:{seq:s,body:a}}=n;return o.map(l=>l.sequence).includes(s)||T2.includes(a==null?void 0:a.result)}),G(r=>{let[n,i]=r;const{payload:{seq:o,body:{phoneNodeID:s,result:a}}}=n,l=[kM({code:a,sequence:o,nodeId:s})],{audio:{dialout:u}}=i;let d=u.find(h=>h.sequence===o);!d&&T2.includes(a)&&(d=u.find(h=>[rn.Calling,rn.Ringing,rn.Accepted].includes(h.returnCode)));const c={code:a};if(d&&(Object.assign(c,{phoneNumber:d.phoneNumber,uuid:d.uuid}),s&&Object.assign(c,{userId:s})),T(hD,c),a===rn.Success){if(T(fD),s&&et(i).findIndex(h=>h.userId===s)>-1){var p;const h=(p=i.audio.dialout.find(m=>m.sequence===o))===null||p===void 0?void 0:p.phoneNumber;h&&(l.push(Fc({userId:s,key:"phoneNumber",value:h})),T(lo,[{userId:s,phoneNumber:h}]))}}else[rn.Canceling,rn.Canceled,rn.CancelFailed].includes(a)?a===rn.Canceled?T(gD):a===rn.CancelFailed&&T(vD):[rn.Calling,rn.Ringing,rn.Accepted,rn.Success].indexOf(a)===-1&&T(mD);return X(l)})),dialEpics1:(e,t)=>se(e,4120).pipe(fe(t),z(r=>{let[n,i]=r;return i.audio.crcDevice.map(o=>o.sequence).includes(n.payload.seq)}),G(r=>{let[n,i]=r;const{payload:{seq:o,body:{result:s,transID:a}}}=n,{audio:{crcDevice:l}}=i,u=[],d=l.find(c=>c.sequence===o);return d&&(T(CD,{code:s,ip:d.ip,protocol:d.protocol,uuid:d.uuid}),u.push(GM({sequence:o,transID:a,result:s}))),s===Bh.Success?T(_D):[Bh.Success,Bh.Ringing].includes(s)||T(RD),X(u)}))},NH={epics0:(e,t)=>se(e,12033).pipe(fe(t),ne(r=>{let[n,i]=r;const{participants:{allowTalkAttendeesList:o}}=i,s=n.payload.body;let a={};if(s){const l=et(i),u=Object.keys(s).map(c=>({key:c,userId:s[c]})),d=u.map(c=>c.userId);I2(u,d,l),o.length>0&&d.length>0&&I2(u,d,o),a=u.reduce((c,p)=>({...c,[`${p.key}`]:{userId:p.userId,displayName:p.displayName}}),{}),T(cD,Object.values(a))}return TM(a)})),epics1:(e,t)=>se(e,16135).pipe(fe(t),de(r=>{let[n,i]=r;const{payload:{body:{id:o,bLeadershipOn:s}}}=n,{audio:{bCanUnmute:a}}=i,l=ye(i);if(l){const{isHost:u,bCoHost:d,userId:c,audio:p,muted:h}=l,m=u||d;s&&sn(c,o)&&(p!==null&&p!==""&&h!==!0||!m&&!a||T(zh,Iv.Spotlight))}}),_e(re)),epics2:(e,t)=>se(e,12037).pipe(fe(t),de(r=>{let[,n]=r;const i=ye(n);(i==null?void 0:i.audio)!==null&&(i==null?void 0:i.audio)!==""&&(i==null?void 0:i.muted)==1&&T(zh,Iv.Unmute)}),_e(re)),epics3:(e,t)=>se(e,zn).pipe(z(r=>r.payload.body&&["bCanUnmute","bMutedAll","bMutedUponEntry"].some(n=>r.payload.body[n]!==void 0)),G(r=>{const{payload:{body:{bCanUnmute:n,bMutedAll:i,bMutedUponEntry:o}}}=r,s=[];if(n!==void 0&&s.push(OM(r.payload.body.bCanUnmute)),i!==void 0){const a=ye(t.value);(a==null?void 0:a.audio)!==ze.Computer&&(a==null?void 0:a.audio)!==ze.Phone||a.muted!=0||r.payload.body.bMutedAll&&s.push(Ao(qi.PassiveByMuteAll))}return o!==void 0&&s.push(MM(r.payload.body.bMutedUponEntry)),X(s)})),epics4:(e,t)=>se(e,ot).pipe(fe(t),z(r=>{let[,n]=r;return n.socket.zoomSocketStatus===Je.Connected}),G(r=>{let[n,i]=r;const{payload:{body:{update:o}}}=n;if(o!=null&&o.some(s=>s.audio!==void 0||s.muted!==void 0)){const{meeting:{userId:s}}=i,a=o.filter(u=>u.id!==s),l=o.filter(u=>u.id===s);if(a&&a.forEach(u=>{T(pD,u)}),l.length>0)return dl(t).pipe(G(u=>{const{audio:{mutedSource:d,unmutedSource:c,isAllowToTalk:p,isShareAudioEnabled:h,isSharingAudio:m,isAudioBridgeSignalReconnecting:f,leaveAudioSource:v,customizeAudioOption:{speakerOnly:g}}}=t.value,y=u;return X(l).pipe(xo(async S=>{const b=[];if(S.audio!==y.audio)if(S.audio==="")T(Dg,{source:v}),b.push(ul(void 0));else if(S.audio===ze.Computer){const R=Xt(y.userRole)&&!p||!!g;m&&T(Yl),R&&(T(Yl),ae.isIOSMobile&&b.push(zM(!0))),f&&(T(Yl),b.push(Ew(!1)))}else S.audio===ze.Phone&&(y.audio===ze.Computer&&(await vn.leaveComputerAudio(),b.push(ul($c.Pstn)),ji.joinOrLeaveVoip(!1)),T(mb));if(y.audio!==""&&S.muted!==y.muted){if(S.muted!==y.muted){if(S.muted===!0){if(d!==qi.Inherited){const R=d??qi.PassiveByMuteOne;T(cw,{source:R})}y.audio!==ze.Computer||h&&!to()||vn.muteAudio()}else if(S.muted===!1){if(c!==tc.Inherited){const R=c??tc.Passive;T(pw,{source:R})}y.audio===ze.Computer&&vn.unmuteAudio()}}S.muted!==void 0&&b.push(Ao(void 0),zc(void 0))}return b}))}))}return re})),epics5:(e,t)=>se(e,12036).pipe(fe(t),G(r=>{let[n,i]=r;const o=ye(i),{media:{audioEncodeStatus:s}}=i,{promoterID:a,bAllowTalk:l}=n.payload.body;if((o==null?void 0:o.userId)===a){if(T(wD,l),l)return s!=="success"&&vn.enableAudioEncode(),Lr("audio",s,"success").pipe(G(u=>(u&&T(zh,Iv.AllowToTalk),re)),Bn(Lb(!0)));if(ji.mute(a,!0),(o==null?void 0:o.audio)===ze.Computer)return vn.leaveComputerAudio(),Nt(300).pipe(de(async()=>{(tp()?dr(jr(Ot(document,"click").pipe(xe(1)),Ot(document,"touchend").pipe(xe(1)))):Promise.resolve(!0)).then(()=>{Ja(vn,i,!1)})}),_e(re),Bn(Lb(!1),Ao(qi.Inherited)))}return re})),epics6:e=>se(e,8205).pipe(de(t=>{T("AUDIO_ALLOW_TO_TALK_RESPONSE",t.payload.body)}),_e(re)),epics7:(e,t)=>pu(e,24597).pipe(fe(t),de(r=>{let[n,i]=r;const o=ye(i);(o==null?void 0:o.audio)===ze.Phone?ji.audioDrop(o.userId):(o==null?void 0:o.audio)===ze.Computer&&n.payload.body.bPromote}),_e(re)),epics8:(e,t)=>se(e,12035).pipe(fe(t),Be(r=>{let[n,i]=r;const{meeting:{currentUserAudioBeforeReset:o,isCurrentUserMutedBeforeReset:s,userId:a}}=i,{payload:{body:{ssrc:l}}}=n,u=dl(t).pipe(G(d=>{if(!(o!==ze.Computer||d!=null&&d.audio)){const{encodeInitStatus:c,decodeInitStatus:p}=k0(t.value,d);return Lr("audio",c,p).pipe(z(h=>{let[m,f]=h;return m&&f}),de(()=>{(tp()?dr(jr(Ot(document,"click").pipe(xe(1)),Ot(document,"touchend").pipe(xe(1)))):Promise.resolve(!0)).then(()=>{qm(ji,t.value),Ja(vn,t.value)});const{audio:{locallyMutedAudioList:h,localUserAudioVolumeList:m,isStopAllImcomingAudio:f}}=t.value;h.length>0&&h.forEach(v=>{vn.muteOrUnmuteOtherAudio(v,!0)}),m.length>0&&m.forEach(v=>{vn.adjustOtherAudioVolume(v.userId,v.volume)}),f&&vn.stopAllIncomingAudio(!0)}),_n(ZS(void 0)))}return o===ze.Phone&&s?(ji.mute(a,!0),X([ZS(void 0),YS(void 0)])):re}));return T(ID,l),Wt(qe(DM(l)),u)})),epics9:(e,t)=>se(e,7952).pipe(Be(r=>Ge(mb,1).pipe(fe(t),de(n=>{let[,i]=n;const{BindStatus:o,nOperatorUserId:s}=r.payload.body,a=i.participants.attendeesList.find(l=>l.userId===s);o===!0&&T(yD,{operatorName:a==null?void 0:a.displayName,operatorUserId:s,operatorRole:a==null?void 0:a.userRole})}),_e(re)))),epics10:(e,t)=>Re(e,Z.UserGrantCaptureAudio).pipe(fe(t),G(r=>{let[n,i]=r;const o=ye(i);var s;(s=o,(s==null?void 0:s.audio)===ze.Computer?Promise.resolve():Ce({event:vr,operations:[z(f=>f.audio!==void 0&&f.audio!==""),xe(1)]},f=>{let{audio:v}=f;return v===ze.Phone||v===ze.Computer})).then(()=>{T(Yl)});const{meeting:{isCurrentUserMutedBeforeReset:a},audio:{bMutedUponEntry:l,isUserGrantCaptureAudio:u,isAllowToTalk:d,activeMicrophone:c,isUsingMediaPlayback:p}}=i,{payload:{data:h}}=n,m=[NM(!0)];if(o){o.muted===!0&&d===!1&&(m.push(Ao(qi.Inherited)),ji.mute(o.userId,!0));const f=u||o.isHost||d;(a===!0||!f&&l)&&(m.push(Ao(qi.Inherited)),ji.mute(o.userId,!0),a&&m.push(YS(void 0))),!p&&h&&c!==h&&m.push(Hc(h))}return X(m)})),epics11:e=>Re(e,Z.UserForbiddedCaptureAudio).pipe(de(()=>{T(SD)}),_n(Sw(!0))),epics12:e=>Re(e,Z.AudioWebsocketBroken).pipe(de(()=>{T(bD)}),_e(re)),epics13:(e,t)=>Re(e,Z.AudioZeroData).pipe(fe(t),Xu(r=>{let[,n]=r;const{audio:{webrtcRestartCount:i,activeMicrophone:o}}=n;if(i<3)return vn.restoreWebRTC(o),vp(i+1)})),epics14:(e,t)=>e.pipe(he(`${Fu}`),z(r=>r.payload===!1),G(()=>(T(ED),jr(Ot(document,"click").pipe(xe(1)),Ot(document,"touchend").pipe(xe(1))).pipe(de(()=>{qm(ji,t.value),Ja(vn,t.value)}),_n(Fu(!0)))))),epics15:e=>Re(e,[Z.JoinComputerAudioComplete,Z.JoinSharingAudioComplete,Z.LeaveComputerAudioComplete,Z.LeaveSharingAudioComplete]).pipe(de(()=>{wL.completeAudioAction()}),_e(re)),epics16:(e,t)=>Re(e,Z.AudioQosData).pipe(fe(t),ne(r=>{var n;let[i,o]=r;const{meeting:{isWebinar:s},media:{audioEncodeStatus:a,audioDecodeStatus:l},participants:{xmppAttendeeList:u,allowTalkAttendeesList:d}}=o,c=ye(o),p=yw(o);let h=p.length>0,m=p.some(R2);const f=Gt();s&&(h=h||!!u.length,m=m||d.some(R2));const v=((c==null?void 0:c.audio)===ze.Computer||(c==null?void 0:c.audio)===ze.Phone)&&(a==="success"||f)&&!(c!=null&&c.muted)&&h,g=((c==null?void 0:c.audio)===ze.Computer||(c==null?void 0:c.audio)===ze.Phone)&&(l==="success"||f)&&h&&m;return(n=i.payload.data)!==null&&n!==void 0&&n.encoding?v?(T(gb,i.payload),dm(i.payload)):dm(Xf):g?(T(gb,i.payload),cm(i.payload)):cm(Xf)})),epics17:(e,t)=>se(e,ot).pipe(fe(t),z(r=>{let[n,i]=r;const{payload:{body:o}}=n,{audio:{locallyMutedAudioList:s,localUserAudioVolumeList:a}}=i;return(s.length>0||a.length>0)&&(o==null?void 0:o.remove)&&o.remove.length>0}),G(r=>{let[n,i]=r;const{payload:{body:{remove:o}}}=n,{audio:{locallyMutedAudioList:s,localUserAudioVolumeList:a}}=i,l=s.concat(a.map(u=>u.userId)).filter(u=>o.indexOf(d=>d.id===u)!==-1);return l.length>0?(l.forEach(u=>{vn.muteOrUnmuteOtherAudio(u,!1)}),X(l.map(u=>[pm(u),BM({userId:u})]).flat())):re})),epics18:(e,t)=>Re(e,Z.HidStatusMute).pipe(G(r=>{const{payload:{data:n}}=r,i=t.value,{meeting:{userId:o},audio:{isShareAudioEnabled:s,bCanUnmute:a}}=i,l=[];if(n)s&&!to()&&l.push(Vo(!0)),l.push(Ao(qi.Active)),ji.mute(o,!0);else if(!s||to()){s&&l.push(Vo(!1));const u=ye(i);(a||u!=null&&u.isHost||u!=null&&u.bCoHost)&&(l.push(zc(tc.Active)),ji.mute(o,!1))}return X(l)})),epics19:e=>se(e,12040).pipe(de(t=>{const{payload:{body:{mode:r}}}=t;vn.setAudioCodecMode(r)}),_e(re)),epics20:(e,t)=>Re(e,[Z.AudioSpeakerSetSuccess,Z.JoinComputerAudioComplete,Z.AudioSpeakerSetError]).pipe(G(r=>{const{payload:{data:n,type:i}}=r,{audio:{activeSpeaker:o,activeMicrophone:s,isUsingMediaPlayback:a}}=t.value,l=[];return i===Z.AudioSpeakerSetSuccess&&o!==n?l.push(Mg(n)):a||i!==Z.JoinComputerAudioComplete||n===null||s===n||l.push(Hc(n)),i===Z.AudioSpeakerSetSuccess?T(vb,!0):i===Z.AudioSpeakerSetError&&T(vb,!1),X(l)})),epics21:(e,t)=>Re(e,Z.AudioLevelIndicator).pipe(z(()=>{const r=ye(t.value);return!!r&&r.audio===ze.Computer&&!r.muted}),de(r=>{const{payload:{data:n}}=r;T(TD,{level:n.value})}),G(()=>re))},LH=hn(NH,{shareAudioEpics0:(e,t)=>Mi(e,ot).pipe(z(r=>{const n=r.payload.body.update;return n&&n.length>0&&n.findIndex(i=>i.bShareOn!==void 0)>-1}),fe(t),G(r=>{let[n,i]=r;const{payload:{body:{update:o}}}=n,{audio:{localShareAudioUserMutedList:s}}=i,a=o.filter(u=>u.bShareOn===!0&&u.bShareAudioOn===!0),l=[];return a.length>0&&a.forEach(u=>{s.findIndex(d=>d.userId===u.id)===-1&&l.push(UM({userId:u.id,isFromMainSession:!!u.bShareToBORooms}))}),X(l)})),shareAudioEpics1:(e,t)=>Re(e,Z.SharingDesktopStreamHaveAudio).pipe(z(()=>!t.value.audio.secondaryAudioMicrophoneId),Be(()=>se(e,ot).pipe(z(r=>{var n;const{payload:{body:i}}=r,{meeting:{userId:o}}=t.value;return(i==null||(n=i.update)===null||n===void 0?void 0:n.findIndex(s=>s.id===o&&s.bShareOn===!0))>-1}),xe(1),xo(async()=>{const r=t.value;return await P0(na,yd,r)}),Bn(Ng(!0))))),shareAudioEpics2:(e,t)=>Re(e,Z.SharingDesktopStreamHaveNoAudio).pipe(fe(t),z(r=>{var n;let[,i]=r;return((n=i.audio)===null||n===void 0?void 0:n.isShareAudioEnabled)===!0}),xo(async r=>{let[,n]=r;return await w2(na,yd,n)})),shareAudioEpics3:(e,t)=>se(e,ot).pipe(fe(t),z(r=>{let[,n]=r;return n.socket.zoomSocketStatus===Je.Connected&&n.audio.isSharingAudio===!0}),G(r=>{var n;let[i,o]=r;if((n=i.payload.body.update)!==null&&n!==void 0&&n.some(s=>s.audio!==void 0||s.muted!==void 0)){const{meeting:{userId:s}}=o,a=i.payload.body.update.filter(l=>l.id===s);return dl(t).pipe(G(l=>{const u=[];return a.findIndex(d=>d.audio===ze.Computer)>-1&&(l==null?void 0:l.audio)!==ze.Computer&&!to()&&(u.push(Bu(!0)),u.push(Vo(!0))),X(u)}))}return re})),shareAudioEpics4:(e,t)=>e.pipe(he(`${an}`),_r(Ko),fe(t),z(r=>{var n;let[,i]=r;return((n=i.audio)===null||n===void 0?void 0:n.isShareAudioEnabled)===!0}),xo(async r=>{let[n,i]=r;const{payload:o}=n,{audio:{isShareAudioMuted:s,isSharingAudio:a}}=i,l=[];if(o===Fe.End){const u=await w2(na,yd,i);l.push(...u)}else if(o===Fe.Paused){if(s===!1&&a===!0){await na.leaveSharingAudio(!0),l.push(Hu(!1));const u=await Jw(na,yd,i);l.push(...u),setTimeout(()=>{T(ju,{state:"off"})},0)}}else if(o===Fe.Sharing&&s===!1&&a===!1){const u=await P0(na,yd,i);l.push(...u)}return l})),shareAudioEpics5:(e,t)=>Re(e,Z.SharingDesktopStreamHaveAudio).pipe(z(()=>!!t.value.audio.secondaryAudioMicrophoneId),de(()=>{const{audio:{audioSsrc:r,secondaryAudioMicrophoneId:n},meeting:{svcUrl:i,conId:o,reportDomain:s,supportLocalAB:a,abToken:l}}=t.value;na.joinSharingAudio({ssrc:r,microphoneDeviceId:n,speakerDeviceId:null,isCaptureAudio:!0,audioBridge:Gt()?{rwgHost:i,cid:o,nginxHost:s,abToken:l,supportLocalAB:a,useWebRTCOnDesktop:!ae.isAndroidOrIOSBrowser}:void 0}),T(AD)}),G(()=>re))},{audioBridgEpics0:e=>se(e,4299).pipe(de(t=>{const{payload:r}=t;_l.passThroughRWGMessage(r)}),_e(re)),audioBridgEpics1:e=>Re(e,Z.AudioBridgeReconnectStart).pipe(G(()=>(ry.joinOrLeaveVoip(!1),X([Ew(!0),ul($c.Failover)])))),audioBridgEpics2:(e,t)=>Re(e,Z.AudioBridgeReconnectEnd).pipe(de(()=>{qm(ry,t.value)}),_e(re)),audioBridgEpics3:e=>se(e,ot).pipe(z(t=>{var r,n;return Gt()&&(((r=t.payload.body.update)===null||r===void 0?void 0:r.some(i=>i.muted!==void 0))||((n=t.payload.body.remove)===null||n===void 0?void 0:n.length)>0)}),de(t=>{const{payload:{body:{update:r,remove:n}}}=t;_l.sendUserAudioStatus({update:(r||[]).filter(i=>i.muted!==void 0).map(i=>({userId:i.id,muted:i.muted})),remove:(n||[]).map(i=>({userId:i.id}))})}),_e(re)),audioBridgEpics4:(e,t)=>Re(e,Z.NotifyUIFailover).pipe(z(()=>!t.value.meeting.isMeetingReset&&t.value.meeting.meetingStatus===Lt.Joined),ne(()=>(T(xr,{reason:Ir.Failover}),Vr(lr.NotifyUiFailover)))),audioBridgEpics5:(e,t)=>tw(e,t).pipe(z(()=>{const{meeting:{isAudioBridgeEnabled:r,abToken:n}}=t.value;return r&&Gt()&&!!n}),de(()=>{const{meeting:{abToken:r,svcUrl:n,reportDomain:i,conId:o,supportLocalAB:s}}=t.value;_l.preInitAudioBridge({abToken:r,rwgHost:n,cid:o,nginxHost:i,supportLocalAB:s,useWebRTCOnDesktop:!ae.isAndroidOrIOSBrowser})}),_e(re)),audioBridgEpics6:(e,t)=>se(e,16129).pipe(z(r=>{const{payload:{body:{bVideoOn:n}}}=r,{meeting:{isAudioBridgeEnabled:i}}=t.value;return i&&Gt()&&!!n}),de(r=>{const{payload:{body:{id:n}}}=r;_l.changeActiveVideoSsrc(n)}),_e(re)),audioBridgEpics7:(e,t)=>Re(e,[Z.RecoverWebrtcAudio,Z.AudioStreamFailed]).pipe(G(()=>{const r=ye(t.value),n=[];return(r==null?void 0:r.audio)===ze.Computer&&(_l.leaveComputerAudio(),tp()||ae.isIOSMobile?(ry.joinOrLeaveVoip(!1),n.push(ul($c.EndedBySystem)),n.push(vp(0))):Ja(_l,t.value)),X(n)})),audioBridgEpics8:e=>Re(e,[Z.AudioBridgeFirstRecvData,Z.AudioBridgeCanSendData]).pipe(ne(t=>{const{payload:{type:r}}=t;return r===Z.AudioBridgeFirstRecvData?(T(eM),YP(!0)):(T(tM),XP(!0))})),audioBridgEpics9:(e,t)=>e.pipe(he(`${qn}`),z(()=>!!t.value.meeting.zlkJwtToken),de(()=>{const{meeting:{zlkJwtToken:r}}=t.value;if(r){const{enforce_web_rtc_audio:n,audio_compatible_mode:i}=il(r);n===void 0&&i===void 0||Pe.set(Uc.EnforceWebRTCAudio,Number(n)===1||Number(i)===1,We.Memory)}}),_e(re))},MH);var rp=Array.isArray;function gV(e){if(!Jc(e))return!1;var t=ed(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"}var O2,ny=uo["__core-js_shared__"],P2=(O2=/[^.]+$/.exec(ny&&ny.keys&&ny.keys.IE_PROTO||""))?"Symbol(src)_1."+O2:"",VH=Function.prototype.toString;function ml(e){if(e!=null){try{return VH.call(e)}catch{}try{return e+""}catch{}}return""}var xH=/^\[object .+?Constructor\]$/,UH=Function.prototype,jH=Object.prototype,$H=UH.toString,FH=jH.hasOwnProperty,BH=RegExp("^"+$H.call(FH).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function td(e,t){var r=function(n,i){return n==null?void 0:n[i]}(e,t);return function(n){return!(!Jc(n)||(i=n,P2&&P2 in i))&&(gV(n)?BH:xH).test(ml(n));var i}(r)?r:void 0}var D0=td(uo,"WeakMap"),HH=/^(?:0|[1-9]\d*)$/;function zH(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&(r=="number"||r!="symbol"&&HH.test(e))&&e>-1&&e%1==0&&e<t}function vV(e,t){return e===t||e!=e&&t!=t}function yV(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}function SV(e){return e!=null&&yV(e.length)&&!gV(e)}var WH=Object.prototype;function bV(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||WH)}function k2(e){return Wu(e)&&ed(e)=="[object Arguments]"}var EV=Object.prototype,GH=EV.hasOwnProperty,KH=EV.propertyIsEnumerable,wV=k2(function(){return arguments}())?k2:function(e){return Wu(e)&&GH.call(e,"callee")&&!KH.call(e,"callee")},IV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,D2=IV&&typeof module=="object"&&module&&!module.nodeType&&module,M2=D2&&D2.exports===IV?uo.Buffer:void 0,Qm=(M2?M2.isBuffer:void 0)||function(){return!1},St={};St["[object Float32Array]"]=St["[object Float64Array]"]=St["[object Int8Array]"]=St["[object Int16Array]"]=St["[object Int32Array]"]=St["[object Uint8Array]"]=St["[object Uint8ClampedArray]"]=St["[object Uint16Array]"]=St["[object Uint32Array]"]=!0,St["[object Arguments]"]=St["[object Array]"]=St["[object ArrayBuffer]"]=St["[object Boolean]"]=St["[object DataView]"]=St["[object Date]"]=St["[object Error]"]=St["[object Function]"]=St["[object Map]"]=St["[object Number]"]=St["[object Object]"]=St["[object RegExp]"]=St["[object Set]"]=St["[object String]"]=St["[object WeakMap]"]=!1;var N2,AV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cc=AV&&typeof module=="object"&&module&&!module.nodeType&&module,iy=cc&&cc.exports===AV&&DL.process,L2=function(){try{return cc&&cc.require&&cc.require("util").types||iy&&iy.binding&&iy.binding("util")}catch{}}(),V2=L2&&L2.isTypedArray,Zw=V2?(N2=V2,function(e){return N2(e)}):function(e){return Wu(e)&&yV(e.length)&&!!St[ed(e)]},qH=Object.prototype.hasOwnProperty,QH=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),JH=Object.prototype.hasOwnProperty;function CV(e){if(!bV(e))return QH(e);var t=[];for(var r in Object(e))JH.call(e,r)&&r!="constructor"&&t.push(r);return t}function ZH(e){return SV(e)?function(t){var r=rp(t),n=!r&&wV(t),i=!r&&!n&&Qm(t),o=!r&&!n&&!i&&Zw(t),s=r||n||i||o,a=s?function(d,c){for(var p=-1,h=Array(d);++p<d;)h[p]=c(p);return h}(t.length,String):[],l=a.length;for(var u in t)!qH.call(t,u)||s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||zH(u,l))||a.push(u);return a}(e):CV(e)}var Sd=td(Object,"create"),YH=Object.prototype.hasOwnProperty,XH=Object.prototype.hasOwnProperty;function Ia(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ih(e,t){for(var r=e.length;r--;)if(vV(e[r][0],t))return r;return-1}Ia.prototype.clear=function(){this.__data__=Sd?Sd(null):{},this.size=0},Ia.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ia.prototype.get=function(e){var t=this.__data__;if(Sd){var r=t[e];return r==="__lodash_hash_undefined__"?void 0:r}return YH.call(t,e)?t[e]:void 0},Ia.prototype.has=function(e){var t=this.__data__;return Sd?t[e]!==void 0:XH.call(t,e)},Ia.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Sd&&t===void 0?"__lodash_hash_undefined__":t,this};var ez=Array.prototype.splice;function Oo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Oo.prototype.clear=function(){this.__data__=[],this.size=0},Oo.prototype.delete=function(e){var t=this.__data__,r=ih(t,e);return!(r<0||(r==t.length-1?t.pop():ez.call(t,r,1),--this.size,0))},Oo.prototype.get=function(e){var t=this.__data__,r=ih(t,e);return r<0?void 0:t[r][1]},Oo.prototype.has=function(e){return ih(this.__data__,e)>-1},Oo.prototype.set=function(e,t){var r=this.__data__,n=ih(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var np=td(uo,"Map");function oh(e,t){var r,n,i=e.__data__;return((n=typeof(r=t))=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null)?i[typeof t=="string"?"string":"hash"]:i.map}function ya(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ys(e){var t=this.__data__=new Oo(e);this.size=t.size}ya.prototype.clear=function(){this.size=0,this.__data__={hash:new Ia,map:new(np||Oo),string:new Ia}},ya.prototype.delete=function(e){var t=oh(this,e).delete(e);return this.size-=t?1:0,t},ya.prototype.get=function(e){return oh(this,e).get(e)},ya.prototype.has=function(e){return oh(this,e).has(e)},ya.prototype.set=function(e,t){var r=oh(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ys.prototype.clear=function(){this.__data__=new Oo,this.size=0},ys.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ys.prototype.get=function(e){return this.__data__.get(e)},ys.prototype.has=function(e){return this.__data__.has(e)},ys.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Oo){var n=r.__data__;if(!np||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ya(n)}return r.set(e,t),this.size=r.size,this};var tz=Object.prototype.propertyIsEnumerable,x2=Object.getOwnPropertySymbols,rz=x2?function(e){return e==null?[]:(e=Object(e),function(t,r){for(var n=-1,i=t==null?0:t.length,o=0,s=[];++n<i;){var a=t[n];r(a)&&(s[o++]=a)}return s}(x2(e),function(t){return tz.call(e,t)}))}:function(){return[]};function U2(e){return function(t,r,n){var i=ZH(t);return rp(t)?i:function(o,s){for(var a=-1,l=s.length,u=o.length;++a<l;)o[u+a]=s[a];return o}(i,n(t))}(e,0,rz)}var M0=td(uo,"DataView"),N0=td(uo,"Promise"),L0=td(uo,"Set"),j2="[object Map]",$2="[object Promise]",F2="[object Set]",B2="[object WeakMap]",H2="[object DataView]",nz=ml(M0),iz=ml(np),oz=ml(N0),sz=ml(L0),az=ml(D0),Co=ed;(M0&&Co(new M0(new ArrayBuffer(1)))!=H2||np&&Co(new np)!=j2||N0&&Co(N0.resolve())!=$2||L0&&Co(new L0)!=F2||D0&&Co(new D0)!=B2)&&(Co=function(e){var t=ed(e),r=t=="[object Object]"?e.constructor:void 0,n=r?ml(r):"";if(n)switch(n){case nz:return H2;case iz:return j2;case oz:return $2;case sz:return F2;case az:return B2}return t});var z2=uo.Uint8Array;function af(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ya;++t<r;)this.add(e[t])}function lz(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function W2(e,t,r,n,i,o){var s=1&r,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var c=-1,p=!0,h=2&r?new af:void 0;for(o.set(e,t),o.set(t,e);++c<a;){var m=e[c],f=t[c];if(n)var v=s?n(f,m,c,t,e,o):n(m,f,c,e,t,o);if(v!==void 0){if(v)continue;p=!1;break}if(h){if(!lz(t,function(g,y){if(S=y,!h.has(S)&&(m===g||i(m,g,r,n,o)))return h.push(y);var S})){p=!1;break}}else if(m!==f&&!i(m,f,r,n,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function uz(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function dz(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}af.prototype.add=af.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},af.prototype.has=function(e){return this.__data__.has(e)};var G2=zu?zu.prototype:void 0,oy=G2?G2.valueOf:void 0,cz=Object.prototype.hasOwnProperty,K2="[object Arguments]",q2="[object Array]",sh="[object Object]",Q2=Object.prototype.hasOwnProperty;function _V(e,t,r,n,i){return e===t||(e==null||t==null||!Wu(e)&&!Wu(t)?e!=e&&t!=t:function(o,s,a,l,u,d){var c=rp(o),p=rp(s),h=c?q2:Co(o),m=p?q2:Co(s),f=(h=h==K2?sh:h)==sh,v=(m=m==K2?sh:m)==sh,g=h==m;if(g&&Qm(o)){if(!Qm(s))return!1;c=!0,f=!1}if(g&&!f)return d||(d=new ys),c||Zw(o)?W2(o,s,a,l,u,d):function(w,O,D,U,x,P,I){switch(D){case"[object DataView]":if(w.byteLength!=O.byteLength||w.byteOffset!=O.byteOffset)return!1;w=w.buffer,O=O.buffer;case"[object ArrayBuffer]":return!(w.byteLength!=O.byteLength||!P(new z2(w),new z2(O)));case"[object Boolean]":case"[object Date]":case"[object Number]":return vV(+w,+O);case"[object Error]":return w.name==O.name&&w.message==O.message;case"[object RegExp]":case"[object String]":return w==O+"";case"[object Map]":var E=uz;case"[object Set]":var A=1&U;if(E||(E=dz),w.size!=O.size&&!A)return!1;var _=I.get(w);if(_)return _==O;U|=2,I.set(w,O);var C=W2(E(w),E(O),U,x,P,I);return I.delete(w),C;case"[object Symbol]":if(oy)return oy.call(w)==oy.call(O)}return!1}(o,s,h,a,l,u,d);if(!(1&a)){var y=f&&Q2.call(o,"__wrapped__"),S=v&&Q2.call(s,"__wrapped__");if(y||S){var b=y?o.value():o,R=S?s.value():s;return d||(d=new ys),u(b,R,a,l,d)}}return!!g&&(d||(d=new ys),function(w,O,D,U,x,P){var I=1&D,E=U2(w),A=E.length;if(A!=U2(O).length&&!I)return!1;for(var _=A;_--;){var C=E[_];if(!(I?C in O:cz.call(O,C)))return!1}var V=P.get(w),M=P.get(O);if(V&&M)return V==O&&M==w;var $=!0;P.set(w,O),P.set(O,w);for(var B=I;++_<A;){var ee=w[C=E[_]],ie=O[C];if(U)var be=I?U(ie,ee,C,O,w,P):U(ee,ie,C,w,O,P);if(!(be===void 0?ee===ie||x(ee,ie,D,U,P):be)){$=!1;break}B||(B=C=="constructor")}if($&&!B){var le=w.constructor,te=O.constructor;le==te||!("constructor"in w)||!("constructor"in O)||typeof le=="function"&&le instanceof le&&typeof te=="function"&&te instanceof te||($=!1)}return P.delete(w),P.delete(O),$}(o,s,a,l,u,d))}(e,t,r,n,_V,i))}var pz=Object.prototype.hasOwnProperty;const J2=e=>4294966272&e,sy=e=>{let t={R:0,G:0,B:0,A:0};if(typeof e=="string"&&e.startsWith("#")){const a=e.slice(1);try{if(a.length===3){const l=Array.from(a).map(u=>u.repeat(2)).map(u=>parseInt(u,16));t={R:l[0]/255,G:l[1]/255,B:l[2]/255,A:1}}else if(a.length===6||a.length===8){var r,n,i,o,s;const l=(r=a.match(/\S{2}/g))===null||r===void 0?void 0:r.map(u=>parseInt(u,16));t={R:((n=l==null?void 0:l[0])!==null&&n!==void 0?n:0)/255,G:((i=l==null?void 0:l[1])!==null&&i!==void 0?i:0)/255,B:((o=l==null?void 0:l[2])!==null&&o!==void 0?o:0)/255,A:l!=null&&l[3]?((s=l==null?void 0:l[3])!==null&&s!==void 0?s:0)/255:1}}}catch{console.warn("error color representation:",e)}}else typeof e=="object"&&(t={R:e.R/255,G:e.G/255,B:e.B/255,A:e.A||1});return t};function Yw(e){let{captureWidth:t=0,captureHeight:r=0}=e||{};const{hd:n}=e||{};var i,o;return t!==0&&r!==0||(n&&Oe.isSupportSending720P()?(t=1280,r=720):(t=640,r=360)),{captureWidth:t,captureHeight:r,isCustomizedResolution:!(e==null||!e.captureWidth||!e.captureHeight||(i=t,o=r,Math.abs(Math.floor(i/o*10)-Math.floor(16/9*10))<=1))}}function RV(e,t){return e==="default"||t.some(r=>r.deviceId===e)||[Da.Environment,Da.User,Da.Left,Da.Right].includes(e)}function TV(e,t){if(typeof DOMMatrixReadOnly=="function"){const r=new DOMMatrixReadOnly(getComputedStyle(e).transform).scale(-1,1).toString();e.style.transform=r,e.dataset.mirrored=t?"1":"0"}}function OV(e,t,r){const n=[],{video:{videoSsrc:i,activeCamera:o}}=t,{cameraId:s=o,videoElement:a,originalRatio:l,ptz:u,hd:d,fullHd:c,mediaFile:p,fps:h,mirrored:m}=r||{};let f;if(a!==void 0){let R=a instanceof HTMLVideoElement?a:null;if(typeof a=="string"){let[w,O]=[document.body,a];if(a.indexOf(">")>-1){const[D,U]=a.split(">");w=document.querySelector(D),O=U}w&&(R=w.querySelector(O))}if(!R)return[];f=R,R.id||(R.id=Do("__ZOOM_SDK_SELF_VIDEO_@__")),m&&R.dataset.mirrored!=="1"&&TV(R,m)}let v=h??Ov.Default;v=Math.max(Ov.Min,v),v=Math.min(Ov.Max,v);const{captureWidth:g,captureHeight:y,isCustomizedResolution:S}=Yw(r);if(S)e.updateVideoHDValue(!1);else{e.updateVideoHDValue(!!d||!!c);const R=!!c&&Oe.isSupportFullHDVideo();e.updateVideoFullhdValue(R)}let b=Promise.resolve(s);if(p&&p.url){const R=Kr.getInstance();b=R.setVideoElement(p).then(()=>R.videoElement)}else Kr.getInstance().stopVideoElement();return b.then(R=>{e.startCaptureVideo(i,R,g,y,f,ae.isAndroidOrIOSBrowser&&kg.includes(R),!l&&function(){var w,O;const{isAndroidOrIOSBrowser:D,isFirefox:U,isSafari:x}=ae;return D||!((w=navigator.mediaDevices)!==null&&w!==void 0&&(O=w.getSupportedConstraints)!==null&&O!==void 0&&O.call(w).aspectRatio)||U||x||xk()}(),u,v)}),n.push(yN({cameraId:s,captureWidth:g,captureHeight:y,videoElement:typeof a=="string"?a:a instanceof HTMLVideoElement?hk(a):void 0,originalRatio:l,ptz:u,hd:d,fullHd:c,mediaFile:p,fps:v,mirrored:m})),n}function PV(e,t,r){const{max:n,min:i,step:o}=e;let s=r/100*(n-i);o&&(s=Math.min(Math.floor(s/o)*o,Math.floor(s)));let a=t+s;return a=Math.min(n,a),a=Math.max(i,a),a}function kV(e,t){let r="",n=t;switch(e){case ls.Down:n=-t,r="tilt";break;case ls.Up:r="tilt";break;case ls.Left:n=-t,r="pan";break;case ls.Right:r="pan";break;case ls.ZoomIn:r="zoom";break;case ls.ZoomOut:n=-t,r="zoom"}return{key:r,range:n}}function Xw(e){const t=["pan","tilt","zoom"].reduce((r,n)=>e[n]&&e[n].value!==0?{...r,[n]:e[n].value}:r,{});return function(r){if(r==null)return!0;if(SV(r)&&(rp(r)||typeof r=="string"||typeof r.splice=="function"||Qm(r)||Zw(r)||wV(r)))return!r.length;var n=Co(r);if(n=="[object Map]"||n=="[object Set]")return!r.size;if(bV(r))return!CV(r).length;for(var i in r)if(pz.call(r,i))return!1;return!0}(t)?null:t}function DV(e){return{pan:(e&bl.Pan)===bl.Pan,tilt:(e&bl.Tilt)===bl.Tilt,zoom:(e&bl.Zoom)===bl.Zoom}}function Rl(e){const{isAndroidBrowser:t,isIOSMobile:r,isFirefox:n,isSupportMediaStreamTrackProcessor:i,isSupportOffscreenCanvas:o}=ae,s=t&&!n,a=i&&o,l=typeof window.SharedArrayBuffer!="function"&&s&&a;return r&&typeof VideoFrame=="function"||l||!Tg()&&a&&!e&&!h0()}function Z2(e,t,r){const{meeting:{userId:n},video:{isSupportHDVideo:i,renderedVideoList:o,maximumNumbeOfHDSubscriptions:s,receivedVideoMaxQuality:a}}=r,l=e===n;let u=t;if(t>=si.Video_720P)if(i){const c=o.filter(h=>h.videoQuality===si.Video_720P).map(h=>h.userId),p=s??1;c.length>=p&&(c.includes(e)||l||(console.warn(`Warning: Web Video SDK currently only supports subscribing to ${p} 720p video stream, so quality has been downgraded to 360p`),u=si.Video_360P))}else console.warn("Can not subscribe 720P video stream,will downgrade to 360P stream"),u=si.Video_360P;const d=Math.max(a,si.Video_360P);return[u,Math.min(u,d)]}const Tl=He.createAgent(),$i=Xr(Oe.getInstance());let Zi,Au;async function MV(e,t,r){const n=Do(e),i=document.createElement("img");return i.src=t,i.id=n,i.style.display="none",Oi(t)&&i.setAttribute("crossorigin",""),await new Promise((o,s)=>{i.onload=()=>{r&&URL.revokeObjectURL(t),o("")},i.onerror=()=>{r&&URL.revokeObjectURL(t),s("Cannot load  image.")}}),{imageId:n,imgElement:i}}async function yp(e,t,r){if(e===Uu)return Uu;{let n=e;if(t){const i=await function(o){return new Promise((s,a)=>{try{Zi&&Au||(Zi=document.createElement("canvas"),Au=Zi.getContext("2d"));const l=Zi,u=Au;if(u){u.clearRect(0,0,Zi.width,Zi.height);const d=new Image;d.src=o,Oi(o)&&(d.crossOrigin="");const c=16/9,p=1280,h=Math.floor(p/c);l.width=p,l.height=h,d.onload=()=>{const{width:m,height:f}=d,v=f*c;if(v>m){const g=m,y=Math.floor(m/c),S=0,b=(f-y)/2;u==null||u.drawImage(d,S,b,g,y,0,0,p,h)}else{const g=v,y=f,S=(m-g)/2;u.drawImage(d,S,0,g,y,0,0,p,h)}try{l.toBlob(g=>{s(g)})}catch(g){g instanceof DOMException&&g.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue"),a(g)}},d.onerror=m=>{a("Cannot load  image.")}}}catch(l){a(l)}})}(e);n=URL.createObjectURL(i)}if(n){const{imageId:i,imgElement:o}=await MV("__ZOOM_SDK_VIRTUAL_BACKGROUND_IMAGE_@__",n,!!t);return(r??document.body).appendChild(o),i}}return null}async function NV(e,t,r){var n;const i=(n=r&&r.parentNode)!==null&&n!==void 0?n:document.body,{imageUrl:o,cropped:s,rootWidth:a,rootHeight:l}=e;let u=e;!t.video.customizedVideoOption||e.captureWidth&&e.captureHeight||(u=t.video.customizedVideoOption);const{captureWidth:d,captureHeight:c}=Yw(u),p=document.createElement("div");let h;p.style.display="none",h=o?await yp(o,s,p):null;let m,f=Do("__ZOOM_SDK_VIRTUAL_BACKGROUND_CANVAS_@__");if(r){const v=rf(r);v.id?f=v.id:v.id=f,m=v;try{a&&r.width!==a&&(r.width=a),l&&r.height!==l&&(r.height=l)}catch{console.warn("Cannot set the canvas width/height, and pay attention the canvas dimension is different from the setting")}}else{const v=document.createElement("canvas");v.width=a??380,v.height=l??214,v.id=f,m=v,p.appendChild(v)}return i==null||i.appendChild(p),{captureWidth:d,captureHeight:c,imageId:h,canvas:m,divElement:p}}async function Y2(e,t,r,n){const i=Array.isArray(e)?e:e&&[e];if((i==null?void 0:i.length)>0){Zi&&Au||(Zi=document.createElement("canvas"),Au=Zi.getContext("2d"));const o=Zi,s=Au;if(o.width=t,o.height=r,s)try{s.fillStyle="#fff",s.clearRect(0,0,t,r);for(let l=0;l<i.length;l++){const u=i[l],{type:d,x:c,y:p}=u;if(d==="rectangle"){const{width:h,height:m}=u;s.fillRect(c,p,h,m)}else if(d==="square"){const{length:h}=u;s.fillRect(c,p,h,h)}else if(d==="circle"){const{radius:h}=u;s.beginPath(),s.arc(c,p,h,0,2*Math.PI),s.fill()}else if(d==="svg"){const{svg:h,width:m,height:f}=u,v=new Image;v.src=h,Oi(h)&&(v.crossOrigin=""),await new Promise((S,b)=>{v.onload=()=>{S("")},v.onerror=()=>{b()}});const{width:g,height:y}=v;s.drawImage(v,0,0,g,y,c,p,m,f)}}const a=await new Promise(l=>{o==null||o.toBlob(u=>{l(u)})});if(a){const l=URL.createObjectURL(a),{imageId:u,imgElement:d}=await MV("__ZOOM_SDK_MASK_CLIP_@__",l,!0);return(n??document.body).appendChild(d),u}}catch(a){a instanceof DOMException&&a.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue")}}return null}function X2(e,t){if(e===t||e==null&&t==null)return!0;const r=Array.isArray(e)?[...e]:[e],n=Array.isArray(t)?[...t]:[t];if(r.length!==n.length)return!1;const i=(o,s)=>o.type<s.type?-1:o.type===s.type?0:1;r.sort(i),n.sort(i);for(let o=0;o<r.length;o++)if(!hp(r[o],n[o]))return!1;return!0}function lf(e,t,r,n){const{video:{isCurrentUserStartedVideo:i,virtualBackground:{isVBPreloadReady:o,isVBConfigured:s,imageSrc:a},backgroundMode:l},meeting:{isCurrentUserStartVideoBeforeReset:u}}=r;return dr(function(d){return d!==void 0?X([d]):Ge(rm,1).pipe(ne(c=>c))}(o)).then(d=>d?n||!s&&e.imageUrl!==Uu&&e.imageUrl?async function(c,p,h,m){const{canvas:f,imageId:v,captureHeight:g,captureWidth:y,divElement:S}=await NV(c,h,m),{cameraId:b}=c,{video:{videoSsrc:R,activeCamera:w}}=h;return p.startVirtualBackgroundSetting(f,v,R,b??w,y,g),S}(e,t,r,n).then(c=>i?bm(!0):dr(Ge(ub,1)).then(p=>{var h;return n||t.stopVirtualBackgroundSetting(),p?(c==null||(h=c.parentNode)===null||h===void 0||h.removeChild(c),!0):Promise.reject("Cannot access the virtual background image.")})):a===e.imageUrl&&l===xi.VirtualBackground&&!u||async function(c,p,h){const{imageUrl:m,cropped:f}=c;if(m){const v=await yp(m,f);v&&(h.video.backgroundMode===xi.Mask&&(p.stopMaskSetting(!0),await _g(()=>{p.stopVirtualBackgroundSetting()},0)),p.updateVirtualBackgroundImage(v),v!==Uu&&setTimeout(()=>{Vc(v)},0))}else p.updateVirtualBackgroundImage(null)}(e,t,r):Promise.reject("Cannot load virtual background model."))}function uf(e,t,r,n){const{video:{mask:{isMaskConfigured:i,imageSrc:o,clip:s},backgroundMode:a,isCurrentUserStartedVideo:l},meeting:{isCurrentUserStartVideoBeforeReset:u}}=r;return n||!i&&e.imageUrl?async function(d,c,p,h){const{canvas:m,imageId:f,captureHeight:v,captureWidth:g,divElement:y}=await NV(d,p,h),{cameraId:S,clip:b,rootWidth:R=1280,rootHeight:w=720}=d,O=b?await Y2(b,R,w,y):null,{video:{videoSsrc:D,activeCamera:U}}=p;return O?(c.startMaskSetting(m,f,O,D,S??U,R,w,g,v),y):Promise.reject("Clip is empty")}(e,t,r,n).then(d=>l?_m(!0):dr(Ge(fb,1)).then(c=>{var p;return n||t.stopMaskSetting(),c?(d==null||(p=d.parentNode)===null||p===void 0||p.removeChild(d),!0):Promise.reject("Cannot set video mask")})):a===xi.Mask&&e.imageUrl===o&&X2(e.clip,s)&&!u?Promise.resolve(!0):async function(d,c,p){const{imageUrl:h,cropped:m,clip:f,rootWidth:v,rootHeight:g}=d,{video:{mask:{imageSrc:y,cropped:S,clip:b},backgroundMode:R}}=p;if(h){if(R===xi.VirtualBackground&&(c.stopVirtualBackgroundSetting(!0),await _g(()=>{c.stopMaskSetting()},0)),h!==y||m!==S){const w=await yp(h,m);w&&(c.updateMaskBackgroundImage(w),setTimeout(()=>{Vc(w)},0))}if((!X2(f,b)||!y)&&f&&v&&g){const w=await Y2(f,v,g);w&&(c.updateMaskClip(w,v,g),setTimeout(()=>{Vc(w)},0))}}else c.updateMaskBackgroundImage(null),c.updateMaskClip(null,v,g)}(e,t,r)}const ah=He.createAgent(),gi=Xr(Oe.getInstance()),hz=He.createAgent(),e_=Xr(Oe.getInstance()),t_={videoSsrc:0,cameraDevicesList:[],activeCamera:ae.isAndroidOrIOSBrowser?Da.User:"default",activeVideoId:0,isCurrentUserStartedVideo:!1,spotlightUserList:[],isCaptureForbidden:!1,isMirrored:!1,receivedVideoMaxQuality:navigator.hardwareConcurrency>=8?si.Video_1080P:si.Video_360P,subscribedVideoList:[],renderedVideoList:[],ensuredCanvas:[],isVideoMuted:!1,isCaptureCameraLoading:!1,isCameraTaken:!1,isUsingMediaPlayback:!1,receivedVideoDimension:{width:0,height:0},capturedVideoDimension:{width:0,height:0},isFollowHostVideoLayout:!1,hostDragLayout:[],isSupportHDVideo:!1,isFullHDVideoEnabled:!1,bCanUnmuteVideo:!1,virtualBackground:{isVBConfigured:!1,isVBPreloadReady:void 0,imageSrc:void 0,cropped:void 0},mask:{imageSrc:void 0,cropped:void 0,clip:void 0},backgroundMode:xi.Null,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0,bandwidth:0,bitrate:0}},hardwareAcceleration:{encode:!1,decode:!1},networkQuality:{},ptz:{},currentCameraControlStatus:{isRequested:!1,isInControl:!1,isCameraMoving:!1},farEndCameraControlStatus:{controlledUserList:[],isControlling:!1},subscriptionStatus:{encode:!1,decode:!1,detailed:!1},videoAttachments:{},rendererType:nb.WebGL,selfPreviewVideoList:[]},fz=pn({[`${aN}`]:k((e,t)=>{let{payload:r}=t;e.videoSsrc=r}),[`${Cw}`]:k((e,t)=>{let{payload:r}=t;e.cameraDevicesList=r}),[`${Gc}`]:k((e,t)=>{let{payload:r}=t;const n=e.activeCamera;if(n in e.ptz){const i=e.ptz[n];["pan","tilt","zoom"].forEach(o=>{i[o]&&(i[o].value=0)})}e.activeCamera=r}),[`${lN}`]:k((e,t)=>{let{payload:r}=t;e.activeVideoId=r.userId}),[`${uN}`]:k((e,t)=>{let{payload:r}=t;e.isCurrentUserStartedVideo=r}),[`${Gb}`]:k((e,t)=>{let{payload:r}=t;e.spotlightUserList=r}),[`${vm}`]:k((e,t)=>{let{payload:r}=t;e.isCaptureForbidden=r}),[`${dN}`]:k((e,t)=>{let{payload:r}=t;e.receivedVideoMaxQuality=r}),[`${cN}`]:k((e,t)=>{let{payload:r}=t;e.isVideoMuted=r}),[`${Xl}`]:k((e,t)=>{let{payload:r}=t;e.isCaptureCameraLoading=r}),[`${ym}`]:k((e,t)=>{let{payload:r}=t;e.isCameraTaken=r}),[`${Kb}`]:k((e,t)=>{let{payload:r}=t;e.receivedVideoDimension=r}),[`${Jh}`]:k((e,t)=>{let{payload:r}=t;e.subscribedVideoList.includes(r)||e.subscribedVideoList.push(r)}),[`${Zh}`]:k((e,t)=>{let{payload:r}=t;const n=e.subscribedVideoList.indexOf(r);n>=0&&e.subscribedVideoList.splice(n,1)}),[`${Su}`]:k((e,t)=>{let{payload:r}=t;const n=e.renderedVideoList.find(i=>i.userId===r.userId&&i.key===r.key&&i.canvasId===r.canvasId);n?(r.videoQuality!==void 0&&(n.videoQuality=r.videoQuality),r.aspectRatio!==void 0&&(n.aspectRatio=r.aspectRatio)):e.renderedVideoList.push({...r})}),[`${Sm}`]:k((e,t)=>{let{payload:r}=t;const n=e.renderedVideoList.findIndex(i=>i.userId===r.userId&&i.key===r.key&&i.canvasId===r.canvasId);n>=0&&e.renderedVideoList.splice(n,1)}),[`${hN}`]:k((e,t)=>{let{payload:r}=t;e.isFollowHostVideoLayout=r}),[`${fN}`]:k((e,t)=>{let{payload:r}=t;e.hostDragLayout=r}),[`${mN}`]:k((e,t)=>{let{payload:r}=t;e.isSupportHDVideo=r}),[`${gN}`]:k((e,t)=>{let{payload:r}=t;e.maximumNumbeOfHDSubscriptions=r}),[`${vN}`]:k((e,t)=>{let{payload:r}=t;e.bCanUnmuteVideo=r}),[`${qb}`]:k((e,t)=>{let{payload:r}=t;e.virtualBackground.isVBPreloadReady=r}),[`${bm}`]:k((e,t)=>{let{payload:r}=t;e.virtualBackground.isVBConfigured=r}),[`${Yh}`]:k((e,t)=>{let{payload:r}=t;e.virtualBackground.imageSrc=r.imageUrl,e.virtualBackground.cropped=r.cropped,e.backgroundMode=xi.VirtualBackground}),[`${Ml}`]:k((e,t)=>{let{payload:r}=t;const{encode:n,decode:i}=r;n!==void 0&&(e.hardwareAcceleration.encode=n),i!==void 0&&(e.hardwareAcceleration.decode=i)}),[`${Em}`]:k((e,t)=>{let{payload:r}=t;const{data:{encoding:n,rate:i,...o}}=r;e.statistic.encode={bitrate:i,...o}}),[`${wm}`]:k((e,t)=>{let{payload:r}=t;const{data:{encoding:n,rate:i,...o}}=r;e.statistic.decode={bitrate:i,...o}}),[`${yN}`]:k((e,t)=>{let{payload:r}=t;const{cameraId:n,captureWidth:i,captureHeight:o,videoElement:s,originalRatio:a,ptz:l,hd:u,fullHd:d,mediaFile:c,fps:p,mirrored:h}=r;e.activeCamera=n,e.customizedVideoOption={captureWidth:i,captureHeight:o,videoElement:s,originalRatio:a,ptz:l,hd:u,fullHd:d,fps:p},hp(e.mediaPlaybackFile,c)||(e.mediaPlaybackFile=c,e.isUsingMediaPlayback=!(c==null||!c.url)),h!==void 0&&(e.isMirrored=!!h)}),[`${Qb}`]:k((e,t)=>{let{payload:r}=t;const{userId:n,level:i,bwLevel:o,type:s}=r;if(Object.prototype.hasOwnProperty.call(e.networkQuality,`${n}`))e.networkQuality[`${n}`][`${s}`]={level:i,bwLevel:o};else{const a={[s]:{level:i,bwLevel:o}};Object.assign(e.networkQuality,{[`${n}`]:a})}}),[`${SN}`]:k((e,t)=>{let{payload:r}=t;const{deviceId:n,ptzRange:i}=r;if(Object.prototype.hasOwnProperty.call(e.ptz,n)){const o=e.ptz[n];o&&["pan","tilt","zoom"].forEach(s=>{const a=i[s];if(a){var l;const u=(l=o[s])===null||l===void 0?void 0:l.capability;u?Object.assign(u,{...a}):o[s]={capability:{...a},value:0}}})}else Object.assign(e.ptz,{[n]:{pan:i.pan?{capability:{...i.pan},value:0}:null,tilt:i.tilt?{capability:{...i.tilt},value:0}:null,zoom:i.zoom?{capability:{...i.zoom},value:0}:null}})}),[`${Im}`]:k((e,t)=>{let{payload:r}=t;e.currentCameraControlStatus.isRequested=r}),[`${Am}`]:k((e,t)=>{let{payload:r}=t;const{isInControl:n,userId:i}=r;e.currentCameraControlStatus.isInControl=n,e.currentCameraControlStatus.controllingUserId=i}),[`${bN}`]:k((e,t)=>{let{payload:r}=t;e.farEndCameraControlStatus.controlledUserList.includes(r)||e.farEndCameraControlStatus.controlledUserList.push(r)}),[`${Cm}`]:k((e,t)=>{let{payload:r}=t;const n=e.farEndCameraControlStatus.controlledUserList.indexOf(r);n!==-1&&e.farEndCameraControlStatus.controlledUserList.splice(n,1)}),[`${Jb}`]:k((e,t)=>{let{payload:r}=t;e.currentCameraControlStatus.isCameraMoving=r.cmd==="start"}),[`${_w}`]:k((e,t)=>{let{payload:r}=t;const{constraints:n,deviceId:i}=r,o=e.ptz[i];["pan","tilt","zoom"].forEach(s=>{n[s]!==void 0&&(o[s].value=n[s])})}),[`${Zb}`]:k((e,t)=>{let{payload:r}=t;e.farEndCameraControlStatus.isControlling=r}),[`${EN}`]:k((e,t)=>{let{payload:r}=t;e.networkQualityBroadcastTime=r}),[`${_m}`]:k((e,t)=>{let{payload:r}=t;e.mask.isMaskConfigured=r}),[`${Xh}`]:k((e,t)=>{let{payload:r}=t;const{imageUrl:n,cropped:i,rootHeight:o,rootWidth:s,clip:a}=r;e.mask.imageSrc=n,e.mask.cropped=i,e.mask.clip=a,e.mask.rootWidth=s,e.mask.rootHeight=o,e.backgroundMode=xi.Mask}),[`${$B}`]:k((e,t)=>{let{payload:r}=t;e.backgroundMode=r}),[`${wN}`]:k((e,t)=>{let{payload:r}=t;e.capturedVideoDimension=r}),[`${IN}`]:k((e,t)=>{let{payload:r}=t;e.ensuredCanvas.includes(r)||e.ensuredCanvas.push(r)}),[`${Yb}`]:k((e,t)=>{let{payload:r}=t;e.mediaPlaybackFile=r,e.isUsingMediaPlayback=!(r==null||!r.url)}),[`${bu}`]:k((e,t)=>{let{payload:r}=t;if(r){const{lastCopy:n,...i}=r;e.prefetchedVideo=i}else e.prefetchedVideo=r}),[`${Xb}`]:k((e,t)=>{let{payload:r}=t;Object.assign(e.subscriptionStatus,r)}),[`${AN}`]:k((e,t)=>{let{payload:r}=t;e.isFullHDVideoEnabled=r}),[`${CN}`]:k((e,t)=>{let{payload:r}=t;const{userId:n,element:i}=r,o=e.videoAttachments[`${n}`];if(o)o.indexOf(i)===-1&&o.push(i);else{const s=[];s.push(i),Object.assign(e.videoAttachments,{[`${n}`]:s})}}),[`${ef}`]:k((e,t)=>{let{payload:r}=t;const{userId:n,element:i}=r,o=e.videoAttachments[`${n}`];let s=i;Array.isArray(i)||(s=[i]),s.forEach(a=>{if(o){const l=o.indexOf(a);l!==-1&&o.splice(l,1)}})}),[`${_N}`]:k((e,t)=>{let{payload:r}=t;r&&(e.rendererType=nb.WebGL2)}),[`${RN}`]:k((e,t)=>{let{payload:r}=t;r&&(e.rendererType=nb.WebGPU)}),[`${TN}`]:k((e,t)=>{let{payload:r}=t;e.rendererType=r}),[`${ON}`]:k((e,t)=>{let{payload:r}=t;e.isMirrored=r}),[`${PN}`]:k((e,t)=>{let{payload:r}=t;e.selfPreviewVideoList.includes(r)||e.selfPreviewVideoList.push(r)}),[`${e0}`]:k((e,t)=>{let{payload:r}=t;if(r){const n=e.selfPreviewVideoList.indexOf(r);n>=0&&e.selfPreviewVideoList.splice(n,1)}else e.selfPreviewVideoList=[]}),[`${kN}`]:k((e,t)=>{let{payload:r}=t;e.leadershipUserId=r}),[`${pN}`]:(e,t)=>{let{payload:r}=t;const n={cameraDevicesList:e.cameraDevicesList};return r&&Object.assign(n,{activeCamera:e.activeCamera,customizedVideoOption:e.customizedVideoOption,virtualBackground:{imageSrc:e.virtualBackground.imageSrc,cropped:e.virtualBackground.cropped},mask:{imageSrc:e.mask.imageSrc,cropped:e.mask.cropped,rootWidth:e.mask.rootWidth,rootHeight:e.mask.rootHeight,clip:e.mask.clip},backgroundMode:e.backgroundMode,ptz:e.ptz,subscriptionStatus:e.subscriptionStatus}),{...t_,...n}}},t_),mz={cameraPtzEpics0:(e,t)=>se(e,8004).pipe(G(r=>{const{payload:{body:{nCmd:n,nUserID:i,nReason:o,nButtonID:s}}}=r,a=t.value,l=et(a),{video:{currentCameraControlStatus:{isInControl:u,controllingUserId:d},cameraDevicesList:c,activeCamera:p}}=a,h=l.find(f=>sn(f.userId,i)),m=[];if(m.push(Im(!0)),n===Gr.Request){const f={userId:h==null?void 0:h.userId,displayName:h==null?void 0:h.displayName};if(u){const v=l.find(g=>g.userId===d);Object.assign(f,{currentControllingUserId:v==null?void 0:v.userId,currentControllingDisplayName:v==null?void 0:v.displayName})}T(oD,f)}else if(n===Gr.Approve)m.push(bN(h==null?void 0:h.userId)),T(hb,{isApproved:!0,userId:h==null?void 0:h.userId,displayName:h==null?void 0:h.displayName});else if(n===Gr.Decline)m.push(Cm(h==null?void 0:h.userId)),T(hb,{isApproved:!1,userId:h==null?void 0:h.userId,displayName:h==null?void 0:h.displayName,reason:o});else if(n===Gr.GiveUp)m.push(Am({isInControl:!1,userId:0})),T(nm,{isControlled:!1});else if(n===Gr.StartControl||n===Gr.StopControl)m.push(Jb({cmd:n===Gr.StartControl?"start":"stop",type:s}));else if(n===Gr.SwitchCamera){const f=c.findIndex(g=>g.deviceId===p),v=f+1===c.length?0:f+1;if(v!==f){const g=c[v].deviceId;e_.changeCamera(g,kg.includes(g))}}return X(m)})),cameraPtzEpics1:(e,t)=>se(e,ot).pipe(z(r=>{var n;const{payload:{body:i}}=r;return i==null||(n=i.update)===null||n===void 0?void 0:n.some(o=>o.nFECC!==void 0||o.nFECCExecutive!==void 0)}),de(r=>{const{payload:{body:{update:n}}}=r,i=n.find(o=>o.nFECC!==void 0||o.nFECCExecutive!==void 0);if(i){const{meeting:{userId:o}}=t.value;sn(i.nFECCExecutive,o)&&T(sD,{userId:i.id,ptz:DV(i.nFECC)})}}),_e(re)),cameraPtzEpics2:(e,t)=>se(e,ot).pipe(z(r=>{var n;const{payload:{body:i}}=r,{video:{farEndCameraControlStatus:{controlledUserList:o}}}=t.value;return i==null||(n=i.remove)===null||n===void 0?void 0:n.some(s=>o.includes(s.id))}),G(r=>{var n;const{payload:{body:i}}=r,o=[],{video:{farEndCameraControlStatus:{controlledUserList:s}}}=t.value,a=i==null||(n=i.remove)===null||n===void 0?void 0:n.find(l=>s.includes(l.id));return a&&o.push(Cm(a.id)),X(o)})),cameraPtzEpics3:(e,t)=>e.pipe(he(`${Jb}`),Be(r=>{const{payload:{cmd:n,type:i}}=r;return n==="start"?Nt(0,200).pipe(Pa(()=>!!t.value.video.currentCameraControlStatus.isCameraMoving),G(()=>{const{video:{ptz:o,activeCamera:s}}=t.value,a=o[s],l=Xw(a)||{},{key:u,range:d}=kV(i,2);return a[u]?(Object.assign(l,{[u]:PV(a[u].capability,a[u].value,d)}),e_.movePTZCamera(l).then(()=>_w({deviceId:s,constraints:l}))):Promise.resolve(void 0)}),G(o=>typeof o=="object"&&o.type!==void 0?qe(o):re)):re})),cameraPtzEpics4:(e,t)=>e.pipe(he(`${Gc}`),G(r=>{const{payload:n}=r,{video:{customizedVideoOption:i,ptz:o}}=t.value;if(i!=null&&i.ptz){const s=o==null?void 0:o[n];s!==void 0&&hz.sendCameraAblity({pan:!!s.pan,tilt:!!s.tilt,zoom:!!s.zoom})}return re}))},gz={videoCaptureEpics0:(e,t)=>Re(e,Z.StartVideoCaptureSuccess).pipe(xo(async r=>{const{video:{activeCamera:n,ptz:i,isCurrentUserStartedVideo:o,isUsingMediaPlayback:s},meeting:{userId:a}}=t.value,{payload:{data:{currentDeviceID:l,PTZRange:u,VideoSelectValue:d,usingFacingMode:c}}}=r,p=[],{cameras:h}=await dr(Qc());if(h.length<1&&!s&&(T(ob,{reason:"Cannot detect camera devices"}),gi.stopCaptureVideo()),RV(n,h)||s){let m="";if(m=c?Array.isArray(d)&&d[0]?d[0]:d:l,o||ah.muteAttendeeVideo(a,!1),T(aD),s)p.push(Gc("default"));else if(m&&u&&p.push(SN({deviceId:m,ptzRange:u})),n!==m&&p.push(Gc(m)),Object.prototype.hasOwnProperty.call(i,m)){const f=i[m];if(f){const v=Xw(f);v&&gi.movePTZCamera(v)}}}else T(sb,{reason:"cannot find target camera"}),gi.stopCaptureVideo();return p})),videoCaptureEpics1:(e,t)=>se(e,ot).pipe(z(r=>{const{payload:{body:{update:n}}}=r,{meeting:{userId:i}}=t.value;return n==null?void 0:n.some(o=>o.id===i&&o.bVideoOn!==void 0)}),ne(r=>{const{payload:{body:{update:n}}}=r,{meeting:{userId:i}}=t.value,o=n.find(s=>s.id===i);return o.bVideoOn===!0?T(dw):T(mu),uN(!!o.bVideoOn)})),videoCaptureEpics2:e=>Re(e,[Z.UserForbiddedCaptureVideo,Z.UserCameraIsTakenByOtherPrograms,Z.VideoWebsocketBroken,Z.StopVideoCaptureFailed]).pipe(G(t=>{const{payload:{type:r}}=t,n=[];switch(r){case Z.UserForbiddedCaptureVideo:T(ab),n.push(vm(!0));break;case Z.UserCameraIsTakenByOtherPrograms:T(lb,{reason:"User camera is taken by other programs."}),n.push(ym(!0));break;case Z.VideoWebsocketBroken:T(tD,{reason:"Video websocket broken."});break;case Z.StopVideoCaptureFailed:T(mu,{failed:!0,reason:"Unknown."})}return X(n)})),videoCaptureEpics3:(e,t)=>Re(e,Z.StopVideoCaptureSuccess).pipe(fe(t),ne(r=>{let[,n]=r;const{meeting:{userId:i},video:{isCurrentUserStartedVideo:o}}=n;return o||T(mu),ah.muteAttendeeVideo(i,!0),Xl(!1)})),videoCaptureEpics4:(e,t)=>se(e,16133).pipe(fe(t),z(r=>{var n;let[i,o]=r;return(i==null||(n=i.payload)===null||n===void 0||(n=n.body)===null||n===void 0?void 0:n.id)===o.meeting.userId}),Xu(r=>{let[n]=r;const{id:i,bVideoMute:o}=n.payload.body;return T(Zk,{id:i,isVideoMuted:o}),o===!0&&gi.stopCaptureVideo(),o===!1&&T(Yk,{id:i,isVideoMuted:o}),cN(o)})),videoCaptureEpics5:(e,t)=>se(e,16131).pipe(z(r=>r.payload.body.ssrc!==void 0),Be(r=>{const{payload:{body:{ssrc:n}}}=r;return T(uD,n),Wt(qe(aN(n)),dl(t).pipe(G(i=>{const{meeting:{isCurrentUserStartVideoBeforeReset:o},media:{videoEncodeStatus:s}}=t.value;return(i==null?void 0:i.bVideoOn)!==!0&&o===!0?Lr("video",s,"success").pipe(z(a=>{let[l,u]=a;return l&&u}),ne(()=>{const a=t.value,{video:{backgroundMode:l,mask:u,virtualBackground:d,activeCamera:c,customizedVideoOption:p}}=a;let h=Promise.resolve(!0);return l===xi.VirtualBackground&&d.imageSrc?h=lf({imageUrl:d.imageSrc,cropped:d.cropped},gi,a):l===xi.Mask&&u.imageSrc&&u.clip&&(h=uf({imageUrl:u.imageSrc,cropped:u.cropped,clip:u.clip,rootHeight:u.rootHeight,rootWidth:u.rootWidth},gi,a)),h.then(()=>{OV(gi,a,{cameraId:c,...p})}),wk(void 0)})):re})))})),videoCaptureEpics6:(e,t)=>e.pipe(he(`${Cw}`),de(r=>{const{payload:n}=r,i=t.value,{meeting:{userId:o}}=i,s=ye(i);n.length===0?s&&!s.bVideoConnect||ah.connectCamera(o,!1):s!=null&&s.bVideoConnect||ah.connectCamera(o,!0)}),_e(re)),videoCaptureEpics7:e=>Re(e,Z.InitSuccessVideo).pipe(z(t=>!ae.isIPad&&ae.isAndroidOrIOSBrowser&&t.payload.data===Wr.EncodeSuccess),Be(()=>CL().pipe(de(t=>{gi.setMobileRotateMode(t)}),kP()))),videoCaptureEpics8:e=>Re(e,Z.StartVideoCaptureSuccess).pipe(z(()=>!ae.isIPad&&ae.isAndroidOrIOSBrowser),de(()=>{gi.setMobileRotateMode(AL())}),_e(re)),videoCaptureEpics9:(e,t)=>Re(e,Z.VideoStreamFailed).pipe(z(()=>!!t.value.video.isCurrentUserStartedVideo&&ae.isIOSMobile),de(()=>{gi.stopCaptureVideo()}),G(()=>re)),videoCaptureEpics10:e=>se(e,24322).pipe(de(t=>{const{payload:r}=t;gi.passThroughRWGMessage(r)}),G(()=>re))},vz={videoRenderEpics0:e=>se(e,16129).pipe(ne(t=>{const{payload:{body:{id:r,bVideoOn:n}}}=t,i=J2(r);return T(Jk,{bVideoOn:n,userId:i}),lN({bVideoOn:n,userId:i})})),videoRenderEpics1:(e,t)=>Re(e,Z.VideoDecodeMaxSize).pipe(z(r=>{var n;return r==null||(n=r.payload)===null||n===void 0?void 0:n.data}),ne(r=>{const{size:n}=r.payload.data,{video:{renderedVideoList:i,receivedVideoMaxQuality:o},meeting:{userId:s}}=t.value,a=i.filter(l=>l.videoQuality>=si.Video_720P&&l.userId!==s);return o!==n&&a.length>0&&(n>=si.Video_720P||o>=si.Video_720P)&&a.forEach(l=>{Tl.subscribeVideo(l.userId,l.videoQuality,!1)}),dN(n)})),videoRenderEpics2:e=>se(e,16135).pipe(G(t=>{const{payload:{body:{bLeadershipOn:r,id:n}}}=t,i=[],o=[],s=r?J2(n):0;return r&&o.push(s),i.push(Gb(o),kN(s)),jr(Ge(gu,1),Nt(2e3).pipe(ne(()=>({leadershipEventOnly:!0})))).subscribe(a=>{const{spotlightList:l,leadershipEventOnly:u}=a;r?(l==null?void 0:l.length)===1&&o[0]===(l==null?void 0:l[0])||T(im,{spotlightList:l}):(u||(l==null?void 0:l.length)===0)&&T(im,{spotlightList:[]})}),X(i)})),videoRenderEpics3:(e,t)=>se(e,7958).pipe(fe(t),ne(r=>{let[n,i]=r;const{payload:{body:o}}=n;let s=[];o&&o.group_list&&o.group_list[0]&&(s=o.group_list[0].map(l=>l.id));const a=et(i);return a.length>0&&(s=s.filter(l=>a.findIndex(u=>u.userId===l)>=0)),T(gu,{spotlightList:s}),Gb(s)})),videoRenderEpics4:e=>Re(e,Z.CurrentVideoResolution).pipe(Xu(t=>(T(ib,t.payload.data),Kb(t.payload.data)))),videoRenderEpics5:e=>Re(e,[Z.CurrentVideoResolution,Z.CurrentCaptureVideoWidthHeight]).pipe(z(t=>!!t.payload.data),ne(t=>{const{payload:{data:r,type:n}}=t;return n===Z.CurrentVideoResolution?(T(ib,r),Kb(r)):(T(Xk,r),wN(r))})),videoRenderEpics6:e=>se(e,zn).pipe(z(t=>{const{payload:{body:r}}=t;return["bFollowHostVideo","VideoHd","bCanUnmuteVideo"].some(n=>r[n]!==void 0)}),ne(t=>{const{payload:{body:{bFollowHostVideo:r,VideoHd:n,bCanUnmuteVideo:i}}}=t;if(r!==void 0)return T(rD,{bOn:r}),hN(r);if(i!==void 0)return vN(i);{const o=n===1;return $i.updateVideoHDValue(o),$i.enableHardwareAccelerationForVideoEncode(!1),mN(o)}})),videoRenderEpics7:(e,t)=>se(e,7957).pipe(fe(t),ne(r=>{let[n,i]=r;const{video:{isFollowHostVideoLayout:o}}=i,{payload:{body:s}}=n,a=s&&s.drag_list&&s.drag_list.map(l=>l.id);return o&&T(nD,{layout:a}),fN(a)})),videoRenderEpics8:(e,t)=>se(e,ot).pipe(fe(t),z(r=>{let[n,i]=r;const{meeting:{userId:o},video:{subscribedVideoList:s}}=i,a=n.payload.body.update,l=n.payload.body.remove;return a&&a.length>0&&a.findIndex(u=>u.id!==o&&(u.bVideoOn!==void 0||u.bHold))>-1||l&&l.some(u=>s.includes(u.id))}),de(r=>{let[n,i]=r;const{payload:{body:{remove:o,update:s}}}=n,{video:{subscribedVideoList:a}}=i,l=VB(i);if(o&&o.length>0&&o.filter(u=>a.includes(u.id)).forEach(u=>{T(Hh,{userId:u.id})}),s&&s.length>0){const u=s.filter(c=>c.bVideoOn!==void 0).filter(c=>l.findIndex(p=>p.userId===c.id)===-1),d=s.filter(c=>c.bHold===!0);d.length>0&&d.filter(c=>a.includes(c.id)).forEach(c=>{T(Hh,{userId:c.id})}),u.forEach(c=>{c.bVideoOn?T(iD,{userId:c.id}):a.includes(c.id)&&T(Hh,{userId:c.id})})}}),_e(re)),videoRenderEpics9:(e,t)=>Re(e,Z.VideoQosData).pipe(fe(t),ne(r=>{var n;let[i,o]=r;const{video:{isCaptureForbidden:s,isCameraTaken:a},media:{videoEncodeStatus:l,videoDecodeStatus:u}}=o,d=ye(o),c=yw(o),p=c.length>0,h=(d==null?void 0:d.bVideoOn)&&!s&&!a,m=c.some(g=>g.bVideoOn),f=l==="success"&&h&&p,v=u==="success"&&p&&m;return(n=i.payload.data)!==null&&n!==void 0&&n.encoding?f?(T(db,i.payload),Em(i.payload)):Em(Cs):v?(T(db,i.payload),wm(i.payload)):wm(Cs)})),videoRenderEpics10:(e,t)=>Re(e,[Z.CurrentDecodeVideoQuality,Z.CurrentDecodeVideoFps]).pipe(de(r=>{const{payload:{type:n,data:i}}=r,{video:{subscriptionStatus:o}}=t.value;if(o.detailed){if(n===Z.CurrentDecodeVideoQuality){const{ssrc:s,width:a,height:l,quality:u}=i;T(cb,{userId:s,width:a,height:l,quality:u})}else if(n===Z.CurrentDecodeVideoFps){const{ssrc:s,fps:a}=i;T(cb,{userId:s,fps:a})}}}),_e(re)),videoRenderEpics11:(e,t)=>tw(e,t).pipe(G(async()=>ae.isAndroidOrIOSBrowser?1:await Oe.isSupportVideoDecodeHardwareAcceleration()?4:1),ne(r=>gN(r))),videoRenderEpics12:(e,t)=>Re(e,[Z.NetworkQualityChange,Z.NetworkQualityChangeAudio]).pipe(z(r=>!!r.payload.data),G(r=>{var n;const{payload:{data:{bwLevel:i,isUplink:o,networkLevel:s}}}=r,a=[],{meeting:{userId:l},video:{networkQuality:u,subscribedVideoList:d,networkQualityBroadcastTime:c}}=t.value,p=o?"uplink":"downlink";a.push(Qb({userId:l,level:s,bwLevel:i,type:p}));const h=hp((n=u[`${l}`])===null||n===void 0?void 0:n[p],{level:s,bwLevel:i});if(!h&&s!==-1&&(!o&&d.filter(m=>m!==l).length>0||o)&&T(pb,{userId:l,type:p,level:s}),o){const m=performance.now();(!h||m-(c??0)>3e4)&&(Tl.broadcastUserNetworkQuality({isUplink:o,level:s,bwLevel:i}),a.push(EN(m)))}return X(a)})),videoRenderEpics13:(e,t)=>Mi(e,8005).pipe(z(r=>{var n;return!((n=r.payload.body)===null||n===void 0||!n.nUserID)}),G(r=>{const{payload:{body:{nLevel:n,nUserID:i}}}=r,{video:{networkQuality:o}}=t.value,s=o[`${i}`],a=[];return s&&s.uplink.level===n||(T(pb,{userId:i,level:n,type:"uplink"}),a.push(Qb({userId:i,level:n,type:"uplink"}))),X(a)})),videoRenderEpics14:(e,t)=>se(e,ot).pipe(z(r=>{const{payload:{body:n}}=r,{video:{prefetchedVideo:i}}=t.value;return(i==null?void 0:i.userId)&&(n.update||n.remove)}),G(r=>{const{payload:{body:n}}=r,i=[],{video:{prefetchedVideo:o}}=t.value;let s=!1;return n.remove&&(s=n.remove.findIndex(a=>a.id===(o==null?void 0:o.userId))!==-1),n.update&&(s=n.update.findIndex(a=>a.id===(o==null?void 0:o.userId)&&a.bVideoOn===!1)!==-1),s&&o&&(o.loaded||$i.cancelPrefetchVideoSsrc(o.userId),Tl.unsubscribeVideo(o.userId),i.push(bu(void 0))),X(i)})),videoRenderEpics15:(e,t)=>e.pipe(he(`${bu}`),z(r=>!!r.payload),de(r=>{const{payload:{lastCopy:n}}=r,{video:{prefetchedVideo:i}}=t.value;!i||n&&n.userId===i.userId||(n!=null&&n.userId&&(n.loaded&&$i.cancelPrefetchVideoSsrc(n.userId),Tl.unsubscribeVideo(n.userId)),Tl.subscribeVideo(i.userId,si.Video_360P,!1),$i.prefetchVideoSsrc(i.userId))}),_e(re)),videoRenderEpics16:(e,t)=>Re(e,Z.NewActiveSpeakerFirstFrameCallback).pipe(z(()=>!!t.value.video.prefetchedVideo),G(r=>{const{payload:{data:{ssrc:n}}}=r,{video:{prefetchedVideo:i}}=t.value,o=[];return i&&(sn(i.userId,n)?(o.push(bu({userId:i.userId,loaded:!0,lastCopy:i})),T(lD,{userId:i.userId})):Tl.unsubscribeVideo(i.userId)),X(o)})),videoRenderEpics17:(e,t)=>se(e,16131).pipe(z(r=>r.payload.body.ssrc!==void 0),de(()=>{const{media:{videoDecodeStatus:r,videoEncodeStatus:n}}=t.value;Lr("video",n,r).subscribe(i=>{let[o,s]=i;const{video:{subscriptionStatus:a}}=t.value;o&&a.encode&&$i.subscribeToQos([mr.VideoEncode],as),s&&(a.decode&&$i.subscribeToQos([mr.VideoDecode],as),a.detailed&&$i.enableVideoObserver(!0))})}),_e(re)),videoRenderEpics18:(e,t)=>e.pipe(he(`${Su}`,`${Sm}`),z(()=>{const r=t.value.video.renderedVideoList.length;return[0,1].includes(r)}),de(()=>{const r=t.value.video.renderedVideoList.length;r===1?$i.enableVideoObserver(!0,!0):r===0&&$i.enableVideoObserver(!1)}),_e(re)),videoRenderEpics19:(e,t)=>Re(e,Z.CurrentDecodeVideoQuality).pipe(G(r=>{const{payload:{data:n}}=r,{video:{renderedVideoList:i,videoAttachments:o}}=t.value,s=[],{ssrc:a,width:l,height:u}=n,d=u?l/u:0,c=i.filter(p=>sn(p.userId,a));if(c.some(p=>p.aspectRatio&&Math.abs(p.aspectRatio-d)>.2)){const p=c.filter(h=>h.canvasId===rc);if(p.length>0){const h=o[`${a}`];h&&h.every(m=>{if(m){const{clientWidth:f,clientHeight:v}=m,g=v?f/v:0;return Math.abs(g-d)<=.2}return!0})&&s.push(Su({userId:a,key:pa,canvasId:rc,aspectRatio:d}))}p.length===c.length&&s.length!==0||T(dD,{userId:a,aspectRatio:d})}return X(s)})),videoRenderEpics20:(e,t)=>Re(e,Z.SyncRendererTypeResponse).pipe(G(r=>{const{payload:{data:{rendererType:n}}}=r,{video:{rendererType:i}}=t.value,o=[];return i!==n&&o.push(TN(n)),X(o)}))},yz=hn(vz,gz,{vbEpics0:e=>Re(e,[Z.VbModelPreloadingOk,Z.VbModelPreloading_3S,Z.VbModelPreloading_10S,Z.VbSettingParaError]).pipe(G(t=>{const{payload:{type:r,data:n}}=t,i=[];return[Z.VbModelPreloadingOk,Z.VbModelPreloading_3S,Z.VbModelPreloading_10S].includes(r)?(i.push(qb(!0)),T(rm,!0),r===Z.VbModelPreloading_10S&&console.warn("Virtual Background is taking longer than expected to load.")):r===Z.VbSettingParaError&&(n===Qk.VBModelNotMatch?(T(rm,!1),i.push(qb(!1))):(T(ub,!1),i.push(bm(!1)))),X(i)})),vbEpics1:e=>Re(e,Z.StartVideoStreamInVbSettingSuccess).pipe(ne(()=>(T(ub,!0),bm(!0)))),vbEpics2:e=>Re(e,Z.StartVideoStreamInMaskSettingSuccess).pipe(ne(()=>(T(fb,!0),_m(!0)))),vbEpics3:e=>Re(e,Z.MaskSettingParaError).pipe(ne(()=>(T(fb,!1),_m(!1))))},mz);class oi{constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.mediaOptions=void 0,this.inProgress=void 0,this.callbackList=[]}static getInstance(){return this.agentInstance===void 0&&(this.agentInstance=new oi),this.agentInstance}init(t,r){var n,i,o,s,a;if(!this.instance&&window.JsMediaSDK_Instance){const u={ivObj:{[Zt.AUDIO_ENCODE]:void 0,[Zt.VIDEO_ENCODE]:void 0,[Zt.SHARING_ENCODE]:void 0}};this.instance=new window.JsMediaSDK_Instance(u)}this.mediaWorkersPath=$k(t,!1),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=r,(n=this.instance)===null||n===void 0||n.JsMediaSDK_PreLoad(this.mediaWorkersPath,this.onMediaSDKCallback,r);const l=hu((i=this.mediaOptions)===null||i===void 0?void 0:i.enableMultiDecodeVideoWithoutSAB);(o=this.instance)===null||o===void 0||o.setPropsBeforeInit({callback:this.onMediaSDKCallback,audioWorkerPath:(s=this.mediaWorkersPath)===null||s===void 0?void 0:s.audioWorkletPath,isEnableListenInitEvent:!0}),(a=this.instance)===null||a===void 0||a.initVideoEncode(this.mediaWorkersPath,"",0,!1,"",0,l,!1,!1,!0,!0,!1,!0),this.inProgress=!0}onMediaSDKCallback(t,r){this.callbackList.length>0&&this.callbackList.forEach(n=>n(t,r))}registerCallback(t){this.callbackList.push(t)}unregisterCallback(t){this.callbackList=this.callbackList.filter(r=>r!==t)}async destroy(){var t;this.callbackList=[],await((t=this.instance)===null||t===void 0?void 0:t.destroy()),this.instance=null,this.inProgress=!1}disconnect(){var t,r;(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(17,{}),(r=this.instance)===null||r===void 0||r.JsMediaSDK_UnInit()}startVirtualBackgroundSetting(t,r,n,i,o,s){var a;let l=arguments.length>6&&arguments[6]!==void 0&&arguments[6];(a=this.instance)===null||a===void 0||a.Notify_MeidaSDK(91,{canvas:t,bgdom:r,width:o,height:s,ssid:0,VideoSelectValue:i==="default"?null:i,disableOriginalRatio:l,usingFacingMode:["user","environment"].includes(i)})}updateVirtualBackgroundImage(t){var r;(r=this.instance)===null||r===void 0||r.Notify_MeidaSDK(92,{bgdom:t})}stopVirtualBackgroundSetting(){var t;let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(93,{isSwitch:r})}startMaskSetting(t,r,n,i,o,s,a,l,u){var d;(d=this.instance)===null||d===void 0||d.Notify_MeidaSDK(62,{canvas:t,maskdom:null,bgdom:null,dx:0,dy:0,dWidth:170,dHeight:170,width:1280,height:720,ssid:0,originWidth:379,originHeight:213,VideoSelectValue:o==="default"?null:o,usingFacingMode:["user","environment"].includes(o)})}stopMaskSetting(){var t;let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];(t=this.instance)===null||t===void 0||t.Notify_MeidaSDK(65,{isSwitch:r})}}oi.agentInstance=void 0;const r_="PREVIEW_VIDEO_ENCODE_SUCCESS",ay="PREVIEW_VIDEO_VB_MODEL_READY";async function n_(e,t,r,n){const{imageUrl:i,cropped:o,deviceId:s}=r,a=Do("__ZOOM_SDK_PREVIEW_VIRTUAL_BACKGROUND_CANVAS_@__");t.id||(t.id=a);let[l,u]=[640,360];if(Oe.isSupportSending720P()&&(l=1280,u=720),i&&Mm(n)){const d=await yp(i,o);return e.startVirtualBackgroundSetting(t,d,0,s??"default",l,u),d&&d!==Uu&&setTimeout(()=>{Vc(d)},0),"vb"}return e.startMaskSetting(t,null,null,0,s??"default",0,0,0,0),"mask"}class or{constructor(){this.previewMediaAgent=oi.getInstance(),this.state=void 0,this.eventHandler=(t,r)=>{switch(t){case Z.InitSuccessVideo:r===Wr.EncodeSuccess&&(or.isVideoEncoded=!0,T(r_));break;case Z.VbModelPreloadingOk:case Z.VbModelPreloading_3S:case Z.VbModelPreloading_10S:or.isVBModelReady=!0,T(ay,!0);break;case Z.VbSettingParaError:r===Qk.VBModelNotMatch&&(or.isVBModelReady=!1,T(ay,!1))}}}static setMediaOption(t){or.mediaOption=t}setup(){if(or.mediaOption){if(Oe.getInstance().inProgress)return Promise.resolve("");if(!oi.getInstance().inProgress){or.isVideoEncoded=void 0,or.isVBModelReady=void 0,this.previewMediaAgent.unregisterCallback(this.eventHandler);const{assetsPath:t,enforceMultipleVideos:r,enforceVirtualBackground:n}=or.mediaOption,i={...IL(t,r,n)};this.previewMediaAgent.init(t,i),this.previewMediaAgent.registerCallback(this.eventHandler)}return Promise.resolve("")}return Promise.reject({type:W,reason:"Cannot preview video with virtual background before `client.init` method."})}async startPreview(t,r){if(Oe.getInstance().inProgress){var n;n_(Oe.getInstance(),t,r,(n=or.mediaOption)===null||n===void 0?void 0:n.enforceVirtualBackground)}else{var i;let o;o=r.imageUrl?or.isVBModelReady!==void 0?X([or.isVBModelReady]):Ge(ay,1).pipe(ne(()=>!0)):X([!0]),(i=o)===null||i===void 0||i.subscribe(s=>{s&&(or.isVideoEncoded?X([!0]):Ge(r_,1)).subscribe(()=>{var a;n_(oi.getInstance(),t,r,(a=or.mediaOption)===null||a===void 0?void 0:a.enforceVirtualBackground).then(l=>{this.state={mode:l,canvas:t,vb:r}})})})}}async stopPreview(){var t;Oe.getInstance().inProgress?Oe.getInstance().stopVirtualBackgroundSetting():((t=this.state)===null||t===void 0?void 0:t.mode)==="vb"?oi.getInstance().stopVirtualBackgroundSetting():oi.getInstance().stopMaskSetting()}async updatePreview(t,r){const n=Oe.getInstance().inProgress?Oe.getInstance():oi.getInstance();var i;if(t)if(((i=this.state)===null||i===void 0?void 0:i.mode)==="mask"){var o;ae.isChrome?(await this.stopPreview(),await this.startPreview(this.state.canvas,{imageUrl:t,cropped:r,deviceId:(o=this.state.vb)===null||o===void 0?void 0:o.deviceId})):console.warn('use the `start` method with the virtual background image parameter instead of using `updateVirtualBackground` to preview the video." ')}else{const s=await yp(t,r);s&&(n.updateVirtualBackgroundImage(s),s!==Uu&&setTimeout(()=>{Vc(s)},0))}else n.updateVirtualBackgroundImage(null)}}or.mediaOption=void 0,or.isVideoEncoded=void 0,or.isVBModelReady=void 0;const{InitSuccessVideo:ly,InitSuccessAudio:uy,InitSuccessSharing:dy,InitFailedVideo:cy,InitFailedAudio:py,InitFailedSharing:hy,SharingHealthCheckFailed:i_,VideoHealthCheckFailed:Sz,AudioHealthCheckFailed:bz,AudioStreamMuted:o_}=Z,Kt=Xr(Oe.getInstance()),LV=Or.getInstance(),s_=LV.makeLogger(["Media Agent"]),lh=[],Ez={epics0:(e,t)=>e.pipe(he(`${qn}`),Be(()=>{const{meeting:{isMeetingReset:r}}=t.value;return e.pipe(Zr(e.pipe(he(`${Li}`),z(n=>{var i;return!((i=n.payload)!==null&&i!==void 0&&i.retry)}),xe(1))),he(`${Ho}`),xe(1),xo(n=>{var i;const{logger:o,media:{mediaConstraints:s,assetsPath:a},meeting:{zlkJwtToken:l,cv:u}}=t.value,{payload:{disableAqos:d,disableVqos:c}}=n,p=o!=null&&(i=o.options)!==null&&i!==void 0&&i.enable?Or.getInstance().makeLogger(["MEDIA SDK"]):void 0;return function(h){const{media:{patchedMediaSDKStatus:m}}=h;return m===xd.Loading?dr(Ge(Gh,1)):Promise.resolve()}(t.value).then(()=>{const h=[];let m=!c;const f=!d;return l&&xc(u,"1.3.0")<0&&(m=!1),h.push(ZP({audioQos:f,videoQos:m})),Kt.init(function(v){return v&&new Proxy(v,{get:(g,y)=>typeof y=="string"&&y==="error"?function(){try{var S;QL.report(arguments.length<=0?void 0:arguments[0],["MEDIA SDK",...(S=arguments.length<=1?void 0:arguments[1])!==null&&S!==void 0?S:[]],"error")}catch{}}:Reflect.get(g,y)})}(p)),h.push(ew(!0)),r&&s!==void 0&&a!==void 0&&h.push(YE()),h}).catch(()=>[])}))})),epics1:(e,t)=>e.pipe(he(`${qn}`),z(r=>{const{payload:{mediaSDKPath:n}}=r,{media:{skipJsMedia:i,patchJsMedia:o,assetsPath:s},meeting:{isMeetingReset:a}}=t.value;return!i&&fk(s)&&!!o&&!!n&&!a}),Be(r=>{const{payload:{mediaSDKPath:n}}=r,i=Rg(n);return X(new Promise((o,s)=>{const a=`${i}/${ba}`;"JsMediaSDK_Instance"in window&&(window.JsMediaSDK_Instance_backup=window.JsMediaSDK_Instance,delete window.JsMediaSDK_Instance),Ig(a,()=>{"JsMediaSDK_Instance_backup"in window&&delete window.JsMediaSDK_Instance_backup,s_.info(`patched media sdk url:${a}`),o("")},()=>{"JsMediaSDK_Instance_backup"in window&&(window.JsMediaSDK_Instance=window.JsMediaSDK_Instance_backup,delete window.JsMediaSDK_Instance_backup),s_.error(`cannot load patched media sdk :${a}`),s()})})).pipe(G(()=>(T(Gh),X([Vh(xd.Done),JP(i)]))),ui(()=>(T(Gh),X([Vh(xd.Done)]))),Bn(Vh(xd.Loading)))})),epics2:(e,t)=>tw(e,t).pipe(de(()=>{const{media:{assetsPath:r,mediaConstraints:n,fileWithVersion:i,enforceMultipleVideos:o,enforceVirtualBackground:s,isEnableDecoderInWorklet:a},meeting:{isAudioBridgeEnabled:l}}=t.value;if(Kt.notifySDKMeetingReady(),r&&n){const u={enableDecoderInWorklet:a,enableAudioBridge:l&&Gt()};Object.assign(u,IL(r,o,s)),Kt.setAssetsAndConstraint(r,n,i,u)}dl(t).pipe(Be(u=>X(f0.acquire().then(()=>u)))).subscribe(u=>{const{meeting:{svcUrl:d,meetingNumber:c,conId:p,e2eEncrypt:h,userId:m,isWebinar:f,enableWebtransport:v,webtransportPort:g,mediasdkConfig:y},media:{enableAudioQos:S,enableVideoQos:b,alternativeNameForVideoPlayer:R,adaptedABOptionForMediaSDK:w},video:{rendererType:O}}=t.value;u&&(Kt.connect({svcUrl:d,meetingNumber:c,conId:p,e2eEncrypt:h,isViewOnly:Xt(u.userRole),currentUserId:m,isWebinar:f,enableAudioQos:S,enableVideoQos:b,enableWebtransport:v,webtransportPort:g,rendererType:O,adaptedABOptionForMediaSDK:w,mediasdkConfig:y}),function(D){var U;let x="video-player";D.tagName&&(x=D.tagName,wr.dispatch("",{tagName:D.tagName}),Ua((U=D.mediaSDK)===null||U===void 0?void 0:U.call(D),`VPTN:${x}`));const P=`${x}-container`,I=D.sessionId||Kw();wr.get("renderCountMap").clear(),D.mediaSDK&&(wr.get("mediaSDKInstanceMap").set(Xc,D.mediaSDK),wr.get("mediaSDKInstanceMap").set(I,D.mediaSDK)),D.failover&&wr.dispatch("failover",void 0,D.sessionId||Xc),customElements.get(P)||customElements.define(P,qu),customElements.get(x)||customElements.define(x,Ku)}({mediaSDK:()=>Kt.instance,tagName:R,failover:"1"}))})}),Be(()=>As(r=>Kt.registerCallback(r),r=>Kt.unregisterCallback(r),(r,n)=>({type:r,data:n})).pipe(ne(r=>KP(r))))),epics3:e=>Re(e,[ly,uy,dy,cy,py,hy]).pipe(_L(t=>{const{payload:{type:r,data:n}}=t;if(r===uy||r===py){if(n===Wr.EncodeSuccess)return T(BD),qe(HS("success"));if(n===Wr.DecodeSuccess)return T(HD),qe(zS("success"));if(n===Wr.EncodeFailed)return T(KD),qe(HS("failed"));if(n===Wr.DecodeFailed)return T(qD),qe(zS("failed"))}else if(r===ly||r===cy){if(n===Wr.EncodeSuccess)return T(zD),qe(WS("success"));if(n===Wr.DecodeSuccess)return T(WD),qe(GS("success"));if(n===Wr.EncodeFailed)return T(QD),qe(WS("failed"));if(n===Wr.DecodeFailed)return T(JD),qe(GS("failed"))}else if(r===dy||r===hy){if(n===Wr.EncodeSuccess)return T(GD),qe(KS("success"));if(n===Wr.DecodeSuccess)return T(wb),qe(Lh("success"));if(n===Wr.EncodeFailed)return T(ZD),qe(KS("failed"));if(n===Wr.DecodeFailed)return T(YD),qe(Lh("failed"));if(r===dy&&n===void 0)return T(wb),qe(Lh("success"))}})),epics4:(e,t)=>Re(e,[ly,uy]).pipe(Be(()=>typeof navigator.mediaDevices=="object"?Wt(Qc(),Wt(Re(e,Z.StartVideoCaptureSuccess),Ot(navigator.mediaDevices,"devicechange"),Re(e,Z.UserGrantCaptureAudio).pipe(z(()=>!t.value.audio.isUserGrantCaptureAudio))).pipe(G(()=>Qc().pipe(de(()=>{setTimeout(()=>{T(XD)},50)}))))).pipe(fe(t),G(r=>{let[n,i]=r;const o=[LM(n.microphones),VM(n.speakers),Cw(n.cameras)];if(i.audio){const{audio:{activeMicrophone:l,activeSpeaker:u,microphoneDevicesList:d,speakerDevicesList:c},video:{cameraDevicesList:p,activeCamera:h}}=i,m=ye(i),{microphones:f,speakers:v,cameras:g}=n,y=d.filter(R=>f.findIndex(w=>w.deviceId===R.deviceId)===-1),S=c.filter(R=>v.findIndex(w=>w.deviceId===R.deviceId)===-1),b=p.filter(R=>g.findIndex(w=>w.deviceId===R.deviceId)===-1);if(y.length>0){if(y.some(R=>Nv(R,l,d))){const R=md(f);Kt.changeMicrophone("default",R==null?void 0:R.label,!(m==null||!m.muted)),o.push(Hc("default"))}}else if(l==="default"){const R=md(d),w=md(f);d.length>0&&(R==null?void 0:R.label)!==(w==null?void 0:w.label)&&Kt.changeMicrophone("default",w==null?void 0:w.label,!(m==null||!m.muted))}var s,a;S.length>0?S.some(R=>Nv(R,u,c))&&(Kt.changeSpeaker("default"),o.push(Mg("default"))):u==="default"&&c.length>0&&((s=md(c))===null||s===void 0?void 0:s.label)!==((a=md(v))===null||a===void 0?void 0:a.label)&&Kt.changeSpeaker("default"),b.length>0&&b.some(R=>Nv(R,h,p))&&(Kt.stopCaptureVideo(),o.push(Gc(ae.isAndroidOrIOSBrowser?Da.User:"default")))}return X(o)})):re)),epics5:(e,t)=>Mi(e,ot).pipe(de(r=>{const{type:n,payload:{body:i}}=r,o=n===`${Lo}`;if(i.add){const s=i.add.map(a=>({userid:a.id,sn:a.zoomID&&Hn(a.zoomID)}));if(!o){const{meeting:{gcmSessinKey:a}}=t.value;Kt.sendUserNodeList(s,a)}Kt.updateUserMediaSN({added:s,isFromMainSession:o,iVType:Zt.SHARING_DECODE}),o&&Kt.updateUserMediaSN({added:s,isFromMainSession:o,iVType:Zt.AUDIO_DECODE})}if(i.remove&&i.remove.length>0){if(!o){const{meeting:{gcmSessinKey:s}}=t.value;Kt.sendUserNodeList(i.remove.map(a=>({userid:a.id,bremove:!0})),s)}Kt.updateUserMediaSN({removed:i.remove.map(s=>s.id),isFromMainSession:o,iVType:Zt.SHARING_DECODE}),o&&Kt.updateUserMediaSN({removed:i.remove.map(s=>s.id),isFromMainSession:o,iVType:Zt.AUDIO_DECODE})}}),_e(re)),epics6:e=>Re(e,Z.AesGcmIvResponse).pipe(de(t=>{const{payload:{data:{workerType:r,iv:n}}}=t,i=Pe.get(tt.WebclientIVState);if(i){const o={...i,[r]:n};Pe.set(tt.WebclientIVState,o,We.SessionStorage)}}),_e(re)),epics7:e=>e.pipe(he(`${hl}`),z(t=>[tb,XA,iw].includes(t.payload.evt)),ne(t=>{const{payload:{evt:r,body:{encryptKey:n,additionalType:i}}}=t;return qP({type:r===tb?"audio":r===XA?"video":"sharing",encryptKey:n,additionalType:i})})),epics8:e=>e.pipe(he(`${XE}`),de(t=>{const{payload:r}=t;or.setMediaOption({assetsPath:r.assetsPath,enforceMultipleVideos:r.enforceMultipleVideos,enforceVirtualBackground:r.enforceVirtualBackground})}),_e(re)),epics9:e=>e.pipe(he(`${Lu}`,`${zf}`),de(()=>{oi.getInstance().inProgress&&(oi.getInstance().disconnect(),f0.watch(oi.getInstance().destroy()))}),_e(re)),epics10:e=>e.pipe(he(`${Lu}`,`${zf}`),Be(()=>"permissions"in navigator?["microphone","camera"].map(t=>{navigator.permissions.query({name:t}).then(r=>{const n=()=>{T(rM,{name:t,state:r.state})};n(),r.addEventListener("change",n),lh.push(()=>{r.removeEventListener("change",n)})}).catch(()=>{})}):re),_e(re)),epics11:e=>e.pipe(he(`${nw}`),z(t=>t.payload===Lt.Closed),de(()=>{lh.length>0&&(lh.forEach(t=>t()),lh.length=0)}),_e(re)),epics12:(e,t)=>Re(e,[i_,Sz,bz,cy,py,hy,o_]).pipe(G(r=>{var n,i;const{payload:{type:o,data:s}}=r;let a,l;if(o===o_){const u="audio";let[d,c]=[0,""];s?(d=fd.MicrophoneMuted,c="Your mic is muted in system or browser settings. Please open your settings to unmute and adjust the level."):(d=fd.AudioStreamMuted,c="Audio was interrupted by the system. Please click anywhere to resume playback.",l=jr(Ot(document,"click").pipe(xe(1)),Ot(document,"touchend").pipe(xe(1))).pipe(Zr(Pb())).pipe(Zr(Re(e,Z.AudioStreamUnmuted).pipe(xe(1))),de(()=>{(function(p,h){const{audio:{activeMicrophone:m,microphoneDevicesList:f}}=h,v=f.find(y=>y.deviceId===m),g=ye(h);p.changeMicrophone(m,v==null?void 0:v.label,!(g==null||!g.muted))})(Kt,t.value)}))),a={message:c,type:u,code:d}}else if(o===i_){let[u,d]=["",0];s===-129?(u="sharing",d=fd.SharingStreamFailed):[-130,-135].includes(s)?(u="video",d=fd.VideoStreamFailed):[-131,-136].includes(s)&&(u="audio",d=fd.AudioStreamFailed),a={message:"Oops! Something went wrong. Please close all browsers and rejoin the meeting.",type:u,code:d}}return LV.report(`active media failed. reason:${o}; message:${(n=a)===null||n===void 0?void 0:n.message}`,`${(i=a)===null||i===void 0||(i=i.type)===null||i===void 0?void 0:i.replace(/^./,u=>u.toUpperCase())} exception flow`),T(nM,a),l??X([])}),G(()=>re)),epics13:e=>se(e,4366).pipe(de(t=>{const{payload:r}=t;Kt.bypassMediaMessage(r)}),G(()=>re))},wz=hn(Ez),Iz={meeting:sH,socket:yH,participants:IH,media:_H},Az=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||NP;function a_(e){return function(t){for(var r=Object.keys(t),n={},i=0;i<r.length;i++){var o=r[i];typeof t[o]=="function"&&(n[o]=t[o])}var s,a=Object.keys(n);try{(function(l){Object.keys(l).forEach(function(u){var d=l[u];if(d(void 0,{type:$f.INIT})===void 0)throw new Error(zr(12));if(d(void 0,{type:$f.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(zr(13))})})(n)}catch(l){s=l}return function(l,u){if(l===void 0&&(l={}),s)throw s;for(var d=!1,c={},p=0;p<a.length;p++){var h=a[p],m=n[h],f=l[h],v=m(f,u);if(v===void 0)throw u&&u.type,new Error(zr(14));c[h]=v,d=d||v!==f}return(d=d||a.length!==Object.keys(l).length)?c:l}}({...Iz,...e})}function Q(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(s){o[s]=n[s]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},o),i&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),o.initializer===void 0?(Object.defineProperty(e,t,o),null):o}const lt=Symbol("store"),pe=Symbol("getState"),Et=Symbol("dispatch"),Jm=Symbol("additionFeatures"),K=Symbol("mediaContext");function J(e,t,r){const n=r.value;r.value=function(){const i=this[lt];if(i){const{meeting:{isOnHold:l,isMeetingReset:u,meetingStatus:d}}=i.getState();if(d!==Lt.Joined)return Promise.reject({type:vu,reason:"closed"});if(u)return Promise.reject({type:vu,reason:"reconnecting"});if(l)return Promise.reject({type:vu,reason:"on hold"})}for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n.apply(this,s)}}function Rt(e,t,r){const n=r.value;r.value=function(){const i=this[lt];if(i){const l=i.getState();if(!An(l))return Promise.reject({type:Sr,reason:"only host or co-host can do the operation"})}for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n.apply(this,s)}}function er(e,t,r){const n=r.value;r.value=function(){const i=this[lt];if(i){const l=i.getState();if(!RM(l))return Promise.reject({type:Sr,reason:"only host can do the operation"})}for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n.apply(this,s)}}function ue(e){return function(t,r,n){const i=n.value;n.value=function(){const o=this[lt];if(o&&o.getState()[e]===void 0)return Promise.reject({type:W,reason:`Module:${e} is not enabled`});for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return i.apply(this,a)}}}function l_(e){return function(t,r,n){const i=n.value;n.value=function(){const o=this[lt];if(o){const{meeting:{meetingOptions:u}}=o.getState();if(u[e]===!0)return Promise.reject({type:"OPERATION_LOCKED",reason:`${e} is locked`})}for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return i.apply(this,a)}}}let Ss=function(e){return e.Self="Self",e.Other="Other",e.Client="Client",e.Phone="Phone",e.Attendee="Attendee",e}({});function fy(e){return function(t,r,n){const i=n.value;n.value=function(o){const s=this[lt];if(s){const c=s.getState(),p=Array.isArray(e)?e:[e];let h=et(c).find(m=>m.userId===o);if(p.findIndex(m=>m===Ss.Attendee)>-1&&(h=gp(c).find(m=>m.userId===o)),!h)return Promise.reject({type:Te,reason:"no matching user"});{const{meeting:{userId:m}}=s.getState();for(let f=0;f<p.length;f++){const v=p[f];if(v===Ss.Other&&o===m)return Promise.reject({type:W,reason:"operation is not applicable to self"});if(v===Ss.Self&&o!==m)return Promise.reject({type:W,reason:"operation is only applicable to self "});if(v===Ss.Client&&ll(h.userType)||v===Ss.Phone&&!ll(h.userType))return Promise.reject({types:W,reason:"improper target client"})}}}for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];const d=[o,...l];return i.apply(this,d)}}}const my=Or.getInstance();function Rn(e,t){return function(r,n,i){const o=i.value;i.value=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];if(my.checkLaplace())try{var u;const d=my.makeLogger([e]),c=(u=t?a.map((p,h)=>t.includes(h+1)?Er(p):p):a)===null||u===void 0?void 0:u.map(p=>Hf(p));return d.info(`${n},params:${JSON.stringify(c)}`),o.apply(this,a).then(p=>(d.info(`${n} success`),p)).catch(p=>{let h=`${n},params:${JSON.stringify(c)},return failed,`;return typeof p=="object"&&(h=`${h},${p.type?`type:${p.type},`:""}${p.reason?`reason:${p.reason}`:""}`),my.report(h,`${e} exception flow`,"error"),Promise.reject(p)})}catch{}return o.apply(this,a)}}}function Vg(e,t,r){return function(n,i,o){const s=o.value;o.value=function(){for(var a,l,u=arguments.length,d=new Array(u),c=0;c<u;c++)d[c]=arguments[c];const p=d[t];let h=e;return Array.isArray(h)||(h=[h]),!h.some(m=>p instanceof m)||r&&!r.every(m=>!!p[m])?Promise.reject({type:Te,reason:`Expected to accept ${(a=h)===null||a===void 0?void 0:a.map(m=>m.name).join(" or ")}, but actual it is ${typeof p=="object"&&p!==null?(l=Object.getPrototypeOf(p))===null||l===void 0?void 0:l.constructor.name:p}`}):s.apply(this,d)}}}class co{constructor(t){this[lt]=void 0,this[Et]=void 0,this[pe]=void 0,this[Jm]=void 0,this[lt]=t,this[Et]=t.dispatch,this[pe]=t.getState}}const Cz=["userId","displayName","audio","isHost","avatar","bRaiseHand","bHold","bVideoOn","sharerOn","sharerPause","feedback","bLocalRecord","strPronoun","sdkKey","audioConnectionStatus","caps","bAllowISORecord","bVideoConnect","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","bShareToBORooms","bid",{from:"bInFailover",to:"isInFailover"},{from:"userGUID",to:"userGuid"},{from:"bGuest",to:"isGuest"},{from:"sharerPause",to:"sharePause"},{from:"bCoHost",to:e=>({isCoHost:!!e})},{from:"muted",to:(e,t)=>({muted:t!=null&&t.isSpeakerOnly||(t==null?void 0:t.audio)===""?void 0:e})},{from:"userType",to:(e,t)=>{const r=ll(e),n={isPhoneUser:r};return r&&t!=null&&t.phoneNumber&&Object.assign(n,{phoneNumber:t.phoneNumber}),n}}];function Za(e){return Cz.reduce((t,r)=>{const n=typeof r=="string"?r:r.from,i=function(o,s,a){if(typeof o=="string")return{[`${o}`]:s};if(typeof o=="object"&&o.from!==void 0){const{to:l}=o;return typeof l=="string"?{[`${l}`]:s}:l(s,a)}}(r,e[n],e);return{...t,...i}},{})}function VV(){const{isSupportAudioWorklet:e,isSupportEssentialAudioAndVideoAbility:t,isAndroidOrIOSBrowser:r,isSupportSendScreenSharing:n}=ae,i=t&&e||r,o=t&&navigator.mediaDevices!==void 0&&navigator.mediaCapabilities!==void 0,s=typeof"".replaceAll=="function";return{audio:s&&i,video:s&&o,screen:s&&t&&n}}const eI=e=>{let{breakoutRoom:{mainSessionAttendeeList:t}}=e;return t},xV=e=>{let{meeting:{zoomId:t}}=e;return t},UV=e=>{let{breakoutRoom:{isHugeBO:t}}=e;return t},Gn=dt([e=>{let{breakoutRoom:{controlStatus:t}}=e;return t},e=>{let{breakoutRoom:{currentRoom:{status:t}}}=e;return t},e=>{let{breakoutRoom:{currentRoom:{boId:t}}}=e;return t}],(e,t,r)=>!(e!==Ve.InProgress&&e!==Ve.Closing||t!==Ee.InRoom&&t!==Ee.TimeUp||!r)),gy=dt([e=>{let{breakoutRoom:{rooms:t}}=e;return t},qo,xV,eI,Gn,UV],(e,t,r,n,i,o)=>{const s=e.reduce((a,l)=>{const{attendeeGuidList:u}=l;return a.concat(u)},[]);return(i?n:t).filter(a=>!a.bHold&&!a.isHost&&a.zoomID!==r&&!a.bid&&!s.includes(a.userGUID)&&(!o||TL(a.caps)))}),_z=dt([Gn,eI,qo,xV,UV],(e,t,r,n,i)=>(e?t:r).filter(o=>!o.bHold&&!o.isHost&&o.zoomID!==n&&!o.bid&&(!i||TL(o.caps)))),ia=dt([Gn,eI,qo],(e,t,r)=>e?t.find(n=>n.isHost):r.find(n=>n.isHost));var u_,d_,c_,qt;const oa=He.createAgent();let Rz=(u_=fy(Ss.Other),d_=fy(Ss.Other),c_=fy(Ss.Other),qt=class extends co{constructor(e){super(e),this.modules=void 0,this.useSDK=void 0,this.useSDK=!1,this.modules=new Map}initWithSDK(e,t,r){return this.useSDK=!0,this.init(e,t,r)}init(e,t,r){const{audio:n,video:i}=VV();if(!n||!i)return console.error("https://developers.zoom.us/docs/video-sdk/web/browser-support"),Promise.reject({type:W,reason:"Please update to the latest Chrome, Edge, Safari, or Firefox, as your current browser doesn't support audio/video. Retry after the upgrade."});const{[Et]:o,[lt]:s}=this;let a=Sa;const l=(r==null?void 0:r.fileWithVersion)||!1;let u="en-US",d=`${Sa}/${ba}`;if(r){const{dependentAssets:c,additionalFeatures:p,constraints:h,language:m,webEndpoint:f}=r;m&&(u=m),f&&function(v){Ag=nk(v,{hostname:!0})}(f),c===bv.CDN||c===xh?(a=xh,d=`${xh}/${ba}`):c===bv.Global||c===Sa?(a=Sa,d=`${Sa}/${ba}`):c===bv.CN||c===Uh?(a=Uh,d=`${Uh}/${ba}`):c&&/^https?:\/\//.test(c)&&(a=Rg(c),d=l?`${a}/1501_js_media.min.js`:`${a}/${ba}`),p&&Array.isArray(p)&&p.forEach(v=>{if(this[Jm][v]&&s.getState()[v]===void 0){const{epic:g,reducer:y,Client:S}=this[Jm][v];s.injectReducer(v,y),s.injectEpic(g);const b=new S(s);this.modules.set(v,b)}}),h!=null&&h.audio&&s.getState().audio===void 0&&(s.injectReducer("audio",DH),s.injectEpic(LH)),h!=null&&h.video&&s.getState().video===void 0&&(s.injectReducer("video",fz),s.injectEpic(yz)),h!=null&&h.screen&&s.getState().share===void 0&&(s.injectReducer("share",q3),s.injectEpic(Z3))}return o(mk({apiKey:e,signature:t,language:u,useSDK:this.useSDK})),o(XE({mediaConstraints:r&&r.constraints||{},assetsPath:a,fileWithVersion:l,enforceMultipleVideos:r==null?void 0:r.enforceMultipleVideos,enforceVirtualBackground:r==null?void 0:r.enforceVirtualBackground,skipJsMedia:r==null?void 0:r.skipJsMedia,patchJsMedia:r==null?void 0:r.patchJsMedia,alternativeNameForVideoPlayer:r==null?void 0:r.alternativeNameForVideoPlayer})),(r==null?void 0:r.stayAwake)!==void 0&&o(Tk(r.stayAwake)),(r==null?void 0:r.quicklyLeaveMeeting)!==void 0&&o(kk(r.quicklyLeaveMeeting)),new Promise((c,p)=>{r!=null&&r.skipJsMedia?c(""):Ig(d,()=>{c("")},()=>{p({type:Te,reason:"dependent assets are not accessible"})})})}on(e,t){((r,n)=>{const i=pC[r];if(i){const o=fa.get(r);if(o)o.push(n),fa.set(r,o);else{const s=[n];fa.set(r,s);const a=Wt(...i.map(l=>{const{event:u,payload:d}=l;return Ot(oc,u).pipe(ne(c=>d(c)),_r(Hs))})).subscribe(l=>{const u=fa.get(r);u&&u.forEach(d=>{d(l)})});Rb.push(a)}}})(e,t)}off(e,t){((r,n)=>{if(pC[r]){const i=fa.get(r);if(Array.isArray(i)){const o=i.filter(s=>s!==n);fa.set(r,o)}}})(e,t)}getFeatureModule(e){return this.modules.get(e)}leave(){const{[pe]:e,[Et]:t}=this,{socket:{zoomSocketStatus:r}}=e();return r===Je.Connected||r===Je.Connecting?t(Vu()):t(QS()),dr(Nt(500).pipe(_n("")))}end(){const{[pe]:e,[Et]:t}=this;return e().socket.zoomSocketStatus==="connected"?(t(xu()),dr(Nt(500).pipe(de(()=>{vw()}),_n("")))):Promise.resolve("")}changeName(e,t){const r=this[lt].getState(),{meeting:{bAllowAttendeeRename:n}}=r,i=ye(r),o=Xt(i.userRole),s=An(r);if(o)return Promise.reject({type:Sr});if(t&&t!==(i==null?void 0:i.userId)){if(s){const{participants:{attendeesList:a}}=r,l=a.find(u=>u.userId===t);if(l)return oa.rename(t,bt(e),bt(l.displayName)),qp({userId:t,key:"displayName"},u=>u.displayName===e);{const u=gp(r).find(d=>d.userId===t);if(u){const d=fl.getInstance();return oa.rename(u.userId,bt(e),bt(u.displayName)),d.rename(u.jid,e),Ce(hs,c=>{const p=c.find(h=>h.jid===u.jid);return p&&p.displayName===e})}return Promise.reject({type:Te,reason:"no matching user"})}}return Promise.reject({type:Sr})}return e===i.displayName?Promise.resolve():s||n?(oa.rename(i.userId,bt(e),bt(i.displayName)),Ce(vr,a=>a.displayName===e)):Promise.reject({type:Sr,reason:"host disallow rename themselves"})}makeHost(e){return oa.assignHost(e,!1),qp({userId:e,key:"isHost"},t=>t.isHost===!0)}makeCoHost(e){const t=this[lt].getState(),r=et(t).find(n=>n.userId===e);return(r==null?void 0:r.bCoHost)===!0?Promise.reject({type:Te,reason:`user:[${e}] is already co-host `}):(oa.assignHost(e,!0),qp({userId:e,key:"bCoHost"},n=>n.bCoHost===!0))}revokeCoHost(e){const t=this[lt].getState(),r=et(t).find(n=>n.userId===e);return(r==null?void 0:r.bCoHost)===!1?Promise.reject({type:Te,reason:`user:[${e}] is not a co-host`}):(oa.revokeCoHost(e),qp({userId:e,key:"bCoHost"},n=>n.bCoHost===!1))}reclaimHost(){const e=this[pe](),{meeting:{isOriginHost:t}}=e,r=ye(e);return r!=null&&r.isHost?Promise.resolve(""):t?(oa.reclaimHost(r.userId,!1),Ce(vr,n=>n.isHost===!0)):Promise.reject({type:Sr,reason:"You are not the origin host"})}isHost(){const e=this[lt].getState(),t=ye(e);return!!t&&t.isHost}isCoHost(){const e=this[lt].getState(),t=ye(e);return!!t&&!!t.bCoHost}isOriginHost(){const{meeting:{isOriginHost:e}}=this[pe]();return e}getCurrentUserInfo(){const e=this[lt].getState(),t=ye(e);if(t){const r=Za(t);if(e.meeting.isWebinar&&Xt(t.userRole)){const{audio:n}=e,i=n==null?void 0:n.isAllowToTalk;Object.assign(r,{isAllowToTalk:i})}if(e.breakoutRoom&&Gn(e)){const{breakoutRoom:{currentRoom:{boId:n}}}=e;Object.assign(r,{bid:n})}return r}return null}getParticipantsList(){const e=this[lt].getState(),{meeting:{meetingStatus:t}}=e,r=ye(e);if(t===Lt.Joined&&r&&!r.bHold){var n;const i=e.breakoutRoom&&Gn(e)?(n=e.breakoutRoom)===null||n===void 0||(n=n.currentRoom)===null||n===void 0?void 0:n.boId:"";return et(e).map(o=>{const s=Za(o);return i&&Object.assign(s,{bid:i}),s})}return[]}getAssistantsList(){const e=this[lt].getState(),{meeting:{meetingStatus:t}}=e,r=ye(e);return t===Lt.Joined&&r?xB(e).map(n=>({userId:n.userId,displayName:n.displayName,isNewAst:!0})):[]}getMeetingHost(){var e;const t=this[pe]();let r=Nb(t);return r||((e=t.breakoutRoom)===null||e===void 0?void 0:e.currentRoom.status)!==Ee.InRoom||(r=t.breakoutRoom.mainSessionAttendeeList.find(n=>n.isHost)),r!==void 0?Za(r):null}getMeetingInfo(){const{meeting:{meetingStatus:e,isOnHold:t,meetingNumber:r,passWord:n,userName:i,userEmail:o,meetingTopic:s,meetingOptions:a,encType:l,region:u,network:d,topic:c,zlkJwtToken:p,userId:h,lang:m,inviteEmail:f,meetingId:v,participantID:g,h323Password:y,recordingDisclaimer:S,recordingDisclaimerForRecorder:b,wrInfo:R,meetingInfo:w,isNewJoinFlow:O,chatModerationPolicy:D}}=this[pe](),U=e===Lt.Joined&&!t;if(p)return{topic:c,password:n,userName:i,isInMeeting:U,userId:h,meetingId:v};{let x="";return l===0?x="None":l===1?x="AES ECB":l===2&&(x="AES GCM"),{meetingNumber:r,password:n,userName:i,userEmail:o,inviteEmail:f,meetingTopic:s,encryptionType:x,region:u,network:d,isInMeeting:U,userId:h,lang:m,webEndpoint:ik(),meetingId:v,participantId:g,telPwd:y,recordingInfo:{recordingDisclaimer:S,recordingDisclaimerForRecorder:b,isUserEnableRecordingReminder:a==null?void 0:a.isUserEnableRecordingReminder},wrInfo:Object.assign({},R,{isNew:O}),scheduleInfo:w,chatModerationPolicy:D}}}},Q(qt.prototype,"end",[er,J],Object.getOwnPropertyDescriptor(qt.prototype,"end"),qt.prototype),Q(qt.prototype,"changeName",[J],Object.getOwnPropertyDescriptor(qt.prototype,"changeName"),qt.prototype),Q(qt.prototype,"makeHost",[u_,er,J],Object.getOwnPropertyDescriptor(qt.prototype,"makeHost"),qt.prototype),Q(qt.prototype,"makeCoHost",[d_,er,J],Object.getOwnPropertyDescriptor(qt.prototype,"makeCoHost"),qt.prototype),Q(qt.prototype,"revokeCoHost",[c_,er,J],Object.getOwnPropertyDescriptor(qt.prototype,"revokeCoHost"),qt.prototype),Q(qt.prototype,"reclaimHost",[J],Object.getOwnPropertyDescriptor(qt.prototype,"reclaimHost"),qt.prototype),qt);const Tz=He.createAgent(),Oz=fl.getInstance(),p_=(e,t,r)=>{const n=t==null?void 0:t.userId;if(e==null||!e.zoomID||t==null||!t.displayName||n===e.userId)return{type:Te,reason:"invalid target user"};const{chat:{chatPrivilege:i,panelistChatPrivilege:o},meeting:{isWebinar:s}}=r,a=An(r),l=t.isHost||t.bCoHost;let u=!1;if(!a){if(s)if(Xt(e.userRole))(i===ft.NoAttendee||i===ft.AllPanelist&&n!==rt.Panelist||i===ft.All&&n!==rt.All&&n!==rt.Panelist)&&(u=!0);else{const d=Xt(t==null?void 0:t.userRole);(o===ol.Invalid||o===ol.AllPanelist&&(d||n===rt.All))&&(u=!0)}else(i===ft.NoAttendee||i===ft.Host&&!l||n===rt.SilentModeUsers||i===ft.EveryonePublicly&&n!==rt.All&&!l)&&(u=!0);if(u)return{type:Sr,reason:"Insufficient chat privilege"}}return null};function h_(e,t){if(t===rt.All)return Vd;if(t===rt.Panelist)return Zl;if(t===rt.SilentModeUsers)return ZF;{const{meeting:{isWebinar:r},participants:{xmppAttendeeList:n,attendeesList:i}}=e;return r?i.find(o=>o.userId===t)||n.find(o=>o.userId===t):i.find(o=>o.userId===t)}}function bd(e,t,r){if(r!=null&&r.host)return[Nb(e),...vC(e)].filter(n=>(n==null?void 0:n.userId)!==t).map(n=>({userId:n==null?void 0:n.userId,displayName:n==null?void 0:n.displayName,isHost:n==null?void 0:n.isHost,isCoHost:n==null?void 0:n.bCoHost}));{let n=[Nb(e),...vC(e),...e.participants.attendeesList.filter(i=>!(i.bCoHost||i.isHost||i.bHold))];if(r!=null&&r.includeAttendee){const i=gp(e).filter(o=>!ll(o.userType));n=[...n,...i]}return n.filter(i=>i!==void 0&&i.userId!==t).map(i=>({userId:i==null?void 0:i.userId,displayName:i==null?void 0:i.displayName,isHost:i==null?void 0:i.isHost,isCoHost:i==null?void 0:i.bCoHost}))}}function uh(e){const{text:t,destId:r,sn:n,attendeeId:i}=e;return ur.beginEncrypt({text:t,type:Rr.RWG_CHAT}).then(o=>{Tz.chat(o,r,n,i)})}function tu(e,t){const{chat:{chatHistory:r}}=t;return r.find(n=>{var i;return((i=n.file)===null||i===void 0||(i=i.upload)===null||i===void 0?void 0:i.uniqueId)===e})}function jV(e,t){const{meeting:{isWebinar:r},participants:{attendeesList:n}}=t,{destNodeID:i,senderName:o,attendeeNodeID:s}=e,a=n.find(p=>p.userId===i),l=e.sn?e.sn:a==null?void 0:a.zoomID,u=o?Vi(o):a==null?void 0:a.displayName;let d,c="";if(s===rt.SilentModeUsers)return{sender:{name:"Host",userId:i},receiver:{name:"Everyone (in Waiting Room)",userId:s},timestamp:new Date().getTime()};if(s===rt.All)c=r?"All panelists and attendees":"Everyone";else if(s===rt.Panelist)c="All panelists";else{if(r){const p=gp(t).find(h=>h.userId===s);p&&(c=p.displayName)}if(!c){const p=n.find(h=>h.userId===s);p&&(c=p.displayName,d=p.userGUID)}}return{sn:l,sender:{name:u,userId:i,userGuid:a==null?void 0:a.userGUID,avatar:a==null?void 0:a.avatar},receiver:{name:c,userId:s,userGuid:d},timestamp:new Date().getTime()}}function Pz(e){var t;const[r]=e.split(".").reverse();return(t=XF[r])!==null&&t!==void 0?t:""}function $V(e,t){const r=[];for(let n=e.length-1;n>=0;n--){const i=e[n];if(!i.file&&(!i.id&&i.sender.userId===t.userId&&[rt.All,rt.Panelist,rt.IndividualCcPanelist,t.destNodeID].includes(i.receiver.userId)&&r.unshift(i),i.id))break}return r.length>0?r[0]:null}const FV=Or.getInstance(),BV=FV.makeLogger(["File Transfer"]);function HV(e,t,r){const{name:n,size:i}=e,{meeting:{reportDomain:o,svcUrl:s,conId:a}}=r;return`https://${o}${t}?${new URLSearchParams({filename:n,filesize:i,rwg:s,cid:a}).toString()}`}function zV(e,t){return t.fileObj?`${e}/zoomfile/download?objkey=${t.fileObj}&business=meeting`:`${e}/file/${t.fileID}?business=meeting`}function Qu(e,t){return{fileName:e.name,fileSize:e.size,receiverId:t==null?void 0:t.userId,receiverGuid:t==null?void 0:t.userGuid}}function us(e,t,r){FV.report(`${e}. file name:${Er(t.name)},file size:${t.size}, ${"type"in t?`file type:${t.type}`:""}, error:${r.name};${r.message}`,["File Transfer"])}function vy(e){var t,r,n;return{id:e.id,fileName:(t=e.file)===null||t===void 0?void 0:t.name,fileSize:(r=e.file)===null||r===void 0?void 0:r.size,fileUrl:(n=e.file)===null||n===void 0?void 0:n.fileUrl,senderId:e.sender.userId,senderGuid:e.sender.userGuid}}function WV(e,t,r){return new Promise((n,i)=>{const o=new FileReader;o.readAsArrayBuffer(e.slice(t,r)),o.onload=s=>{var a;return n((a=s.target)===null||a===void 0?void 0:a.result)},o.onerror=s=>i(s)})}async function GV(e,t){let[r,n]=[e.size,0];t!=null&&(r=Math.min(fr.ChunkSize,e.size-t),n=t);const i=e.size-n<=fr.ChunkSize,o=Math.ceil(r/fr.EncodeBlockSize);try{return function(s){const a=s.reduce((d,c)=>d+c.byteLength,0),l=new Uint8Array(a);let u=0;for(const d of s)l.set(new Uint8Array(d),u),u+=d.byteLength;return l}(await Promise.all(Array.from({length:i?Math.max(o-1,1):o},(s,a)=>({start:a*fr.EncodeBlockSize+n,end:(i&&a===o-2?a+2:a+1)*fr.EncodeBlockSize+n})).map(async s=>{let{start:a,end:l}=s;try{const u=await WV(e,a,l);return u?await ur.beginEncrypt({text:new Uint8Array(u),type:Rr.CHAT_FILE}):Promise.reject(null)}catch(u){return us(`encrypt file buffer error. offset:${t},`,e,u),Promise.reject(u)}})))}catch(s){console.warn(s)}return null}function df(e,t,r,n){return n.pipe(he(`${qc}`,`${Li}`),z(i=>{if(i.type===`${Li}`)return!0;const{payload:{uniqueId:o,fileName:s,userId:a}}=i;return t===o&&e.name===s&&r.userId===a}),xe(1),de(i=>{BV.info(`Cancel file upload. file name:${Er(e.name)},file size:${e.size},receiver id:${r.userId}`),T(sl,{...Qu(e,r),progress:0,status:Ht.Cancel,retryToken:i.type===`${qc}`?t:void 0})}))}function cf(e,t){if(e!=null&&e.file){const{file:r,receiver:n}=e,{upload:{chunkIndex:i,totalChunks:o,uniqueId:s}}=r;return T(sl,{...Qu(t,n),progress:Math.floor((i??0)/(o??1)*100),status:Ht.Fail,retryToken:s}),X([ir({upload:{status:Ht.Fail,progress:0,uniqueId:s}}),Ow({uniqueId:s,file:t})])}return re}function pf(e,t){return T(sl,{...Qu(e),progress:0,status:Ht.Fail}),qe(ir({upload:{status:Ht.Fail,progress:0,uniqueId:t}}))}async function f_(e,t,r,n){const i=HV(e,"/wc/fileupload",n.value),o=new FormData;try{const s=await GV(e),a=tu(t,n.value);if(s&&a){o.append("file",new File([s],e.name));const{meeting:{zmk:l}}=n.value,{receiver:u}=a;return ii({url:i,method:"POST",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:l},crossDomain:Oi(i),body:o,includeUploadProgress:!0}).pipe(Zr(df(e,t,u,r)),G(d=>{const{type:c,loaded:p,responseHeaders:h,total:m}=d;let f=0,v=Ht.InProgress;const g={upload:{uniqueId:t}},y=[];if(c==="upload_loadstart")f=0;else if(c==="upload_progress")f=Math.floor(p/m*100*.9);else if(c==="upload_load")f=90;else if(c==="download_load"){var S,b;f=100,v=Ht.Success;const{chat:{fileServerDomain:R}}=n.value,w=(S=h["zoom-file-id"])===null||S===void 0?void 0:S.trim(),O=(b=h["zoom-file-obj"])===null||b===void 0?void 0:b.trim(),D=zV(R,{fileObj:O});Object.assign(g,{fileID:w,fileObj:O,fileUrl:D})}return Object.assign(g.upload,{progress:f,status:v}),(f>0||c==="upload_loadstart")&&(T(sl,{...Qu(e,u),progress:f,status:v}),y.push(ir(g))),X(y)}),ui(d=>(console.warn(d),us("Upload small file error.",e,d),cf(a,e))))}}catch(s){console.warn(s)}return pf(e,t)}const kz=(()=>{const e=new EL;return t=>async function(){await e.acquire(),t(...arguments),setTimeout(()=>{e.release()},3e3)}})(),Dz=function(e){const t=["chatFileTransfer"];return new Proxy(e,{get:(r,n)=>typeof n=="string"&&t.includes(n)?function(){return kz(r[n].bind(r))(...arguments)}:Reflect.get(r,n)})}(He.createAgent()),m_={chatHistory:[],chatPrivilege:ft.All,panelistChatPrivilege:ol.AllPanelist,isAllowAttendeeChat:!0,isFileTransferEnable:!0,isEnableFileTransferEncrypted:!0,fileTransferFileType:[],fileDownloadPromptIgnoreList:[],fileTransferSizeLimit:0,fileServerDomain:"",failedFileTransfer:{}},Mz=pn({[`${Kc}`]:k((e,t)=>{let{payload:r}=t;e.chatHistory.push(r)}),[`${Rw}`]:k((e,t)=>{let{payload:r}=t;e.chatPrivilege=r}),[`${DN}`]:k((e,t)=>{let{payload:r}=t;e.panelistChatPrivilege=r}),[`${NN}`]:k((e,t)=>{let{payload:r}=t;e.isAllowAttendeeChat=r}),[`${LN}`]:k((e,t)=>{let{payload:r}=t;const{destNodeID:n,msgID:i,userId:o}=r,s=$V(e.chatHistory,{userId:o,destNodeID:n});s&&Object.assign(s,{id:i})}),[`${tf}`]:k((e,t)=>{let{payload:r}=t;const{msgId:n}=r,i=e.chatHistory.findIndex(o=>o.id===n);i>=0&&e.chatHistory.splice(i,1)}),[`${VN}`]:k((e,t)=>{let{payload:r}=t;Object.assign(e,r)}),[`${Tw}`]:k((e,t)=>{let{payload:r}=t;const{originFile:n,...i}=r;e.chatHistory.push(i)}),[`${ir}`]:k((e,t)=>{let{payload:r}=t;const{upload:n,download:i,originFile:o,...s}=r;if(n){var a;const{uniqueId:l,...u}=n,d=e.chatHistory.find(c=>{var p;return c.file&&((p=c.file.upload)===null||p===void 0?void 0:p.uniqueId)===l});d!=null&&(a=d.file)!==null&&a!==void 0&&a.upload&&(Object.assign(d.file.upload,{...u}),Object.assign(d.file,{...s}),d.file.upload.status===Ht.Success&&e.failedFileTransfer[d.file.upload.uniqueId]&&delete e.failedFileTransfer[d.file.upload.uniqueId])}else if(i){const{id:l,fileUrl:u}=s,d=e.chatHistory.find(c=>{var p;return c.id===l&&((p=c.file)===null||p===void 0?void 0:p.fileUrl)===u});d!=null&&d.file&&(d.file.download?Object.assign(d.file.download,{...i}):Object.assign(d.file,{download:i}))}}),[`${qc}`]:k((e,t)=>{let{payload:r}=t;const{uniqueId:n,fileName:i,userId:o}=r,s=e.chatHistory.find(l=>l.file&&l.file.name==i&&l.file.upload.uniqueId===n&&l.file.upload.status===Ht.InProgress&&l.receiver.userId===o);var a;s!=null&&s.file&&Object.assign((a=s.file)===null||a===void 0?void 0:a.upload,{status:Ht.Cancel,progress:0})}),[`${Ow}`]:k((e,t)=>{let{payload:r}=t;const{uniqueId:n,file:i}=r;e.failedFileTransfer[`${n}`]||Object.assign(e.failedFileTransfer,{[`${n}`]:i})}),[`${xN}`]:k((e,t)=>{let{payload:r}=t;const{fileID:n,msgID:i,senderId:o}=r,s=e.chatHistory.find(a=>{var l;return((l=a.file)===null||l===void 0?void 0:l.fileID)===n&&a.sender.userId===o});s&&Object.assign(s,{id:i})}),[`${Pw}`]:k((e,t)=>{let{payload:r}=t;const{id:n,fileUrl:i}=r,o=e.chatHistory.find(a=>{var l,u;return a.id===n&&((l=a.file)===null||l===void 0?void 0:l.fileUrl)===i&&((u=a.file)===null||u===void 0?void 0:u.download.status)===Io.InProgress});var s;o!=null&&o.file&&Object.assign((s=o.file)===null||s===void 0?void 0:s.download,{status:Io.Cancel,progress:0})}),[`${MN}`]:()=>({...m_})},m_);var Pt;const Ed=He.createAgent();let Nz=(Pt=class extends co{send(e,t){if(!e)return Promise.reject({type:Te,reason:"Text is empty"});const{[pe]:r,[Et]:n}=this,i=r(),o=ye(i),s=h_(i,t),a=p_(o,s,i);if(a)return Promise.reject(a);const{meeting:{isWebinar:l,encType:u}}=i,d=u===fp.AES_GCM;let c=Promise.resolve(),p=!1;const h=l&&Xt(s.userRole);return t===rt.SilentModeUsers?Ed.chat(bt(e),t):l?h?8&~s.clientCap?(c=uh({text:e,destId:rt.Panelist,sn:o==null?void 0:o.zoomID,attendeeId:t}).then(()=>function(m){const{text:f,jid:v,isGCMEnabled:g}=m;return ur.beginEncrypt({text:f,type:Rr.XMPP_CHAT}).then(y=>{Oz.sendWebinarMseeage(y,v,rt.IndividualCcPanelist,g)})}({text:e,jid:s.jid,isGCMEnabled:d})),p=!0):c=uh({text:e,destId:rt.IndividualCcPanelist,sn:o==null?void 0:o.zoomID,attendeeId:t}):s&&(c=uh({text:e,destId:s.userId,sn:o==null?void 0:o.zoomID})):c=uh({text:e,destId:s.userId,sn:o==null?void 0:o.zoomID}),c.then(()=>{const m=function(f,v,g,y){const S=new Date().getTime(),b=performance.now();return{message:f,sender:{name:v.displayName,userId:v.userId,userGuid:v.userGUID,avatar:v.avatar},receiver:{name:g==null?void 0:g.displayName,userId:y?rt.IndividualCcPanelist:g==null?void 0:g.userId,userGuid:g==null?void 0:g.userGUID},timestamp:S,highResTimeStampForIdentification:b}}(e,o,s,h);return n(Kc(m)),p?(T(Wa,m),m):new Promise((f,v)=>{Ge(Wk).pipe(OP(5e3),DP(g=>m.highResTimeStampForIdentification!==g.identification||!([g.receiverId,rt.All,rt.Panelist].includes(t)||g.receiverId===rt.IndividualCcPanelist)),xe(1)).subscribe(g=>{const{msgId:y}=g,{highResTimeStampForIdentification:S,...b}=m,R={id:y,...b,...h&&{receiver:{name:s==null?void 0:s.displayName,userId:s==null?void 0:s.userId}}};T(Wa,R),f(R)},()=>{v({type:mw})})})})}setPrivilege(e){const t=this[pe](),{meeting:{isWebinar:r},chat:{chatPrivilege:n},breakoutRoom:i}=t;return n===e?Promise.resolve(""):(i==null?void 0:i.controlStatus)===Ve.InProgress&&Gn(t)?Promise.reject({type:W,reason:"Cannot update chat privilege in a subsession"}):!r&&!qF.includes(e)||r&&!QF.includes(e)?Promise.reject({type:Te,reason:"invalid privilege value of parameter"}):(Ed.setChatPriviledge(e),Ce(fu,o=>o.chatPrivilege===e))}setPanelistPrivilege(e){const t=this[pe](),{chat:{panelistChatPrivilege:r}}=t,n=JF[e];return r===n?Promise.resolve(""):Object.values(qf).includes(e)?(Ed.setPanelistChatPrivilege(e),Ce(fu,i=>i.panelistChatPrivilege===n)):Promise.reject({type:Te,reason:"Panelist privilege value is invalid"})}deleteMessage(e){const t=this[pe](),{chat:{chatHistory:r},meeting:{meetingOptions:n,userId:i}}=t;if(n!=null&&n.isEnableDeleteChatMsg){const o=An(t),s=r.find(a=>a.id===e);if(s){const{sender:a}=s;if(o)Ed.chatCmdReq(e,Kf.Delete);else{if(a.userId!==i)return Promise.reject({type:Sr,reason:"can not delete message"});Ed.chatCmdReq(e,Kf.Delete)}return Ce(Jf,l=>l.id===e).then(()=>({id:e}))}return Promise.reject({type:Te,reason:"msgId is wrong"})}return Promise.reject({type:W,reason:"can not delete messages"})}lockChat(e){const t=this[pe](),{meeting:{meetingOptions:r}}=t,n=r!=null&&r.isPrivateChatEnabled?ft.All:ft.EveryonePublicly;return this.setPrivilege(e?ft.NoOne:n)}sendFile(e,t){if(!e)return Promise.reject({type:Te,reason:"File is empty"});const{[pe]:r,[Et]:n}=this,i=r(),{chat:{isFileTransferEnable:o,fileTransferFileType:s,fileTransferSizeLimit:a,failedFileTransfer:l}}=i;if(!o)return Promise.reject({type:W,reason:"Send files via in-session chat is not enabled"});if(typeof e=="string"){const u=tu(e,i);if(u!=null&&u.file&&l[e]){const{file:{upload:d,...c}}=u,{file:{name:p,upload:{uniqueId:h}},receiver:{userId:m}}=u;return n(ir({originFile:l[e],...c,upload:{...d,status:Ht.InProgress}})),Promise.resolve(()=>{n(qc({uniqueId:h,fileName:p,userId:m}))})}return Promise.reject({type:Te,reason:"Retry token is not correct."})}{const{name:u}=e;if(s.length>0){const[m]=u.split(".").reverse();if(!s.some(f=>f===m))return Promise.reject({type:W,reason:"File is not in the allow list"})}if(e.size>a)return Promise.reject({type:W,reason:"File size exceeds the maximum limit."});const d=ye(i),c=h_(i,t),p=p_(d,c,i);if(p)return Promise.reject(p);const h=Bf();return n(Tw(function(m,f,v,g){const y=new Date().getTime();return{file:{name:m.name,size:m.size,type:m.type,upload:{progress:0,uniqueId:f,totalChunks:0,chunkIndex:0}},originFile:m,sender:{name:v.displayName,userId:v.userId,userGuid:v.userGUID,avatar:v.avatar},receiver:{name:g==null?void 0:g.displayName,userId:g==null?void 0:g.userId,attendeeId:void 0,userGuid:g==null?void 0:g.userGUID},timestamp:y}}(e,h,d,c))),Promise.resolve(()=>{n(Ow({uniqueId:h,file:e})),n(qc({uniqueId:h,fileName:u,userId:c==null?void 0:c.userId}))})}}downloadFile(e,t,r){const{[pe]:n,[Et]:i}=this,{chat:{chatHistory:o}}=n();return!e||!t?Promise.reject({type:Te,reason:"Invalid message id or file url!"}):o.find(a=>{var l;return a.id===e&&((l=a.file)===null||l===void 0?void 0:l.fileUrl)===t})?(i(ir({id:e,fileUrl:t,download:{status:Io.InProgress,progress:0,blob:r}})),Promise.resolve(()=>i(Pw({id:e,fileUrl:t})))):Promise.reject({type:Te,reason:"Invalid message id or file url!"})}getPrivilege(){const{chat:{chatPrivilege:e,isAllowAttendeeChat:t}}=this[pe]();return t?e:ft.NoAttendee}getReceivers(){const e=this[pe](),{chat:{chatPrivilege:t,panelistChatPrivilege:r,isAllowAttendeeChat:n},meeting:{isWebinar:i}}=e;if(!i&&!n)return[];const o=ye(e),s=An(e);if(o)if(i)if(Xt(o.userRole)){if(!n)return[];if(t===ft.All)return[Zl,Vd];if(t===ft.AllPanelist)return[Zl];if(t===ft.NoOne)return[]}else{if(s||r===ol.Everyone){const a=bd(e,o.userId,{includeAttendee:!0});return[Zl,Vd,...a]}if(r===ol.AllPanelist){const a=bd(e,o.userId);return[Zl,...a]}}else{const a=An(e);if(t===ft.All||a){const l=bd(e,o.userId);return[Vd,...l]}if(t===ft.Host)return bd(e,o.userId,{host:!0});if(t===ft.EveryonePublicly){const l=bd(e,o.userId,{host:!0});return[Vd,...l]}if(t===ft.NoOne)return[]}return[]}getHistory(){return this[pe]().chat.chatHistory.map(e=>{const{highResTimeStampForIdentification:t,...r}=e;if(r.file){const{name:n,size:i,type:o,fileUrl:s,upload:a,download:l}=r.file,u={name:n,size:i,type:o,fileUrl:s};return a&&Object.assign(u,{upload:{status:a.status,progress:a.progress}}),l&&Object.assign(u,{download:{status:l.status,progress:l.progress}}),{...r,file:u}}return r})}isAllowToDeleteMessages(){const e=this[pe](),{meeting:{meetingOptions:t}}=e;return t==null?void 0:t.isEnableDeleteChatMsg}isFileTransferEnabled(){return this[pe]().chat.isFileTransferEnable}getFileTransferSetting(){const e=this[pe](),{chat:{fileTransferFileType:t,fileTransferSizeLimit:r}}=e;return{typeLimit:(t??[]).map(n=>`.${n}`).join(","),sizeLimit:r}}},Q(Pt.prototype,"send",[J],Object.getOwnPropertyDescriptor(Pt.prototype,"send"),Pt.prototype),Q(Pt.prototype,"setPrivilege",[Rt,J],Object.getOwnPropertyDescriptor(Pt.prototype,"setPrivilege"),Pt.prototype),Q(Pt.prototype,"setPanelistPrivilege",[Rt,J,function(e,t,r){const n=r.value;r.value=function(){const i=this[lt];if(i){const{meeting:{isWebinar:l}}=i.getState();if(!l)return Promise.reject({type:vu,reason:"non-webinar"})}for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n.apply(this,s)}}],Object.getOwnPropertyDescriptor(Pt.prototype,"setPanelistPrivilege"),Pt.prototype),Q(Pt.prototype,"deleteMessage",[J],Object.getOwnPropertyDescriptor(Pt.prototype,"deleteMessage"),Pt.prototype),Q(Pt.prototype,"lockChat",[Rt,J],Object.getOwnPropertyDescriptor(Pt.prototype,"lockChat"),Pt.prototype),Q(Pt.prototype,"sendFile",[J],Object.getOwnPropertyDescriptor(Pt.prototype,"sendFile"),Pt.prototype),Q(Pt.prototype,"downloadFile",[J],Object.getOwnPropertyDescriptor(Pt.prototype,"downloadFile"),Pt.prototype),Pt);const Lz={epics0:(e,t)=>pu(e,24583).pipe(fe(t),G(r=>{let[n,i]=r;if(i.meeting.zlkJwtToken)return re;const{payload:{body:{sn:o,senderName:s,senderJid:a,receiver:l,text:u,type:d}}}=n,c=ye(i),p=gp(i),{meeting:{jid:h,userId:m},participants:{xmppAttendeeList:f}}=i;return ur.beginDecrypt({decryptedText:u,type:Rr.XMPP_CHAT,zoomId:o}).then(v=>{var g;let{message:y}=v,S=null,b=0,R="";c&&Xt(c.userRole)&&h===l?(S=f.find(O=>O.jid===a),b=m,R=c.displayName):d===rt.Panelist&&(S=p.find(O=>O.jid===a),b=rt.Panelist,R=Zl.displayName);const w={message:y,sender:{name:s,userId:((g=S)===null||g===void 0?void 0:g.userId)||0,avatar:""},receiver:{name:R,userId:b},timestamp:new Date().getTime()};return T(Wa,w),Kc(w)})})),epics1:(e,t)=>se(e,7944).pipe(fe(t),G(r=>{let[n,i]=r;const{meeting:{bIbDisableChat:o}}=i,{payload:{body:{attendeeNodeID:s,sn:a,destNodeID:l,text:u,senderName:d,msgID:c}}}=n,p=ye(i);if(p){const h=Xt(p==null?void 0:p.userRole)&&s===p.userId&&!c;if(!o&&!h){const{sn:m,...f}=jV({destNodeID:l,attendeeNodeID:s,senderName:d,sn:a},i);return(s===rt.SilentModeUsers?Promise.resolve({id:c,message:Vi(u),...f}):ur.beginDecrypt({decryptedText:u,zoomId:m,type:Rr.RWG_CHAT}).then(v=>{let{message:g}=v;return{id:c,message:g,...f}})).then(v=>(T(Wa,v),Kc(v)))}}return re})),epics2:(e,t)=>se(e,zn).pipe(z(r=>{var n,i;return((n=r.payload.body)===null||n===void 0?void 0:n.chatPriviledge)!==void 0||((i=r.payload.body)===null||i===void 0?void 0:i.bAllowAttendeeChat)!==void 0}),fe(t),ne(r=>{let[n,i]=r;const{payload:{body:{chatPriviledge:o,bAllowAttendeeChat:s}}}=n,{chat:{chatPrivilege:a}}=i;return s!==void 0?(T(fu,s===!0?{chatPrivilege:a}:{chatPrivilege:ft.NoAttendee}),NN(s)):(T(fu,{chatPrivilege:o}),Rw(o))})),epics3:e=>se(e,zn).pipe(z(t=>{var r;return((r=t.payload.body)===null||r===void 0?void 0:r.panelistChatPriviledge)!==void 0}),ne(t=>{const{payload:{body:{panelistChatPriviledge:r}}}=t;return T(fu,{panelistChatPrivilege:r}),DN(r)})),epics4:(e,t)=>se(e,4136).pipe(fe(t),G(r=>{let[n,i]=r;const{payload:{body:{result:o,destNodeID:s,msgID:a,fileID:l}}}=n,{meeting:{userId:u},chat:{chatHistory:d}}=i,c=[];if(o===wv.Success)if(l){const h=d.find(m=>{var f;return((f=m.file)===null||f===void 0?void 0:f.fileID)===l});if(h){const{file:m,receiver:f,...v}=h,{name:g,size:y,type:S,fileUrl:b}=m??{},{attendeeId:R,...w}=f;T(Wa,{id:a,file:{name:g,size:y,type:S,fileUrl:b,upload:{status:Ht.Complete,progress:100}},receiver:{...w},...v}),c.push(xN({fileID:l,msgID:a,senderId:u}))}}else{const h=$V(d,{userId:u,destNodeID:s});var p;h&&(T(Wk,{msgId:a,receiverId:s,identification:(p=h.highResTimeStampForIdentification)!==null&&p!==void 0?p:0}),c.push(LN({destNodeID:s,msgID:a,userId:u})))}else o!==wv.Delete&&o!==wv.Block||c.push(tf({msgId:a}));return X(c)})),epics5:e=>se(e,4238).pipe(G(t=>{const{payload:{body:{bSuccess:r,cmd:n,msgID:i}}}=t,o=[];return r&&n===Kf.Delete&&(o.push(tf({msgId:i})),T(Jf,{id:i})),X(o)})),epics6:e=>se(e,7960).pipe(G(t=>{const{payload:{body:{cmd:r,msgID:n}}}=t,i=[];return r===Kf.Delete&&(i.push(tf({msgId:n})),T(Jf,{id:n})),X(i)}))},Vz=hn(Lz,{chatFileEpics0:e=>e.pipe(he(`${qn}`),ne(t=>{var r,n,i;const{payload:{fileTransfer:o,fileServerDomain:s}}=t;return VN({isFileTransferEnable:o==null?void 0:o.isEnable,isEnableFileTransferEncrypted:o==null?void 0:o.isEnableFileTransferEncrypted,fileTransferFileType:((r=o==null?void 0:o.fileType)!==null&&r!==void 0?r:"").replace(/\./g,"").split(",").filter(Boolean),fileTransferSizeLimit:1024*((n=o==null?void 0:o.sizeLimit)!==null&&n!==void 0?n:0)*1024||fr.MaxSize,fileDownloadPromptIgnoreList:((i=o==null?void 0:o.fileDownloadPromptIgnoreList)!==null&&i!==void 0?i:"").replace(/\./g,"").split(","),fileServerDomain:`https://${s}`})})),chatFileEpics1:(e,t)=>e.pipe(he(`${Tw}`),G(async r=>{const{payload:{originFile:n,file:{upload:{uniqueId:i}}}}=r;return n.size>fr.ChunkSize?await async function(o,s,a,l){const u=HV(o,"/wc/multiupload/init",l.value),d=await async function(m){const f=Math.ceil(m.size/fr.ReaderChunkSize);return(await Promise.all(Array.from({length:f},(v,g)=>({start:g*fr.ReaderChunkSize,end:(g+1)*fr.ReaderChunkSize})).map(async v=>{let{start:g,end:y}=v;try{const S=await WV(m,g,y);return pk(await window.crypto.subtle.digest("SHA-256",S))}catch(S){return us("calculate file hash error.",m,S),Promise.reject(S)}}))).join("")}(o),{meeting:{zmk:c,meetingId:p}}=l.value,h=tu(s,l.value);if(d&&h){const{receiver:m}=h,f={fileName:o.name,length:o.size,channelType:4,digest:d,shareJid:p};return ii({url:u,method:"POST",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:c},crossDomain:Oi(u),body:f}).pipe(Zr(df(o,s,m,a)),ne(v=>{var g;const{responseHeaders:y,response:S}=v,b=(g=y["x-zm-trackingid"])===null||g===void 0?void 0:g.trim(),{uploadid:R,path:w,metadata:O}=S,D=Math.ceil(o.size/fr.ChunkSize);return ir({originFile:o,upload:{uniqueId:s,status:Ht.InProgress,progress:0,chunkIndex:0,totalChunks:D,uploadid:R,trackingId:b,path:w,metadata:O}})}),ui(v=>(console.warn(v),us("Upload file meta error.",o,v),cf(h,o))),Bn(ir({upload:{uniqueId:s,status:Ht.Init}})))}return pf(o,s)}(n,i,e,t):await f_(n,i,e,t)}),G(r=>r)),chatFileEpics2:(e,t)=>e.pipe(he(`${ir}`),z(r=>{var n;return((n=r.payload.upload)===null||n===void 0?void 0:n.status)===Ht.Success}),xo(async r=>{const{payload:{upload:{uniqueId:n}}}=r,{chat:{isEnableFileTransferEncrypted:i,chatHistory:o}}=t.value,s=o.find(l=>{var u;return((u=l.file)===null||u===void 0||(u=u.upload)===null||u===void 0?void 0:u.uniqueId)===n}),a=[];if(s&&s.file){const{file:{name:l,size:u,fileObj:d,fileID:c,type:p},receiver:{userId:h,attendeeId:m}}=s;let[f,v]=["",""];if(i){const[g,y]=await Promise.all([l,`${u}`].map(S=>ur.beginEncrypt({text:S,type:Rr.RWG_CHAT})));[f,v]=[g,y]}else[f,v]=[l,`${u}`].map(g=>bt(g));await Dz.chatFileTransfer({fileID:c,fileSize:v,fileName:f,fileObj:d,type:p,destNodeID:h,attendeeNodeID:m}),a.push(ir({upload:{uniqueId:n,status:Ht.Complete}}))}return a})),chatFileEpics3:(e,t)=>e.pipe(he(`${ir}`),z(r=>{const{payload:{upload:n,originFile:i}}=r;return!!n&&!!n.uniqueId&&n.status===Ht.InProgress&&(i==null?void 0:i.size)<=fr.ChunkSize&&n.totalChunks===0}),G(async r=>{const{payload:{originFile:n,upload:{uniqueId:i}}}=r;return await f_(n,i,e,t)}),G(r=>r)),chatFileEpics4:(e,t)=>e.pipe(he(`${ir}`),z(r=>{const{payload:{upload:n}}=r;return!!n&&!!n.uniqueId&&n.totalChunks>0&&n.chunkIndex!==n.totalChunks}),G(async r=>{const{payload:{originFile:n,upload:{uniqueId:i}}}=r;return await async function(o,s,a,l){const u=tu(s,l.value);if(u!=null&&u.file){const{file:{upload:{chunkIndex:d,totalChunks:c,uploadid:p,path:h,trackingId:m,etags:f},size:v},receiver:g}=u,y=d*fr.ChunkSize,S=await GV(o,y);if(S){const{chat:{fileServerDomain:b},meeting:{zmk:R}}=l.value,w=`${b}/upload/parts?${new URLSearchParams({uploadid:p,partNumber:d+1}).toString()}`,O=new FormData,D=new File([S],o.name);return O.append("file",D),ii({url:w,method:"POST",headers:{"Zoom-File-Size":D.size,"Zoom-File-Path":h,"x-zm-trackingid":m,"Zoom-File-Origin":"redirect=support_auth",zmk:R},crossDomain:Oi(w),body:O,includeUploadProgress:!0}).pipe(Zr(df(o,s,g,a)),G(U=>{var x;const{type:P,loaded:I,total:E,responseHeaders:A}=U;let _=0;const C={upload:{uniqueId:s,status:Ht.InProgress}},V=[],M=tu(s,l.value),$=M==null||(x=M.file)===null||x===void 0?void 0:x.upload.progress;if(P==="upload_loadstart")_=$||Math.floor(d/c*100);else if(P==="upload_progress")_=Math.floor((d*fr.ChunkSize+.9*I)/v*100);else if(P==="upload_load")_=Math.floor((d*fr.ChunkSize+.9*E)/v*100);else if(P==="download_load"){_=$||Math.floor((d+1)/c*100);const B=A["x-zm-etag"].trim(),ee=f?{...f,[`${d+1}`]:B}:{[`${d+1}`]:B};Object.assign(C.upload,{etags:ee,chunkIndex:d+1,totalChunks:c}),Object.assign(C,{originFile:o})}return(_>0||P==="upload_loadstart")&&(Object.assign(C.upload,{progress:_}),T(sl,{...Qu(o,g),progress:_,status:Ht.InProgress}),V.push(ir(C))),X(V)}),ui(U=>(console.warn(U),us(`Upload file chunk error. chunk:${d},total chunks:${c},uploadid:${p},trackingId:${m}`,o,U),cf(u,o))))}}return pf(o,s)}(n,i,e,t)}),G(r=>r)),chatFileEpics5:(e,t)=>e.pipe(he(`${ir}`),z(r=>{const{payload:{upload:n}}=r;return!!n&&!!n.uniqueId&&n.totalChunks>0&&n.chunkIndex==n.totalChunks}),G(r=>{const{payload:{originFile:n,upload:{uniqueId:i}}}=r;return function(o,s,a,l){const{chat:{fileServerDomain:u},meeting:{zmk:d}}=l.value,c=tu(s,l.value);if(c!=null&&c.file){const{file:{upload:{uploadid:p,metadata:h,etags:m,trackingId:f}},receiver:v}=c,g=`${u}/upload/complete?uploadid=${p}`;return ii({url:g,method:"POST",headers:{"x-zm-trackingid":f,"Zoom-File-Origin":"redirect=support_auth",zmk:d},crossDomain:Oi(g),body:{metadata:h,etags:m}}).pipe(Zr(df(o,s,v,a)),ne(y=>{var S,b;const{chat:{fileServerDomain:R}}=l.value,{responseHeaders:w}=y,O=(S=w["zoom-file-id"])===null||S===void 0?void 0:S.trim(),D=(b=w["zoom-file-obj"])===null||b===void 0?void 0:b.trim(),U=`${R}/zoomfile/download?objkey=${D}&business=meeting`;return T(sl,{...Qu(o,v),progress:100,status:Ht.Success}),ir({fileID:O,fileObj:D,fileUrl:U,upload:{uniqueId:s,progress:100,status:Ht.Success}})}),ui(y=>(console.warn(y),us(`Upload chunks checksum error.uploadid${p},trackingId${f}`,o,y),cf(c,o))))}return pf(o,s)}(n,i,e,t)})),chatFileEpics6:(e,t)=>se(e,4308).pipe(xo(async r=>{const{payload:{body:{attendeeNodeID:n,destNodeID:i,fileID:o,fileName:s,fileObj:a,fileSize:l,fileType:u,msgID:d,senderName:c}}}=r,{meeting:{bIbDisableChat:p},chat:{fileServerDomain:h,isEnableFileTransferEncrypted:m}}=t.value,f=[];if(!p){const v=zV(h,{fileObj:a,fileID:o});if(u===YF.Local){const{sn:g,...y}=jV({destNodeID:i,attendeeNodeID:n,senderName:c},t.value);let[S,b]=["",0];if(m){const[w,O]=await Promise.all([s,l].map(D=>ur.beginDecrypt({decryptedText:D,zoomId:g,type:Rr.RWG_CHAT})));S=w.message,b=Number(O.message)}else S=Vi(s),b=Number(Vi(l));const R={id:d,file:{name:S,size:b,fileUrl:v},...y};f.push(Kc({...R,file:{...R.file,fileID:o,fileObj:a}})),setTimeout(()=>{T(Wa,R)},0)}}return f})),chatFileEpics7:(e,t)=>e.pipe(he(`${ir}`),z(r=>{var n,i;const{payload:o}=r;return o.id&&o.fileUrl&&((n=o.download)===null||n===void 0?void 0:n.status)===Io.InProgress&&((i=o.download)===null||i===void 0?void 0:i.progress)===0}),G(r=>function(n,i,o){var s;const{chat:{chatHistory:a},meeting:{zmk:l},participants:{attendeesList:u}}=o.value,d=a.find(c=>c.id===n);if(d!=null&&(s=d.file)!==null&&s!==void 0&&s.fileUrl){const{file:{fileUrl:c}}=d;return ii({url:c,method:"GET",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:l},crossDomain:Oi(c),responseType:"arraybuffer",includeDownloadProgress:!0}).pipe(Zr(function(p,h){return h.pipe(he(`${Pw}`,`${Li}`),z(m=>{if(m.type===`${Li}`)return!0;const{payload:{id:f}}=m;return p.id===f}),xe(1),de(()=>{var m,f,v;BV.info(`Cancel file download. file name:${Er((m=p.file)===null||m===void 0?void 0:m.name)},file size:${(f=p.file)===null||f===void 0?void 0:f.size},sender id:${(v=p.sender)===null||v===void 0?void 0:v.userId}`),T(Fh,{...vy(p),progress:0,status:Io.Cancel})}))}(d,i)),xo(async p=>{const{type:h,loaded:m,total:f}=p,v=[],g={...vy(d),progress:0,status:Io.InProgress};if(h==="download_loadstart"&&Object.assign(g,{progress:0}),h==="download_progress"){var y;const D=Math.floor(m/f*100);v.push(ir({id:n,fileUrl:(y=d.file)===null||y===void 0?void 0:y.fileUrl,download:{progress:D}})),Object.assign(g,{progress:D})}else if(h==="download_load"){var S,b,R;const U=Io.Success;Object.assign(g,{progress:100,status:U}),v.push(ir({id:n,fileUrl:(S=d.file)===null||S===void 0?void 0:S.fileUrl,download:{progress:100,status:U}}));const x=(b=u.find(I=>I.userId===d.sender.userId))===null||b===void 0?void 0:b.zoomID,P=await async function(I,E,A){const _=Math.ceil(I.byteLength/fr.DecodeBlockSize);try{const C=await Promise.all(Array.from({length:Math.max(_-1,1)},(V,M)=>({start:M*fr.DecodeBlockSize,end:(M===_-2?M+2:M+1)*fr.DecodeBlockSize})).map(async V=>{let{start:M,end:$}=V;try{const B=I.slice(M,$),{message:ee}=await ur.beginDecrypt({decryptedText:B,zoomId:A,type:Rr.CHAT_FILE});return ee}catch(B){return us("decrypt file buffer error.",{name:E,size:I.byteLength},B),Promise.reject(B)}}));return new Blob(C,{type:Pz(E)})}catch{return null}}(p.response,(R=d.file)===null||R===void 0?void 0:R.name,x);var w,O;P&&((w=d.file)!==null&&w!==void 0&&w.download.blob?Object.assign(g,{fileBlob:P}):function(I,E){const A=document.createElement("a"),_=window.URL.createObjectURL(I);A.href=_,A.download=E,A.click(),window.URL.revokeObjectURL(_)}(P,(O=d.file)===null||O===void 0?void 0:O.name))}return(g.progress>0||h==="download_loadstart")&&T(Fh,g),v}),ui(p=>(console.warn(p),us(`download file error. file url:${c}`,{name:void 0,size:void 0},p),T(Fh,{...vy(d),progress:0,status:Io.Fail}),qe(ir({id:n,fileUrl:c,download:{status:Io.Fail,progress:0}})))))}return re}(r.payload.id,e,t)))});function Ol(e,t){var r,n,i;const{meeting:{isMeetingReset:o,meetingId:s,meetingNumber:a,userName:l,userEmail:u,tid:d,userId:c,userGUID:p},breakoutRoom:h}=e;let m="";var f;return m=o?h!=null&&(f=h.currentRoom)!==null&&f!==void 0&&f.boConfId?"join breakout room":"meeting failover":"join meeting",{label:m,payload:{meetingId:(r=t==null?void 0:t.meetingId)!==null&&r!==void 0?r:s,tid:d,userId:(n=t==null?void 0:t.userId)!==null&&n!==void 0?n:c,userGUID:(i=t==null?void 0:t.userGUID)!==null&&i!==void 0?i:p,meetingNumber:Er(a),userName:Er(l),userEmail:Er(u)}}}function Un(e,t,r){return nl(Be(n=>{let i=!1;try{var o,s;const{logger:{options:a},meeting:{logConfig:l}}=t.value;i=(o=a==null?void 0:a.enable)!==null&&o!==void 0?o:(s=JSON.parse(l||"{}"))===null||s===void 0?void 0:s.enable}catch{}try{if(i){const{logger:{isLaplaceInitialized:a}}=t.value;if(!a)return e.pipe(he(`${km}`),xe(1),G(l=>(l.payload&&r(n),re)));r(n)}}catch(a){console.warn(a)}return re}))}function Gi(e,t,r,n){return Re(e,r).pipe(Un(e,t,n))}function Cu(e,t,r,n){return se(e,r).pipe(Un(e,t,n))}function V0(e){var t,r;const{audio:{activeMicrophone:n,activeSpeaker:i,microphoneDevicesList:o,speakerDevicesList:s}}=e;return`microphone: [${n} - ${o==null||(t=o.find(a=>a.deviceId===n))===null||t===void 0?void 0:t.label}]; speaker: [${i} - ${s==null||(r=s.find(a=>a.deviceId===i))===null||r===void 0?void 0:r.label}]`}function KV(e){var t;const{video:{activeCamera:r,cameraDevicesList:n}}=e;return`camera: [${r} - ${n==null||(t=n.find(i=>i.deviceId===r))===null||t===void 0?void 0:t.label}]`}function wd(e,t){return t!==void 0?` ,${e}:${t}`:""}const{InitSuccessAudio:xz,InitFailedAudio:Uz,InitSuccessVideo:jz,InitFailedVideo:$z,InitSuccessSharing:Fz,InitFailedSharing:Bz}=Z,{DecodeSuccess:g_,DecodeFailed:v_,EncodeSuccess:y_,EncodeFailed:S_}=Wr,Hz={[`${xz}`]:{name:"Audio",isException:!1},[`${Uz}`]:{name:"Audio",isException:!0},[`${jz}`]:{name:"Video",isException:!1},[`${$z}`]:{name:"Video",isException:!0},[`${Fz}`]:{name:"Sharing",isException:!1},[`${Bz}`]:{name:"Sharing",isException:!0}};function zz(e){const t=(e??"").split("-");return[...new Set(t)].map(r=>({reason:r,count:t.filter(n=>r===n).length}))}const bn=Or.getInstance(),yy=()=>{if("connection"in navigator){const{effectiveType:e,rtt:t,downlink:r}=navigator.connection;bn.makeLogger(["Network Connection Type"]).info(`Network connection. ect:${e},rtt:${t},downlink:${r}`)}},Xo=Or.getInstance().makeLogger(["Remote Control"]),b_=Xr(Oe.getInstance()),Wz=[{event:Z.AudioBridgeReconnectStart,message:Xs.AudioBridgeReconnectStart,logType:"info",additionalTags:["Audio Join Flow"]},{event:Z.AudioBridgeReconnectEnd,message:Xs.AudioBridgeReconnectEnd,logType:"info",additionalTags:["Audio Join Flow"]},{event:Z.UserGrantCaptureAudio,message:e=>`${Xs.DeviceAudioStreamCaptured},${V0(e)}`,logType:"info",additionalTags:["Audio Capture Flow"]},{event:Z.JoinComputerAudioComplete,message:Xs.AudioJoinComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:Z.LeaveComputerAudioComplete,message:Xs.AudioLeaveComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:Z.JoinSharingAudioComplete,message:Xs.SharingAudioStartComplete,logType:"info",additionalTags:["Audio Sharing Flow"]},{event:Z.LeaveSharingAudioComplete,message:Xs.SharingAudioStopComplete,logType:"info",additionalTags:["Audio Sharing Flow"]}],Gz=[{event:Z.StartVideoCaptureSuccess,message:e=>`${ea.StartCaptureVideoSuccess}, ${KV(e)}`,logType:"info",additionalTags:["Video Join Flow"]},{event:Z.StopVideoCaptureSuccess,message:ea.StopCaptureVideoSuccess,logType:"info",additionalTags:["Video Join Flow"]},{event:Z.StartVideoStreamInVbSettingSuccess,message:ea.VBSettingSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:Z.VbModelPreloadingOk,message:ea.VBPreloadSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:Z.VbModelPreloading_3S,message:ea.VBPreloading3S,logType:"warn",additionalTags:["Video VB Flow"]},{event:Z.VbModelPreloading_10S,message:ea.VBPreloading10S,logType:"warn",additionalTags:["Video VB Flow"]},{event:Z.VbSettingParaError,message:ea.VBSettingFailed,logType:"error",additionalTags:["Video VB Flow"]}],E_=Wz.map(e=>({...e,tag:"Audio"})).concat(Gz.map(e=>({...e,tag:"Video"}))),tn=Or.getInstance(),{InitSuccessVideo:Kz,InitSuccessAudio:qz,InitSuccessSharing:Qz,InitFailedVideo:Jz,InitFailedAudio:Zz,InitFailedSharing:Yz,RecoverWebrtcAudio:Xz,AudioBridgeFirstRecvData:w_,AudioBridgeCanSendData:e4,UserForbiddedCaptureAudio:I_,AudioWebsocketBroken:t4,AudioZeroData:A_,UserForbiddedCaptureVideo:C_,UserCameraIsTakenByOtherPrograms:__,VideoWebsocketBroken:r4,StopVideoCaptureFailed:n4,DesktopSharingPermissionDenied:i4,DesktopSharingSystemError:R_,AudioSpeakerSetError:T_,VbSettingParaError:o4,MaskSettingParaError:s4,WebglLostInMultiView:a4,VideoStreamFailed:O_,AudioStreamFailed:P_,NotifyUIFailover:l4}=Z,sa=Or.getInstance(),Sy={options:void 0,isLaplaceInitialized:!1},u4=pn({[`${Lw}`]:k((e,t)=>{let{payload:r}=t;e.options=r}),[`${km}`]:k((e,t)=>{let{payload:r}=t;e.isLaplaceInitialized=r}),[`${yL}`]:(e,t)=>{let{options:r}=e,{payload:n}=t;return n?{...Sy,options:r}:{...Sy}}},Sy),d4={mlEpics0:(e,t)=>Re(e,[Kz,qz,Qz,Jz,Zz,Yz]).pipe(Un(e,t,r=>{const{payload:{type:n,data:i}}=r,{meeting:{userId:o}}=t.value,s=function(a,l){const u=Hz[`${a}`];if(u){const{name:d,isException:c}=u,p=[d,`${d} Init Flow`];c&&p.push(`${d} exception flow`);let h="";return[g_,v_].includes(l)&&(h=`${h} decode`.trim()),[y_,S_].includes(l)&&(h=`${h} encode`.trim()),[y_,g_].includes(l)&&(h=`${h} success`.trim()),[v_,S_].includes(l)&&(h=`${h} failed`.trim()),{message:`init ${d.toLowerCase()} ${h}`,tags:p,isException:c}}return null}(n,i);if(s){const{message:a,tags:l,isException:u}=s;u?tn.report(`${a}. userId:${o}`,l):tn.makeLogger(l).info(a)}})),mlEpics1:(e,t)=>Gi(e,t,E_.map(r=>r.event),r=>{const{payload:{type:n}}=r,i=E_.find(o=>o.event===n);if(i){const{message:o,logType:s,additionalTags:a,tag:l}=i;let u=o;typeof o=="function"?window.setTimeout(()=>{u=o(t.value),tn.makeLogger([l])[s](u,a)},0):u&&tn.makeLogger([l])[s](u,a)}}),mlEpics2:(e,t)=>e.pipe(he(`${Fu}`),z(r=>!r.payload),Un(e,t,()=>{tn.makeLogger(["Audio"]).warn(`Auto play audio failed,${V0(t.value)}`)})),mlEpics3:(e,t)=>Gi(e,t,Xz,()=>{tn.report("Audio bridge, recover audio failed, need to rejoin the audio",["Audio exception flow"])}),mlEpics4:(e,t)=>Gi(e,t,[w_,e4],r=>{const{payload:{type:n}}=r;tn.makeLogger(["Audio"]).log("Audio bridge connection: "+(n===w_?"first receive data":"can send data"))}),mlEpics5:(e,t)=>Gi(e,t,l4,r=>{tn.report(`Audio bridge, notify ui failover, subreason:${r.payload.data}`,["Audio exception flow"])}),mlEpics6:(e,t)=>Gi(e,t,[I_,t4,A_,T_,P_],r=>{const{payload:{type:n}}=r;let i=`Audio error case:${n}`;n===I_?i="Audio capture is forbidden by the user":n===A_?t.value.audio.webrtcRestartCount<3&&(i="audio capture zero data, auto failover"):n===T_?i="audio change speaker error":n===P_&&(i="audio stream ended or muted, stop capture audio"),tn.report(`${i},${V0(t.value)}`,["Audio exception flow"])}),mlEpics7:(e,t)=>Gi(e,t,[C_,__,r4,n4,O_],r=>{const{payload:{type:n,data:i}}=r;let o=`Video error case:${n}`;if(n===C_)o="Video capture is forbidden by the user"+(i?` (error name:${i==null?void 0:i.name};error message:${i==null?void 0:i.message})`:"");else if(n===__)o="Camera is taken by other programs"+(i?` (error name:${i==null?void 0:i.name};error message:${i==null?void 0:i.message})`:"");else if(n===o4){var s;o=`VB setting error, param:${JSON.stringify((s=t.value.video.virtualBackground)!==null&&s!==void 0?s:{})}`}else if(n===s4){var a;o=`Mask setting error, param:${JSON.stringify((a=t.value.video.mask)!==null&&a!==void 0?a:{})}`}else n===O_&&(o=`Video stream ended or muted, if it is on iOS platform, will stop capture video.platform:${ae.browser}`);tn.report(`${o},${KV(t.value)}`,["Video exception flow"])}),mlEpics8:(e,t)=>Gi(e,t,[i4,R_],r=>{const{payload:{type:n}}=r;let i="";n===R_?ae.isMacOS&&(i="Need to allow screen recording access in system setting on MacOS"):i="Need to allow the permission request",tn.report(`${i}`,["Sharing exception flow"])}),mlEpics9:(e,t)=>Gi(e,t,a4,r=>{const{payload:{data:n}}=r,{video:{renderedVideoList:i}}=t.value;if(n!=null&&n.canvasId){const o=i.filter(s=>s.canvasId===n.canvasId);tn.report(`WebGl Context lost, canvas ID:${n.canvasId}, affected video node Ids:${o.map(s=>s.userId).join(",")}`,["Video exception flow"])}}),mlEpics10:(e,t)=>Ot(document,"visibilitychange").pipe(Un(e,t,()=>{tn.makeLogger(["Video"]).log(`Page visibility ${document.visibilityState} `),setTimeout(()=>{const r=document.visibilityState!=="visible",{video:{subscribedVideoList:n},meeting:{userId:i}}=t.value,o=n.filter(s=>s!==i).length>0;r&&o&&(He.createAgent().sendRWGConnectionPerformance("VCSV"),tn.makeLogger(["Video"]).warn("Still subscribing videos after switching to background"))},1e3)})),mlEpics11:e=>Re(e,Z.InitSuccessVideo).pipe(z(t=>t.payload.data===Wr.EncodeSuccess&&ae.isAndroidOrIOSBrowser),Be(()=>{const t=tn.makeLogger(["Video"]);return t.info("Screen orientation: "+(AL()?"landscape":"portrait")),CL().pipe(de(r=>{t.info("Screen orientation changes, current orientation: "+(r?"landscape":"portrait"))}),kP())}))},c4={rmclEpics0:(e,t)=>e.pipe(he(`${Aw}`),Un(e,t,r=>{const{payload:{isRemoteControlEnabled:n,isEnableAutoDeleteRcApp:i}}=r;Xo.log(`isRemoteControlEnabled:${n},auto delete:${i}`)})),rmclEpics1:(e,t)=>e.pipe(he(`${eo}`),z(r=>!!r.payload),Un(e,t,r=>{Xo.log(`Launch Remote control app, scheme:${r.payload}`)})),rmclEpics2:(e,t)=>e.pipe(he(`${sc}`),z(r=>!!r.payload),Un(e,t,r=>{Xo.log(`Remote control session starts, controlling ssrc:${r.payload}`)})),rmclEpics3:(e,t)=>Cu(e,t,16430,()=>{Xo.log("Remote control app connected to rwg.")}),rmclEpics4:(e,t)=>Cu(e,t,rb,()=>{Xo.log("Remote control app disconnected to rwg.")}),rmclEpics5:(e,t)=>Cu(e,t,rb,r=>{const{share:{status:n,isRemoteControlEnabled:i}}=t.value;i&&n!==Fe.End&&r.payload.body.bOn&&Xo.log(`Remote control sharing device info.${JSON.stringify(b_.getShareStreamInfo())}`)}),rmclEpics6:(e,t)=>Gi(e,t,Z.CurrentDesktopSharingWidthHeight,()=>{const{share:{isRemoteControlEnabled:r}}=t.value;r&&Xo.log(`Remote control sharing device info changes.${JSON.stringify(b_.getShareStreamInfo())}`)}),rmclEpics7:(e,t)=>Gi(e,t,Z.SendRemoteControlQrCode,r=>{const{share:{status:n}}=t.value,{payload:{data:i}}=r;Xo.log(`Remote control QR code result. sharing status:${n}, result${JSON.stringify(i)}`)})},p4={epics0:(e,t)=>e.pipe(he(`${qn}`),G(async r=>{const{meeting:{logConfig:n,logEncryptionPubKey:i,zlkJwtToken:o,accountId:s,enableAutoLog:a,collectionToggleEnable:l,zsk:u},logger:{options:d}}=t.value;let c=d||{};if(n)try{const{enable:p,enableReport:h}=JSON.parse(n);c={...c,enable:p,enableReport:h}}catch{}if(o){const{telemetry_tracking_id:p}=il(o),{payload:{meetingId:h}}=r;c={...c,enable:!0,enableReport:!0,trackingId:p??h}}else{let p=!1;p=u&&l!==void 0?!(a&&l):!a,Pe.set(Uc.DisableAutoReportLogs,p,We.Memory)}return bn.init({...c,logConfig:n,logEncryptionPubKey:i,accountId:s}).then(()=>[km(!0),Lw(c)]).catch(()=>[km(!1)])}),G(r=>X(r))),epics1:(e,t)=>Cu(e,t,Og,r=>{var n,i,o,s;const{payload:{body:a}}=r;if(a&&a.res===wn.Success){bn.makeLogger(["A/V Performance Info"]).info(`CPU cores:${navigator.hardwareConcurrency}, SharedArrayBuffer:${!!ae.isSupportSharedArrayBuffer}, browser:${ae.browser} ${ae.browserVersion}, OS:${ae.os} ${ae.osVersion}${wd("wow64",ae.wow64)}${wd("GPU",ae.gpu)}${wd("architecture",ae.architecture)}${wd("bitness",ae.bitness)}${wd("model",ae.model)}${Pe.get(Uc.EnforceWebRTCAudio)?"; Enforce WebTRC audio":""}`,["CPU_CORES"]);const{media:{enforceMultipleVideos:x,enforceVirtualBackground:P,assetsPath:I,disableRenderLimits:E},meeting:{stayAwake:A,quicklyLeave:_}}=t.value;bn.makeLogger(["Init Option"]).info(`Init option:${JSON.stringify({enforceMultipleVideos:x,disableRenderLimits:E,enforceVirtualBackground:P,assetsPath:I,stayAwake:A,leaveOnPageUnload:_})}`),"connection"in navigator&&(yy(),navigator.connection.addEventListener("change",yy))}else bn.report(`join meeting failed, error:${JSON.stringify(Hi(a==null?void 0:a.res))}, rwg error code:${a==null?void 0:a.res}, rwg conID:${a==null?void 0:a.conID}, error message:${a==null?void 0:a.error_desc}, rwg url:${a==null?void 0:a.svcUrl},mid:${t.value.meeting.meetingId}`,"JOIN_MEETING_FAILED","error");const{meeting:{meetingInfoTimestamp:l,pingRWCTimestamp:u,tid:d,meetingId:c,topic:p,accountId:h,cv:m},socket:{rwgServerList:f,retryCount:v},video:{rendererType:g},media:{patchJsMedia:y,assetsPath:S}}=t.value;let b=["conID","confID","mmrFeature","mmrFeatureEx","reportDomain","res","role","svcUrl","userID"].reduce((x,P)=>a[P]!==void 0?{...x,[`${P}`]:a[P]}:x,{});b=["jid","mn","participantID","zoomID"].reduce((x,P)=>a[P]!==void 0?{...x,[`${P}`]:Er(a[P])}:x,b),b.response=b.res,delete b.res;const R=["connection_info_map"];let w;if(a.res===wn.Success&&R.push("Command Socket Event","User Info Map"),d){const x=d.match(/clid=(\S+);/);x&&x.length>1&&(w=x[1])}const O=Math.floor(performance.now()-l),D=Math.floor(performance.now()-u),U=He.createAgent();bn.report(JSON.stringify({...b,tid:d,mid:c,userRegion:w,rwgUrl:f.length>0?(n=f[v])===null||n===void 0?void 0:n.rwg:void 0,hardwareConcurrency:navigator.hardwareConcurrency,sharedArrayBuffer:ae.isSupportSharedArrayBuffer,browserVersion:`${ae.browser} ${ae.browserVersion}`,osVersion:`${ae.os} ${ae.osVersion}`,gpu:ae.gpu,architecture:ae.architecture,model:ae.model,bitness:ae.bitness,totalDurationOfJoining:O,durationOfRWG:D,rendererType:g,sdkVersion:m,mediaSdkVersion:(i=window.JsMediaSDK_Instance)===null||i===void 0?void 0:i.version,topic:p?Er(p):void 0,accountId:h?Er(h):void 0,patchJSMediaSDK:y,dependentAssets:S,webRtcAudio:Gt(),crossOriginIsolated:!!window.crossOriginIsolated,isRlbTP:(o=U.websocket)===null||o===void 0?void 0:o.isRlb}),R,"info"),U.sendRWGConnectionPerformance(`WCL_M, conId: ${a==null?void 0:a.conID}, trackingId: ${(s=t.value.logger)===null||s===void 0||(s=s.options)===null||s===void 0?void 0:s.trackingId}, JOINFS(${O}), JOINFRWC(${D})`)}),epics2:(e,t)=>e.pipe(he(`${rw}`),fe(t),z(r=>{let[,n]=r;return n.meeting.encryptedRWC===void 0&&(n.meeting.encryptedGEORWC===void 0||n.meeting.encryptedGEORWC.length===0)}),Un(e,t,()=>{const{label:r,payload:n}=Ol(t.value);bn.report(`${r} ${JSON.stringify(n)}`,["Join Meeting Flow","Ping RWC Domain Empty"],"error")})),epics3:(e,t)=>e.pipe(he(`${Vr}`),z(r=>r.payload===lr.OnError||r.payload===lr.Disconnect||r.payload===lr.NoHeartbeat),Un(e,t,r=>{const{payload:n}=r,{socket:{rwgServerList:i,retryCount:o}}=t.value,{payload:s}=Ol(t.value);bn.report(`websocket unexpected disconnected,${JSON.stringify({code:n,rwgHost:i[o],...s})}`,["Join Meeting Flow","RWG Disconnect"])})),epics4:(e,t)=>e.pipe(he(`${Gf}`),Un(e,t,r=>{const{payload:{reason:n,count:i,interval:o,sequence:s,userId:a,userGUID:l,meetingId:u}}=r,{payload:d}=Ol(t.value,{meetingId:u,userId:a,userGUID:l});bn.report(`meeting failover,${JSON.stringify({reason:n,count:i,interval:o,sequence:s,detailed:zz(s),...d})}`,["Join Meeting Flow","Failover"]),"connection"in navigator&&navigator.connection.removeEventListener("change",yy)})),epics5:(e,t)=>e.pipe(he(`${ql}`),z(r=>r.payload.status===Je.Connecting),Un(e,t,r=>{const{payload:{rwgUrl:n}}=r;let i=n.replace(/(\d+)\?/,`${Er("$1")}?`);i=["email","zoomid","participantID","dn2","customer_key","mpwd","topic"].reduce((s,a)=>s.indexOf(a)>-1?s.replace(new RegExp(`${a}=([^&]+)`,"g"),`${a}=${Er("$1")}`):s,i);const{payload:o}=Ol(t.value);bn.makeLogger(["Join Meeting Flow"]).info(`RWG URL,${JSON.stringify({rwgUrl:i,...o})}`,["RWG Url"])})),epics6:(e,t)=>e.pipe(he(`${Li}`),z(r=>{const{payload:n}=r;return n?n.retry:t.value.meeting.meetingStatus===Lt.Initial}),Un(e,t,()=>{const{meeting:{meetingStatus:r},socket:{rwgServerList:n,retryCount:i}}=t.value;if(r!==Lt.Joined){const{payload:o}=Ol(t.value),s=(n==null?void 0:n.length)>0?n[i]:void 0;bn.report(JSON.stringify({...o,rwc:s==null?void 0:s.rwc,rwg:s==null?void 0:s.rwg}),["UNAVAILABLE_RWG"])}})),epics7:(e,t)=>Cu(e,t,1,r=>{const{payload:{body:n}}=r;bn.report(`join meeting failed, version blocked. Current version:${t.value.meeting.cv},upgrade version:${n==null?void 0:n.upgradeVersion}`,"JOIN_MEETING_FAILED","error")}),epics8:(e,t)=>Cu(e,t,2,()=>{bn.report(`join meeting with low version of SDK. Current version:${t.value.meeting.cv}.`,"Join Meeting Flow","warn")}),epics9:(e,t)=>e.pipe(he(`${zf}`,`${Lu}`),Be(()=>Ge(mt,1).pipe(de(r=>{try{const{payload:n}=Ol(t.value);bn.report(`Connection change with join meeting failed. payload:${JSON.stringify(r)}. meeting info:${JSON.stringify(n)}`,"JOIN_MEETING_FAILED","error")}catch{}}),G(()=>re))))},h4=hn(p4,c4,d4),f4=He.createAgent(),k_={cmrStatus:Qt.Stop,recordingEnable:!1,recordingIsoEnable:!1,allowStopAutoRecording:!1,automaticCloudRecordingEnable:!1,isZoomIQ:!1,zoomIQChanging:!1,localStatus:jc.Stop,supportLocalRecording:on.None,localGrantPermissionOption:oB.None,localPermissionUserList:[]},m4=pn({[`${JN}`]:k((e,t)=>{let{payload:r}=t;e.cmrStatus=r}),[`${ZN}`]:k((e,t)=>{let{payload:r}=t;e.recordingEnable=r}),[`${YN}`]:k((e,t)=>{let{payload:r}=t;e.recordingIsoEnable=r}),[`${XN}`]:k((e,t)=>{let{payload:r}=t;e.allowStopAutoRecording=r}),[`${eL}`]:k((e,t)=>{let{payload:r}=t;e.automaticCloudRecordingEnable=r}),[`${Dw}`]:k((e,t)=>{let{payload:r}=t;e.isZoomIQ=r}),[`${Mw}`]:k((e,t)=>{let{payload:r}=t;e.zoomIQChanging=r}),[`${Nw}`]:k((e,t)=>{let{payload:r}=t;e.localStatus=r}),[`${l0}`]:k((e,t)=>{let{payload:r}=t;e.supportLocalRecording=r}),[`${tL}`]:k((e,t)=>{let{payload:r}=t;e.localGrantPermissionOption=r}),[`${Eu}`]:k((e,t)=>{let{payload:r}=t;e.localPermissionUserList=r}),[`${rL}`]:()=>({...k_})},k_);var D_,M_,N_,L_,V_,x_,U_,j_,ct;const vi=He.createAgent(),Id=Rn("Recording");let g4=(D_=ue("recording"),M_=ue("recording"),N_=ue("recording"),L_=ue("recording"),V_=ue("recording"),x_=ue("recording"),U_=ue("recording"),j_=ue("recording"),ct=class extends co{startRecording(){const e=this[pe](),{meeting:{bIbDisableRecording:t,recordingEnable:r},recording:{cmrStatus:n}}=e;return t?Promise.reject({type:W,reason:"Rejected by Information Barrier"}):r?n===Qt.Start?Promise.resolve(""):(vi.recordMeeting(!0,!1),Ce(ec,i=>i.cmrServerStatus===Qt.Start)):Promise.reject({type:W,reason:"The account of the meeting disabled the cloud recording"})}pauseRecording(){const e=this[pe](),{recording:{cmrStatus:t,allowStopAutoRecording:r}}=e;return t===Qt.Pause?Promise.resolve(""):t!==Qt.Start?Promise.reject({type:W,reason:"Recording is not started"}):r?(vi.recordMeeting(!1,!0),Ce(ec,n=>n.cmrServerStatus===Qt.Pause)):Promise.reject({type:W,reason:"Cannot pause cloud recording due to web setting config"})}stopRecording(){const e=this[pe](),{recording:{cmrStatus:t,allowStopAutoRecording:r}}=e;return t===Qt.Stop?Promise.resolve(""):r?(vi.recordMeeting(!1,!1),Ce(ec,n=>n.cmrServerStatus===Qt.Stop)):Promise.reject({type:W,reason:"Cannot stop cloud recording due to web setting config"})}accept(){const e=this[pe](),{recording:{cmrStatus:t,recordingIsoEnable:r}}=e,n=ye(e);return r?t!==Qt.Start&&t!==Qt.Pause?Promise.reject({type:W,reason:"Recording is not started"}):n!=null&&n.bAllowISORecord?Promise.resolve("You accepted ISO recording"):(vi.allowSelfRecord(!0),Ce(Zf,i=>(i==null?void 0:i.userId)===(n==null?void 0:n.userId)&&(i==null?void 0:i.status)===Ti.Accept)):Promise.reject({type:W,reason:"ISO Recording is not enabled"})}decline(){const e=this[pe](),{recording:{cmrStatus:t,recordingIsoEnable:r}}=e,n=ye(e);return r?t!==Qt.Start&&t!==Qt.Pause?Promise.reject({type:W,reason:"Recording is not started"}):(n==null?void 0:n.bAllowISORecord)===!0?Promise.reject({type:W,reason:"You had accept ISO recording, cant change it"}):(vi.allowSelfRecord(!1),Promise.resolve("")):Promise.reject({type:W,reason:"ISO Recording is not enabled"})}getRecordingStatus(){const e=this[pe](),{recording:{cmrStatus:t}}=e,r=UB(e);return t===Qt.Start?Ti.Recording:t===Qt.Pause?Ti.Paused:r?Ti.Recording:Ti.Stopped}isRecordingEnabled(){const e=this[pe](),{recording:{recordingEnable:t}}=e;return t}isAllowedToStopAutoRecording(){const e=this[pe](),{recording:{allowStopAutoRecording:t}}=e;return t}isAutomaticCloudRecordingEnabled(){const e=this[pe](),{recording:{automaticCloudRecordingEnable:t}}=e;return t}enableRecordingWithIQ(e){const{[pe]:t,[Et]:r}=this,n=t(),{recording:{isZoomIQ:i,zoomIQChanging:o},meeting:{meetingOptions:s}}=t();return s.isEnableKiwiRecording?An(n)?o?Promise.reject({type:W,reason:"We are changing, please wait"}):e===i?Promise.reject({type:W,reason:`You have ${e?"enable":"disable"} Zoom IQ, don't need change`}):(r(Mw(!o)),r(Dw(!i)),vi.enableZoomIQRecord(e),Ce(qk,a=>a==null?void 0:a.success)):Promise.reject({type:W,reason:"Only Host or co-host can enable/disable Zoom IQ"}):Promise.reject({type:W,reason:"You not have zoom IQ license or not enable zoom IQ, please check and retry"})}isSupportLocalRecording(){const e=this[pe](),{meeting:{meetingOptions:t,isWebinar:r},breakoutRoom:n}=e;if((n==null?void 0:n.currentRoom.status)===Ee.InRoom)return!1;const i=ye(e);return(!r||!Xt(i.userRole))&&(t==null?void 0:t.isLocalRecordingEnabled)}isSupportLocalRecordingPermission(){const e=this[pe](),{recording:{supportLocalRecording:t}}=e;if(!this.isSupportLocalRecording())return!1;const r=ye(e);return!(r==null||!r.isHost)||t===on.Allow}askLocalRecordingPermission(){const{[pe]:e}=this,{recording:{supportLocalRecording:t}}=e();return this.isSupportLocalRecording()?t===on.None?(vi.localRecordingRequestPermission(),Promise.resolve("")):t===on.Allow?Promise.resolve(""):Promise.reject("permission is denied"):Promise.reject("not support")}startLocalRecording(e){const{[pe]:t,[Et]:r}=this,n=t(),{recording:{localStatus:i,supportLocalRecording:o},meeting:{userId:s}}=n;if(!(e in jc))return Promise.reject({type:W,reason:"not support you parameter, only support type are 0(stop)/1(start)/2(pause)."});if(!this.isSupportLocalRecording())return Promise.reject({type:W,reason:"not support local recording"});if(e===i)return Promise.resolve(`you currently status is ${i}, do nothing`);const a=ye(n);return o===on.Allow||a!=null&&a.isHost?(vi.localRecordingMeeting(e),Ce(Yf,l=>(l==null?void 0:l.userId)===s&&(r(Nw(l.bLocalRecord)),l.bLocalRecord===e),1e3)):Promise.reject({type:W,reason:"you not have local recording permission, please use askLocalRecordingPermission request it first"})}isSupportLocalRecordingGrantPermission(){const e=this[pe]();if(!this.isSupportLocalRecording())return!1;const t=ye(e);return!(t==null||!t.isHost)&&!!Qp(t.caps)}grantLocalRecordingPermission(e,t,r){const{[pe]:n,[Et]:i}=this,o=n(),{recording:{localPermissionUserList:s}}=o;if(!this.isSupportLocalRecording())return Promise.resolve(!1);const a=ye(o);if(!Qp(a.caps))return Promise.reject({type:W,reason:"you can not grant permission"});let l=!1;if(r&&(l=!0),s.filter(u=>u===e).length>0){if(t===on.Allow)vi.localRecordingGrantPermission(e,!0,l);else{if(t!==on.Deny)return Promise.reject({type:W,reason:"only support DENY(1)/ALLOW(2)"});vi.localRecordingGrantPermission(e,!1,l)}return i(Eu(s.filter(u=>u!==e))),T(Qi,{type:"answer",value:t===on.Allow}),Promise.resolve(!1)}return t!==on.Deny?Promise.reject({type:W,reason:"Direct grant only support DENY(1)"}):(vi.hostGrantPermission(e,!1),Ce(Qi,u=>(u==null?void 0:u.value)===e&&(t===on.Allow?(i(Eu([...s,e])),(u==null?void 0:u.canRecord)===!0):(i(Eu(s.filter(d=>d!==e))),(u==null?void 0:u.canRecord)===!1)),1e3))}getLocalRecordingPermissionUserList(){const e=this[pe](),{recording:{localPermissionUserList:t}}=e;if(!this.isSupportLocalRecording())return[];const r=ye(e);return Qp(r.caps)?t:Promise.reject({type:W,reason:"you can not grant permission"})}getLocalRecordingPermissionOperation(){const e=this[pe](),{recording:{localGrantPermissionOption:t}}=e;if(!this.isSupportLocalRecording())return null;const r=ye(e);return Qp(r.caps)?t:null}},Q(ct.prototype,"startRecording",[Rt,J,D_,Id],Object.getOwnPropertyDescriptor(ct.prototype,"startRecording"),ct.prototype),Q(ct.prototype,"pauseRecording",[Rt,J,M_,Id],Object.getOwnPropertyDescriptor(ct.prototype,"pauseRecording"),ct.prototype),Q(ct.prototype,"stopRecording",[Rt,J,N_,Id],Object.getOwnPropertyDescriptor(ct.prototype,"stopRecording"),ct.prototype),Q(ct.prototype,"accept",[J,L_,Id],Object.getOwnPropertyDescriptor(ct.prototype,"accept"),ct.prototype),Q(ct.prototype,"decline",[J,V_,Id],Object.getOwnPropertyDescriptor(ct.prototype,"decline"),ct.prototype),Q(ct.prototype,"askLocalRecordingPermission",[J,x_],Object.getOwnPropertyDescriptor(ct.prototype,"askLocalRecordingPermission"),ct.prototype),Q(ct.prototype,"startLocalRecording",[J,U_],Object.getOwnPropertyDescriptor(ct.prototype,"startLocalRecording"),ct.prototype),Q(ct.prototype,"grantLocalRecordingPermission",[J,er,j_],Object.getOwnPropertyDescriptor(ct.prototype,"grantLocalRecordingPermission"),ct.prototype),ct);const v4={moduleEpics0:e=>e.pipe(he(`${qn}`),ne(t=>{const{payload:{recordingEnable:r}}=t;return ZN(r)})),moduleEpics1:(e,t)=>se(e,zn).pipe(z(r=>{var n,i,o;return((n=r.payload.body)===null||n===void 0?void 0:n.cmrServerStatus)!==void 0||((i=r.payload.body)===null||i===void 0?void 0:i.disAllowClientStopAutoCmr)!==void 0||((o=r.payload.body)===null||o===void 0?void 0:o.enableAutomicRecordingCloud)!==void 0}),fe(t),G(r=>{let[n,i]=r;const{cmrServerStatus:o,disAllowClientStopAutoCmr:s,enableAutomicRecordingCloud:a}=n.payload.body,l=[];return o!==void 0&&(o!==Qt.Init&&(T(ec,{cmrServerStatus:o}),i.recording.recordingIsoEnable&&o===Qt.Start&&T(Zf,{status:Ti.Ask})),l.push(JN(o))),s!==void 0&&l.push(XN(!s)),a!==void 0&&l.push(eL(a)),X(l)})),moduleEpics2:e=>se(e,zn).pipe(z(t=>{var r;return((r=t.payload.body)===null||r===void 0?void 0:r.bCmrIsoEnble)!==void 0}),ne(t=>{const{bCmrIsoEnble:r}=t.payload.body;return YN(r)})),moduleEpics3:(e,t)=>se(e,ot).pipe(fe(t),z(r=>{let[n]=r;const{payload:{body:{update:i,add:o}}}=n;return(i==null?void 0:i.some(s=>s.bLocalRecordStatus!==void 0||s.canRecord!==void 0))||(o==null?void 0:o.some(s=>s.bLocalRecordStatus!==void 0||s.canRecord!==void 0))}),G(r=>{let[n,i]=r;const{payload:{body:{update:o,add:s}}}=n,{meeting:{userId:a,isHost:l},recording:{supportLocalRecording:u},participants:{attendeesList:d}}=i,c=[];return o==null||o.concat(s||[]).filter(p=>p.bLocalRecordStatus!==void 0||p.canRecord!==void 0).forEach(p=>{if(p.canRecord!==void 0){const h=!!p.canRecord;if(a===p.id||l){const m=d.find(f=>f.userId===a);!h&&m!=null&&m.bLocalRecord&&(T(Qi,{type:"revoke",value:p.id,canRecord:h}),f4.localRecordingMeeting(jc.Stop)),!h||m!=null&&m.bLocalRecord||T(Qi,{type:"grant",value:p.id,canRecord:h})}a===p.id&&((u!==on.None||h)&&c.push(l0(h?on.Allow:on.Deny)),h||c.push(Nw(jc.Stop)))}else T(Yf,{userId:p.id,bLocalRecord:p.bLocalRecordStatus})}),X(c)})),moduleEpics4:(e,t)=>se(e,ot).pipe(ne(r=>uc(r.payload.body)),fe(t),G(r=>{let[n,i]=r;const o=[],{recording:{localPermissionUserList:s}}=i;return n.remove&&n.remove.forEach(a=>{s.filter(l=>l===(a==null?void 0:a.userId))&&(o.push(Eu(s.filter(l=>l!==(a==null?void 0:a.userId)))),T(Qi,{type:"remove",value:a==null?void 0:a.userId}))}),X(o)})),moduleEpics5:e=>se(e,ot).pipe(z(t=>{const{payload:{body:{update:r}}}=t;return r==null?void 0:r.some(n=>n.bAllowISORecord!==void 0)}),de(t=>{const{payload:{body:{update:r}}}=t;r.filter(n=>n.bAllowISORecord!==void 0).forEach(n=>{T(Zf,{userId:n.id,status:n.bAllowISORecord?Ti.Accept:Ti.Decline})})}),_e(re)),moduleEpics6:e=>se(e,zn).pipe(z(t=>{var r;return((r=t.payload.body)===null||r===void 0?void 0:r.SalesRecordingAnalytics)!==void 0}),ne(t=>{const{SalesRecordingAnalytics:r}=t.payload.body;return T(Kk,{isZoomIQ:r}),Dw(r)})),moduleEpics7:(e,t)=>se(e,4319).pipe(fe(t),z(r=>{var n;let[i]=r;return((n=i.payload.body)===null||n===void 0?void 0:n.success)!==void 0}),G(r=>{let[n,i]=r;const o=[],{success:s}=n.payload.body,{recording:{zoomIQChanging:a}}=i;return T(qk,{success:s}),s&&o.push(Mw(!a)),X(o)})),moduleEpics8:(e,t)=>se(e,4344).pipe(fe(t),z(r=>{var n;let[i]=r;return((n=i.payload.body)===null||n===void 0?void 0:n.cmdType)!==void 0}),G(r=>{var n;let[i,o]=r;const s=[],{cmdType:a}=i.payload.body,{recording:{localPermissionUserList:l},meeting:{isHost:u}}=o;var d,c,p,h;return a==="permission_req_option"&&(T(Qi,{type:"option",value:(d=i.payload.body)===null||d===void 0?void 0:d.option}),s.push(tL((c=i.payload.body)===null||c===void 0?void 0:c.option))),a==="request_permission"&&(n=i.payload.body)!==null&&n!==void 0&&n.userId&&(u&&T(Qi,{type:"request",value:(h=i.payload.body)===null||h===void 0?void 0:h.userId}),s.push(Eu([...l,(p=i.payload.body)===null||p===void 0?void 0:p.userId]))),a==="permission_request_answer"&&(T(Qi,{type:"answer",value:i.payload.body.agreed}),s.push(l0(i.payload.body.agreed?on.Allow:on.Deny))),X(s)}))},y4=hn(v4);let Zm=function(e){return e[e.All=1]="All",e[e.Private=2]="Private",e}({}),qV=function(e){return e.SUCCESS="success",e}({}),Ym=function(e){return e.CustomizedKey="__zoom_internal_message_customized_key__@@",e.SpeakerOnly="__zoom_internal_message_speaker_only__@@",e}({});const $_=fl.getInstance(),Xm=(e,t,r)=>{const{meeting:{encType:n}}=r,i=t,o=dk(e),s=i?Zm.Private:Zm.All;return n===fp.AES_GCM?ur.beginEncrypt({text:o,type:Rr.XMPP_CHAT}).then(a=>{$_.sendWebinarMseeage(a,i,s,!0)}):$_.sendWebinarMseeage(o,i,s,!1)};function QV(e,t){const{cmd:{jids:r}}=t;return Object.prototype.hasOwnProperty.call(r,e)?Promise.resolve():dr(Ge(hs).pipe(DP(n=>n.findIndex(i=>Number(i.userId)===e)===-1),xe(1),_r(Ko)))}function JV(e){const{cmd:{connectionStatus:t}}=e;return t===qV.SUCCESS?Promise.resolve(!0):dr(Ge(uw,1)).then(r=>r===Jl.Connected||Promise.reject({type:W,reason:"Cannot establish the command channel"}))}function x0(e,t){for(const[r,n]of Object.entries(e))if(n.jid===t)return r}const F_={connectionStatus:"initial",jids:{}},S4=pn({[`${sL}`]:()=>({...F_}),[`${nL}`]:k((e,t)=>{let{payload:r}=t;const{data:n,attendees:i}=r;n.forEach(o=>{const{jid:s,node:a}=o;if(!e.jids[a]||e.jids[a].jid!==s){const l=i.find(u=>u.userId===Number(a));e.jids[a]={jid:s,userGuid:l==null?void 0:l.userGUID}}})}),[`${iL}`]:k((e,t)=>{let{payload:r}=t;r.forEach(n=>{const{jid:i}=n,o=x0(e.jids,i);o&&delete e.jids[o]})}),[`${oL}`]:k((e,t)=>{let{payload:r}=t;e.connectionStatus=r})},F_);var Ad;let b4=(Ad=class extends co{send(e,t){if(!e)return Promise.reject({type:Te,reason:"Text is empty"});if(typeof e!="string")return Promise.reject({type:Te,reason:"Text is not a string"});if(e.length>512)return Promise.reject({type:Te,reason:"Text exceeds the max length(512)."});const{[pe]:r}=this,n=r(),{socket:{xmppSocketStatus:i},meeting:{userId:o}}=n;return i!==Je.Connected?Promise.reject({type:vu,reason:"Command channel is not ready"}):JV(n).then(()=>t?et(r()).findIndex(s=>s.userId===t)!==-1?QV(t,n).then(()=>{const{cmd:{jids:s}}=r();return s[t]?(Xm(e,s[t].jid,r()),{timestamp:new Date().getTime(),text:e,receiverId:t,senderId:o}):Promise.reject({type:Pi})}).catch(()=>{}):Promise.reject({type:Te,reason:"Cannot find the user"}):(Xm(e,"",n),{timestamp:new Date().getTime(),text:e,receiverId:0,senderId:o})).catch(()=>{})}getJids(){const{[pe]:e}=this,t=e(),{cmd:{jids:r}}=t;return r}},Q(Ad.prototype,"send",[J],Object.getOwnPropertyDescriptor(Ad.prototype,"send"),Ad.prototype),Ad);const E4={extraEpics0:(e,t)=>e.pipe(he(`${bw}`),Be(r=>{const{payload:{speakerOnly:n}}=r,i=ye(t.value);return((i==null?void 0:i.audio)!==void 0?X([i.audio]):Ge(vr).pipe(z(o=>o.audio!==void 0),xe(1))).pipe(de(()=>{JV(t.value).then(()=>{Xm(`${Ym.SpeakerOnly}${n?1:0}`,"",t.value)})}),_e(re))})),extraEpics1:(e,t)=>se(e,ot).pipe(z(r=>{var n;const{payload:{body:i}}=r;return!!i.add&&!((n=t.value.audio)===null||n===void 0||(n=n.customizeAudioOption)===null||n===void 0||!n.speakerOnly)}),_r(Ko),de(async r=>{const{payload:{body:{add:n}}}=r,i=t.value,{meeting:{userId:o}}=i;for(let s=0;s<n.length;s++){const{id:a}=n[s];if(a!==o){await QV(a,t.value);const{cmd:{jids:l},participants:{attendeesList:u}}=t.value;l[a]&&setTimeout(()=>{Xm(`${Ym.SpeakerOnly}1`,l[a].jid,t.value)},Math.floor(Math.random()*Math.log10(u.length)*1e3))}}}),_e(re))},w4={epics0:(e,t)=>pu(e,24577).pipe(fe(t),ne(r=>{let[n]=r;const{payload:{body:{status:i}}}=n;return i===qV.SUCCESS&&T(uw,Jl.Connected),oL(i)})),epics1:(e,t)=>pu(e,24583).pipe(fe(t),G(r=>{let[n,i]=r;const{meeting:{userId:o,encType:s},cmd:{jids:a}}=i,{payload:{body:{senderName:l,senderJid:u,text:d,type:c,receiver:p,msgid:h,sn:m}}}=n,f=x0(a,p),v=s===fp.AES_GCM,g=x0(a,u),y=new Date().getTime();let S=Promise.resolve({message:d});return v&&(S=ur.beginDecrypt({decryptedText:d,type:Rr.XMPP_CHAT,zoomId:m})),S.then(b=>{let{message:R}=b;if(c===Zm.Private&&Number(f)===o||c===Zm.All){const O=Vi(R);if(O!=null&&O.startsWith(Ym.SpeakerOnly)){const D=O.substring(Ym.SpeakerOnly.length),U=Number(D)===1;return Fc({userId:Number(g),key:"isSpeakerOnly",value:U})}{var w;const D=g&&((w=a[g])===null||w===void 0?void 0:w.userGuid);T(Gk,{senderId:g,senderName:l,senderGuid:D,text:O,timestamp:y,msgid:h})}}return""})}),z(r=>typeof r=="object"&&r!==null&&r.type!==void 0),de(r=>{const{payload:{userId:n,key:i,value:o}}=r;T(lo,[{userId:n,[`${i}`]:o}])})),epics2:(e,t)=>pu(e,24595).pipe(G(r=>{const{payload:{body:{action:n,data:i}}}=r,o=[];if([Ji.List,Ji.Add,Ji.update].includes(n)&&i){const{breakoutRoom:s,participants:{attendeesList:a}}=t.value,l=(s==null?void 0:s.currentRoom.status)===Ee.InRoom?a.concat(s.mainSessionAttendeeList):a;o.push(nL({data:i,attendees:l}))}return n===Ji.Remove&&i&&o.push(iL(i)),X(o)}))},I4=hn(w4,E4),B_=(e,t,r,n)=>{const{getState:i,dispatch:o}=r,s=i(),{participants:{attendeesList:a},audio:{localShareAudioUserMutedList:l},share:{isReceiveSharingFromMainSession:u},breakoutRoom:d}=s,c=(u?d==null?void 0:d.mainSessionAttendeeList:a).find(p=>p.userId==e);if(c){if(c.bShareAudioOn){const p=l.find(h=>h.userId===e);return p&&p.muted===!t&&o(ep(n,e,t,s)),Promise.resolve("")}return Promise.reject({type:W,reason:`Cannot ${t?"mute":"unmute"} share audio when the user's share audio is not enable.`})}return Promise.reject({type:Te,reason:"Cannot find the user"})},H_=(e,t)=>{const{store:{getState:r},rwgAgent:n}=e,{share:{sharePrivilege:i}}=r();return i===t?Promise.resolve(""):Object.values(xn).includes(t)?(n.lockSharing(t),nf("lockShare",t)):Promise.reject({type:Te})},Fd=dt([et],e=>e.filter(t=>t.bVideoOn)),by=dt([Fd],e=>e.filter(t=>(t.caps&RC)===RC)),z_=(e,t)=>{const r=e.store.getState(),n=xa(r).find(i=>i.userId===t);if(n){const{caps:i}=n;return(o=>!(512&~o))(i)}return!1};var W_,G_,K_,q_,Q_,J_,Z_,Y_,X_,eR,tR,rR,nR,iR,oR,sR,aR,lR,uR,dR,cR,pR,hR,fR,mR,gR,vR,yR,SR,bR,ER,wR,IR,AR,CR,_R,RR,TR,OR,PR,kR,DR,MR,NR,LR,VR,xR,UR,jR,$R,FR,BR,HR,zR,WR,GR,KR,qR,QR,JR,ZR,YR,XR,eT,tT,rT,nT,iT,oT,sT,aT,lT,uT,dT,cT,pT,hT,fT,mT,gT,vT,yT,L;const yn=Rn("Audio"),kt=Rn("Video"),Pr=Rn("Sharing"),Pl=Rn("CameraControl"),vo=Rn("Remote Control"),Ey=Vg(HTMLCanvasElement,0),A4=Vg([HTMLCanvasElement,HTMLVideoElement],0),ST=Vg(HTMLCanvasElement,0,["id"]),bT=Vg([HTMLCanvasElement,HTMLVideoElement],0,["id"]);let C4=(W_=ue("audio"),G_=ue("audio"),K_=ue("audio"),q_=ue("audio"),Q_=ue("audio"),J_=Rn("Audio",[1,2,3]),Z_=ue("audio"),Y_=Rn("Audio",[1,2]),X_=ue("audio"),eR=ue("audio"),tR=ue("audio"),rR=ue("audio"),nR=ue("share"),iR=ue("audio"),oR=ue("share"),sR=ue("audio"),aR=ue("audio"),lR=ue("audio"),uR=ue("audio"),dR=ue("audio"),cR=ue("audio"),pR=Rn("Audio",[1,2]),hR=ue("audio"),fR=Rn("Audio",[1,2]),mR=ue("audio"),gR=ue("audio"),vR=ue("audio"),yR=ue("video"),SR=ue("video"),bR=ue("video"),ER=ue("video"),wR=ue("video"),IR=ue("video"),AR=ue("video"),CR=ue("video"),_R=ue("video"),RR=ue("video"),TR=ue("video"),OR=ue("video"),PR=ue("video"),kR=ue("video"),DR=ue("video"),MR=ue("video"),NR=ue("video"),LR=ue("video"),VR=ue("video"),xR=ue("video"),UR=ue("video"),jR=ue("video"),$R=ue("video"),FR=ue("video"),BR=ue("video"),HR=ue("video"),zR=ue("video"),WR=ue("video"),GR=ue("video"),KR=ue("share"),qR=ue("share"),QR=ue("share"),JR=ue("share"),ZR=ue("share"),YR=ue("share"),XR=ue("share"),eT=ue("share"),tT=l_("isShareOptionLocked"),rT=l_("isShareOptionLocked"),nT=ue("share"),iT=ue("share"),oT=ue("share"),sT=ue("share"),aT=ue("share"),lT=ue("share"),uT=ue("share"),dT=ue("share"),cT=ue("share"),pT=ue("share"),hT=ue("share"),fT=ue("share"),mT=ue("share"),gT=ue("share"),vT=ue("share"),yT=ue("share"),L=class extends co{constructor(e){super(e),this[K]=void 0,this[lt].dispatch(YE()),this[K]={store:e,mediaAgent:Lg(Xr(Oe.getInstance())),rwgAgent:He.createAgent()}}startAudio(e){return((t,r)=>{const{store:{getState:n,dispatch:i},rwgAgent:o,mediaAgent:s}=t,a=n(),l=ye(a);if((l==null?void 0:l.audio)===ze.Computer)return Promise.resolve("");if((l==null?void 0:l.audio)===ze.Phone)return Promise.reject({type:W,reason:"joined by phone"});{const{audio:{isAllowToTalk:u,isComputerAudioLoading:d,canPlayAudio:c,customizeAudioOption:{speakerOnly:p}},media:{audioDecodeStatus:h,audioEncodeStatus:m}}=a;if(d)return Promise.reject({type:W,reason:"Computer audio has been loading, please wait."});const f=function(y){const S=y?{...y}:void 0;if(A2(Gt())||(S==null?void 0:S.backgroundNoiseSuppression)!==!0||(console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on desktop browser"),Object.assign(S,{backgroundNoiseSuppression:void 0})),(S==null?void 0:S.originalSound)!==void 0){S.backgroundNoiseSuppression&&S.originalSound&&(console.warn("Enabling original sound will disable background noise suppression."),Object.assign(S,{backgroundNoiseSuppression:!1}));const{originalSound:b}=S;typeof b=="object"&&b.stereo&&!C2()&&(console.warn("Cannot enable stereo audio on current platform due to the browser limitation"),Object.assign(b,{stereo:!1}))}return _2()||(S==null?void 0:S.syncButtonsOnHeadset)!==!0||(console.warn("Sync buttons on headset is not supported on the current platform"),Object.assign(S,{syncButtonsOnHeadset:void 0})),S!=null&&S.mediaFile&&!Oe.isSupportMediaPlaybackAsVideoInput()&&(console.warn("Cannot use media file as audio input due to the browser limitation"),Object.assign(S,{mediaFile:void 0})),S}(r);i(bw(f??{}));const{speakerOnly:v,autoStartAudioInSafari:g}=f||{};if(!!p!=!!v&&i(Fc({userId:a.meeting.userId,key:"isSpeakerOnly",value:!!v})),!l)return Promise.reject({type:W,reason:"Please call `startAudio` method after the `join` has been resolved"});{const y=Xt(l.userRole)&&!u||v,{encodeInitStatus:S,decodeInitStatus:b}=k0(a,l,v);if(tp()&&(b!=="success"||S!=="success"))return Promise.reject({type:W,reason:"It is required to wait for the audio encoding and decoding to be ready before calling `startAudio` method"});i(ma(!0)),Lr("audio",S,b).subscribe(R=>{let[w,O]=R;if(w&&O){let D=c||(tp()||ae.isIOSMobile)&&!g?Promise.resolve():function(){const U=URL.createObjectURL(aB),x=new Audio(U);x.muted=!1;const P=_g(()=>Promise.reject(),3e3),I=ae.isIOSMobile?new Promise((E,A)=>{var _;x.addEventListener("canplaythrough",()=>{x.play().then(()=>{E(!0)}).catch(C=>{A(C)})}),(_=x.load)===null||_===void 0||_.call(x)}):x.play();return Promise.race([I,P]).finally(()=>{URL.revokeObjectURL(U)})}();D===void 0&&(D=Promise.resolve()),D.then(()=>AC("audio",n())).then(()=>{const U=n(),{audio:{isSharingAudio:x}}=U;qm(o,U,y),x&&!to()||Ja(s,U,!y),Xt(l.userRole)&&u&&i(Vb(!0)),i(Fu(!0))}).catch(()=>{i(Fu(!1)),i(ma(!1))})}else i(ma(!1))})}return m==="failed"||h==="failed"?(i(ma(!1)),Promise.reject({type:Pi,reason:"audio encode or decode error"})):new Promise((y,S)=>{jr(Ge(Js.JoinComputerAudio.success,1),Wt(...Js.JoinComputerAudio.fail.map(b=>Ge(b,1).pipe(G(()=>Oa({type:Sr,reason:b}))))),Nt(45e3).pipe(G(()=>Oa({type:mw})))).subscribe({next:()=>{i(ma(!1)),y("")},error:b=>{Oe.getInstance().leaveComputerAudio();const R=ye(n());(R==null?void 0:R.audio)!==ze.Phone&&(i(ul($c.MicrophoneError)),o.joinOrLeaveVoip(!1)),i(ma(!1)),S(b)}})})}})(this[K],e)}stopAudio(){return(async e=>{const{store:{getState:t,dispatch:r},mediaAgent:n,rwgAgent:i}=e,o=t(),{audio:{isComputerAudioLoading:s,isShareAudioEnabled:a,isSharingAudio:l,isUsingMediaPlayback:u,customizeAudioOption:{speakerOnly:d}}}=o,c=ye(o);if(s)return Promise.reject({type:W,reason:"Computer audio has not finished joining, please wait."});if(a){if(l&&!to())return Promise.reject({type:W,reason:"Cannot stop audio during sharing with audio"});r(Bu(void 0)),r(Vo(void 0))}return(c==null?void 0:c.audio)===ze.Computer?(r(ul($c.Active)),await n.leaveComputerAudio(),i.joinOrLeaveVoip(!1),d&&r(Fc({userId:o.meeting.userId,key:"isSpeakerOnly",value:void 0})),u&&Kr.getInstance().stopAudioElement(),r(vp(0)),Ce(Dg)):Promise.resolve("")})(this[K])}muteAudio(e){return((t,r)=>{const{store:{getState:n,dispatch:i},rwgAgent:o,mediaAgent:s}=t,a=n(),l=ye(a);if(r==null||r===(l==null?void 0:l.userId))return(l==null?void 0:l.audio)===""||(l==null?void 0:l.audio)===null?Promise.reject({type:W,reason:"no audio joined"}):(l==null?void 0:l.muted)===!0?Promise.resolve(""):(i(Ao(qi.Active)),o.mute(l.userId,!0),s.muteAudio(),a.audio.isShareAudioEnabled&&!to()&&i(Vo(!0)),Ce(cw).then(()=>""));if(An(a)){const{participants:{allowTalkAttendeesList:u,attendeesList:d}}=a,c=u.concat(d).find(p=>p.userId===r);return c?c.audio===""||c===null?Promise.reject({type:W,reason:"no audio joined"}):c.muted===!1?(o.mute(r,!0),Ce(pD,p=>p.id===r&&p.muted==1)):Promise.resolve(""):Promise.reject({type:Te,reason:"no matching user"})}return Promise.reject({type:Sr})})(this[K],e)}unmuteAudio(e){return(async(t,r)=>{const{store:{getState:n,dispatch:i},rwgAgent:o,mediaAgent:s}=t,a=n(),l=ye(a);if(r===void 0||r===(l==null?void 0:l.userId)){if((l==null?void 0:l.audio)===""||(l==null?void 0:l.audio)===null)return Promise.reject({type:W,reason:"no audio joined"});if((l==null?void 0:l.muted)===!1)return Promise.resolve("");if(a.audio.isShareAudioEnabled&&!to()){if(a.audio.isSharingAudio)return Promise.reject({type:W,reason:"Cannot unmute audio during sharing with audio"});i(Vo(!1))}if(a.audio.bCanUnmute||l!=null&&l.isHost||l!=null&&l.bCoHost){if(Xt(l.userRole)){const{audio:{isAllowToTalk:u,isAllowToTalkAttendeeConnected:d}}=a;u?d||(await s.leaveComputerAudio(),await Ja(s,a,!0),i(Vb(!0))):Promise.reject({type:W,reason:"Webinar attendee cannot unmute self audio."})}return i(zc(tc.Active)),o.mute(l.userId,!1),s.unmuteAudio(),Ce(pw).then(()=>"")}return Promise.reject({type:Sr,reason:"host not allow unmute themselves"})}if(An(a)){const{participants:{allowTalkAttendeesList:u,attendeesList:d}}=a,c=u.concat(d).find(p=>p.userId===r);return c?c.audio===""||c===null?Promise.reject({type:W,reason:"no audio joined"}):(c.muted===!0&&o.mute(r,!1),Promise.resolve("")):Promise.reject({type:Te,reason:"no matching user"})}return Promise.reject({type:Sr})})(this[K],e)}dialOut(e,t,r,n){return((i,o,s,a,l)=>{const{store:{getState:u,dispatch:d},rwgAgent:c}=i,p=u(),{meeting:{callOutCountry:h,isSupportCallOut:m}}=p;if(m&&Array.isArray(h)&&h.findIndex(f=>f.code===o)>-1){const{seq:f}=c.audioDialout(o+s,a,!(l==null||!l.callMe),!(l==null||!l.pressingOne),!(l==null||!l.greeting));return d(PM({sequence:f,phoneNumber:o+s})),So(Js.JoinAudioByCallMe)}return Promise.reject({type:Te,reason:"no matching country code"})})(this[K],e,t,r,n)}cancelDialOut(e,t,r){return((n,i,o,s)=>{const{rwgAgent:a}=n;return a.audioCancelDialout(i+o,!(s==null||!s.callMe)),So(Js.cancelDialOut)})(this[K],e,t,r)}hangup(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,n=t(),i=ye(n);return(i==null?void 0:i.audio)===ze.Phone&&i.userId!==null?(r.audioDrop(i.userId),So(Js.hangup)):Promise.reject({type:W,reason:"not joined audio by phone"})})(this[K])}switchMicrophone(e){return((t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o}=t,s=n(),{audio:{microphoneDevicesList:a,activeMicrophone:l,mediaPlaybackFile:u,isUsingMediaPlayback:d}}=s,c=a.find(p=>p.deviceId===r);if(r==="default"||typeof r!="string"||c){const p=ye(s);if((p==null?void 0:p.audio)===ze.Computer){let h=!1;if(typeof r=="string")r!==l&&(o.changeMicrophone(r,c==null?void 0:c.label,!(p==null||!p.muted)),i(Ub(void 0)),Kr.getInstance().stopAudioElement(),h=!0);else if(r&&(!d||(u==null?void 0:u.url)!==r.url)){const m=Kr.getInstance();m.setAudioElement(r).then(()=>{r.playback!==void 0&&(o.enablePlayAudioFileLocally(!!r.playback),m.audioElement.dataset.playback=r.playback?"1":"0"),o.changeMicrophone(m.audioElement,void 0,!(p==null||!p.muted)),i(Ub(r))}),h=!0}if(h)return So(Js.JoinComputerAudio)}else typeof r=="string"&&i(Hc(r));return Promise.resolve("")}return Promise.reject({type:lC})})(this[K],e)}switchSpeaker(e){return((t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o}=t,{audio:{speakerDevicesList:s,activeSpeaker:a}}=n();if(r!=="default"&&s.findIndex(u=>u.deviceId===r)==-1)return Promise.reject({type:lC});var l;if(((l=ye(n()))===null||l===void 0?void 0:l.audio)===ze.Computer){if(r!==a)return o.changeSpeaker(r),Ce(vb,u=>u)}else i(Mg(r));return Promise.resolve("")})(this[K],e)}muteShareAudio(e){return((t,r)=>{const{mediaAgent:n,rwgAgent:i,store:{getState:o,dispatch:s}}=t,a=o(),{meeting:{userId:l}}=a;if(r&&r!==l)return B_(r,!0,t.store,n);{const{audio:{isSharingAudio:d,isShareAudioEnabled:c,isShareAudioMuted:p}}=a;if(!c)return Promise.reject({type:W,reason:"Cannot mute sharing audio when sharing audio is not enable"});if(p)return Promise.resolve("");{i.muteShareAudio(!0);let h=Promise.resolve();var u;return d&&(h=(u=n.leaveSharingAudio(!0))===null||u===void 0?void 0:u.then(()=>Jw(n,i,a).then(m=>{m.forEach(f=>s(f))}))),ep(n,l,!0,a),Promise.all([Ce({event:vr,operations:[z(m=>m.bShareAudioOn!==void 0),xe(1)]},m=>m.bShareAudioOn===!1),h]).then(()=>(s(um(!0)),d&&(s(Hu(!1)),T(ju,{state:"off"})),""))}}})(this[K],e)}unmuteShareAudio(e){return((t,r)=>{const{mediaAgent:n,rwgAgent:i,store:{getState:o,dispatch:s}}=t,a=o(),{meeting:{userId:l}}=a;if(r&&r!==l)return B_(r,!1,t.store,n);{const{audio:{isSharingAudio:u,isShareAudioEnabled:d,isShareAudioMuted:c},share:{status:p}}=a;if(!d)return Promise.reject({type:W,reason:"Cannot unmute sharing audio when sharing audio is not enable"});if(c===!1)return Promise.resolve("");{i.muteShareAudio(!1);let h=Promise.resolve();return u===!1&&p===Fe.Sharing&&(h=P0(n,i,a).then(m=>{m.forEach(f=>s(f))})),ep(n,l,!1,a),Promise.all([Ce({event:vr,operations:[z(m=>m.bShareAudioOn!==void 0),xe(1)]},m=>m.bShareAudioOn===!0),h]).then(()=>(s(um(!1)),u===!1&&p===Fe.Sharing&&(s(Hu(!0)),T(ju,{state:"on"})),""))}}})(this[K],e)}subscribeAudioStatisticData(e){return(async(t,r)=>{const{mediaAgent:n,store:{getState:i}}=t,o=i(),s=ye(o),a=!r||r.decode,l=!r||r.encode;if(!s)return Promise.reject({type:W,reason:"Call this function after the 'join' method resolved."});{var u;const{encodeInitStatus:d,decodeInitStatus:c}=k0(o,s);(Gt()?Vw(o,!((u=o.audio.customizeAudioOption)!==null&&u!==void 0&&u.speakerOnly)):Lr("audio",d,c)).subscribe(p=>{let[h,m]=p;h&&m&&(a&&n.subscribeToQos([mr.AudioDecode],as),l&&n.subscribeToQos([mr.AudioEncode],as))})}return""})(this[K],e)}unsubscribeAudioStatisticData(e){return(async(t,r)=>{const{mediaAgent:n,store:{dispatch:i}}=t,o=!r||r.decode,s=!r||r.encode;return o&&(n.unsubscribeFromQos([mr.AudioDecode]),i(dm(Xf))),s&&(n.unsubscribeFromQos([mr.AudioEncode]),i(cm(Xf))),null})(this[K],e)}enableBackgroundNoiseSuppression(e){return((t,r)=>{const{mediaAgent:n,store:{getState:i,dispatch:o}}=t,{audio:{isBackgroundNoiseSuppression:s,originalSound:a}}=i();let l=r;return l===!!s||(l&&!A2(Gt())?(console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on desktop browser"),l=!1):(l&&a&&(console.warn("Enabling noise suppression will disable original sound."),o($b(!1))),o(xb(l)),n.changeAudioProfile(O0(i())))),Promise.resolve("")})(this[K],e)}enableSyncButtonsOnHeadset(e){return((t,r)=>{const{mediaAgent:n,store:{getState:i,dispatch:o}}=t,s=i(),{audio:{isHIDEnabled:a,microphoneDevicesList:l,activeMicrophone:u}}=s;if(r===!!a)return Promise.resolve("");{const c=ye(s);var d;return c?(r&&!_2()?console.warn("Sync buttons on headset is not supported on the current platform"):(n.enableSyncButtonsOnHeadset(r,(d=l.find(p=>p.deviceId===u))===null||d===void 0?void 0:d.label,c.muted),o(HM(r))),Promise.resolve("")):Promise.reject({type:W,reason:"Please call `enableSyncButtonsOnHeadset` method after the `join` has been resolved"})}})(this[K],e)}enableOriginalSound(e){return((t,r)=>{const{mediaAgent:n,store:{getState:i,dispatch:o}}=t,{audio:{isBackgroundNoiseSuppression:s,originalSound:a}}=i(),l=r;return l===a||typeof r=="object"&&hp(r,a)||(typeof l!="object"||(l==null?void 0:l.stereo)!==!0||C2()||(console.warn("Cannot enable stereo audio on current platform due to the browser limitation"),l.stereo=!1),s&&l&&(console.warn("Enabling original sound will disable background noise suppression."),o(xb(!1))),o($b(l)),n.changeAudioProfile(O0(i()))),Promise.resolve("")})(this[K],e)}callCRCDevice(e,t){return((r,n,i)=>{const{rwgAgent:o,store:{dispatch:s,getState:a}}=r,{seq:l}=o.inviteCRCDevice(n,i);return s(WM({sequence:l,ip:n,protocol:i})),So(Js.crcCallOut).then(()=>{var u;const{audio:{crcDevice:d}}=a();return(u=d.find(c=>c.ip===n&&c.protocol===i&&c.sequence===l))===null||u===void 0?void 0:u.uuid})})(this[K],e,t)}cancelCallCRCDevice(e,t){return((r,n,i)=>{const{rwgAgent:o,store:{getState:s}}=r,{audio:{crcDevice:a}}=s(),l=a.find(u=>u.ip===n&&u.protocol===i);return l&&l.returnCode===Bh.Ringing?(o.cancelInviteCRCDevice(l.transId),Promise.resolve("")):Promise.reject({type:W,reason:"Cannot cancel call out "})})(this[K],e,t)}muteAllAudio(){return(e=>{const{rwgAgent:t}=e;return t.audioMuteAll(!0),nf("bMutedAll",!0)})(this[K])}unmuteAllAudio(){return(e=>{const{rwgAgent:t}=e;return t.audioMuteAll(!1),nf("bMutedAll",!1)})(this[K])}muteAudioUponEntry(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return function(t){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];const{store:{getState:n},rwgAgent:i}=t,{audio:{bMutedUponEntry:o}}=n();return o===r?Promise.resolve(""):(i.setMuteOnEntry(r),nf("bMutedUponEntry",r))}(this[K],e)}getMicList(){return(e=>{let{store:{getState:t}}=e;const r=t();return r.audio?[...r.audio.microphoneDevicesList]:[]})(this[K])}getSpeakerList(){return(e=>{let{store:{getState:t}}=e;const r=t();return r.audio?[...r.audio.speakerDevicesList]:[]})(this[K])}getAudioState(e){return((t,r)=>{let{store:{getState:n}}=t;const i=n(),{meeting:{isWebinar:o}}=i;let s=null;return r==null?s=ye(i):(s=i.participants.attendeesList.find(a=>a.userId===r),o&&!s&&(s=i.participants.xmppAttendeeList.find(a=>a.userId===r))),s?s.audio:null})(this[K],e)}isAudioMuted(e){return((t,r)=>{let{store:{getState:n}}=t;const i=n(),{meeting:{isWebinar:o}}=i;let s=null;return r===void 0?s=ye(i):(s=i.participants.attendeesList.find(a=>a.userId===r),o&&!s&&(s=i.participants.xmppAttendeeList.find(a=>a.userId===r))),!!s&&!!s.muted})(this[K],e)}getActiveMicrophone(){return(e=>{let{store:{getState:t}}=e;const r=t();return r.audio?r.audio.activeMicrophone:null})(this[K])}getActiveSpeaker(){return(e=>{let{store:{getState:t}}=e;const r=t();return r.audio?r.audio.activeSpeaker:null})(this[K])}isSupportCallOut(){return(e=>{let{store:{getState:t}}=e;const{meeting:{isSupportCallOut:r,callOutCountry:n}}=t();return r&&Array.isArray(n)&&(n==null?void 0:n.length)>0})(this[K])}getDialOutStatus(){return(e=>{let{store:{getState:t}}=e;const{audio:r}=t();return r==null?void 0:r.dialout[r.dialout.length-1].returnCode})(this[K])}getDialOutCountries(){return(e=>{let{store:{getState:t}}=e;const{meeting:{callOutCountry:r}}=t();return Array.isArray(r)?r:[]})(this[K])}getShareAudioStatus(){return(e=>{let{store:{getState:t}}=e;const{audio:{isShareAudioEnabled:r,isShareAudioMuted:n,isSharingAudio:i}}=t();return{isShareAudioEnabled:r,isShareAudioMuted:n,isSharingAudio:i}})(this[K])}isOthersShareAudioMutedLocally(e){return((t,r)=>{var n;let{store:{getState:i}}=t;const{audio:{localShareAudioUserMutedList:o}}=i();return(n=o.find(s=>s.userId===r))===null||n===void 0?void 0:n.muted})(this[K],e)}getAudioStatisticData(){return(e=>{let{store:{getState:t}}=e;const{audio:{statistic:r}}=t();return{...r}})(this[K])}getDialInInfo(){return(e=>{let{store:{getState:t}}=e;const{meeting:{meetingNumber:r,tollNumbers:n,participantID:i,h323Password:o}}=t();return n===void 0?null:{meetingId:r,participantId:i,password:o||"",tollNumbers:n.map(s=>({...s}))}})(this[K])}isSupportMicrophoneAndShareAudioSimultaneously(){return to()}getAudioMediaPlaybackController(){return(e=>{let{store:{getState:t},mediaAgent:r}=e;const n=t(),{audio:{isUsingMediaPlayback:i}}=n;if(i){const{audioElement:o}=Kr.getInstance();return CC(o,"audio",n,r)}return null})(this[K])}startVideo(e){return((t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o}=t,s=n(),{media:{videoDecodeStatus:a,videoEncodeStatus:l,enforceVirtualBackground:u},video:{isCaptureCameraLoading:d,isCurrentUserStartedVideo:c,isVideoMuted:p}}=s,h=r?{...r}:void 0;if(c)return Promise.reject({type:W,reason:"Video is started"});if(d)return Promise.reject({type:W,reason:"Camera is starting,please wait."});if(p&&!An(s))return Promise.reject({type:W,reason:"Video is muted by the host"});if(Rl(u))if((h==null?void 0:h.videoElement)instanceof HTMLVideoElement)console.warn('The "videoElement" option will be removed in version 2.x. Please use the "attachVideo" or "renderVideo" method to render the self-view.');else{console.warn('Rendering self-view on Chromium browser, Android browser without SharedArrayBuffer or iOS browser requires video tag, Please use "attachVideo" or pass a video element instead of a canvas element in the "renderVideo" method');let m=document.body.querySelector(`#${Rv}`);if(!m){m=document.createElement("video");const f=ae.isSafari||ae.isIOSMobile?"position:fixed;top:-10000px;left:-10000px":"display:none";m.setAttribute("style",f),m.muted=!0,m.playsInline=!0,m.autoplay=!0,m.id=Rv,document.body.appendChild(m)}h&&Object.assign(h,{videoElement:m})}return!Mm(u)&&h!=null&&h.virtualBackground?Promise.reject({type:Te,reason:"Virtual background only compatible with Chrome and Edge with SharedArrayBuffer enabled."}):(i(Xl(!0)),Lr("video",l,a).subscribe(m=>{let[f]=m;if(f){const v=n(),{video:{activeCamera:g,isSupportHDVideo:y,virtualBackground:{imageSrc:S},mask:{imageSrc:b}}}=v,{cameraId:R=g,captureWidth:w=0,captureHeight:O=0,mirrored:D,hd:U,fullHd:x,virtualBackground:P,mask:I}=h||{};D&&o.mirrorVideo(D),(U||x)&&(console.log("HD support is currently limited, and comes with a number of restrictions and limitations. Please visit https://developers.zoom.us/docs/video-sdk/web/video/#720p-video for more details"),y&&Oe.isCompatibleHardwareForEncode()&&Oe.isSupportVideoEncodeHardwareAcceleration().then(C=>{C&&(o.enableHardwareAccelerationForVideoEncode(!0),i(Ml({encode:C})))}),y||console.warn("Cannot capture HD video due to either account restriction and/or hardware limitation"));const E=P||P===void 0&&!!S&&I===void 0,A=I||I===void 0&&!!b;let _=Promise.resolve({});if(E){const C=P||{imageUrl:void 0,cropped:void 0};_=lf({...C,captureWidth:w,captureHeight:O,cameraId:R,hd:U},o,v).then(()=>C)}else if(A){const C=I||{imageUrl:void 0,cropped:void 0,clip:void 0,rootWidth:void 0,rootHeight:void 0};C.rootWidth||Object.assign(C,{rootWidth:1280}),C.rootHeight||Object.assign(C,{rootHeight:720}),_=uf({...C,captureWidth:w,captureHeight:O,cameraId:R,hd:U},o,v).then(()=>C)}h!=null&&h.mediaFile&&!Oe.isSupportMediaPlaybackAsVideoInput()&&(console.warn("Cannot use media file as video input due to the browser limitation."),Object.assign(h,{mediaFile:void 0})),_.then(C=>AC("video",n()).then(()=>C)).then(C=>{OV(o,v,h).forEach(V=>{i(V)}),E?i(Yh(C)):A&&i(Xh(C))}).catch(C=>{i(Xl(!1)),T(eD,{reason:C})})}else i(Xl(!1))}),So(aC.startCaptureVideo).then(()=>{i(ym(!1)),i(vm(!1))}).finally(()=>{i(Xl(!1))}))})(this[K],e)}stopVideo(){return(e=>{const{store:{getState:t},mediaAgent:r}=e,{video:{isCaptureCameraLoading:n,isCurrentUserStartedVideo:i,isUsingMediaPlayback:o}}=t();return n?Promise.reject({type:W,reason:"Camera is starting,please wait."}):i?(r.stopCaptureVideo(),o&&Kr.getInstance().stopVideoElement(),Ce(mu,s=>(s==null?void 0:s.failed)!==!0)):Promise.reject({type:W,reason:"camera is closed"})})(this[K])}switchCamera(e){return((t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o}=t,s=n(),{video:{cameraDevicesList:a,isCurrentUserStartedVideo:l,virtualBackground:u,mask:d,mediaPlaybackFile:c,isUsingMediaPlayback:p,customizedVideoOption:h}}=s;if(typeof r=="string"&&!RV(r,a))return Promise.reject({type:Te,reason:"Cannot find cameraDeviceId in camera devices list."});if(l||u!=null&&u.isVBConfigured||d.isMaskConfigured){if(typeof r=="string"){const{captureWidth:m,captureHeight:f}=Yw(h);o.changeCamera(r,kg.includes(r),{width:m,height:f}),i(Yb(void 0)),Kr.getInstance().stopVideoElement()}else if(r&&(!p||(c==null?void 0:c.url)!==r.url)){const m=Kr.getInstance();m.setVideoElement(r).then(()=>{o.changeCamera(m.videoElement),i(Yb(r))})}return So(aC.switchCameraVideo).then(()=>{i(ym(!1)),i(vm(!1))}).catch(m=>(o.stopCaptureVideo(),Promise.reject(m)))}return Promise.resolve()})(this[K],e)}renderVideo(e,t,r,n,i,o,s,a,l){return((u,d,c,p,h,m,f,v,g,y)=>{const{store:{getState:S,dispatch:b},mediaAgent:R,rwgAgent:w}=u,O=S(),{meeting:{userId:D},media:{enforceMultipleVideos:U,enforceVirtualBackground:x,disableRenderLimits:P},video:{subscribedVideoList:I,renderedVideoList:E}}=O,A=hu(!!U,P),_=Rl(x)&&c===D;if(d instanceof HTMLCanvasElement&&!I.includes(c)&&I.length>=A&&new Set(E.map(M=>M.canvasId)).has(d.id))return Promise.reject({type:W,reason:`subscribe video counts greater than maximum size (${A})`});if(Fd(O).findIndex(M=>M.userId===c)===-1)return Promise.reject({type:Te,reason:"user is not send video"});if(d.id||(d.id=Do("__ZOOM_SDK_VIDEO_CANVAS_@__")),_){if(d instanceof HTMLVideoElement){d.playsInline=!0,d.muted=!0,d.autoplay=!0,ae.isIOSMobile&&(R.switchCanvasForVideoCapture(d),b(e0())),R.renderVideo(d,c,g||pa,p,h,m,f,v,!0,y||"",!1),b(Jh(c)),b(PN(d.id));const M=document.querySelector(`#${Rv}`);return M&&M.remove(),Promise.resolve("")}return Promise.reject({type:Te,reason:"You must use a <video> element to render self video for Chromium browser, Android browser without SharedArrayBuffer or iOS browser "})}const C=!!y,{media:{videoDecodeStatus:V}}=O;return Lr("video","success",V).subscribe(async M=>{let[$,B]=M;if(B){const{video:{ensuredCanvas:ee,renderedVideoList:ie}}=S();let be=d;ee.includes(d.id)||(be=rf(d),b(IN(d.id)));const le=c===D,[te,ve]=Z2(c,v,S()),Ae=g||pa,me=await async function(Me,F){const{video:{prefetchedVideo:j}}=F;return(j==null?void 0:j.userId)!==Me||j.loaded?"":dr(jr(Ge(lD,1),Nt(1e3).pipe(_n(""))))}(c,S());ie.some(Me=>Me.userId===c&&Me.key===Ae&&Me.canvasId===be.id)||R.renderVideo(be,c,Ae,p,h,m,f,ve,le,y||"",C),c!==D&&w.subscribeVideo(c,ve,!1),I.includes(c)||b(Jh(c)),me&&b(bu(void 0)),b(Su({userId:c,key:Ae,canvasId:be.id,videoQuality:te,aspectRatio:h?p/h:0}))}}),V==="failed"?Promise.reject({type:Pi,reason:"Video  decode status is failed"}):Promise.resolve("")})(this[K],e,t,r,n,i,o,s,a,l)}stopRenderVideo(e,t,r,n){let i=arguments.length>4&&arguments[4]!==void 0&&arguments[4],o=arguments.length>5?arguments[5]:void 0;return function(s,a,l,u,d){let c=arguments.length>5&&arguments[5]!==void 0&&arguments[5],p=arguments.length>6?arguments[6]:void 0;const{store:{getState:h,dispatch:m},mediaAgent:f,rwgAgent:v}=s,g=h(),{video:{subscribedVideoList:y,renderedVideoList:S},meeting:{userId:b},media:{enforceVirtualBackground:R}}=g;if(y.includes(l)){const w=u||pa;if(Rl(R)&&l===b&&a instanceof HTMLVideoElement)return a.pause(),m(Zh(l)),m(e0(a.id)),Promise.resolve("");if(S.find(O=>O.userId===l&&O.key===w&&O.canvasId===a.id)&&(f.stopRenderVideo(a.id,l,w,sy(d),c),S.filter(O=>O.userId===l).length==1&&(l!==b&&v.unsubscribeVideo(l),m(Zh(l))),m(Sm({userId:l,key:w,canvasId:a.id}))),p&&b!==p){const{video:{subscribedVideoList:O,prefetchedVideo:D}}=h();Fd(g).find(U=>U.userId===p)&&!O.includes(p)&&(D==null?void 0:D.userId)!==p&&m(bu({userId:p,lastCopy:D}))}}return Promise.resolve("")}(this[K],e,t,r,n,i,o)}updateVideoCanvasDimension(e,t,r){return((n,i,o,s)=>{const{mediaAgent:a}=n;return o>=0&&s>=0&&a.updateRenderedVideoCanvasDimension(i,o,s),Promise.resolve("")})(this[K],e,t,r)}adjustRenderedVideoPosition(e,t,r,n,i,o,s){return((a,l,u,d,c,p,h,m)=>{const{store:{getState:f,dispatch:v},mediaAgent:g}=a,{video:{subscribedVideoList:y}}=f();if(y.includes(u)){if(l instanceof HTMLVideoElement)return Promise.resolve("");const S=m||pa;g.adjustRenderedVideoPosition(l.id,u,S,p,h,d,c,sy("#000")),v(Su({userId:u,key:S,canvasId:l.id,aspectRatio:c?d/c:0}))}else console.warn("Cannot adjust the size or position of the video as the video has not been rendered yet.");return Promise.resolve("")})(this[K],e,t,r,n,i,o,s)}clearVideoCanvas(e,t){return((r,n,i)=>{const{mediaAgent:o}=r;return o.clearVideoCanvas(n.id,sy(i)),Promise.resolve("")})(this[K],e,t)}mirrorVideo(e){return((t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o}=t,{media:{enforceVirtualBackground:s},video:{isCurrentUserStartedVideo:a,virtualBackground:l,selfPreviewVideoList:u,customizedVideoOption:d,videoAttachments:c,isMirrored:p},meeting:{userId:h}}=n();if(p===r)return Promise.resolve("");if(a||l!=null&&l.isVBConfigured){if(Rl(s)){const m=[];u.length>0&&u.forEach(f=>{m.push(document.getElementById(f))}),d!=null&&d.videoElement&&m.push(document.querySelector(d==null?void 0:d.videoElement)),c&&c[`${h}`]&&c[`${h}`].forEach(f=>{var v;m.push(f==null||(v=f.render)===null||v===void 0?void 0:v.el)}),m.filter(f=>!!f).forEach(f=>{f&&TV(f,r)})}else o.mirrorVideo(r);i(ON(r))}return Promise.resolve("")})(this[K],e)}enableHardwareAcceleration(e){return((t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o}=t,{video:{isSupportHDVideo:s}}=n();if(typeof r=="boolean"||r.decode!==void 0){const a=typeof r=="boolean"?r:!!r.decode;return a?Oe.isSupportVideoDecodeHardwareAcceleration().then(l=>(l&&o.enableHardwareAccelerationForVideoDecode(l),i(Ml({decode:l})),l)):(o.enableHardwareAccelerationForVideoDecode(a),i(Ml({decode:a})),Promise.resolve(!0))}if(typeof r=="boolean"||r.encode!==void 0){const a=typeof r=="boolean"?r:!!r.encode;if(s){if(!a)return o.enableHardwareAccelerationForVideoEncode(!1),i(Ml({encode:!1})),Promise.resolve(!0);if(Oe.isCompatibleHardwareForEncode())return Oe.isSupportVideoEncodeHardwareAcceleration().then(l=>(l&&o.enableHardwareAccelerationForVideoEncode(l),i(Ml({encode:l})),l));console.warn("Can not turn on hardware acceleration with your graphic card due to the technical limitation")}else typeof r!="boolean"&&r!=null&&r.encode&&console.warn("Can not use the hardware acceleration for video encoding due to the account restriction")}return Promise.resolve(!1)})(this[K],e)}subscribeVideoStatisticData(e){return(async(t,r)=>{const{mediaAgent:n,store:{getState:i,dispatch:o}}=t,{media:{videoDecodeStatus:s,videoEncodeStatus:a},video:{subscriptionStatus:l}}=i(),u=!r||r.decode,d=!r||r.encode;return Lr("video",a,s).subscribe(c=>{let[p,h]=c;const m={};u&&h&&!l.decode&&(n.subscribeToQos([mr.VideoDecode],as),Object.assign(m,{decode:!0})),d&&p&&!l.encode&&(n.subscribeToQos([mr.VideoEncode],as),Object.assign(m,{encode:!0})),r!=null&&r.detailed&&h&&!l.detailed&&(n.enableVideoObserver(!0),Object.assign(m,{detailed:!0})),o(Xb(m))}),null})(this[K],e)}unsubscribeVideoStatisticData(e){return(async(t,r)=>{const{mediaAgent:n,store:{dispatch:i}}=t,o=!r||r.decode,s=!r||r.encode,a={};return o&&(n.unsubscribeFromQos([mr.VideoDecode]),i(Em(Cs)),Object.assign(a,{decode:!1})),s&&(n.unsubscribeFromQos([mr.VideoEncode]),i(wm(Cs)),Object.assign(a,{encode:!1})),r!=null&&r.detailed&&(n.enableVideoObserver(!1),Object.assign(a,{detailed:!1})),i(Xb(a)),null})(this[K],e)}previewVirtualBackground(e,t,r,n){return((i,o,s,a,l)=>{const{store:{getState:u,dispatch:d},mediaAgent:c}=i,p=u();return lf({imageUrl:s,cropped:a,cameraId:l},c,p,o).then(h=>(typeof h=="object"&&h!=null&&h.type&&d(h),d(Yh({imageUrl:s,cropped:a})),!0)).catch(h=>Promise.reject({type:W,reason:h}))})(this[K],e,t,r,n)}updateVirtualBackgroundImage(e,t){return((r,n,i)=>{const{store:{getState:o,dispatch:s},mediaAgent:a}=r,l=o(),{video:{virtualBackground:{imageSrc:u,cropped:d},backgroundMode:c}}=l;return n===u&&i===d?Promise.resolve(!0):c===xi.Mask?Promise.reject({type:W,reason:"Cannot update virtual background in the mask mode"}):lf({imageUrl:n,cropped:i},a,l).then(p=>(typeof p=="object"&&p!=null&&p.type&&s(p),s(Yh({imageUrl:n,cropped:i})),!0)).catch(p=>Promise.reject({type:W,reason:p}))})(this[K],e,t)}stopPreviewVirtualBackground(){return(e=>{const{store:{getState:t},mediaAgent:r}=e,{video:{virtualBackground:{isVBConfigured:n}}}=t();return n?(r.stopVirtualBackgroundSetting(),Promise.resolve(!0)):Promise.reject({type:W,reason:"Cannot stop preview virtual background before start"})})(this[K])}previewVideoMask(e,t){return((r,n,i)=>{const{store:{getState:o,dispatch:s},mediaAgent:a}=r,l=o();return i.rootWidth&&i.rootHeight||Object.assign(i,{rootWidth:n.width,rootHeight:n.height}),uf(i,a,l,n).then(u=>(typeof u=="object"&&u!=null&&u.type&&s(u),s(Xh(i)),!0)).catch(u=>Promise.reject({type:W,reason:u}))})(this[K],e,t)}updateVideoMask(e){return((t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o}=t,s=n(),{video:{mask:a,backgroundMode:l}}=s,{isMaskConfigured:u}=a;if(l===xi.VirtualBackground)return Promise.reject({type:W,reason:"Cannot update mask in the virtual background mode"});if(u){const d={...r};return["imageUrl","cropped","clip","rootHeight","rootWidth"].forEach(c=>{(r==null?void 0:r[c])===void 0&&(c==="imageUrl"?Object.assign(d,{imageUrl:a.imageSrc}):Object.assign(d,{[`${c}`]:a[c]}))}),uf(d,o,s).then(c=>(typeof c=="object"&&c!=null&&c.type&&i(c),i(Xh(d)),!0)).catch(c=>Promise.reject({type:W,reason:c}))}return Promise.reject({type:W,reason:"Cannot update mask"})})(this[K],e)}stopPreviewVideoMask(){return(e=>{const{store:{getState:t},mediaAgent:r}=e,{video:{mask:{isMaskConfigured:n}}}=t();return n?(r.stopMaskSetting(),Promise.resolve(!0)):Promise.reject({type:W,reason:"Cannot stop preview mask before start"})})(this[K])}requestFarEndCameraControl(e){return((t,r)=>{const{store:{getState:n},rwgAgent:i}=t,o=n(),{meeting:{userId:s},video:{farEndCameraControlStatus:{controlledUserList:a}}}=o;return s===r?Promise.reject({type:W,reason:'Using "stream.controlCamera" method to control self camera'}):by(o).findIndex(l=>l.userId===r)!==-1?(a.includes(r)||i.sendFarEndCameraControl(Gr.Request,r),Promise.resolve("")):Promise.reject({type:Te,reason:"Cannot request control camera with video off"})})(this[K],e)}approveFarEndCameraControl(e){return((t,r)=>{const{store:{getState:n,dispatch:i},rwgAgent:o}=t,{video:{currentCameraControlStatus:{isRequested:s,isInControl:a,controllingUserId:l},ptz:u,activeCamera:d}}=n();if(s){if(a&&(!l||r===l))return Promise.resolve("");o.sendFarEndCameraControl(Gr.Approve,r);const c=u==null?void 0:u[d];return c!==void 0&&o.sendCameraAblity({pan:!!c.pan,tilt:!!c.tilt,zoom:!!c.zoom}),i(Im(!1)),i(Am({isInControl:!0,userId:r})),T(nm,{isControlled:!0,userId:r}),Promise.resolve("")}return Promise.reject({type:W,reason:"Cannot approve before request"})})(this[K],e)}declineFarEndCameraControl(e){return((t,r)=>{const{store:{getState:n,dispatch:i},rwgAgent:o}=t,{video:{currentCameraControlStatus:{isInControl:s,isRequested:a}}}=n();return a||s?(o.sendFarEndCameraControl(Gr.Decline,r),i(Im(!1)),i(Am({isInControl:!1,userId:0})),T(nm,{isControlled:!1}),Promise.resolve("")):Promise.reject({type:W,reason:"Cannot decline before request"})})(this[K],e)}giveUpFarEndCameraControl(e){return((t,r)=>{const{store:{getState:n,dispatch:i},rwgAgent:o}=t,{video:{farEndCameraControlStatus:{controlledUserList:s}}}=n();return s.includes(r)?(o.sendFarEndCameraControl(Gr.GiveUp,r),i(Cm(r)),Promise.resolve("")):Promise.reject({type:W,reason:"Cannot give up control befire aquired"})})(this[K],e)}controlCamera(e){return((t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o}=t,{video:{isCurrentUserStartedVideo:s,ptz:a,activeCamera:l}}=n();if(s){const{cmd:u,range:d,reset:c}=r,p=a[l];if(p){const h=Xw(p)||{},{key:m,range:f}=kV(u,d);if(p[m])return Object.assign(h,{[m]:c?0:PV(p[m].capability,p[m].value,f)}),o.movePTZCamera(h).then(()=>{i(_w({constraints:h,deviceId:l}))}).catch(v=>Promise.reject({type:W,reason:v}))}return Promise.resolve("")}return Promise.reject({type:W,reason:"Cannot control the camera before it's started"})})(this[K],e)}controlFarEndCamera(e){return((t,r)=>{const{store:{getState:n,dispatch:i},rwgAgent:o}=t,s=n(),{video:{farEndCameraControlStatus:{controlledUserList:a,isControlling:l}}}=s,{userId:u,cmd:d,range:c}=r;if(l)return Promise.reject({type:W,reason:"Cannot send new command while the previous control is not done"});if(a.includes(u)){if(d===ls.SwitchCamera)return o.sendFarEndCameraControl(Gr.SwitchCamera,u,ls.SwitchCamera),Promise.resolve("");{const p=by(s).find(h=>h.userId===u);if(p==null||!p.nFECC)return Promise.reject({type:W,reason:"The far end camera does not support PTZ"});if(c&&c>0){const h=c/100*1e4;return o.sendFarEndCameraControl(Gr.StartControl,u,d),i(Zb(!0)),Lc(200).pipe(Zr(Nt(h-100).pipe(xe(1)))).subscribe(()=>{o.sendFarEndCameraControl(Gr.ContinueControl,u,d)}),dr(Nt(h).pipe(de(()=>{o.sendFarEndCameraControl(Gr.StopControl,u,d),i(Zb(!1))}))).then(()=>"")}return Promise.reject({type:Te,reason:"Range cannot be negative or 0"})}}return Promise.reject({type:W,reason:"Cannot control before request granted"})})(this[K],e)}attachVideo(e,t,r){return((n,i,o,s)=>{const{store:{getState:a,dispatch:l},rwgAgent:u}=n,d=a(),{meeting:{userId:c},media:{enforceMultipleVideos:p,alternativeNameForVideoPlayer:h,enforceVirtualBackground:m,disableRenderLimits:f},video:{videoAttachments:v,subscribedVideoList:g}}=d,y=hu(!!p,f);if(y>1&&g.length>y)throw Promise.reject({type:W,reason:`subscribe video counts greater than maximum size (${y})`});if(Fd(d).findIndex(U=>U.userId===i)===-1)return Promise.reject({type:Te,reason:"user is not send video"});const{media:{videoDecodeStatus:S}}=d;let b;const R=h??"video-player";if(s){var w,O;if(typeof s=="string"){if(b=document.querySelector(s),!b)return Promise.reject({type:"INVALID_PARAMETERS",reason:"Cannot find the element"})}else b=s;if(((w=b)===null||w===void 0||(w=w.tagName)===null||w===void 0?void 0:w.toUpperCase())!==R.toUpperCase())return Promise.reject({type:"INVALID_PARAMETERS",reason:"Invalid element type"});const U=Number((O=b.getAttribute("node-id"))!==null&&O!==void 0?O:"0");if(U!==i&&Rl(m)&&[U,i].includes(c)){var D;const x=document.createElement(R);for(const P of b.attributes)x.setAttribute(P.name,P.value);U&&(b.setAttribute("node-id","0"),l(ef({userId:U,element:b}))),(D=b.parentElement)===null||D===void 0||D.replaceChild(x,b),b=x}}else b=document.createElement(R);return Lr("video","success",S).subscribe(async U=>{let[x,P]=U;if(P){const[E,A]=Z2(i,o,a()),_=v[`${i}`];var I;b&&_&&_.findIndex(C=>C===b)!==-1?b.setAttribute("video-quality",`${A}`):(I=b)===null||I===void 0||I.setAttribute("node-id",`${i}`),l(CN({userId:i,element:b})),i!==c&&u.subscribeVideo(i,A,!1),g.includes(i)||l(Jh(i)),l(Su({userId:i,key:pa,canvasId:rc,videoQuality:E,aspectRatio:16/9}))}}),Promise.resolve(b)})(this[K],e,t,r)}detachVideo(e,t){return((r,n,i)=>{const{store:{getState:o,dispatch:s},rwgAgent:a}=r,l=o(),{video:{subscribedVideoList:u,videoAttachments:d},meeting:{userId:c},media:{alternativeNameForVideoPlayer:p}}=l;if(u.includes(n)){let f;const v=p??"video-player";var h;i&&(f=typeof i=="string"?document.querySelector(i):i,((h=f)===null||h===void 0||(h=h.tagName)===null||h===void 0?void 0:h.toUpperCase())!==v.toUpperCase()&&(f=void 0));const g=d[`${n}`];let y;if(g&&g.length!==0){var m;f?g.findIndex(R=>R===f)!==-1?(y=f,y.setAttribute("node-id","0"),s(ef({userId:n,element:y}))):console.warn(`${i} has not been attached with userID:${n}`):(y=[...g],y.forEach(R=>{R.setAttribute("node-id","0")}),s(ef({userId:n,element:y})));const{video:{videoAttachments:S,renderedVideoList:b}}=o();((m=S[`${n}`])===null||m===void 0?void 0:m.length)===0&&(b.filter(R=>R.userId===n&&R.canvasId!==rc).length===0&&(n!==c&&a.unsubscribeVideo(n),s(Zh(n))),s(Sm({userId:n,key:pa,canvasId:rc})))}else console.warn(`UserId:${n} has not been attached.`);return Promise.resolve(y)}return Promise.resolve(void 0)})(this[K],e,t)}spotlight(e,t){return((r,n,i)=>{const{store:{getState:o},rwgAgent:s}=r,a=o(),{video:{spotlightUserList:l}}=a;return l.includes(n)?Promise.reject({type:Te,reason:`userId:${n} has already spotlighted`}):Fd(a).findIndex(u=>u.userId===n)===-1?Promise.reject({type:Te,reason:`userId:${n} has not started video`}):(s.spotlightVideo(n,{bReplace:i,bSpotlight:!0,bUnSpotlightAll:!1}),Ce(gu,u=>{const{spotlightList:d}=u;return d.includes(n)}))})(this[K],e,t)}removeSpotlight(e){return((t,r)=>{const{store:{getState:n},rwgAgent:i}=t,o=n(),{meeting:{userId:s},video:{spotlightUserList:a}}=o,l=r||s,u=et(o);if(!a.includes(l)||u.findIndex(p=>p.userId===l)===-1)return Promise.reject({type:Te,reason:`userId:${r} is not spotlighted`});const d=An(o);if(a.length>1&&l===s&&!d)return Promise.reject({type:W,reason:"Cannot remove spotlight for self when the host has multiple spotlighted videos"});if(l!==s&&!d)return Promise.reject({type:Sr,reason:"only host or co-host can cancel others spotlight"});i.spotlightVideo(l,{bReplace:!1,bSpotlight:!1,bUnSpotlightAll:!1});const c=l===s&&a.length===1?im:gu;return Ce(c,p=>{const{spotlightList:h}=p;return!h.includes(l)})})(this[K],e)}removeAllSpotlights(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{video:{spotlightUserList:n}}=t();return n.length===0?Promise.resolve(""):(r.spotlightVideo(null,{bUnSpotlightAll:!0}),Ce(gu,i=>{const{spotlightList:o}=i;return o.length===0}))})(this[K])}isCapturingVideo(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.video&&r.video.isCurrentUserStartedVideo})(this[K])}isCameraTaken(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.video&&r.video.isCameraTaken})(this[K])}isCaptureForbidden(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.video&&r.video.isCaptureForbidden})(this[K])}getCameraList(){return(e=>{const{store:{getState:t}}=e,r=t();if(!r.video)return[];const{video:{cameraDevicesList:n}}=r;return n.map(i=>Object.assign({},i))})(this[K])}getActiveCamera(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.activeCamera:""})(this[K])}getActiveVideoId(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.activeVideoId:0})(this[K])}getVideoMaxQuality(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.receivedVideoMaxQuality:si.Video_90P})(this[K])}getReceivedVideoDimension(){return(e=>{const{store:{getState:t}}=e,r=t();return r.video?r.video.receivedVideoDimension:null})(this[K])}getCapturedVideoResolution(){return(e=>{const{store:{getState:t}}=e;return{...t().video.capturedVideoDimension}})(this[K])}isSupportMultipleVideos(){return(e=>{const{store:{getState:t}}=e,{media:{enforceMultipleVideos:r}}=t();return Tg()||!!r&&!ae.isSupportSharedArrayBuffer&&hu(r)>1})(this[K])}isSupportHDVideo(){return(e=>{var t;const{store:{getState:r}}=e;return(t=r().video)===null||t===void 0?void 0:t.isSupportHDVideo})(this[K])}getHardwareAccelerationStatus(){return(e=>{var t;const{store:{getState:r}}=e;return(t=r().video)===null||t===void 0?void 0:t.hardwareAcceleration})(this[K])}getVideoStatisticData(){return(e=>{let{store:{getState:t}}=e;const{video:{statistic:r}}=t();return{...r}})(this[K])}isSupportVirtualBackground(){return(e=>{const{store:{getState:t}}=e;return Mm(t().media.enforceVirtualBackground)})(this[K])}getVirtualbackgroundStatus(){return(e=>{const{store:{getState:t}}=e;return{...t().video.virtualBackground}})(this[K])}isRenderSelfViewWithVideoElement(){return Rl(this[lt].getState().media.enforceVirtualBackground)}getNetworkQuality(e){return((t,r)=>{var n;const{store:{getState:i}}=t,o=i(),{video:s,meeting:{userId:a}}=o,l=r??a,u=s==null||(n=s.networkQuality)===null||n===void 0?void 0:n[`${l}`];if(u){const d={};return u.uplink&&Object.assign(d,{uplink:u.uplink.level}),u.downlink&&Object.assign(d,{downlink:u.downlink.level}),d}return null})(this[K],e)}getFarEndCameraPTZCapability(e){return((t,r)=>{const{store:{getState:n}}=t,i=by(n()).find(o=>o.userId===r);return(i==null?void 0:i.nFECC)!==void 0?DV(i==null?void 0:i.nFECC):{pan:!1,tilt:!1,zoom:!1}})(this[K],e)}getCameraPTZCapability(e){return((t,r)=>{const{store:{getState:n}}=t,{video:{ptz:i,activeCamera:o}}=n(),s=i[r??o];return{pan:!(s==null||!s.pan),tilt:!(s==null||!s.tilt),zoom:!(s==null||!s.zoom)}})(this[K],e)}isBrowserSupportPTZ(){const{pan:e,tilt:t,zoom:r}=Oe.getPTZCapability();return e||t||r}getVideoMaskStatus(){return(e=>{var t;const{store:{getState:r}}=e,n=r(),{isMaskConfigured:i,imageSrc:o,...s}=((t=n.video)===null||t===void 0?void 0:t.mask)||{};return{...s,imageUrl:o}})(this[K])}isVideoMirrored(){return(e=>{const{store:{getState:t}}=e,{video:{isMirrored:r}}=t();return r})(this[K])}getSpotlightedUserList(){return(e=>{const{store:{getState:t}}=e,r=t();if(!r.video)return[];const{video:{spotlightUserList:n}}=r;return et(r).filter(i=>n.includes(i.userId)).map(i=>Za(i))})(this[K])}getVideoMediaPlaybackController(){return(e=>{let{store:{getState:t},mediaAgent:r}=e;const n=t(),{video:{isUsingMediaPlayback:i}}=n;if(i){const{videoElement:o}=Kr.getInstance();return CC(o,"video",n,r)}return null})(this[K])}startShareView(e,t,r){return((n,i,o,s)=>{const{store:{getState:a,dispatch:l},mediaAgent:u,rwgAgent:d}=n,{share:{isReceiveSharing:c,isRemoteSharingActive:p,activeNodeId:h,activeSsrc:m,status:f,renderedEnsuredCanvas:v,isReceiveSharingFromMainSession:g},media:{sharingDecodeStatus:y}}=a();if(!i||o!==h)return Promise.reject({type:Te,reason:""});if(!p||c||f!==Fe.End)return Promise.reject({type:W,reason:""});i.id||(i.id=Do("__ZOOM_SDK_SHARE_CANVAS_@__"));const S=!!s;return Lr("sharing","success",y).subscribe(b=>{let[,R]=b;if(R){let w=i;v.includes(i.id)||(w=rf(i),l(tN(i.id))),l(mm(!0)),wu(d,a(),o),u.renderSharing(m,w,S,s,g),$m(o,a(),u)}}),y==="failed"?Promise.reject({type:Pi,reason:""}):Ce(om,b=>!!b,6e4)})(this[K],e,t,r)}stopShareView(){return(e=>{const{store:{dispatch:t,getState:r},rwgAgent:n,mediaAgent:i}=e,{share:{isReceiveSharing:o,activeNodeId:s},breakoutRoom:a}=r();if(!o)return Promise.resolve("");let l=!1;return(a==null?void 0:a.currentRoom.status)===Ee.InRoom&&a.mainSessionAttendeeList.length>0&&(l=a.mainSessionAttendeeList.findIndex(u=>u.userId===s)>-1),i.stopRenderSharing(),n.unsubscribeSharing(s,l),t(mm(!1)),Promise.resolve("")})(this[K])}switchShareView(e){return((t,r)=>{const{store:{getState:n,dispatch:i},rwgAgent:o,mediaAgent:s}=t,a=n(),{share:{isReceiveSharing:l,activeNodeId:u,isReceiveSharingFromMainSession:d,remoteControlledUserList:c,isGrabRemoteControl:p},breakoutRoom:h}=a;if(!l)return Promise.reject({type:W});if(r===u)return Promise.resolve("");let m=[];return m=d?h.mainSessionAttendeeList.filter(f=>f.bShareToBORooms&&f.sharerOn):xa(a),m.findIndex(f=>f.userId===u)>-1?(c.includes(u)&&(p&&o.subscribeGrabRemoteControl(u,!1),s.updateRemoteControlProperties({isControllerNow:!1})),o.unsubscribeSharing(u,d),wu(o,n(),r),s.switchSharingSource(r,d),c.includes(r)&&WC(r,void 0,a,o,s),$m(r,n(),s),i(fm({bStatus:1,activeNodeID:r,ssrc:r})),T(sm,{userId:r}),Promise.resolve("")):Promise.reject({type:Te,reason:"no matching user id"})})(this[K],e)}updateSharingCanvasDimension(e,t){return((r,n,i)=>{const{store:{getState:o},mediaAgent:s}=r,a=o(),{share:{isReceiveSharing:l,isGrabRemoteControl:u,remoteControlViewportDomSelector:d}}=a;if(l&&(s.updateRenderedSharingDimension(n,i),u&&d)){const c=document.querySelector(d);s.updateRemoteControlProperties({dimension:c&&p0(c)})}return Promise.resolve("")})(this[K],e,t)}startShareScreen(e,t){return((r,n,i)=>{var o;const{store:{getState:s,dispatch:a},mediaAgent:l}=r,u=s(),{meeting:{bIbDisableShare:d,meetingOptions:c},share:{sharePrivilege:p,ssrc:h,isChromeExtensionInstalled:m,capturedEnsuredCanvas:f,isReceiveSharingFromMainSession:v},media:{sharingEncodeStatus:g},breakoutRoom:y}=u,{isSupportMediaStreamTrackProcessor:S,isLegacyChrome:b}=ae;if(d)return Promise.reject({type:W,reason:"information barrier"});if(typeof((o=navigator.mediaDevices)===null||o===void 0?void 0:o.getDisplayMedia)!="function")return Promise.reject({type:W,reason:"Unable to share your screen due to the technical limitation"});if(v)return Promise.reject({type:W,reason:"Unable to share your screen while someone is sharing from the main session"});var R;if(S){if(!(n instanceof HTMLVideoElement))return Promise.reject({type:Te,reason:"Use Video element instead of Canvas element when WebCodecs enabled"})}else if(!(n instanceof HTMLCanvasElement))return Promise.reject({type:Te,reason:`Expected to accept HTMLCanvasElement, but actual it is ${typeof n=="object"&&n!==null?(R=Object.getPrototypeOf(n))===null||R===void 0?void 0:R.constructor.name:n}`});const w=An(u);if(i!=null&&i.broadcastToBreakoutRoom){if(!w||(y==null?void 0:y.currentRoom.status)===Ee.InRoom)return w?Promise.reject({type:W,reason:"Unable to share screen to breakout room when in the room"}):Promise.reject({type:Sr});a(Ud(!0))}else a(Ud(!1));(i==null?void 0:i.requestReadReceipt)!==void 0&&a(XM(i==null?void 0:i.requestReadReceipt)),(i==null?void 0:i.optimizedForSharedVideo)!==void 0&&p!==xn.MultipleShare&&a(gm((i==null?void 0:i.optimizedForSharedVideo)&&Oe.isSupportVideoShareSend()));const O=xa(u);if(p===xn.OnlyHost&&!w)return Promise.reject({type:Sr,reason:"only host can start screen share"});if(p===xn.HostGrab&&!w&&O.length>0)return Promise.reject({type:Sr,reason:"only host can grab screen share"});const D=ye(u);if((D==null?void 0:D.sharerOn)===!0)return Promise.reject({type:W,reason:"you have already started screen share."});let U=qe(!0);return b&&!m&&(l.checkChromeSharingExtension(),U=Ge(Sb,1)),n.id||(n.id=Do("__ZOOM_SDK_SELF_SHARE_CANVAS_@__")),pp([Lr("sharing",g,"success"),U]).subscribe(x=>{let[P,I]=x;const[E]=P;if(E&&I){f.includes(n.id)||(rf(n),a(eN(n.id)));let A=document.querySelector(`#${iC}`);A&&A.tagName==="VIDEO"||(A=document.createElement("video"),A.id=iC,A.style.display="none",document.body.appendChild(A));const _=i!=null&&i.secondaryCameraId?{cameraId:i.secondaryCameraId,width:i.captureWidth,height:i.captureHeight}:void 0,C=!(i!=null&&i.hideShareAudioOption);l.startDesktopSharing(h,n,A,_,c!=null&&c.isDisableShareAudioIntoBo?C&&!(i!=null&&i.broadcastToBreakoutRoom):C,i==null?void 0:i.displaySurface,i==null?void 0:i.sourceId,i==null?void 0:i.controls),a(hm(void 0)),a(ZM(!!_))}}),new Promise((x,P)=>{jr(Ge(vr).pipe(z(I=>I.sharerOn!==void 0),xe(1)),Ge(Sb).pipe(z(I=>!I),xe(1),_e(Oa({reason:"required extension",extensionUrl:"https://chrome.google.com/webstore/detail/zoom-scheduler/kgjfgplpablkjnlkjmjdecgdpfankdle"}))),Ge(OD,1).pipe(G(I=>Oa({reason:I.reason||"user deny screen share"})))).subscribe(I=>{if(I.sharerOn===!0){const{share:{isSharingToBreakoutRoom:E},meeting:{meetingOptions:A}}=s(),_=!(A!=null&&A.isDisableShareAudioIntoBo||!E);l.enableShareAudioToBreakoutRoom(_),x("")}else P({type:Pi})},I=>{P({type:W,...I})})})})(this[K],e,t)}stopShareScreen(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:n,mediaAgent:i}=e,{share:{status:o},meeting:{userId:s}}=t();return o===Fe.End?Promise.resolve(""):(r(an(Fe.End)),n.stopSharing(s),i.stopDesktopSharing(),Ce(vr,a=>a.sharerOn===!1))})(this[K])}pauseShareScreen(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:n,mediaAgent:i}=e,o=t(),{share:{status:s},breakoutRoom:a}=o;if(s===Fe.Sharing){if(n.pauseSharing(),i.pauseDesktopSharing(),a&&Gn(o)){const l=ye(o);return Promise.resolve("").then(()=>{if(l){const{userId:u,sharerOn:d,bShareAudioOn:c,bVideoShare:p}=l,h={userId:u,sharerOn:d,sharerPause:!0,bShareAudioOn:c,bVideoShare:p};r($u({update:[h]})),r(an(Fe.Paused)),T(vr,h)}})}return Ce(vr,l=>l.sharerPause===!0).then(()=>(r(an(Fe.Paused)),""))}return Promise.reject({type:W})})(this[K])}resumeShareScreen(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:n,mediaAgent:i}=e,o=t(),{share:{status:s},breakoutRoom:a}=o;if(s===Fe.Paused){if(n.resumeSharing(),i.resumeDesktopSharing(),a&&Gn(o)){const l=ye(o);return Promise.resolve("").then(()=>{if(l){const{userId:u,sharerOn:d,bShareAudioOn:c,bVideoShare:p}=l,h={userId:u,sharerOn:d,sharerPause:!1,bShareAudioOn:c,bVideoShare:p};r($u({update:[h]})),r(an(Fe.Sharing)),T(vr,h)}})}return Ce(vr,l=>l.sharerOn===!0&&l.sharerPause===!1).then(()=>(r(an(Fe.Sharing)),""))}return Promise.reject({type:W})})(this[K])}setSharePrivilege(e){return H_(this[K],e)}lockShare(e){return((t,r)=>H_(t,r?xn.OnlyHost:xn.HostGrab))(this[K],e)}shareToBreakoutRoom(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:n,mediaAgent:i}=e,{meeting:{userId:o},breakoutRoom:s,share:{isSharingToBreakoutRoom:a,status:l}}=t();return l===Fe.End?Promise.reject({type:W,reason:"Invalid sharing status"}):a?Promise.resolve(""):s.currentRoom.status===Ee.InRoom?Promise.reject({type:W,reason:"Unable to share screen to breakout room when in the room"}):(n.startShareToBreakoutRoom(o),r(Ud(!0)),i.enableShareAudioToBreakoutRoom(!0),Promise.resolve(""))})(this[K])}stopShareToBreakoutRoom(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:n,mediaAgent:i}=e,{meeting:{userId:o},share:{isSharingToBreakoutRoom:s}}=t();return s&&(n.stopShareToBreakoutRoom(o),r(Ud(!1)),i.enableShareAudioToBreakoutRoom(!1)),Promise.resolve("")})(this[K])}muteOthersScreenShare(e){return((t,r)=>{const{store:{getState:n},rwgAgent:i}=t,o=n(),{meeting:{userId:s}}=o,a=xa(o);return r===s?Promise.reject({type:W,reason:"Cannot mute self share, use 'stopScreenShare' instead"}):a.findIndex(l=>l.userId===r)===-1?Promise.reject({type:Te,reason:"Target user is not sharing"}):(i.stopSharing(r),Ce(lo,l=>l.some(u=>u.userId===r&&u.sharerOn===!1)))})(this[K],e)}enableOptimizeForSharedVideo(e){return((t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o,rwgAgent:s}=t,{share:{status:a,isOptimizedForSharedVideo:l,isSharingToBreakoutRoom:u,sharePrivilege:d},audio:{isSharingAudio:c},meeting:{userId:p}}=n();return a!==Fe.End?l===r?Promise.resolve(""):d!==xn.MultipleShare?r&&!Oe.isSupportVideoShareSend()?Promise.reject({type:W,reason:"Cannot enable optimize for shared video due to the platform is not supported "}):(s.startSharing(p,{bShareAudio:c,bShareToBO:u,bShareVideo:r}),o.switchSharingMode(r?nc.VideoMode:nc.Normal),Ce({event:vr,operations:[z(h=>h.bVideoShare!==void 0),xe(1)]},h=>h.bVideoShare===r).then(()=>(i(gm(r)),""))):Promise.reject({type:W,reason:"Cannot enable optimize for shared video when enabling multiple screen shares"}):Promise.reject({type:W,reason:"Cannot enable optimize for shared video when screen share is not started"})})(this[K],e)}updateSharedVideoQuality(e){return((t,r)=>{const{store:{getState:n,dispatch:i},rwgAgent:o}=t,s=n(),{share:{shareQuality:a,activeNodeId:l,isReceiveSharing:u}}=s,d=kL(s);return u&&l!==0?(d&&a!==r&&(wu(o,s,l,r),i(Iw(r))),Promise.resolve("")):Promise.reject({type:W,reason:"Cannot update shared video quality when screen share is not started"})})(this[K],e)}subscribeShareStatisticData(e){return(async(t,r)=>{const{mediaAgent:n,store:{getState:i}}=t,o=i(),{media:{sharingEncodeStatus:s,sharingDecodeStatus:a}}=i(),l=ye(o),u=!r||r.decode,d=!r||r.encode;if(!l)return Promise.reject({type:W,reason:"Call this function after the 'join' method resolved."});{const c=Xt(l.userRole)||!ae.isSupportSendScreenSharing?"failed":s;Lr("sharing",c,a).subscribe(p=>{let[h,m]=p;u&&m&&n.subscribeToQos([mr.SharingDecode],as),d&&h&&n.subscribeToQos([mr.SharingEncode],as)})}return""})(this[K],e)}unsubscribeShareStatisticData(e){return(async(t,r)=>{const{mediaAgent:n,store:{dispatch:i}}=t,o=!r||r.decode,s=!r||r.encode;return o&&(n.unsubscribeFromQos([mr.SharingDecode]),i(Wc(Cs))),s&&(n.unsubscribeFromQos([mr.SharingEncode]),i(Wc(Cs))),null})(this[K],e)}getShareUserList(){return(e=>{const{store:{getState:t}}=e,r=t();if(!r.share)return[];const{share:{isReceiveSharingFromMainSession:n}}=r;if(n){const{breakoutRoom:{mainSessionAttendeeList:i}}=r;return i.filter(o=>o.bShareToBORooms&&(o.sharerOn||o.sharerPause)).map(o=>Za(o))}return xa(r).map(i=>Za(i))})(this[K])}getActiveShareUserId(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share&&r.share.isRemoteSharingActive?r.share.activeNodeId:0})(this[K])}isReceiveSharing(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.isReceiveSharing})(this[K])}getShareViewDimension(){return(e=>{const{store:{getState:t}}=e,r=t();if(r.share){if(r.share.status!==Fe.End)return{...r.share.shareDimension};{const{share:{receivedShareDimension:n}}=r;return{width:n.width,height:n.height}}}return null})(this[K])}getShareStatus(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share?r.share.status:null})(this[K])}isShareLocked(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.sharePrivilege===xn.OnlyHost})(this[K])}isReceiveSharingFromMainSession(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.isReceiveSharingFromMainSession})(this[K])}getSharePrivilege(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share?r.share.sharePrivilege:null})(this[K])}isStartShareScreenWithVideoElement(){return ae.isSupportMediaStreamTrackProcessor}isOptimizeForSharedVideoEnabled(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.isOptimizedForSharedVideo})(this[K])}isSupportOptimizedForSharedVideo(){return Oe.isSupportVideoShareSend()}getShareStatisticData(){return(e=>{let{store:{getState:t}}=e;const{share:{statistic:r}}=t();return{...r}})(this[K])}requestRemoteControl(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{share:{isReceiveSharing:n,activeNodeId:i,isRemoteControlEnabled:o}}=t();return o?z_(e,i)?n?ga(t())?Promise.reject({type:W,reason:"Already get the approval"}):(r.sharingRequestRemoteControl(i,!0),new Promise(s=>{Ge(am,1).subscribe(a=>{s(a)})})):Promise.reject({type:W,reason:"Cannot request control due to no sharing available"}):Promise.reject({type:Te}):Promise.reject({type:W,reason:"Cannot request control due to the feature is not enabled."})})(this[K])}giveUpRemoteControl(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{share:{isGrabRemoteControl:n,activeNodeId:i}}=t();return ga(t())?(n&&r.subscribeGrabRemoteControl(i,!1),r.sharingRequestRemoteControl(i,!1),Ce(am,o=>o===!1)):Promise.reject({type:W})})(this[K])}startRemoteControl(e){return(async(t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o,rwgAgent:s}=t,{share:{isSDKGrabControl:a,activeNodeId:l}}=n();return ga(n())?(await WC(l,r,n(),s,o),r.dataset.zmrvId||r.setAttribute("data-zmrv-id",Do("__ZOOM_SDK_RC_VIEWPORT_DATA_ID_@__")),i(iN(`${r.tagName}[data-zmrv-id="${r.dataset.zmrvId}"]`)),a?Ce(Ga,u=>!!u):So({success:VD,fail:[xD]})):Promise.reject({type:W,reason:"required to be approved"})})(this[K],e)}grabRemoteControl(){return(e=>{const{store:{getState:t},rwgAgent:r}=e,{share:{isGrabRemoteControl:n,activeNodeId:i}}=t();return ga(t())?n?Promise.resolve(""):(r.subscribeGrabRemoteControl(i,!0),Ce(Ga,o=>!!o)):Promise.reject({type:W,reason:"should be approved before grab"})})(this[K])}updateRemoteControlViewportDimension(e){return((t,r)=>{const{store:{getState:n},mediaAgent:i}=t;return ga(n())&&i.updateRemoteControlProperties({dimension:{scaleWidth:r.width,scaleHeight:r.height,srcOffsetX:r.left,srcOffsetY:r.top}}),Promise.resolve("")})(this[K],e)}approveRemoteControl(e,t){return((r,n,i)=>{const{store:{getState:o,dispatch:s},rwgAgent:a,mediaAgent:l}=r,u=o(),{share:{status:d,isEnableAutoDeleteRcApp:c,remoteControllingSsrc:p,userSsrcMapping:h},meeting:{userId:m}}=u;if(d===Fe.End)return Promise.reject({type:W,reason:"Cannot approve remote control when sharing is not ongoing."});if(d===Fe.Paused&&(a.resumeSharing(),l.resumeDesktopSharing(),s(an(Fe.Sharing))),l.isSharingEntireScreen()){var f,v;p&&!sn(p,n)&&(jm(u,a),s(eo("")));const g=(f=h[`${n}`])!==null&&f!==void 0?f:n,{isMacOS:y}=ae,S=(v=et(u).find(b=>sn(b.userId,g)))===null||v===void 0?void 0:v.displayName;return a.remoteControlConsent(em.Approve,g,m,{...l.getShareStreamInfo(),platform:ae.isMacOS?"mac":"win",controllerName:S?bt(S):""},c,y?void 0:i?1:0),s(yu(g)),Ce(FD)}return Promise.reject({type:W,reason:"Cannot approve remote control when not sharing entire screen."})})(this[K],e,t)}declineRemoteControl(e){return((t,r)=>{var n;const{store:{getState:i},rwgAgent:o,mediaAgent:s}=t,a=i(),{meeting:{userId:l},share:{isEnableAutoDeleteRcApp:u,userSsrcMapping:d}}=a,c=(n=d[`${r}`])!==null&&n!==void 0?n:r;return o.remoteControlConsent(em.Decline,c,l,{...s.getShareStreamInfo(),platform:ae.isMacOS?"mac":"win"},u),Promise.resolve("")})(this[K],e)}stopRemoteControl(){return(e=>{const{store:{getState:t,dispatch:r},rwgAgent:n}=e;return jm(t(),n),r(eo("")),r(yu(0)),Promise.resolve("")})(this[K])}launchRemoteControlApp(e){return((t,r)=>{const{store:{getState:n,dispatch:i}}=t,o=n(),{share:{remoteControlAppLaunchSheme:s}}=o;return s?(i(eo(r?`${s}&bAutoDelete=1`:s)),i(wa(gr.Unknown)),Promise.resolve("")):Promise.reject({type:W,reason:"Cannot launch app due to no permission"})})(this[K],e)}isRemoteControlEnabled(){return(e=>{var t;const{store:{getState:r}}=e;return!((t=r().share)===null||t===void 0||!t.isRemoteControlEnabled)})(this[K])}getRemoteControlAppDownloadUrl(){return(e=>{const{store:{getState:t}}=e,r=t();return r.share?r.share.remoteControlAppDownloadUrl:null})(this[K])}isTargetShareSupportRemoteControl(e){return z_(this[K],e)}isRemotelyControlApproved(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&ga(r)})(this[K])}isControllingUserRemotely(){return(e=>{const{store:{getState:t}}=e,r=t();return!!r.share&&r.share.isGrabRemoteControl})(this[K])}getRemotelyControllingUser(){return(e=>{const{store:{getState:t}}=e,r=t();if(r.share){const{remoteControllingSsrc:n}=r.share;if(n)return et(r).find(i=>sn(i.userId,n))}return null})(this[K])}},Q(L.prototype,"startAudio",[J,W_,yn],Object.getOwnPropertyDescriptor(L.prototype,"startAudio"),L.prototype),Q(L.prototype,"stopAudio",[J,G_,yn],Object.getOwnPropertyDescriptor(L.prototype,"stopAudio"),L.prototype),Q(L.prototype,"muteAudio",[J,K_,yn],Object.getOwnPropertyDescriptor(L.prototype,"muteAudio"),L.prototype),Q(L.prototype,"unmuteAudio",[J,q_,yn],Object.getOwnPropertyDescriptor(L.prototype,"unmuteAudio"),L.prototype),Q(L.prototype,"dialOut",[J,Q_,J_],Object.getOwnPropertyDescriptor(L.prototype,"dialOut"),L.prototype),Q(L.prototype,"cancelDialOut",[J,Z_,Y_],Object.getOwnPropertyDescriptor(L.prototype,"cancelDialOut"),L.prototype),Q(L.prototype,"hangup",[J,X_,yn],Object.getOwnPropertyDescriptor(L.prototype,"hangup"),L.prototype),Q(L.prototype,"switchMicrophone",[J,eR,yn],Object.getOwnPropertyDescriptor(L.prototype,"switchMicrophone"),L.prototype),Q(L.prototype,"switchSpeaker",[J,tR,yn],Object.getOwnPropertyDescriptor(L.prototype,"switchSpeaker"),L.prototype),Q(L.prototype,"muteShareAudio",[J,rR,nR,yn],Object.getOwnPropertyDescriptor(L.prototype,"muteShareAudio"),L.prototype),Q(L.prototype,"unmuteShareAudio",[J,iR,oR,yn],Object.getOwnPropertyDescriptor(L.prototype,"unmuteShareAudio"),L.prototype),Q(L.prototype,"subscribeAudioStatisticData",[J,sR,yn],Object.getOwnPropertyDescriptor(L.prototype,"subscribeAudioStatisticData"),L.prototype),Q(L.prototype,"unsubscribeAudioStatisticData",[J,aR,yn],Object.getOwnPropertyDescriptor(L.prototype,"unsubscribeAudioStatisticData"),L.prototype),Q(L.prototype,"enableBackgroundNoiseSuppression",[J,lR,yn],Object.getOwnPropertyDescriptor(L.prototype,"enableBackgroundNoiseSuppression"),L.prototype),Q(L.prototype,"enableSyncButtonsOnHeadset",[J,uR,yn],Object.getOwnPropertyDescriptor(L.prototype,"enableSyncButtonsOnHeadset"),L.prototype),Q(L.prototype,"enableOriginalSound",[J,dR,yn],Object.getOwnPropertyDescriptor(L.prototype,"enableOriginalSound"),L.prototype),Q(L.prototype,"callCRCDevice",[J,cR,pR],Object.getOwnPropertyDescriptor(L.prototype,"callCRCDevice"),L.prototype),Q(L.prototype,"cancelCallCRCDevice",[J,hR,fR],Object.getOwnPropertyDescriptor(L.prototype,"cancelCallCRCDevice"),L.prototype),Q(L.prototype,"muteAllAudio",[Rt,J,mR],Object.getOwnPropertyDescriptor(L.prototype,"muteAllAudio"),L.prototype),Q(L.prototype,"unmuteAllAudio",[Rt,J,gR],Object.getOwnPropertyDescriptor(L.prototype,"unmuteAllAudio"),L.prototype),Q(L.prototype,"muteAudioUponEntry",[Rt,J,vR],Object.getOwnPropertyDescriptor(L.prototype,"muteAudioUponEntry"),L.prototype),Q(L.prototype,"startVideo",[J,yR,kt],Object.getOwnPropertyDescriptor(L.prototype,"startVideo"),L.prototype),Q(L.prototype,"stopVideo",[J,SR,kt],Object.getOwnPropertyDescriptor(L.prototype,"stopVideo"),L.prototype),Q(L.prototype,"switchCamera",[J,bR,kt],Object.getOwnPropertyDescriptor(L.prototype,"switchCamera"),L.prototype),Q(L.prototype,"renderVideo",[A4,J,ER,kt],Object.getOwnPropertyDescriptor(L.prototype,"renderVideo"),L.prototype),Q(L.prototype,"stopRenderVideo",[bT,J,wR,kt],Object.getOwnPropertyDescriptor(L.prototype,"stopRenderVideo"),L.prototype),Q(L.prototype,"updateVideoCanvasDimension",[ST,J,IR,kt],Object.getOwnPropertyDescriptor(L.prototype,"updateVideoCanvasDimension"),L.prototype),Q(L.prototype,"adjustRenderedVideoPosition",[bT,J,AR,kt],Object.getOwnPropertyDescriptor(L.prototype,"adjustRenderedVideoPosition"),L.prototype),Q(L.prototype,"clearVideoCanvas",[ST,J,CR,kt],Object.getOwnPropertyDescriptor(L.prototype,"clearVideoCanvas"),L.prototype),Q(L.prototype,"mirrorVideo",[J,_R,kt],Object.getOwnPropertyDescriptor(L.prototype,"mirrorVideo"),L.prototype),Q(L.prototype,"enableHardwareAcceleration",[J,RR,kt],Object.getOwnPropertyDescriptor(L.prototype,"enableHardwareAcceleration"),L.prototype),Q(L.prototype,"subscribeVideoStatisticData",[J,TR,kt],Object.getOwnPropertyDescriptor(L.prototype,"subscribeVideoStatisticData"),L.prototype),Q(L.prototype,"unsubscribeVideoStatisticData",[J,OR,kt],Object.getOwnPropertyDescriptor(L.prototype,"unsubscribeVideoStatisticData"),L.prototype),Q(L.prototype,"previewVirtualBackground",[Ey,J,PR,kt],Object.getOwnPropertyDescriptor(L.prototype,"previewVirtualBackground"),L.prototype),Q(L.prototype,"updateVirtualBackgroundImage",[J,kR,kt],Object.getOwnPropertyDescriptor(L.prototype,"updateVirtualBackgroundImage"),L.prototype),Q(L.prototype,"stopPreviewVirtualBackground",[J,DR,kt],Object.getOwnPropertyDescriptor(L.prototype,"stopPreviewVirtualBackground"),L.prototype),Q(L.prototype,"previewVideoMask",[Ey,J,MR,kt],Object.getOwnPropertyDescriptor(L.prototype,"previewVideoMask"),L.prototype),Q(L.prototype,"updateVideoMask",[J,NR,kt],Object.getOwnPropertyDescriptor(L.prototype,"updateVideoMask"),L.prototype),Q(L.prototype,"stopPreviewVideoMask",[J,LR,kt],Object.getOwnPropertyDescriptor(L.prototype,"stopPreviewVideoMask"),L.prototype),Q(L.prototype,"requestFarEndCameraControl",[J,VR,Pl],Object.getOwnPropertyDescriptor(L.prototype,"requestFarEndCameraControl"),L.prototype),Q(L.prototype,"approveFarEndCameraControl",[J,xR,Pl],Object.getOwnPropertyDescriptor(L.prototype,"approveFarEndCameraControl"),L.prototype),Q(L.prototype,"declineFarEndCameraControl",[J,UR,Pl],Object.getOwnPropertyDescriptor(L.prototype,"declineFarEndCameraControl"),L.prototype),Q(L.prototype,"giveUpFarEndCameraControl",[J,jR,Pl],Object.getOwnPropertyDescriptor(L.prototype,"giveUpFarEndCameraControl"),L.prototype),Q(L.prototype,"controlCamera",[J,$R,Pl],Object.getOwnPropertyDescriptor(L.prototype,"controlCamera"),L.prototype),Q(L.prototype,"controlFarEndCamera",[J,FR,Pl],Object.getOwnPropertyDescriptor(L.prototype,"controlFarEndCamera"),L.prototype),Q(L.prototype,"attachVideo",[J,BR,kt],Object.getOwnPropertyDescriptor(L.prototype,"attachVideo"),L.prototype),Q(L.prototype,"detachVideo",[J,HR,kt],Object.getOwnPropertyDescriptor(L.prototype,"detachVideo"),L.prototype),Q(L.prototype,"spotlight",[Rt,J,zR,kt],Object.getOwnPropertyDescriptor(L.prototype,"spotlight"),L.prototype),Q(L.prototype,"removeSpotlight",[J,WR,kt],Object.getOwnPropertyDescriptor(L.prototype,"removeSpotlight"),L.prototype),Q(L.prototype,"removeAllSpotlights",[er,J,GR,kt],Object.getOwnPropertyDescriptor(L.prototype,"removeAllSpotlights"),L.prototype),Q(L.prototype,"startShareView",[Ey,J,KR,Pr],Object.getOwnPropertyDescriptor(L.prototype,"startShareView"),L.prototype),Q(L.prototype,"stopShareView",[J,qR,Pr],Object.getOwnPropertyDescriptor(L.prototype,"stopShareView"),L.prototype),Q(L.prototype,"switchShareView",[J,QR,Pr],Object.getOwnPropertyDescriptor(L.prototype,"switchShareView"),L.prototype),Q(L.prototype,"updateSharingCanvasDimension",[J,JR,Pr],Object.getOwnPropertyDescriptor(L.prototype,"updateSharingCanvasDimension"),L.prototype),Q(L.prototype,"startShareScreen",[J,ZR,Pr],Object.getOwnPropertyDescriptor(L.prototype,"startShareScreen"),L.prototype),Q(L.prototype,"stopShareScreen",[J,YR,Pr],Object.getOwnPropertyDescriptor(L.prototype,"stopShareScreen"),L.prototype),Q(L.prototype,"pauseShareScreen",[J,XR,Pr],Object.getOwnPropertyDescriptor(L.prototype,"pauseShareScreen"),L.prototype),Q(L.prototype,"resumeShareScreen",[J,eT,Pr],Object.getOwnPropertyDescriptor(L.prototype,"resumeShareScreen"),L.prototype),Q(L.prototype,"setSharePrivilege",[Rt,tT,J,Pr],Object.getOwnPropertyDescriptor(L.prototype,"setSharePrivilege"),L.prototype),Q(L.prototype,"lockShare",[Rt,rT,J,Pr],Object.getOwnPropertyDescriptor(L.prototype,"lockShare"),L.prototype),Q(L.prototype,"shareToBreakoutRoom",[J,Rt,nT,Pr],Object.getOwnPropertyDescriptor(L.prototype,"shareToBreakoutRoom"),L.prototype),Q(L.prototype,"stopShareToBreakoutRoom",[J,Rt,iT,Pr],Object.getOwnPropertyDescriptor(L.prototype,"stopShareToBreakoutRoom"),L.prototype),Q(L.prototype,"muteOthersScreenShare",[J,Rt,oT,Pr],Object.getOwnPropertyDescriptor(L.prototype,"muteOthersScreenShare"),L.prototype),Q(L.prototype,"enableOptimizeForSharedVideo",[J,sT,Pr],Object.getOwnPropertyDescriptor(L.prototype,"enableOptimizeForSharedVideo"),L.prototype),Q(L.prototype,"updateSharedVideoQuality",[J,aT,Pr],Object.getOwnPropertyDescriptor(L.prototype,"updateSharedVideoQuality"),L.prototype),Q(L.prototype,"subscribeShareStatisticData",[J,lT,Pr],Object.getOwnPropertyDescriptor(L.prototype,"subscribeShareStatisticData"),L.prototype),Q(L.prototype,"unsubscribeShareStatisticData",[J,uT,Pr],Object.getOwnPropertyDescriptor(L.prototype,"unsubscribeShareStatisticData"),L.prototype),Q(L.prototype,"requestRemoteControl",[J,dT,vo],Object.getOwnPropertyDescriptor(L.prototype,"requestRemoteControl"),L.prototype),Q(L.prototype,"giveUpRemoteControl",[J,cT,vo],Object.getOwnPropertyDescriptor(L.prototype,"giveUpRemoteControl"),L.prototype),Q(L.prototype,"startRemoteControl",[J,pT,vo],Object.getOwnPropertyDescriptor(L.prototype,"startRemoteControl"),L.prototype),Q(L.prototype,"grabRemoteControl",[J,hT,vo],Object.getOwnPropertyDescriptor(L.prototype,"grabRemoteControl"),L.prototype),Q(L.prototype,"updateRemoteControlViewportDimension",[J,fT,vo],Object.getOwnPropertyDescriptor(L.prototype,"updateRemoteControlViewportDimension"),L.prototype),Q(L.prototype,"approveRemoteControl",[J,mT,vo],Object.getOwnPropertyDescriptor(L.prototype,"approveRemoteControl"),L.prototype),Q(L.prototype,"declineRemoteControl",[J,gT,vo],Object.getOwnPropertyDescriptor(L.prototype,"declineRemoteControl"),L.prototype),Q(L.prototype,"stopRemoteControl",[J,vT,vo],Object.getOwnPropertyDescriptor(L.prototype,"stopRemoteControl"),L.prototype),Q(L.prototype,"launchRemoteControlApp",[J,yT,vo],Object.getOwnPropertyDescriptor(L.prototype,"launchRemoteControlApp"),L.prototype),L);var ET,wT,IT,AT,CT,_T,RT,TT,pt;const aa=Rn("Audio"),_4=Rn("Sharing");let R4=(ET=ue("share"),wT=ue("audio"),IT=ue("audio"),AT=ue("audio"),CT=ue("audio"),_T=ue("audio"),RT=ue("audio"),TT=ue("audio"),pt=class extends C4{switchSharingSecondaryCamera(e){return((t,r)=>{const{store:{getState:n,dispatch:i},mediaAgent:o}=t,s=n(),{video:{cameraDevicesList:a},share:{status:l,isSharingWithSecondCamera:u}}=s;return r!=="default"&&a.map(d=>d.deviceId).indexOf(r)===-1?Promise.reject({type:Te,reason:"Cannot find cameraDeviceId in camera devices list."}):(l===Fe.Sharing&&u&&o.changeSharingSecondCamera(r),i(YM(r)),Promise.resolve())})(this[K],e)}muteUserAudioLocally(e){return((t,r)=>{const{mediaAgent:n,store:{getState:i,dispatch:o}}=t,s=i(),{audio:{locallyMutedAudioList:a}}=s,l=et(s).filter(u=>u.audio===ze.Computer);return a.includes(r)||l.findIndex(u=>u.userId===r)===-1||(n.muteOrUnmuteOtherAudio(r,!0),o($M(r))),Promise.resolve("")})(this[K],e)}unmuteUserAudioLocally(e){return((t,r)=>{const{mediaAgent:n,store:{getState:i,dispatch:o}}=t,{audio:{locallyMutedAudioList:s}}=i();return s.includes(r)&&(n.muteOrUnmuteOtherAudio(r,!1),o(pm(r))),Promise.resolve("")})(this[K],e)}adjustUserAudioVolumeLocally(e,t){return((r,n,i)=>{const{mediaAgent:o,store:{getState:s,dispatch:a}}=r,l=s();return et(l).findIndex(u=>u.userId===n)!==-1&&(o.adjustOtherAudioVolume(n,i),a(FM({userId:n,volume:i}))),Promise.resolve("")})(this[K],e,t)}muteAllUserAudioLocally(){return(e=>{const{mediaAgent:t,store:{getState:r,dispatch:n}}=e,{audio:{isStopAllImcomingAudio:i}}=r();return i||(t.stopAllIncomingAudio(!0),n(jb(!0))),Promise.resolve("")})(this[K])}unmuteAllUserAudioLocally(){return(e=>{const{mediaAgent:t,store:{getState:r,dispatch:n}}=e,{audio:{isStopAllImcomingAudio:i,locallyMutedAudioList:o}}=r();return i&&(t.stopAllIncomingAudio(!1),n(jb(!1)),o.length>0&&o.forEach(s=>{t.muteOrUnmuteOtherAudio(s,!1),n(pm(s))})),Promise.resolve("")})(this[K])}startSecondaryAudio(e,t){return(async(r,n,i)=>{const{mediaAgent:o,rwgAgent:s,store:{getState:a,dispatch:l}}=r,u=a(),{audio:{microphoneDevicesList:d,activeMicrophone:c},share:{status:p}}=u,h=ye(u);if(!Oe.isSupportShare2ndAudioDevice(Gt()))return Promise.reject({type:W,reason:"Cannot start secondary audio due to platform is not supported"});if((h==null?void 0:h.audio)===ze.Computer&&c===n)return Promise.reject({type:W,reason:"Cannot start secondary audio with the same microphone"});if(p!==Fe.End)return Promise.reject({type:W,reason:"Cannot start secondary audio while screen sharing is in progress"});let m=d;if(d.length===0){const{microphones:f}=await dr(Qc());m=f}return n&&m.findIndex(f=>f.deviceId===n)===-1?Promise.reject({type:Te,reason:"Cannot find the microphone"}):(s.muteShareAudio(!1,!0),o.share2ndAudio(n,i),l(hm(n)),Ce(AD))})(this[K],e,t)}stopSecondaryAudio(){return(async e=>{const{mediaAgent:t,rwgAgent:r,store:{getState:n,dispatch:i}}=e,o=n(),{audio:{secondaryAudioMicrophoneId:s}}=o;if(!s)return Promise.reject({type:W,reason:"Cannot stop secondary audio due to not started "});r.muteShareAudio(!0,!0),t.leaveSharingAudio(!1),i(hm(void 0))})(this[K])}isUserAudioMutedLocally(e){return((t,r)=>{let{store:{getState:n}}=t;const{audio:{locallyMutedAudioList:i}}=n();return i.includes(r)})(this[K],e)}getUserVolumeLocally(e){return((t,r)=>{var n,i;let{store:{getState:o}}=t;const{audio:{localUserAudioVolumeList:s,locallyMutedAudioList:a}}=o();return(n=(i=s.find(l=>l.userId===r))===null||i===void 0?void 0:i.volume)!==null&&n!==void 0?n:a.includes(r)?0:100})(this[K],e)}},Q(pt.prototype,"switchSharingSecondaryCamera",[J,ET,_4],Object.getOwnPropertyDescriptor(pt.prototype,"switchSharingSecondaryCamera"),pt.prototype),Q(pt.prototype,"muteUserAudioLocally",[J,wT,aa],Object.getOwnPropertyDescriptor(pt.prototype,"muteUserAudioLocally"),pt.prototype),Q(pt.prototype,"unmuteUserAudioLocally",[J,IT,aa],Object.getOwnPropertyDescriptor(pt.prototype,"unmuteUserAudioLocally"),pt.prototype),Q(pt.prototype,"adjustUserAudioVolumeLocally",[J,AT,aa],Object.getOwnPropertyDescriptor(pt.prototype,"adjustUserAudioVolumeLocally"),pt.prototype),Q(pt.prototype,"muteAllUserAudioLocally",[J,CT,aa],Object.getOwnPropertyDescriptor(pt.prototype,"muteAllUserAudioLocally"),pt.prototype),Q(pt.prototype,"unmuteAllUserAudioLocally",[J,_T,aa],Object.getOwnPropertyDescriptor(pt.prototype,"unmuteAllUserAudioLocally"),pt.prototype),Q(pt.prototype,"startSecondaryAudio",[J,RT,aa],Object.getOwnPropertyDescriptor(pt.prototype,"startSecondaryAudio"),pt.prototype),Q(pt.prototype,"stopSecondaryAudio",[J,TT,aa],Object.getOwnPropertyDescriptor(pt.prototype,"stopSecondaryAudio"),pt.prototype),pt);const dh={controlStatus:Ve.NotStarted,sequenceId:1,rooms:[],isHugeBO:!1,allocationPattern:Na.Automatically,currentRoom:{status:Ee.Initial,boStatus:AM.NoToken,boConfId:"",boId:"",name:"",boToken:""},options:{isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60,isAutoMovetoMainSession:!1,isRoomSelectionEnabled:!1},mainSessionAttendeeList:[],preAssignedRooms:[],meetingElapsedTime:0,startRoomElapsedTime:0,closingRoomTime:0,broadcastMessage:"",hostReplyToQuestionerType:void 0,hostReplyToRequestId:void 0,isUserRoleUpdated:!1,mainSessionConfId:"",isEnableBOBroadcast:!1,isEnableBreakoutRoom:!1,isEnableBOViewActivityStatus:!1,inRoomUserActivityStatusMap:{},isEnableBOBroadcastVoice:!1,isBroadcastVoice:!1},T4=pn({[`${jN}`]:k((e,t)=>{let{payload:r}=t;Array.isArray(r)?e.rooms.push(...r):e.rooms.push(r)}),[`${t0}`]:k((e,t)=>{let{payload:r}=t;e.allocationPattern=r}),[`${Rm}`]:k((e,t)=>{let{payload:r}=t;e.sequenceId=r}),[`${r0}`]:k((e,t)=>{let{payload:r}=t;e.meetingElapsedTime=r}),[`${$N}`]:k((e,t)=>{let{payload:r}=t;e.startRoomElapsedTime=r}),[`${FN}`]:k((e,t)=>{let{payload:r}=t;const{options:n}=e;Object.assign(n,r)}),[`${BN}`]:k((e,t)=>{let{payload:r}=t;e.controlStatus=r}),[`${ac}`]:k((e,t)=>{let{payload:r}=t;e.rooms=r}),[`${Tm}`]:k((e,t)=>{let{payload:r}=t;const{currentRoom:n}=e;Object.assign(n,r)}),[`${qa}`]:k((e,t)=>{let{payload:r}=t;const{currentRoom:n}=e;n.status=r}),[`${n0}`]:k((e,t)=>{let{payload:r}=t;const{currentRoom:n}=e;n.boConfId=r}),[`${i0}`]:k((e,t)=>{let{payload:r}=t;const{currentRoom:n}=e;n.boToken=r}),[`${o0}`]:k((e,t)=>{let{payload:r}=t;e.closingRoomTime=r}),[`${zN}`]:k((e,t)=>{let{payload:r}=t;e.broadcastMessage=r}),[`${kw}`]:k((e,t)=>{let{payload:r}=t;e.hostReplyToQuestionerType=r}),[`${WN}`]:k((e,t)=>{let{payload:r}=t;e.hostReplyToRequestId=r}),[`${GN}`]:k((e,t)=>{let{payload:r}=t;r.add!==void 0&&r.add.length>0&&r.add.forEach(n=>{const i=e.mainSessionAttendeeList.find(o=>o.userId===n.userId);i!==void 0?Object.assign(i,n):lm(n.userRole)||e.mainSessionAttendeeList.push(n)}),r.update!==void 0&&r.update.length>0&&r.update.forEach(n=>{const i=e.mainSessionAttendeeList.find(o=>o.userId===n.userId);i!==void 0&&Object.assign(i,n)}),r.remove!==void 0&&r.remove.length>0&&r.remove.forEach(n=>{const i=e.mainSessionAttendeeList.findIndex(o=>o.userId===n.userId);i!==-1&&e.mainSessionAttendeeList.splice(i,1)})}),[`${KN}`]:k((e,t)=>{let{payload:r}=t;e.isHugeBO=r}),[`${a0}`]:k((e,t)=>{let{payload:r}=t;e.isUserRoleUpdated=r}),[`${s0}`]:k((e,t)=>{let{payload:r}=t;e.preAssignedRooms=r}),[`${qN}`]:k((e,t)=>{let{payload:r}=t;e.isEnableBreakoutRoom=r.isEnableBreakoutRoom,e.isEnableBOBroadcast=r.isEnableBOBroadcast,e.isEnableBOViewActivityStatus=r.isEnableBOViewActivityStatus,e.isEnableBOBroadcastVoice=r.isEnableBOBroadcastVoice}),[`${QN}`]:k((e,t)=>{let{payload:r}=t;const{userGuid:n,status:i}=r,{inRoomUserActivityStatusMap:o}=e;o[`${n}`]=i}),[`${Om}`]:k((e,t)=>{let{payload:r}=t;e.isBroadcastVoice=r}),[`${HN}`]:e=>{const{currentRoom:{status:t}}=e;return t===Ee.Joining?{...dh,preAssignedRooms:e.preAssignedRooms,currentRoom:e.currentRoom,closingRoomTime:e.closingRoomTime}:t===Ee.Leaving?{...dh,preAssignedRooms:e.preAssignedRooms,closingRoomTime:e.closingRoomTime}:{...dh,preAssignedRooms:e.preAssignedRooms}}},dh);var br=Uint8Array,Tn=Uint16Array,xg=Uint32Array,Ug=new br([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),jg=new br([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),U0=new br([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ZV=function(e,t){for(var r=new Tn(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var i=new xg(r[30]);for(n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return[r,i]},YV=ZV(Ug,2),XV=YV[0],j0=YV[1];XV[28]=258,j0[258]=28;for(var OT=ZV(jg,0),O4=OT[0],PT=OT[1],$0=new Tn(32768),wt=0;wt<32768;++wt){var la=(43690&wt)>>>1|(21845&wt)<<1;la=(61680&(la=(52428&la)>>>2|(13107&la)<<2))>>>4|(3855&la)<<4,$0[wt]=((65280&la)>>>8|(255&la)<<8)>>>1}var so=function(e,t,r){for(var n=e.length,i=0,o=new Tn(t);i<n;++i)e[i]&&++o[e[i]-1];var s,a=new Tn(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;if(r){s=new Tn(1<<t);var l=15-t;for(i=0;i<n;++i)if(e[i])for(var u=i<<4|e[i],d=t-e[i],c=a[e[i]-1]++<<d,p=c|(1<<d)-1;c<=p;++c)s[$0[c]>>>l]=u}else for(s=new Tn(n),i=0;i<n;++i)e[i]&&(s[i]=$0[a[e[i]-1]++]>>>15-e[i]);return s},zs=new br(288);for(wt=0;wt<144;++wt)zs[wt]=8;for(wt=144;wt<256;++wt)zs[wt]=9;for(wt=256;wt<280;++wt)zs[wt]=7;for(wt=280;wt<288;++wt)zs[wt]=8;var ip=new br(32);for(wt=0;wt<32;++wt)ip[wt]=5;var P4=so(zs,9,0),k4=so(zs,9,1),D4=so(ip,5,0),M4=so(ip,5,1),wy=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},yi=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},Iy=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},tI=function(e){return(e+7)/8|0},eg=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var n=new(e.BYTES_PER_ELEMENT==2?Tn:e.BYTES_PER_ELEMENT==4?xg:br)(r-t);return n.set(e.subarray(t,r)),n},N4=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zi=function(e,t,r){var n=new Error(t||N4[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,zi),!r)throw n;return n},yo=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8},Cd=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},Ay=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return[tx,0];if(i==1){var s=new br(r[0].s+1);return s[r[0].s]=1,[s,1]}r.sort(function(R,w){return R.f-w.f}),r.push({s:-1,f:25001});var a=r[0],l=r[1],u=0,d=1,c=2;for(r[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=r[r[u].f<r[c].f?u++:c++],l=r[u!=d&&r[u].f<r[c].f?u++:c++],r[d++]={s:-1,f:a.f+l.f,l:a,r:l};var p=o[0].s;for(n=1;n<i;++n)o[n].s>p&&(p=o[n].s);var h=new Tn(p+1),m=F0(r[d-1],h,0);if(m>t){n=0;var f=0,v=m-t,g=1<<v;for(o.sort(function(R,w){return h[w.s]-h[R.s]||R.f-w.f});n<i;++n){var y=o[n].s;if(!(h[y]>t))break;f+=g-(1<<m-h[y]),h[y]=t}for(f>>>=v;f>0;){var S=o[n].s;h[S]<t?f-=1<<t-h[S]++-1:++n}for(;n>=0&&f;--n){var b=o[n].s;h[b]==t&&(--h[b],++f)}m=t}return[new br(h),m]},F0=function(e,t,r){return e.s==-1?Math.max(F0(e.l,t,r+1),F0(e.r,t,r+1)):t[e.s]=r},kT=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Tn(++t),n=0,i=e[0],o=1,s=function(l){r[n++]=l},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[r.subarray(0,n),t]},_d=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},ex=function(e,t,r){var n=r.length,i=tI(t+2);e[i]=255&n,e[i+1]=n>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<n;++o)e[i+o+4]=r[o];return 8*(i+4+n)},DT=function(e,t,r,n,i,o,s,a,l,u,d){yo(t,d++,r),++i[256];for(var c=Ay(i,15),p=c[0],h=c[1],m=Ay(o,15),f=m[0],v=m[1],g=kT(p),y=g[0],S=g[1],b=kT(f),R=b[0],w=b[1],O=new Tn(19),D=0;D<y.length;++D)O[31&y[D]]++;for(D=0;D<R.length;++D)O[31&R[D]]++;for(var U=Ay(O,7),x=U[0],P=U[1],I=19;I>4&&!x[U0[I-1]];--I);var E,A,_,C,V=u+5<<3,M=_d(i,zs)+_d(o,ip)+s,$=_d(i,p)+_d(o,f)+s+14+3*I+_d(O,x)+(2*O[16]+3*O[17]+7*O[18]);if(V<=M&&V<=$)return ex(t,d,e.subarray(l,l+u));if(yo(t,d,1+($<M)),d+=2,$<M){E=so(p,h,0),A=p,_=so(f,v,0),C=f;var B=so(x,P,0);for(yo(t,d,S-257),yo(t,d+5,w-1),yo(t,d+10,I-4),d+=14,D=0;D<I;++D)yo(t,d+3*D,x[U0[D]]);d+=3*I;for(var ee=[y,R],ie=0;ie<2;++ie){var be=ee[ie];for(D=0;D<be.length;++D){var le=31&be[D];yo(t,d,B[le]),d+=x[le],le>15&&(yo(t,d,be[D]>>>5&127),d+=be[D]>>>12)}}}else E=P4,A=zs,_=D4,C=ip;for(D=0;D<a;++D)if(n[D]>255){le=n[D]>>>18&31,Cd(t,d,E[le+257]),d+=A[le+257],le>7&&(yo(t,d,n[D]>>>23&31),d+=Ug[le]);var te=31&n[D];Cd(t,d,_[te]),d+=C[te],te>3&&(Cd(t,d,n[D]>>>5&8191),d+=jg[te])}else Cd(t,d,E[n[D]]),d+=A[n[D]];return Cd(t,d,E[256]),d+A[256]},L4=new xg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tx=new br(0),V4=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(1&r&&-306674912)^r>>>1;e[t]=r}return e}(),Cy=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8};function x4(e,t){t||(t={});var r=function(){var s=-1;return{p:function(a){for(var l=s,u=0;u<a.length;++u)l=V4[255&l^a[u]]^l>>>8;s=l},d:function(){return~s}}}(),n=e.length;r.p(e);var i=function(s,a,l,u){return function(d,c,p,h,m,f){var v=d.length,g=new br(h+v+5*(1+Math.ceil(v/7e3))+m),y=g.subarray(h,g.length-m),S=0;if(!c||v<8)for(var b=0;b<=v;b+=65535){var R=b+65535;R>=v&&(y[S>>3]=f),S=ex(y,S+1,d.subarray(b,R))}else{for(var w=L4[c-1],O=w>>>13,D=8191&w,U=(1<<p)-1,x=new Tn(32768),P=new Tn(U+1),I=Math.ceil(p/3),E=2*I,A=function(Ye){return(d[Ye]^d[Ye+1]<<I^d[Ye+2]<<E)&U},_=new xg(25e3),C=new Tn(288),V=new Tn(32),M=0,$=0,B=(b=0,0),ee=0,ie=0;b<v;++b){var be=A(b),le=32767&b,te=P[be];if(x[le]=te,P[be]=le,ee<=b){var ve=v-b;if((M>7e3||B>24576)&&ve>423){S=DT(d,y,0,_,C,V,$,B,ie,b-ie,S),B=M=$=0,ie=b;for(var Ae=0;Ae<286;++Ae)C[Ae]=0;for(Ae=0;Ae<30;++Ae)V[Ae]=0}var me=2,Me=0,F=D,j=le-te&32767;if(ve>2&&be==A(b-j))for(var N=Math.min(O,ve)-1,Y=Math.min(32767,b),oe=Math.min(258,ve);j<=Y&&--F&&le!=te;){if(d[b+me]==d[b+me-j]){for(var ge=0;ge<oe&&d[b+ge]==d[b+ge-j];++ge);if(ge>me){if(me=ge,Me=j,ge>N)break;var Ie=Math.min(j,ge-2),De=0;for(Ae=0;Ae<Ie;++Ae){var ke=b-j+Ae+32768&32767,je=ke-x[ke]+32768&32767;je>De&&(De=je,te=ke)}}}j+=(le=te)-(te=x[le])+32768&32767}if(Me){_[B++]=268435456|j0[me]<<18|PT[Me];var Le=31&j0[me],Ne=31&PT[Me];$+=Ug[Le]+jg[Ne],++C[257+Le],++V[Ne],ee=b+me,++M}else _[B++]=d[b],++C[d[b]]}}S=DT(d,y,f,_,C,V,$,B,ie,b-ie,S)}return eg(g,0,h+tI(S)+m)}(s,a.level==null?6:a.level,a.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):12+a.mem,l,u,!0)}(e,t,function(s){return 10+(s.filename&&s.filename.length+1||0)}(t),8),o=i.length;return function(s,a){var l=a.filename;if(s[0]=31,s[1]=139,s[2]=8,s[8]=a.level<2?4:a.level==9?2:0,s[9]=3,a.mtime!=0&&Cy(s,4,Math.floor(new Date(a.mtime||Date.now())/1e3)),l){s[3]=8;for(var u=0;u<=l.length;++u)s[u+10]=l.charCodeAt(u)}}(i,t),Cy(i,o-8,r.d()),Cy(i,o-4,n),i}var MT=typeof TextEncoder<"u"&&new TextEncoder,B0=typeof TextDecoder<"u"&&new TextDecoder;try{B0.decode(tx,{stream:!0})}catch{}const{WebclientBreakoutRoomAttendeeStatus:rI,WebclientBreakoutRoomCommand:U4}=tt,_y=Xr(Oe.getInstance());function Ii(e,t){let r=0;for(;r<e.length;r++){const n=e[r],{attendeeGuidList:i}=n;if(i!=null&&i.includes(t))break}return r<e.length?e[r]:void 0}function Nl(){Pe.remove(rI),Pe.remove(U4)}function H0(){return He.createAgent().leaveBO(1),T(xr,{reason:Ir.BackToMainSession}),Nl(),[qa(Ee.Leaving),Vr(lr.NormalCase)]}function Ry(e,t){return T(xr,{reason:Ir.JoinBreakoutRoom,roomName:e}),t===Ee.InRoom&&He.createAgent().leaveBO(1),[qa(Ee.Joining),Vr(lr.NormalCase)]}function NT(e){return T(xr,{reason:Ir.MoveToBreakoutRoom,roomName:e}),He.createAgent().leaveBO(1),[qa(Ee.Joining),Vr(lr.NormalCase)]}function Ty(e){return e!==Ee.InRoom&&e!==Ee.Joining&&e!==Ee.Leaving}function ch(e){const t=arguments.length>1&&arguments[1]!==void 0&&arguments[1]?Ee.InRoom:Ee.Invited;return Pe.set(rI,JSON.stringify({status:t,boId:e.boId}),We.SessionStorage),Tm({status:t,boId:e.boId,name:e.name,boStatus:e.boStatus})}function Oy(e){const{breakoutRoom:{isUserRoleUpdated:t,currentRoom:{boConfId:r}}}=e.value,n=ye(e.value);return n&&(!r||r&&t)?qe(n.isHost):(r?Ge(Cb,1):Ge(mp,1).pipe(G(o=>Bc(o.userRole)?X([1]):jr(Ge(vr).pipe(z(s=>s.userRole!==void 0&&s.displayName===void 0||s.bVideoConnect!==void 0),xe(1)),Ge(ow).pipe(z(s=>s.some(a=>Bc(a.userRole))),xe(1)),Nt(3e3))))).pipe(_r(Hs),fe(e),ne(o=>{let[,s]=o;return ye(s).isHost}))}function z0(e){return pp({boIdList:Ge(iM).pipe(P$((t,r)=>[...t,r],[]),xe(e))}).pipe(OP(1e4))}const j4=[{mask:kv.Connect,key:"audio",value:""},{mask:kv.Voip,key:"audio",value:"computer"},{mask:kv.Muted,key:"muted",value:!0},{mask:mC.Connect,key:"bVideoOn",value:!1},{mask:mC.On,key:"bVideoOn",value:!0},{mask:gC.Share,key:"sharerOn",value:!0},{mask:gC.ShareAudio,key:"bShareAudioOn",value:!0}];function LT(e,t){const r=(Gn(t)?t.breakoutRoom.mainSessionAttendeeList:t.participants.attendeesList).find(n=>n.userId===Number(e));return r?{inviterId:r.userId,inviterGuid:r.userGUID,inviterName:r.displayName}:{}}const Si=He.createAgent(),Py=["userRole","bCoHost","bCCEditor","bHold"],$4=He.createAgent(),F4=Xr(Oe.getInstance());var Ue;const jt=He.createAgent(),VT=Xr(Oe.getInstance()),Sn=Rn("Breakout Room");let B4=(Ue=class extends co{createRooms(e,t){const r=this[pe](),n=this[Et],{breakoutRoom:{isHugeBO:i,sequenceId:o,rooms:s,controlStatus:a,isEnableBreakoutRoom:l}}=r;if(!l)return Promise.reject({type:W,reason:"Breakout room feature is not enabled."});if(a===Ve.InProgress||a===Ve.Closing)return Promise.resolve({type:W,reason:"breakout room has started!"});let u;u=typeof e=="string"?[e]:typeof e=="number"?Array.from({length:e}).map((c,p)=>`${hC} ${p+o}`):e;const d=i?100:50;return u.length<1||s.length+u.length>d?Promise.reject({type:Te,reason:"exceed maximum size"}):(jt.batchCreateBOToken(u),new Promise((c,p)=>{z0(u.length).subscribe({next(h){let{boIdList:m}=h,f=m.map((g,y)=>({boId:g,name:u[y]}));if(t===Na.Automatically){const g=gy(r),y=f.length,S=g.length;f=f.map((b,R)=>{const w=[];let O=R;for(;O<S;)w.push(g[O]),O+=y;return{...b,attendeeList:w}})}const v=f.map(g=>{let{boId:y,name:S,attendeeList:b}=g;return{boId:y,name:S,attendeeGuidList:b&&b.map(R=>R.userGUID)}});if(n(jN(v)),n(t0(t)),n(Rm(o+f.length)),t===Na.Automatically){const g=f.map(y=>({roomId:y.boId,name:y.name,attendeeList:y.attendeeList.map(S=>({userId:S.userId,avatar:S.avatar,displayName:S.displayName}))}));c(g)}else c(f.map(g=>({roomId:g.boId,name:g.name,attendeeList:[]})))},error(){p({type:Pi})}})}))}recreateRooms(e,t){const r=this[pe](),n=this[Et],{breakoutRoom:{isHugeBO:i,sequenceId:o,rooms:s,controlStatus:a,isEnableBreakoutRoom:l}}=r;if(!l)return Promise.reject({type:W,reason:"Breakout room feature is not enabled."});if(a===Ve.InProgress||a===Ve.Closing)return Promise.resolve({type:W,reason:"breakout room has started!"});let u;u=typeof e=="string"?[e]:typeof e=="number"?Array.from({length:e}).map((c,p)=>`${hC} ${p+o}`):e;const d=i?100:50;return u.length<1||s.length+u.length>d?Promise.reject({type:Te,reason:"exceed maximum size"}):(jt.batchCreateBOToken(u),new Promise((c,p)=>{z0(u.length).subscribe(h=>{let{boIdList:m}=h,f=m.map((g,y)=>({boId:g,name:u[y]}));if(t===Na.Automatically){const g=f.length,y=_z(r),S=y.length;f=f.map((b,R)=>{const w=[];let O=R;for(;O<S;)w.push(y[O]),O+=g;return{...b,attendeeList:w}})}const v=f.map(g=>{let{boId:y,name:S,attendeeList:b}=g;return{boId:y,name:S,attendeeGuidList:b&&b.map(R=>R.userGUID)}});if(n(ac(v)),n(t0(t)),n(Rm(o+f.length)),t===Na.Automatically){const g=f.map(y=>({roomId:y.boId,name:y.name,attendeeList:y.attendeeList.map(S=>({userId:S.userId,avatar:S.avatar,displayName:S.displayName}))}));c(g)}else c(f.map(g=>({roomId:g.boId,name:g.name,attendeeList:[]})))},()=>{p({type:Pi})})}))}openRooms(e,t){var r;const n=this[pe](),i={isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60,isAutoMoveBackToMainSession:!1,isRoomSelectionEnabled:!1},{breakoutRoom:{controlStatus:o,rooms:s,sequenceId:a,isHugeBO:l}}=n;if(o===Ve.InProgress||o===Ve.Closing)return Promise.resolve({type:W,reason:"breakout room has started!"});if(e.some(m=>s.findIndex(f=>f.boId===m.roomId)===-1))return Promise.reject({type:Te,reason:"roomId is wrong"});const u=et(n);if(e.reduce((m,f)=>m.concat(f.attendeeList),[]).some(m=>u.findIndex(f=>f.userId===m.userId)===-1))return Promise.reject({type:Te,reason:"bad user"});const d=e.map(m=>{const{attendeeList:f}=m,v=f.map(g=>{const y=u.find(S=>S.userId===g.userId);return y==null?void 0:y.userGUID});return{BID:m.roomId,MeetingTitle:m.name,MeetingToken:void 0,Status:AM.Started,HostID:"",ParticipantList:v}}),c=t?{...i,...t}:i,p={ControlStatus:Ve.InProgress,NameIndex:a,IsAutoJoinEnabled:+c.isAutoJoinRoom,IsBackToMainSessionEnabled:+c.isBackToMainSessionEnabled,IsTimerEnabled:+c.isTimerEnabled,TimerDuration:c.timerDuration,IsTimerAutoEndEnabled:+c.isTimerAutoEnabled,WaitSeconds:c.waitSeconds<0?0:c.waitSeconds,StartTimeOnMMR:void 0,ItemList:d,IsAutoMovetoMainSessionEnabled:c.isAutoMoveBackToMainSession,IsParticipantsChooseRoomEnabled:+c.isRoomSelectionEnabled};let h=dk(JSON.stringify(p));if(l&&(h=(m=>Q$(x4(function(f){if(MT)return MT.encode(f);for(var v=f.length,g=new br(f.length+(f.length>>1)),y=0,S=function(O){g[y++]=O},b=0;b<v;++b){if(y+5>g.length){var R=new br(y+8+(v-b<<1));R.set(g),g=R}var w=f.charCodeAt(b);w<128?S(w):w<2048?(S(192|w>>6),S(128|63&w)):w>55295&&w<57344?(S(240|(w=65536+(1047552&w)|1023&f.charCodeAt(++b))>>18),S(128|w>>12&63),S(128|w>>6&63),S(128|63&w)):(S(224|w>>12),S(128|w>>6&63),S(128|63&w))}return eg(g,0,y)}(m))))(h)),(r=ye(n))!==null&&r!==void 0&&r.isHost)jt.startBO(h);else{const m=ia(n);m&&jt.coHostStartBO(h,m.userId)}return Ce(Ea,m=>m.controlStatus===Ve.InProgress)}joinRoom(e){const t=this[pe](),r=ye(t),{breakoutRoom:{controlStatus:n,rooms:i,options:{isRoomSelectionEnabled:o},currentRoom:{status:s,boId:a}},meeting:{userGUID:l}}=t;if(n!==Ve.InProgress)return Promise.reject({type:vu,reason:"Breakout room is not started"});if(r!=null&&r.isHost){const u=i.find(d=>d.boId===e);if(!u)return Promise.reject({type:Te,reason:"Room ID is not correct"});jt.joinBO(u.boId)}else if(r!=null&&r.bCoHost){if(!i.find(d=>d.boId===e))return Promise.reject({type:Te,reason:"Room ID is not correct"});{const d=ia(t);if(!d)return Promise.reject({type:W,reason:"No host in the meeting, cannot join the room"});jt.wantJoinBO(d==null?void 0:d.userId,e)}}else{if(s===Ee.InRoom&&a===e)return Promise.resolve("");{let u=!1;const d=Ii(i,l);if(d&&d.boId===e)jt.joinBO(d.boId);else if(o)if(i.findIndex(c=>c.boId===e)!==-1){const c=ia(t);if(!c)return Promise.reject({type:W,reason:"No host in the meeting, cannot join the room"});jt.wantJoinBO(c.userId,e)}else u=!0;else u=!0;if(u)return Promise.reject({type:Te,reason:"Room ID is not correct"})}}return Ce(qh,u=>u.boId===e)}leaveRoom(){const e=this[pe](),t=this[Et],{breakoutRoom:{controlStatus:r,options:n,currentRoom:{status:i}}}=e;if(r!==Ve.InProgress&&r!==Ve.Closing||i!==Ee.InRoom)return Promise.reject({type:W});{const o=An(e);if(!n.isBackToMainSessionEnabled&&!o)return Promise.reject({type:Sr,reason:"Can not return main session during the breakout room"});H0().forEach(s=>t(s))}return Promise.resolve("")}askForHelp(){const e=this[pe](),{breakoutRoom:{controlStatus:t,mainSessionAttendeeList:r,currentRoom:{status:n}},participants:{attendeesList:i}}=e,o=An(e);if(t!==Ve.InProgress||n!==Ee.InRoom)return Promise.reject({type:W,reason:"you are not in breakout room"});if(o)return Promise.reject({type:W,reason:"host or co-host can not ask for help"});{const s=r.find(a=>a.isHost);if(s){if(i.findIndex(a=>a.zoomID===s.zoomID)>-1)return Promise.reject({type:W,reason:"host is in room"});jt.askForHelpBO(s.userId)}}return Ce(gw,s=>s.result===vs.Received)}postponeHelping(e){const t=this[pe](),r=this[Et],{breakoutRoom:{mainSessionAttendeeList:n,currentRoom:{status:i}},participants:{attendeesList:o}}=t;let s=o;return i===Ee.InRoom&&(s=n),s.findIndex(a=>a.userId===e)>-1?(jt.askForHelpResultBO(e,vs.Ignore),r(kw(vs.Ignore)),Promise.resolve("")):Promise.reject({type:Te,reason:"user id is not correct"})}broadcast(e){const{breakoutRoom:{isEnableBOBroadcast:t}}=this[pe]();return t?e?ur.beginEncrypt({text:e,type:Rr.BO_BROADCAST}).then(r=>(jt.broadcastBO(r),Promise.resolve(""))):Promise.reject({type:Te,reason:"content empty"}):Promise.reject({type:W,reason:"Cannot broadcast message due to the feature is not enable"})}startBroadcastVoice(){const e=this[pe](),t=this[Et],{breakoutRoom:{isEnableBOBroadcast:r,isEnableBOBroadcastVoice:n,isBroadcastVoice:i}}=e;if(r&&n){if(Gn(e))return Promise.reject({type:W,reason:"Cannot broadcast voice in the room"});{if(i)return Promise.resolve("");const o=ye(e);return(o==null?void 0:o.audio)===ze.Computer&&o.muted===!1?(jt.broadcastVoiceReq(!0),VT.broadcastVoiceToBreakoutRoom(!0),t(Om(!0)),Promise.resolve("")):Promise.reject({type:W,reason:"Start audio and unmute to broadcast"})}}return Promise.reject({type:W,reason:"Cannot broadcast voice due to the feature is not enable"})}stopBroadcastVoice(){const e=this[pe](),t=this[Et],{breakoutRoom:{isBroadcastVoice:r}}=e;return r?(jt.broadcastVoiceReq(!1),VT.broadcastVoiceToBreakoutRoom(!1),t(Om(!1)),Promise.resolve("")):Promise.reject({type:W,reason:"Cannot stop broadcast voice due to it is not started"})}assignUserToRoom(e,t){const r=this[pe](),{breakoutRoom:{rooms:n}}=r,i=gy(r).find(s=>s.userId===e);if(!(i&&n.findIndex(s=>s.boId===t)>-1))return Promise.reject({type:Te,reason:""});var o;if((o=ye(r))!==null&&o!==void 0&&o.isHost)jt.assignToBO(e,t);else{const s=ia(r);s&&jt.coHostAssignToBO(i.userGUID,t,s.userId)}return Ce(Ea,s=>{const{controlStatus:a,roomList:l}=s,u=l.find(d=>d.boId===t);return a===Ve.InProgress&&u&&u.attendeeGuidList.includes(i.userGUID)})}moveUserToRoom(e,t){const r=this[pe](),{breakoutRoom:{rooms:n,mainSessionAttendeeList:i},participants:{attendeesList:o}}=r,s=(Gn(r)?i:o).find(l=>l.userId===e);if(!s)return Promise.reject({type:Te,reason:"user id not correct"});{const l=Ii(n,s.userGUID);if(!l)return Promise.reject({type:W,reason:"user not in a room"});if(l.boId===t)return Promise.reject({type:W,reason:"user already in the target room"});{const u=n.find(d=>d.boId===t);if(!u)return Promise.reject({type:Te,reason:"invalid room id"});var a;if((a=ye(r))!==null&&a!==void 0&&a.isHost)jt.switchBO(e,u.boId);else{const d=ia(r);d&&jt.coHostAssignToBO(s.userGUID,u.boId,d.userId)}}}return Ce(Ea,l=>{const{controlStatus:u,roomList:d}=l,c=d.find(p=>p.boId===t);return u===Ve.InProgress&&c&&c.attendeeGuidList.includes(s.userGUID)})}moveBackToMainSession(e){const t=this[pe](),{breakoutRoom:{rooms:r,mainSessionAttendeeList:n},participants:{attendeesList:i}}=t,o=(Gn(t)?n:i).find(a=>a.userId===e);if(!o)return Promise.reject({type:Te,reason:"user id not correct"});if(!Ii(r,o.userGUID))return Promise.reject({type:W,reason:"user not in a room"});var s;if((s=ye(t))!==null&&s!==void 0&&s.isHost)jt.moveToMainSession(o.userGUID);else{const a=ia(t);a&&jt.coHostMoveToMainSession(o.userGUID,a.userId)}return Ce(Ea,a=>{const{controlStatus:l,roomList:u}=a;return l===Ve.InProgress&&u.some(d=>{const{attendeeGuidList:c}=d;return c.includes(o.userGUID)})})}closeRoom(){const e=this[pe](),{breakoutRoom:{controlStatus:t}}=e;if(t!==Ve.InProgress)return Promise.reject({type:W,reason:"room is not started"});var r;if((r=ye(e))!==null&&r!==void 0&&r.isHost)jt.stopBO(Ve.Closing);else{const n=ia(e);n&&jt.coHostStopBO(Ve.Closing,n.userId)}return Ce(Ea,n=>n.controlStatus===Ve.Closing)}loadPreAssignedRooms(){const e=this[pe](),{meeting:{meetingOptions:t},breakoutRoom:{controlStatus:r}}=e;return!t.isAllowBreakoutRoomPreAssign||r!==Ve.NotStarted&&r!==Ve.Closed?Promise.reject({type:W}):(jt.preAssignBreakoutRoom(),Ce(lM))}getUnassignedAttendeeList(){const e=this[pe](),t=ye(e);return t!=null&&t.isHost||t!=null&&t.bCoHost?gy(e).map(r=>Za(r)):[]}getRoomList(){const e=this[pe](),{breakoutRoom:{rooms:t,currentRoom:{status:r,boId:n},mainSessionAttendeeList:i,inRoomUserActivityStatusMap:o,options:{isRoomSelectionEnabled:s}},participants:{attendeesList:a}}=e,l=ye(e);if(l&&(l.isHost||l.bCoHost||s)){const u=r===Ee.InRoom,d=u?i:a;return t.map(c=>{const{attendeeGuidList:p,boId:h,name:m}=c,f=(p||[]).map(v=>d.find(g=>g.userGUID===v)).filter(v=>!(v!=null&&v.isHost)).filter(Boolean);return u&&l.isHost&&h===n&&f.unshift(l),{roomId:h,name:m,attendeeList:f.filter(v=>!!v).map(v=>{var g;const y=(g=o[v.userGUID])!==null&&g!==void 0?g:{};return{userId:v.userId,displayName:v.displayName,avatar:v.avatar,isInRoom:v.bid===h,userGuid:v.userGUID,...y}})}})}return e.breakoutRoom.rooms.map(u=>{const{boId:d,name:c}=u;return{roomId:d,name:c,attendeeList:[]}})}getAttendeeStatus(){return this[pe]().breakoutRoom.currentRoom.status}getRoomStatus(){return this[pe]().breakoutRoom.controlStatus}getCurrentRoom(){const e=this[pe](),{breakoutRoom:{currentRoom:{status:t,name:r,boId:n}}}=e;return{attendeeStatus:t,name:r,roomId:n}}getRoomOptions(){const e=this[pe](),{breakoutRoom:{options:t}}=e,{whoStart:r,whoStop:n,...i}=t;return{...i}}},Q(Ue.prototype,"createRooms",[J,Rt,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"createRooms"),Ue.prototype),Q(Ue.prototype,"recreateRooms",[J,Rt,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"recreateRooms"),Ue.prototype),Q(Ue.prototype,"openRooms",[J,Rt,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"openRooms"),Ue.prototype),Q(Ue.prototype,"joinRoom",[J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"joinRoom"),Ue.prototype),Q(Ue.prototype,"leaveRoom",[J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"leaveRoom"),Ue.prototype),Q(Ue.prototype,"askForHelp",[J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"askForHelp"),Ue.prototype),Q(Ue.prototype,"postponeHelping",[er,J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"postponeHelping"),Ue.prototype),Q(Ue.prototype,"broadcast",[Rt,J],Object.getOwnPropertyDescriptor(Ue.prototype,"broadcast"),Ue.prototype),Q(Ue.prototype,"startBroadcastVoice",[er,J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"startBroadcastVoice"),Ue.prototype),Q(Ue.prototype,"stopBroadcastVoice",[er,J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"stopBroadcastVoice"),Ue.prototype),Q(Ue.prototype,"assignUserToRoom",[Rt,J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"assignUserToRoom"),Ue.prototype),Q(Ue.prototype,"moveUserToRoom",[Rt,J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"moveUserToRoom"),Ue.prototype),Q(Ue.prototype,"moveBackToMainSession",[Rt,J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"moveBackToMainSession"),Ue.prototype),Q(Ue.prototype,"closeRoom",[Rt,J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"closeRoom"),Ue.prototype),Q(Ue.prototype,"loadPreAssignedRooms",[er,J,Sn],Object.getOwnPropertyDescriptor(Ue.prototype,"loadPreAssignedRooms"),Ue.prototype),Ue);const H4={breakoutRoomSharingEpics0:(e,t)=>ps(e,ot).pipe(z(r=>{var n;const{payload:{body:i}}=r;return i==null||(n=i.update)===null||n===void 0?void 0:n.some(o=>o.bShareToBORooms!==void 0||o.bShareOn!==void 0)}),fe(t),ne(r=>{let[n,i]=r;const{payload:{body:{update:o}}}=n,{breakoutRoom:{mainSessionAttendeeList:s}}=i,a=o.filter(d=>d.bShareOn&&d.bShareToBORooms),l=o.filter(d=>!d.bShareOn||!d.bShareToBORooms),u=s.filter(d=>d.sharerOn&&d.bShareToBORooms);return a.length>0&&a.forEach(d=>{u.findIndex(c=>c.userId===d.id)===-1&&T(hw,{...d,isFromMainSession:!0})}),l.length>0&&l.forEach(d=>{T(fw,{...d,isFromMainSession:!0})}),o.map(d=>{if(d.bShareOn&&d.bShareToBORooms){if(s.filter(c=>c.sharerOn&&c.bShareToBORooms&&c.userId!==d.id).length===0)return{activeNodeID:d.id,bStatus:1,ssrc:d.shareSsrc};{const c=s.find(p=>p.userId===d.id);if(c!=null&&c.isHost)return{activeNodeID:d.id,bStatus:1,ssrc:d.shareSsrc}}}else if(!d.bShareOn||!d.bShareToBORooms){const c=s.filter(p=>p.bShareToBORooms&&p.sharerOn);if(c.length===1&&c[0].userId===d.id)return{activeNodeID:d.id,bStatus:0,ssrc:0};{const p=c.filter(m=>m.userId!==d.id),h=p.find(m=>m.isHost);if(h)return{activeNodeID:h.userId,bStatus:1,ssrc:h.shareSsrc};{const m=p[0];if(m)return{activeNodeID:m.userId,bStatus:1,ssrc:m.shareSsrc}}}}}).filter(Boolean)}),G(r=>{const{share:{status:n},meeting:{userId:i}}=t.value,o=[];return r.map(s=>{const{activeNodeID:a,bStatus:l,ssrc:u}=s,d=l===1;o.push(JM(d)),d&&n!==Fe.End&&($4.stopSharing(i),F4.stopDesktopSharing(),o.push(an(Fe.End)),T(MD));let c={activeNodeID:a,bStatus:l,ssrc:u,fromMainSession:!0};if(!d){const{participants:{attendeesList:p}}=t.value,h=p.filter(m=>m.sharerOn);if(h.length>0){const m=h[0];c={activeNodeID:m.userId,bStatus:1,ssrc:m.shareSsrc||0}}}o.push(hl({evt:eb,body:c}))}),X(o)})),breakoutRoomSharingEpics1:(e,t)=>ps(e,Og).pipe(Be(r=>{const{payload:{body:{userID:n,confID:i}}}=r;return Wt(...["sharing","audio"].map(o=>function(s,a,l,u,d){return ps(a,s==="audio"?tb:iw).pipe(xe(1),de(c=>{const{payload:{body:{encryptKey:p,additionalType:h}}}=c,{media:{sharingDecodeStatus:m,audioDecodeStatus:f},meeting:{svcUrl:v,meetingNumber:g,conId:y,zoomId:S,meetingId:b}}=l.value;Lr(s,"success",s==="audio"?f:m).subscribe(R=>{let[,w]=R;if(w){const O=`wss://${v}/wc/media/${g}?type=${s==="audio"?"ma":"ms"}&cid=${y}&mode=1`;_y.createMainSessionChannel(s,O),_y.updateMediaParams({iVType:s==="audio"?Zt.AUDIO_DECODE:Zt.SHARING_DECODE,isFromMainSession:!0,updateParams:{userId:u,sn:Hn(S),confId:d,encryptType:h,encryptKey:Hn(p),meetingId:b,meetingNumber:g}});const{breakoutRoom:{mainSessionAttendeeList:D}}=l.value;if((D==null?void 0:D.length)>0){const U=D.map(x=>({userid:x.userId,sn:x.zoomID&&Hn(x.zoomID)}));_y.updateUserMediaSN({added:U,isFromMainSession:!0,iVType:s==="audio"?Zt.AUDIO_DECODE:Zt.SHARING_DECODE})}}})}),G(()=>re))}(o,e,t,n,i)))}))},z4={epics0:(e,t)=>e.pipe(he(`${Ho}`),Be(r=>{const{breakoutRoom:n,meeting:{meetingOptions:i}}=t.value,{payload:{hugeBO:o,elapsed:s}}=r,a=[];return n&&(i&&(a.push(KN(o&&i.isBO100Enabled===!0)),a.push(qN({isEnableBreakoutRoom:i.isEnableBreakoutRoom,isEnableBOBroadcast:i.isEnableBOBroadcast,isEnableBOViewActivityStatus:i.isEnableBOViewActivityStatus,isEnableBOBroadcastVoice:i.isEnableBOBroadcastVoice}))),n.currentRoom.boConfId&&a.push(BS()),s!==void 0&&a.push(r0(s))),X(a)})),epics1:e=>se(e,4174).pipe(de(t=>{T(iM,t.payload.body.bid)}),_e(re)),epics2:(e,t)=>Mi(e,7950).pipe(fe(t),Be(r=>{let[n,i]=r;const{payload:{body:{proto:o}}}=n,{breakoutRoom:{isHugeBO:s,currentRoom:{status:a,boId:l}},meeting:{userGUID:u}}=i;let d=o;s&&(d=function(h){if(B0)return B0.decode(h);var m=function(v){for(var g="",y=0;;){var S=v[y++],b=(S>127)+(S>223)+(S>239);if(y+b>v.length)return[g,eg(v,y-1)];b?b==3?(S=((15&S)<<18|(63&v[y++])<<12|(63&v[y++])<<6|63&v[y++])-65536,g+=String.fromCharCode(55296|S>>10,56320|1023&S)):g+=1&b?String.fromCharCode((31&S)<<6|63&v[y++]):String.fromCharCode((15&S)<<12|(63&v[y++])<<6|63&v[y++]):g+=String.fromCharCode(S)}}(h),f=m[0];return m[1].length&&zi(8),f}(function(h){return function(m,f,v){var g=m.length;if(!g||v&&v.f&&!v.l)return f||new br(0);var y=!f||v,S=!v||v.i;v||(v={}),f||(f=new br(3*g));var b=function(Le){var Ne=f.length;if(Le>Ne){var Ye=new br(Math.max(2*Ne,Le));Ye.set(f),f=Ye}},R=v.f||0,w=v.p||0,O=v.b||0,D=v.l,U=v.d,x=v.m,P=v.n,I=8*g;do{if(!D){R=yi(m,w,1);var E=yi(m,w+1,3);if(w+=3,!E){var A=m[(te=tI(w)+4)-4]|m[te-3]<<8,_=te+A;if(_>g){S&&zi(0);break}y&&b(O+A),f.set(m.subarray(te,_),O),v.b=O+=A,v.p=w=8*_,v.f=R;continue}if(E==1)D=k4,U=M4,x=9,P=5;else if(E==2){var C=yi(m,w,31)+257,V=yi(m,w+10,15)+4,M=C+yi(m,w+5,31)+1;w+=14;for(var $=new br(M),B=new br(19),ee=0;ee<V;++ee)B[U0[ee]]=yi(m,w+3*ee,7);w+=3*V;var ie=wy(B),be=(1<<ie)-1,le=so(B,ie,1);for(ee=0;ee<M;){var te,ve=le[yi(m,w,be)];if(w+=15&ve,(te=ve>>>4)<16)$[ee++]=te;else{var Ae=0,me=0;for(te==16?(me=3+yi(m,w,3),w+=2,Ae=$[ee-1]):te==17?(me=3+yi(m,w,7),w+=3):te==18&&(me=11+yi(m,w,127),w+=7);me--;)$[ee++]=Ae}}var Me=$.subarray(0,C),F=$.subarray(C);x=wy(Me),P=wy(F),D=so(Me,x,1),U=so(F,P,1)}else zi(1);if(w>I){S&&zi(0);break}}y&&b(O+131072);for(var j=(1<<x)-1,N=(1<<P)-1,Y=w;;Y=w){var oe=(Ae=D[Iy(m,w)&j])>>>4;if((w+=15&Ae)>I){S&&zi(0);break}if(Ae||zi(2),oe<256)f[O++]=oe;else{if(oe==256){Y=w,D=null;break}var ge=oe-254;if(oe>264){var Ie=Ug[ee=oe-257];ge=yi(m,w,(1<<Ie)-1)+XV[ee],w+=Ie}var De=U[Iy(m,w)&N],ke=De>>>4;if(De||zi(3),w+=15&De,F=O4[ke],ke>3&&(Ie=jg[ke],F+=Iy(m,w)&(1<<Ie)-1,w+=Ie),w>I){S&&zi(0);break}y&&b(O+131072);for(var je=O+ge;O<je;O+=4)f[O]=f[O-F],f[O+1]=f[O+1-F],f[O+2]=f[O+2-F],f[O+3]=f[O+3-F];O=je}}v.l=D,v.p=Y,v.b=O,v.f=R,D&&(R=1,v.m=x,v.d=U,v.n=P)}while(!R);return O==f.length?f:eg(f,0,O)}(h.subarray(function(m){m[0]==31&&m[1]==139&&m[2]==8||zi(6,"invalid gzip data");var f=m[3],v=10;4&f&&(v+=m[10]|2+(m[11]<<8));for(var g=(f>>3&1)+(f>>4&1);g>0;g-=!m[v++]);return v+(2&f)}(h),-8),new br(function(m){var f=m.length;return(m[f-4]|m[f-3]<<8|m[f-2]<<16|m[f-1]<<24)>>>0}(h)))}(Hn(o))));const c=[];let p;try{const h=JSON.parse(Vi(d)),{ControlStatus:m,NameIndex:f,IsAutoJoinEnabled:v,IsBackToMainSessionEnabled:g,IsParticipantsChooseRoomEnabled:y,IsTimerEnabled:S,TimerDuration:b,IsTimerAutoEndEnabled:R,WaitSeconds:w,StartTimeOnMMR:O,ItemList:D,WhoStart:U,WhoStop:x,IsAutoMovetoMainSessionEnabled:P}=h,I={isAutoJoinRoom:v,isBackToMainSessionEnabled:g,isTimerEnabled:S,timerDuration:b,isTimerAutoEnabled:R,waitSeconds:w,isAutoMoveBackToMainSession:P,isRoomSelectionEnabled:y,whoStart:U,whoStop:x};c.push(FN(I)),c.push($N(O)),c.push(Rm(f)),c.push(BN(m));const E=D&&D.map(A=>({boId:A.BID,name:A.MeetingTitle,boStatus:A.Status,hostId:A.HostID,attendeeGuidList:A.ParticipantList||[]}))||[];switch(c.push(ac(E)),T(Ea,{controlStatus:m,roomList:E}),m){case Ve.InProgress:if(a!==Ee.InRoom&&a!==Ee.Joining){const A=function(_,C){const{meeting:{isHost:V,userGUID:M},breakoutRoom:{currentRoom:{status:$,boId:B}}}=C.value,ee=Pe.get(rI),ie=[];if(ee)try{const{status:be,boId:le}=JSON.parse(ee);if(be===Ee.Invited)if(V)Nl();else{const te=Ii(_,M);te&&(ie.push(ch(te)),$!==Ee.Initial&&B===te.boId||T(Kh,{roomId:te.boId,name:te.name}))}else if(be===Ee.InRoom){let te;if(te=V?_.find(ve=>ve.boId===le):Ii(_,M),te){ie.push(ch(te));const ve=te.boId;dl(C).subscribe(()=>{He.createAgent().joinBO(ve)})}Nl()}}catch(be){console.error(be)}return ie}(E,t);if(A.length===0){const _=Ii(E,u);_&&c.push(ch(_))}else c.push(...A)}else if(a===Ee.InRoom&&n.type===`${Lo}`){const A=Ii(E,u);A&&Oy(t).subscribe(_=>{l===A.boId||_||Si.joinBO(A.boId)})}I.isTimerEnabled&&I.timerDuration>0&&(p=function(A,_,C){return Oy(A).pipe(fe(A),Be(V=>{let[M,$]=V;const{breakoutRoom:{currentRoom:{status:B},meetingElapsedTime:ee},meeting:{joinMeetingTimeStamp:ie}}=$,be=ie-1e3*ee+1e3*C+1e3*_;if(performance.now()<be){if(M)return Lc(1e3).pipe(ne(()=>Math.floor((be-performance.now())/1e3)),fe(A),Pa(le=>{let[te,ve]=le;const{breakoutRoom:{controlStatus:Ae,currentRoom:{status:me}},socket:{zoomSocketStatus:Me},meeting:{isHost:F}}=ve;return te>=0&&F&&Ae===Ve.InProgress&&(me===Ee.InRoom||me===Ee.MainSession||me===Ee.Initial)&&Me===Je.Connected}),de(le=>{let[te]=le;T(Ab,{countdown:te})}),z(le=>{let[te]=le;return te===0}),de(le=>{let[,te]=le;const{breakoutRoom:{options:ve}}=te;ve.isTimerAutoEnabled?He.createAgent().stopBO(Ve.Closing):T(aM)}),G(()=>re));if(B===Ee.InRoom)return Lc(1e3).pipe(ne(()=>Math.floor((be-performance.now())/1e3)),fe(A),Pa(le=>{let[te,ve]=le;const{breakoutRoom:{currentRoom:{status:Ae}},meeting:{isHost:me},socket:{zoomSocketStatus:Me}}=ve;return te>=0&&Ae===Ee.InRoom&&!me&&Me===Je.Connected}),de(le=>{let[te]=le;T(Ab,{countdown:te})}),G(()=>re))}return re}))}(t,I.timerDuration,O));break;case Ve.Closing:p=Oy(t).pipe(z(A=>A),G(()=>{const A=[],{breakoutRoom:{closingRoomTime:_,currentRoom:{status:C}},participants:{attendeesList:V}}=t.value;let M=I.waitSeconds;if(_!==0&&I.waitSeconds>0){const $=Math.floor((performance.now()-_)/1e3);M=Math.max(I.waitSeconds-$,0)}if(M===0)return Si.stopBO(Ve.Closed),re;{if(C!==Ee.InRoom&&V.length>1&&V.every(B=>!B.bid))return Si.stopBO(Ve.Closed),re;_||A.push(o0(performance.now()));const $=performance.now()+1e3*M;return Wt(X(A),Nt(0,1e3).pipe(ne(()=>Math.floor(($-performance.now())/1e3)),fe(t),Pa(B=>{let[,ee]=B;const{breakoutRoom:{controlStatus:ie},meeting:{isHost:be},socket:{zoomSocketStatus:le}}=ee;return ie===Ve.Closing&&le===Je.Connected&&be}),de(B=>{let[ee]=B;ee>=0&&T(Ib,{countdown:ee})}),z(B=>{let[ee]=B;return ee<=0}),de(()=>{Si.stopBO(Ve.Closed)}),G(()=>re)))}}));break;case Ve.Closed:c.push(o0(0)),a===Ee.Leaving?c.push(qa(Ee.MainSession)):a===Ee.Invited?c.push(qa(Ee.Initial)):a!==Ee.InRoom&&a!==Ee.Joining||c.push(...H0()),Nl()}}catch(h){console.error(h)}return p?Wt(X(c),p):X(c)})),epics3:(e,t)=>Mi(e,4194).pipe(fe(t),Be(r=>{let[n,i]=r;const{payload:{body:{bid:o,botoken:s,confID:a}}}=n,{meeting:{isHost:l},breakoutRoom:{rooms:u,currentRoom:{status:d}}}=i,c=[],p=u.find(h=>h.boId===o);return p&&(c.push(ch(p,l)),c.push(n0(a)),c.push(i0(s)),l||d!==Ee.InRoom?c.push(...Ry(p.name,d)):c.push(...NT(p.name))),T(qh,{boId:o}),X(c)})),epics4:(e,t)=>e.pipe(he(`${hl}`,`${Lo}`),z(r=>r.payload.evt===7949),fe(t),G(r=>{var n;let[i,o]=r;const{payload:{body:s}}=i,{meeting:{userGUID:a},breakoutRoom:{rooms:l,options:{isAutoJoinRoom:u,isAutoMovetoMainSession:d},currentRoom:{status:c},mainSessionAttendeeList:p},participants:{attendeesList:h}}=o,{commandType:m}=s,f=[];let v;const g=(n=(Ty(c)?h:p).find(w=>w.userGUID===a))===null||n===void 0?void 0:n.userId;switch(m){case Zs.Join:{const{targetBID:w,botoken:O,confID:D,joinReason:U,requestSourceID:x}=s,P=Ii(l,a);if(P&&P.boId===w){f.push(n0(D)),f.push(i0(O));const I=Number(U)===LB.Active&&g===Number(x);u||I?(I&&T(qh,{boId:w}),f.push(...Ry(P.name))):(Pe.set(tt.WebclientBreakoutRoomCommand,m,We.SessionStorage),T(Kh,{roomId:w,name:P.name,...LT(x,o)}))}break}case Zs.Switch:{const{targetBID:w,botoken:O,confID:D,joinMethod:U,requestSourceID:x}=s,P=Ii(l,a);if(P&&P.boId===w){f.push(Tm({boId:P.boId,boToken:O,boConfId:D,name:P.name}));const I=g===Number(x)&&Number(U)===fC.AskToLeave;c===Ee.Invited?(Pe.set(tt.WebclientBreakoutRoomCommand,m,We.SessionStorage),u||g===Number(x)?f.push(...Ry(P.name)):T(Kh,{roomId:w,name:P.name,...LT(x,o)})):f.push(...NT(P.name)),I&&T(qh,{boId:w})}break}case Zs.Leave:{const{waitTime:w,joinMethod:O}=s;if(Ty(c))f.push(Tm({boId:"",boToken:"",boConfId:"",status:Ee.Initial}));else{const D=Number(w);if(D>0){const U=performance.now()+1e3*D;v=Nt(0,1e3).pipe(ne(()=>Math.floor((U-performance.now())/1e3)),fe(t),Pa(x=>{let[P,I]=x;const{breakoutRoom:{controlStatus:E,currentRoom:{status:A}},meeting:{isHost:_},socket:{zoomSocketStatus:C}}=I;return P>=0&&C===Je.Connected&&E===Ve.Closing&&A===Ee.InRoom&&!_}),de(x=>{let[P]=x;P>=0&&T(Ib,{countdown:P})}),_e(re))}else if(Number(O)!==fC.AskToLeave||d)f.push(...H0());else{var y,S,b;const{requestSourceID:U}=s,x=Number(U),{participants:{attendeesList:P}}=o;let I=P.find(E=>E.userId===x);if(!I){const{breakoutRoom:{mainSessionAttendeeList:E}}=o;I=E.find(A=>A.userId===x)}T(dM,{inviterId:(y=I)===null||y===void 0?void 0:y.userId,inviterGuid:(S=I)===null||S===void 0?void 0:S.userGUID,inviterName:(b=I)===null||b===void 0?void 0:b.displayName})}Nl()}break}case Zs.Broadcast:{const{textContent:w,requestID:O}=s;if(w){const{meeting:{encType:D},participants:{attendeesList:U},breakoutRoom:{mainSessionAttendeeList:x}}=o;let P="";if(D===fp.AES_GCM){const I=(Ty(c)?U:x).find(E=>E.userId===Number(O));I&&(P=I.zoomID)}v=X(ur.beginDecrypt({decryptedText:w,type:Rr.BO_BROADCAST,zoomId:P}).then(I=>{let{message:E}=I;return T(oM,{message:E}),zN(E)}))}break}case Zs.HelpReq:{const{requestID:w}=s,{breakoutRoom:{mainSessionAttendeeList:O,rooms:D,currentRoom:{boId:U},hostReplyToQuestionerType:x,hostReplyToRequestId:P},participants:{attendeesList:I}}=o;if(w){if(c===Ee.InRoom){const E=O.find(A=>A.userId===w);if(E&&E.bid===U){Si.askForHelpResultBO(w,vs.AlreadyInRoom);break}}if(x===vs.Received&&P!==w)Si.askForHelpResultBO(w,vs.Busy);else{Si.askForHelpResultBO(w,vs.Received),f.push(kw(vs.Received),WN(w));const E=(c===Ee.InRoom?O:I).find(A=>A.userId===w);if(E){const A=E.bid,_=D.find(C=>C.boId===A);_&&T(sM,{userId:w,userGuid:E.userGUID,displayName:E.displayName,roomName:_.name,roomId:_.boId})}}}break}case Zs.HelpRes:{const{helpResult:w}=s;T(gw,{result:Number(w)});break}case Zs.BOActivity:{var R;const{activityRoster:w,activityTalking:O,requestID:D}=s,U=(R=(Gn(o)?o.breakoutRoom.mainSessionAttendeeList:o.participants.attendeesList).find(x=>x.userId===D))===null||R===void 0?void 0:R.userGUID;if(U){const{breakoutRoom:{rooms:x}}=o,P=Ii(x,U),I=function(E,A){const _={isTalking:A===1};return j4.forEach(C=>{const{mask:V,key:M,value:$}=C;return(V&E)===V&&Object.assign(_,{[`${M}`]:$}),_}),_}(Number(w),Number(O));f.push(QN({userGuid:U,status:I})),T(cM,{...I,userId:D,userGuid:U,roomId:P==null?void 0:P.boId,roomName:P==null?void 0:P.name})}break}}return v?Wt(X(f),v):X(f)})),epics5:(e,t)=>ps(e,Og).pipe(fe(t),Be(r=>{let[n,i]=r;const{payload:{body:{res:o,elapsed:s}}}=n,a=[];return o===wn.MeetingHasClosed||o===wn.UserHasBeenRemoved?(Nl(),a.push(...Va(i,!1))):o===wn.Success&&(a.push(r0(s)),a.push(qa(Ee.InRoom)),Pe.set(tt.WebclientBreakoutRoomAttendeeStatus,JSON.stringify({status:Ee.InRoom,boId:i.breakoutRoom.currentRoom.boId}),We.SessionStorage)),X(a)})),epics6:e=>ps(e,ot).pipe(ne(t=>uc(t.payload.body)),G(t=>{const r=[GN(t)];return T(uM),X(r)})),epics7:(e,t)=>ps(e,ot).pipe(ne(r=>uc(r.payload.body)),ne(r=>{const n=[];return["add","update"].forEach(i=>r[i]&&n.push(...r[i])),n.filter(i=>[...Py,"bAudioUnencrytped"].some(o=>i[o]!==void 0))}),z(r=>r.length>0),_r(Hs),G(r=>{const n=[],{participants:{attendeesList:i},breakoutRoom:{mainSessionAttendeeList:o,isUserRoleUpdated:s},meeting:{userId:a}}=t.value,l=r.map(u=>{const d=o.find(p=>p.userId===u.userId),c=i.find(p=>p.userGUID===(d==null?void 0:d.userGUID));if(c){if(u.bCCEditor!==void 0&&n.push(UN({editorId:u.bCCEditor?c.userId:"",isEditor:!!u.bCCEditor,editorZoomId:u.bCCEditor?c.zoomID:""})),delete u.bRaiseHand,delete u.bCapsPinMultiVideo,!s&&c.userId===a){const p={};Bc(u.userRole)?Object.assign(p,u):(o.some(h=>h.isHost)||u.bAudioUnencrytped!==void 0)&&Object.assign(p,d),p.userId!==void 0&&(n.push(a0(!0)),T(Cb,u))}return{...u,userId:c.userId}}}).filter(u=>!!u&&Py.some(d=>u[d]!==void 0));return l.length>0&&(T(lo,l),n.push($u({update:l}))),X(n)})),epics8:e=>ps(e,zn).pipe(z(t=>{const{payload:{body:r}}=t;return(r==null?void 0:r.bAllowAttendeeRename)!==void 0||(r==null?void 0:r.chatPriviledge)!==void 0||(r==null?void 0:r.lockShare)!==void 0}),ne(t=>{const{payload:{body:r}}=t;return r.bAllowAttendeeRename!==void 0?Wf(t.payload.body):r.chatPriviledge!==void 0?Rw(r.chatPriviledge):r.lockShare!==void 0?ww(r.lockShare):void 0})),epics9:(e,t)=>se(e,ot).pipe(fe(t),z(r=>{let[,n]=r;const{meeting:{isHost:i},breakoutRoom:{controlStatus:o,currentRoom:{status:s}}}=n;return i&&o===Ve.Closing&&s!==Ee.InRoom}),_r(Hs),de(()=>{const{participants:{attendeesList:r}}=t.value;r.every(n=>!n.bid)&&r.length>1&&Si.stopBO(Ve.Closed)}),_e(re)),epics10:(e,t)=>se(e,4214).pipe(fe(t),Be(r=>{let[n,i]=r;const{payload:{body:{proto:o}}}=n,{breakoutRoom:{rooms:s,isHugeBO:a}}=i;try{const l=JSON.parse(Vi(o)),u=[];if(l&&l.PreAssignBoList&&Array.isArray(l.PreAssignBoList)){const d=l.PreAssignBoList.map(p=>({name:p.BoName,emails:p.email}));u.push(s0(d));const c=a?100:50;if(s.length+d.length<c){const p=d.map(h=>h.name);return Si.batchCreateBOToken(p),Wt(X(u),z0(p.length).pipe(fe(t),G(h=>{let[{boIdList:m},f]=h;const v=et(f),g=d.map((S,b)=>{const{emails:R,name:w}=S;let O=[];return R&&Array.isArray(R)&&(O=R.map(D=>v.filter(U=>U.userEmail===D).map(U=>U.userGUID)).reduce((D,U)=>[...D,...U],[])),{boId:m[b],name:w,attendeeGuidList:O}}),y=g.map((S,b)=>({roomId:S.boId,name:S.name,emails:d[b].emails}));return T(lM,{rooms:y}),X([ac(g),s0(y)])})))}return X(u)}}catch{console.error("pre assign proto is not valid")}return re})),epics11:(e,t)=>Mi(e,ot).pipe(fe(t),z(r=>{let[n,i]=r;const{meeting:{isHost:o,meetingStatus:s,meetingOptions:a},breakoutRoom:{controlStatus:l}}=i,{payload:{body:u}}=n;return s===Lt.Joined&&(a==null?void 0:a.isAllowBreakoutRoomPreAssign)&&o&&(l===Ve.NotStarted||l===Ve.InProgress)&&Array.isArray(u.add)}),G(r=>{let[n,i]=r;const{breakoutRoom:{controlStatus:o,rooms:s,preAssignedRooms:a,currentRoom:{status:l}},participants:{failoverAttendeesList:u}}=i,d=a==null?void 0:a.filter(h=>s.findIndex(m=>m.boId===h.roomId)>-1),{payload:{body:{add:c}}}=n,p=[];return d.length>0&&c.filter(h=>h.userEmail&&h.userGUID).filter(h=>u.findIndex(m=>m.zoomID===h.zoomID)===-1).forEach(h=>{if(!Ii(s,h.userGUID))for(let m=0;m<(d==null?void 0:d.length);m++){const f=d[m];if(f.emails.includes(h.userEmail)){if(o===Ve.NotStarted){const v=k(s,g=>{const y=g.find(S=>S.boId===f.roomId);y==null||y.attendeeGuidList.push(h.userGUID)});p.push(ac(v))}else o===Ve.InProgress&&(l===Ee.InRoom&&n.type===`${Lo}`?Si.assignToBO(h.id,String(f.roomId)):l!==Ee.Initial&&l!==Ee.MainSession||Si.assignToBO(h.id,String(f.roomId)));break}}}),X(p)})),epics12:(e,t)=>se(e,ot).pipe(z(r=>{const{breakoutRoom:{mainSessionAttendeeList:n}}=t.value,{payload:{body:i}}=r;return n.length>0&&(i.add!==void 0||i.update!==void 0)}),_r(Ko),ne(r=>uc(r.payload.body)),G(r=>{const{breakoutRoom:{mainSessionAttendeeList:n,isUserRoleUpdated:i},participants:{attendeesList:o}}=t.value;let s=[];const a=[];["add","update"].forEach(d=>r[d]&&s.push(...r[d]));const l=[...Py,"isHost"];s=s.filter(d=>l.some(c=>d[c]!==void 0));const u=s.filter(d=>d.zoomID!==void 0);return s=s.map(d=>{var c,p,h,m;const f=(c=(p=d.zoomID)!==null&&p!==void 0?p:(h=u.find(v=>v.userId===d.userId))===null||h===void 0?void 0:h.zoomID)!==null&&c!==void 0?c:(m=o.find(v=>v.userId===d.userId))===null||m===void 0?void 0:m.zoomID;if(f){const v=n.find(g=>g.zoomID===f);if(v)return i||(a.push(a0(!0)),T(Cb,v)),Object.keys(d).filter(g=>Object.prototype.hasOwnProperty.call(d,g)).filter(g=>l.includes(g)).reduce((g,y)=>{const S=v[y];if(S!==void 0||y==="bCoHost"){const b=typeof d[y]=="boolean"?!!S:S;Object.assign(g,{[y]:b})}return g},{userId:d.userId})}}).filter(Boolean),s.length>0&&(T(lo,s),a.push($u({update:s}))),X(a)})),epics13:e=>ps(e,7999).pipe(de(t=>{const{payload:{body:{bStatus:r}}}=t;T(pM,{status:!!r})}),G(()=>re)),epics14:(e,t)=>se(e,7940).pipe(G(r=>{const{payload:{body:{bHost:n}}}=r,{breakoutRoom:{isBroadcastVoice:i}}=t.value,o=[];return!n&&i&&(Oe.getInstance().broadcastVoiceToBreakoutRoom(!1),o.push(Om(!1))),X(o)}))},W4=hn(z4,H4);let ph=function(e){return e[e.Ready=0]="Ready",e[e.UserSub=1]="UserSub",e[e.ManualCaptionerEnabled=2]="ManualCaptionerEnabled",e[e.ManualCaptionerDisabled=3]="ManualCaptionerDisabled",e}({}),ai=function(e){return e[e.Unspecified=-1]="Unspecified",e[e.English=0]="English",e[e["Chinese (Simplified)"]=1]="Chinese (Simplified)",e[e.Japanese=2]="Japanese",e[e.German=3]="German",e[e.French=4]="French",e[e.Russian=5]="Russian",e[e.Portuguese=6]="Portuguese",e[e.Spanish=7]="Spanish",e[e.Korean=8]="Korean",e[e.Italian=9]="Italian",e[e.Reserved=10]="Reserved",e[e.Vietnamese=11]="Vietnamese",e[e.Dutch=12]="Dutch",e[e.Ukrainian=13]="Ukrainian",e[e.Arabic=14]="Arabic",e[e["Chinese (Traditional)"]=16]="Chinese (Traditional)",e[e.Czech=17]="Czech",e[e.Estonian=18]="Estonian",e[e.Finnish=19]="Finnish",e[e.Hebrew=21]="Hebrew",e[e.Hindi=22]="Hindi",e[e.Hungarian=23]="Hungarian",e[e.Indonesian=24]="Indonesian",e[e.Malay=25]="Malay",e[e.Persian=26]="Persian",e[e.Polish=27]="Polish",e[e.Romanian=28]="Romanian",e[e.Swedish=29]="Swedish",e[e.Tamil=30]="Tamil",e[e.Telugu=31]="Telugu",e[e.Tagalog=32]="Tagalog",e[e.Turkish=33]="Turkish",e[e["French (Canada)"]=34]="French (Canada)",e[e.Danish=35]="Danish",e[e.Thai=37]="Thai",e[e.Cantonese=44]="Cantonese",e[e.NoTranslation=400]="NoTranslation",e[e.DefaultManualInput=401]="DefaultManualInput",e[e.Customized=500]="Customized",e}({}),es=function(e){return e[e.Unknown=0]="Unknown",e[e.Close=1]="Close",e[e.New=2]="New",e[e.Insert=3]="Insert",e[e.Delete=4]="Delete",e[e.Reset=5]="Reset",e[e.Audiodesc=6]="Audiodesc",e[e.Speaker=7]="Speaker",e[e.Error=8]="Error",e}({}),xT=function(e){return e[e.TranslateNotSupport=1]="TranslateNotSupport",e}({}),ns=function(e){return e[e.Unspecified=0]="Unspecified",e[e.InMeetingManual=1]="InMeetingManual",e[e.ExternalCaptioner=2]="ExternalCaptioner",e[e.ASR=4]="ASR",e}({});const pc={en:0,zh:1,ja:2,de:3,fr:4,ru:5,pt:6,es:7,ko:8,it:9,en1:10,vi:11,nl:12,uk:13,ar:14,"zh-hant":16,cs:17,et:18,fi:19,he:21,hi:22,hu:23,id:24,ms:25,fa:26,pl:27,ro:28,sv:29,ta:30,te:31,tl:32,tr:33,"fr-ca":34,da:35,th:37,"zh-yue":44,ca:48},hc=Object.keys(ai).filter(e=>/\d+/.test(ai[e])).reduce((e,t)=>({...e,[`${ai[t]}`]:t}),{}),UT=Object.keys(pc).reduce((e,t)=>(Object.assign(e,{[`${pc[`${t}`]}`]:t}),e),{}),hf="zoom-sdk-live-trasncription",_o="live-trasncription";(function(e){return e[e.English=0]="English",e[e.Chinese=1]="Chinese",e[e.Japanese=2]="Japanese",e[e.German=3]="German",e[e.French=4]="French",e[e.Russian=5]="Russian",e[e.Portuguese=6]="Portuguese",e[e.Spanish=7]="Spanish",e[e.Korean=8]="Korean",e[e.Italian=9]="Italian",e[e.Reserved=10]="Reserved",e[e.Vietnamese=11]="Vietnamese",e[e.Dutch=12]="Dutch",e[e.Ukrainian=13]="Ukrainian",e[e.Arabic=14]="Arabic",e[e["Chinese (Traditional)"]=16]="Chinese (Traditional)",e[e.Czech=17]="Czech",e[e.Estonian=18]="Estonian",e[e.Finnish=19]="Finnish",e[e.Hebrew=21]="Hebrew",e[e.Hindi=22]="Hindi",e[e.Hungarian=23]="Hungarian",e[e.Indonesian=24]="Indonesian",e[e.Malay=25]="Malay",e[e.Persian=26]="Persian",e[e.Polish=27]="Polish",e[e.Romanian=28]="Romanian",e[e.Swedish=29]="Swedish",e[e.Tamil=30]="Tamil",e[e.Telugu=31]="Telugu",e[e.Tagalog=32]="Tagalog",e[e.Turkish=33]="Turkish",e[e["French (Canada)"]=34]="French (Canada)",e[e.Danish=35]="Danish",e[e.Thai=37]="Thai",e[e.Cantonese=44]="Cantonese",e[e.Catalan=48]="Catalan",e[e.NoTranslation=400]="NoTranslation",e[e.DefaultManualInput=401]="DefaultManualInput",e})({});(function(e){return e.English="en",e["Chinese (Simplified)"]="zh",e.Japanese="ja",e.German="de",e.French="fr",e.Russian="ru",e.Portuguese="pt",e.Spanish="es",e.Korean="ko",e.Italian="it",e.Reserved="en1",e.Vietnamese="vi",e.Dutch="nl",e.Ukrainian="uk",e.Arabic="ar",e["Chinese (Traditional)"]="zh-hant",e.Czech="cs",e.Estonian="et",e.Finnish="fi",e.Hebrew="he",e.Hindi="hi",e.Hungarian="hu",e.Indonesian="id",e.Malay="ms",e.Persian="fa",e.Polish="pl",e.Romanian="ro",e.Swedish="sv",e.Tamil="ta",e.Telugu="te",e.Tagalog="tl",e.Turkish="tr",e["French (Canada)"]="fr-ca",e.Danish="da",e.Thai="th",e.Cantonese="zh-yue",e.Catalan="ca",e})({});function fc(e){const t=e===ai.Unspecified?ai.Reserved:e;Oe.getInstance().selectLanguageChannelForNewLTT(t)}const G4=wM(EM,function(e,t){return _V(e,t)})([et,e=>{let{meeting:{gatewayUserList:t}}=e;return t}],(e,t)=>{const r={};return e.forEach(n=>{Object.assign(r,{[`${n.userId}`]:n.zoomID})}),t==null||t.forEach(n=>{Object.assign(r,{[`${n.userId}`]:n.sn})}),r}),jT=dt([et],e=>e.find(t=>t.bCCEditor===!0)),K4=dt([et,IM],(e,t)=>e.some(r=>r.bCCEditor===!0&&r.userId===t)),$T=He.createAgent(),ky={isEnableTranslatedCaptions:!1,isHostLockSpeakingLanguage:!1,transcriptionLang:[],isEnableAutomatedCaptions:!1,supportedTranscriptionLanguage:[],isLiveTranscriptionEnabled:!1,isHostDisableCaptions:!1,isManualCaptionerEnabled:!1,gatewayId:void 0,isLiveTranscriptionSubscribed:!1,messageRecords:[],isRecordsReduced:!1,reducedRecordsCount:0},q4=pn({[`${aL}`]:k((e,t)=>{let{payload:r}=t;e.isLiveTranscriptionEnabled=r}),[`${lL}`]:k((e,t)=>{let{payload:r}=t;const{transcriptionLang:n,translatedSetting:i,...o}=r;n&&(e.transcriptionLang=n.split(";").map(s=>{const a=s&&pc[s];return a!==void 0?{lang:s,code:a}:null}).filter(Boolean)),i&&(e.translatedSetting=Object.keys(i).map(s=>{const a=i[s];if(a){const l=a.split(";").map(u=>{const d=u&&pc[u];return d!==void 0?{lang:u,code:d}:null}).filter(Boolean);return{lang:s,code:pc[s],translatedToLanguage:l}}return null}).filter(Boolean)),Object.assign(e,o)}),[`${u0}`]:k((e,t)=>{let{payload:r}=t;e.isManualCaptionerEnabled=r}),[`${uL}`]:k((e,t)=>{let{payload:r}=t;e.gatewayId=r}),[`${vL}`]:k((e,t)=>{let{payload:r}=t;e.isHostDisableCaptions=r}),[`${dL}`]:k((e,t)=>{let{payload:r}=t;e.supportedTranscriptionLanguage=r}),[`${La}`]:k((e,t)=>{let{payload:r}=t;e.currentTranscriptionLang=r}),[`${Pm}`]:k((e,t)=>{let{payload:r}=t;e.currentTranslationLang=r}),[`${c0}`]:k((e,t)=>{let{payload:r}=t;e.messageRecords.push(r)}),[`${cL}`]:k((e,t)=>{let{payload:r}=t;const n=e.messageRecords.find(i=>i.msgId===r.msgId);n&&Object.assign(n,r)}),[`${pL}`]:k((e,t)=>{let{payload:r}=t;const{remains:n,reducedRecordsCount:i}=r,o=e.messageRecords.length-n;e.isRecordsReduced=!0,e.reducedRecordsCount=i,e.messageRecords.splice(0,o)}),[`${d0}`]:k((e,t)=>{let{payload:r}=t;e.isLiveTranscriptionSubscribed=r}),[`${hL}`]:k((e,t)=>{let{payload:r}=t;e.liveTransEngineType=r}),[`${fL}`]:k(e=>{e.stateBeforeFailover=void 0}),[`${mL}`]:k((e,t)=>{let{payload:r}=t;e.lastManualCaption=r}),[`${gL}`]:(e,t)=>{let{payload:r}=t;return r?{...ky,stateBeforeFailover:{currentTranscriptionLang:e.currentTranscriptionLang,currentTranslationLang:e.currentTranslationLang,isLiveTranscriptionSubscribed:e.isLiveTranscriptionSubscribed},messageRecords:e.messageRecords,isRecordsReduced:e.isRecordsReduced,reducedRecordsCount:e.reducedRecordsCount}:{...ky}}},ky);var ht;const Xn=He.createAgent(),ts=Rn("Live transcription");let Q4=(ht=class extends co{startLiveTranscription(){const{[pe]:e,[Et]:t}=this,{liveTranscription:{isLiveTranscriptionEnabled:r,isEnableTranslatedCaptions:n,isLiveTranscriptionSubscribed:i,isHostLockSpeakingLanguage:o,isHostDisableCaptions:s}}=e();return i?Promise.resolve(""):s?Promise.reject({type:W,reason:"Captions has been disabled by host."}):r?(Xn.enableNewLLT(),Ce(Ri).then(()=>(o?Xn.setSpokenLanguage(ai.English):fc(ai.Unspecified),t(La(ai.English)),n&&Xn.setTranslationLanguage(),Ce({event:Ri,operations:[z(a=>a.autoCaption===!0&&a.lang!==void 0)]})))):Promise.reject({type:W,reason:"Live transcription is not enabled."})}disableCaptions(e){const{[pe]:t}=this,{liveTranscription:{isHostDisableCaptions:r}}=t();return e?r?Promise.resolve():(Xn.disableCaptions(!0),Ce(Qf)):r?(Xn.disableCaptions(!1),Ce(Qf)):Promise.resolve()}setSpeakingLanguage(e){const{[pe]:t,[Et]:r}=this,{liveTranscription:{isLiveTranscriptionSubscribed:n,isHostLockSpeakingLanguage:i,transcriptionLang:o}}=t(),s=o.find(a=>a.lang===e);if(s){const{code:a}=s;return n?(i?Xn.setSpokenLanguage(a):fc(a),r(La(a)),Promise.resolve("")):Promise.reject({type:W,reason:"Cannot set speaking language before starting live transcription"})}return Promise.reject({type:Te,reason:"Unsupported transcription language"})}setTranslationLanguage(e){const{[pe]:t,[Et]:r}=this,n=t(),{liveTranscription:{isEnableTranslatedCaptions:i,isLiveTranscriptionSubscribed:o,translatedSetting:s,currentTranscriptionLang:a}}=n;if(!i)return Promise.reject({type:W,reason:"Live translation is not enabled."});if(!o)return Promise.reject({type:W,reason:"Cannot set translation language before starting live transcription"});if(e){const l=s==null?void 0:s.find(u=>u.code===a);if(l){const{translatedToLanguage:u}=l,d=u.find(c=>c.lang===e);if(d)return Xn.setTranslationLanguage(d.code),Ce({event:Ri,operations:[z(c=>c.autoCaption===!0&&c.lang===d.code),xe(1)]},c=>{let{lang:p}=c;return p===d.code})}return Promise.reject({type:W,reason:`Cannot support translating ${hc[a||0]} to ${e}`})}return Xn.setTranslationLanguage(),r(Pm(void 0)),Promise.resolve("")}enableManualCaptioner(){const{[pe]:e}=this,{meeting:{meetingOptions:t},liveTranscription:{isManualCaptionerEnabled:r,isHostDisableCaptions:n}}=e();if(n)return Promise.reject({type:W,reason:"Captions has been disabled by host."});const{isEnableManualCaptions:i,isEnableClosedCaption:o}=t;return i??o?r?Promise.resolve():(Xn.enableManualCaption(!0),Ce(Ri,s=>{let{autoCaption:a}=s;return a===!1})):Promise.reject({type:W,reason:"Manual caption is not enabled."})}disableManualCaptioner(){const{[pe]:e}=this,{liveTranscription:{isManualCaptionerEnabled:t}}=e();return t?(Xn.enableManualCaption(!1),Ce(Ri,r=>{let{autoCaption:n}=r;return n===!0})):Promise.resolve()}assignManualCaption(e){var t;const{[pe]:r}=this,n=r(),{liveTranscription:{isManualCaptionerEnabled:i},participants:{attendeesList:o},meeting:{userId:s}}=n;return i?((t=jT(n))===null||t===void 0?void 0:t.userId)===e?Promise.resolve(""):o.find(l=>l.userId===e)?(Xn.assignCC(e,!0),Ce({event:s===e?vr:lo,operations:[z(l=>l.userId===e),xe(1)]},l=>l.bCCEditor===!0)):Promise.reject({type:Te,reason:"Cannot find the user"}):Promise.reject({type:W,reason:"Cannot assign caption editor due to the manual captioner is not enabled."})}sendCaptionTextManually(e,t){var r;const{[pe]:n,[Et]:i}=this,o=n(),{liveTranscription:{lastManualCaption:s},meeting:{userId:a}}=o,l=ye(o);let u=Promise.resolve();const d=(r=jT(o))===null||r===void 0?void 0:r.userId;return l!=null&&l.isHost&&d!==a&&(u=this.assignManualCaption(a)),u.then(()=>K4(n())?function(c,p,h){const m=c.length,f=[];var v;if(h)f.push({op:"close",text:c,msgId:(v=p==null?void 0:p.msgId)!==null&&v!==void 0?v:Bf()});else if(p&&p!=null&&p.text){const g=p.text.length;let y=0,S=0;for(;c[y]===p.text[y]&&y<m;)S+=ck(c[y]),y+=1;y===g&&y===m?f.push({op:"same"}):y===g&&y<m?f.push({op:"insert",text:c.slice(y),size:0,pos:S,msgId:p.msgId}):y<g&&y===m?f.push({op:"delete",size:0,pos:S,msgId:p.msgId}):(f.push({op:"delete",size:0,pos:S,msgId:p.msgId}),f.push({op:"insert",text:c.slice(y),pos:S,msgId:p.msgId}))}else m>0&&f.push({op:"start",text:c,pos:0,size:0,msgId:Bf()});return f.filter(g=>g.op!=="same")}(e,s,t):Promise.reject({type:Sr,reason:"Cannot type caption "})).then(c=>Array.isArray(c)?(c.forEach(p=>{const{text:h,...m}=p;ur.beginEncrypt({text:h??"",type:Rr.CC_MESSAGE}).then(f=>{Xn.sendManualCaption({text:f,...m});const v=t?void 0:{text:h,msgId:p.msgId};i(mL(v))})}),Ce(Xd,p=>p.source===ns.InMeetingManual)):"")}getLiveTranscriptionStatus(){const{[pe]:e}=this,{liveTranscription:{isLiveTranscriptionEnabled:t,isEnableTranslatedCaptions:r,isManualCaptionerEnabled:n,transcriptionLang:i,translatedSetting:o,isHostDisableCaptions:s}}=e();return{isLiveTranscriptionEnabled:t,isLiveTranslationEnabled:r,isHostDisableCaptions:s,isManualCaptionerEnabled:n,transcriptionLanguage:i.map(a=>a.lang).join(";"),translationLanguage:o==null?void 0:o.map(a=>({speakingLanguage:a.lang,translatedToLanguage:a.translatedToLanguage.map(l=>l.lang).join(";")}))}}getLiveTranscriptionSetting(){const{[pe]:e}=this,{meeting:{meetingOptions:t}}=e(),{isEnableManualCaptions:r,isEnableLiveTranscription:n,isEnableClosedCaption:i,isEnableAllowThirdPartyCCToken:o,isEnableViewFullTranscript:s,isEnableSaveCaptions:a}=t||{};return{isEnableManualCaptions:r,isEnableLiveTranscription:n,isEnableClosedCaption:i,isEnableAllowThirdPartyCCToken:o,isEnableViewFullTranscript:s,isEnableSaveCaptions:a}}getCurrentTranscriptionLanguage(){const{[pe]:e}=this,{liveTranscription:{currentTranscriptionLang:t}}=e();return t!==void 0?{code:UT[t],name:hc[t]}:null}getCurrentTranslationLanguage(){const{[pe]:e}=this,{liveTranscription:{currentTranslationLang:t}}=e();return t!==void 0?{code:UT[t],name:hc[t]}:null}getLatestTranscription(){const{[pe]:e}=this,{liveTranscription:{messageRecords:t,isManualCaptionerEnabled:r}}=e(),n=r?ai.DefaultManualInput:ai.NoTranslation,i=t.filter(o=>o.language===n);return i.length?i[i.length-1].text:""}getLatestTranslation(){const{[pe]:e}=this,{liveTranscription:{messageRecords:t,currentTranslationLang:r,isEnableTranslatedCaptions:n}}=e();if(n||r!==void 0){const i=t.filter(o=>o.language===r);return i.length?i[i.length-1].text:""}return""}getFullTranscriptionHistory(){const{[pe]:e}=this,t=e(),{liveTranscription:{messageRecords:r,isRecordsReduced:n}}=t;return n?function(i){return window.indexedDB!==void 0?new Promise(o=>{const s=window.indexedDB.open(hf,1);s.addEventListener("success",()=>{const a=s.result;if(a.objectStoreNames.contains(_o)){const l=a.transaction([_o],"readonly").objectStore(_o),u=[],d=i.meeting.meetingId,c=l.openCursor();c.onsuccess=()=>{const p=c.result;p?(p.value.mid===d&&u.push(...p.value.records),p.continue()):(o(u),a.close())}}else o("")})}):Promise.resolve("")}(t).then(i=>Array.isArray(i)?i.concat(r):[...r]):[...r]}getManualCaptionEditor(){const{[pe]:e}=this,t=e(),{closedCaption:{editorId:r}}=t;let n;if(!r)return{};if(n=et(t).find(d=>d.userId===r),!n)return{};const{userId:i,isHost:o,displayName:s,avatar:a,bCoHost:l,zoomID:u}=n;return{userId:i,isHost:o,displayName:s,avatar:a,bCoHost:l,zoomID:u}}getManualCaptionUrl(){const{[pe]:e}=this,{meeting:{meetingOptions:t,ccUrl:r}}=e(),{isEnableManualCaptions:n}=t||{};return n?r:(console.warn("you not enable manual caption"),"")}},Q(ht.prototype,"startLiveTranscription",[J,ts],Object.getOwnPropertyDescriptor(ht.prototype,"startLiveTranscription"),ht.prototype),Q(ht.prototype,"disableCaptions",[er,J,ts],Object.getOwnPropertyDescriptor(ht.prototype,"disableCaptions"),ht.prototype),Q(ht.prototype,"setSpeakingLanguage",[J,ts],Object.getOwnPropertyDescriptor(ht.prototype,"setSpeakingLanguage"),ht.prototype),Q(ht.prototype,"setTranslationLanguage",[J,ts],Object.getOwnPropertyDescriptor(ht.prototype,"setTranslationLanguage"),ht.prototype),Q(ht.prototype,"enableManualCaptioner",[er,J,ts],Object.getOwnPropertyDescriptor(ht.prototype,"enableManualCaptioner"),ht.prototype),Q(ht.prototype,"disableManualCaptioner",[er,J,ts],Object.getOwnPropertyDescriptor(ht.prototype,"disableManualCaptioner"),ht.prototype),Q(ht.prototype,"assignManualCaption",[J,er,ts],Object.getOwnPropertyDescriptor(ht.prototype,"assignManualCaption"),ht.prototype),Q(ht.prototype,"sendCaptionTextManually",[J,ts],Object.getOwnPropertyDescriptor(ht.prototype,"sendCaptionTextManually"),ht.prototype),ht);const J4={epics0:e=>e.pipe(he(`${qn}`),ne(t=>{const{payload:{liveTranscription:r}}=t;return lL(r)})),epics1:(e,t)=>se(e,zn).pipe(z(r=>{var n,i;return((n=r.payload.body)===null||n===void 0?void 0:n.NewLttAvaliable)!==void 0||((i=r.payload.body)===null||i===void 0?void 0:i.LiveTransEngineType)!==void 0}),ne(r=>{const{payload:{body:{NewLttAvaliable:n,LiveTransEngineType:i}}}=r,{liveTranscription:{isEnableAutomatedCaptions:o}}=t.value;return n!==void 0?(T(zk,!!n),aL(o&&!!n)):hL(i)})),epics2:(e,t)=>se(e,7982).pipe(G(r=>{const{payload:{body:{status:n,gwId:i}}}=r,o=[];switch(n){case ph.Ready:o.push(uL(i));break;case ph.ManualCaptionerEnabled:T(Ri,{autoCaption:!1}),o.push(u0(!0));break;case ph.ManualCaptionerDisabled:T(Ri,{autoCaption:!0}),o.push(UN({editorId:"",isEditor:!1,editorZoomId:""})),o.push(u0(!1));break;case ph.UserSub:{T(Ri,{autoCaption:t.value.liveTranscription.isLiveTranscriptionEnabled});const{liveTranscription:{stateBeforeFailover:a}}=t.value;if(a!=null&&a.isLiveTranscriptionSubscribed){var s;$T.enableNewLLT();const l=(s=a.currentTranscriptionLang)!==null&&s!==void 0?s:ai.Unspecified;fc(l),o.push(La(l)),a.currentTranslationLang!==void 0&&$T.setTranslationLanguage(a.currentTranslationLang),o.push(fL())}break}}return X(o)})),epics3:e=>se(e,7984).pipe(ne(t=>{const{payload:{body:{langs:r}}}=t;return dL(r)})),epics4:e=>se(e,8011).pipe(G(t=>{const{payload:{body:{disabled:r}}}=t,n=[];return T(Qf,r),n.push(vL(r)),r&&n.push(d0(!1)),X(n)})),epics5:e=>se(e,7985).pipe(z(t=>{var r;return((r=t.payload.body)===null||r===void 0?void 0:r.success)===!0}),G(t=>{const{payload:{body:{src:r,lang:n,success:i}}}=t,o=[];return i&&o.push(d0(!0)),r===ns.ASR?(n===ai.NoTranslation?o.push(Pm(void 0)):o.push(Pm(n)),T(Ri,{autoCaption:!0,lang:n})):[ns.InMeetingManual,ns.ExternalCaptioner].includes(r)&&T(Ri,{autoCaption:!1}),X(o)})),epics6:(e,t)=>se(e,7986).pipe(fe(t),G(r=>{let[n,i]=r;const o=ye(i),{liveTranscription:{currentTranscriptionLang:s}}=i,{payload:{body:a}}=n,l=[];if((a==null?void 0:a.lang)!==void 0){const{lang:u}=a;(o==null?void 0:o.audio)==="computer"&&s!==u&&fc(u),l.push(La(u))}return X(l)})),epics7:(e,t)=>Re(e,Z.JoinComputerAudioComplete).pipe(z(()=>t.value.liveTranscription.isLiveTranscriptionSubscribed),de(()=>{const{liveTranscription:{currentTranscriptionLang:r}}=t.value;r&&fc(r)}),_e(re)),epics8:(e,t)=>se(e,7983).pipe(z(r=>r.payload.body!==void 0),G(r=>{const{payload:{body:{msgType:n,errorCode:i,language:o,source:s,content:a,keyNodeId:l,msgId:u,nodeId:d,pos:c,size:p,audioLanguage:h}}}=r;if(n===es.Error){if(i===xT.TranslateNotSupport){const{liveTranscription:{currentTranslationLang:m}}=t.value;m&&T(Xd,{error:xT.TranslateNotSupport,errorMessage:`${hc[h]} to ${hc[m]} translation is not supported!`,audioLanguage:h,translationLang:m})}}else{const m=t.value,f=et(m),{liveTranscription:{isManualCaptionerEnabled:v}}=m;if(v&&s===ns.ASR)return Promise.resolve();if(function(g,y){const{liveTranscription:{isEnableTranslatedCaptions:S,isLiveTranscriptionEnabled:b},meeting:{meetingOptions:R}}=y,{isEnableManualCaptions:w,isEnableAllowHostAssignTypeCC:O,isEnableClosedCaption:D,isEnableAllowThirdPartyCCToken:U}=R;return g===ns.ASR?S||b:g===ns.InMeetingManual?w&&O||w===void 0&&D:g===ns.ExternalCaptioner?U:void 0}(s,m)&&a&&l){const g=G4(m)[l];if(g)return ur.beginDecrypt({decryptedText:a,type:Rr.CC_MESSAGE,zoomId:g}).then(y=>{let{message:S}=y;const{liveTranscription:{messageRecords:b}}=t.value,R=[],w=b.find(O=>O.msgId===u);if(w){const{text:O}=w,D=((x,P)=>{if(!x||P===0)return"";let I=0;for(let E=0;E<x.length;E++)if(I+=ck(x[E]),I===P)return x.slice(0,E+1);return x})(O,c);let U;n===es.Insert&&p===0||n===es.Delete&&p===0?U={...w,text:D+S,msgType:n}:n===es.Close&&(U={...w,text:S,msgType:n,done:!0}),U&&(R.push(cL(U)),T(Xd,U))}else if([es.New,es.Close].includes(n)||v&&n===es.Insert){const O=f.find(U=>U.userId===d),D={msgId:u,userId:d,displayName:O==null?void 0:O.displayName,avatar:O==null?void 0:O.avatar,text:S,source:s,language:o,timestamp:new Date().getTime(),done:n===es.Close};R.push(c0({...D,msgType:n})),T(Xd,D)}return R})}}return Promise.resolve()}),G(r=>Array.isArray(r)?X(r):re)),epics9:(e,t)=>e.pipe(he(`${c0}`),_r(Hs),G(()=>{const{liveTranscription:{messageRecords:r}}=t.value;return r.length>=1e5?function(n){const{meeting:{meetingId:i},liveTranscription:{messageRecords:o,reducedRecordsCount:s}}=n;return window.indexedDB!==void 0?new Promise(a=>{const l=window.indexedDB.open(hf,1);l.addEventListener("upgradeneeded",()=>{const u=l.result;if(!u.objectStoreNames.contains(_o)){const d=u.createObjectStore(_o,{keyPath:["startIndex","mid"],autoIncrement:!1});d.createIndex("mid","mid",{unique:!1}),d.transaction.oncomplete=()=>{console.log(`Create objectStore [${_o}] complete`)}}}),l.addEventListener("success",()=>{const u=l.result,d=o.length,c=.9*d,p=d-c,h=o.slice(0,c),m=s+h.length,f=u.transaction([_o],"readwrite");f.objectStore(_o).put({startIndex:s,mid:i,records:h}),f.oncomplete=()=>{a(pL({remains:p,reducedRecordsCount:m})),u.close()},f.onerror=()=>{a(""),u.close()}})}):Promise.resolve("")}(t.value):Promise.resolve("")}),z(r=>typeof r=="object")),epics10:(e,t)=>e.pipe(he(`${Vu}`,`${xu}`),z(()=>t.value.liveTranscription.isRecordsReduced),de(()=>{(function(){if(window.indexedDB!==void 0){const r=window.indexedDB.open(hf,1);r.addEventListener("success",()=>{const n=r.result;n.objectStoreNames.contains(_o)&&(window.indexedDB.deleteDatabase(hf),n.close())})}})()}),_e(re)),epics11:(e,t)=>Re(e,[Z.AudiobridgeSetCcLangSuccess,Z.AudiobridgeSetCcLangFailure]).pipe(G(r=>{const{payload:{type:n,data:i}}=r,{liveTranscription:{currentTranscriptionLang:o}}=t.value,s=[];return n===Z.AudiobridgeSetCcLangSuccess&&i!==o?s.push(La(i)):n===Z.AudiobridgeSetCcLangFailure&&s.push(La(void 0)),X(s)}))},Z4=hn(J4),FT={isLiveStreamEnable:!1,status:0},Y4=pn({[`${SL}`]:k((e,t)=>{let{payload:r}=t;e.isLiveStreamEnable=r}),[`${Dm}`]:k((e,t)=>{let{payload:r}=t;e.status=r}),[`${bL}`]:(e,t)=>{let{payload:r}=t;return r?{...e}:{...FT}}},FT);let rs=function(e){return e[e.Ended=0]="Ended",e[e.InProgress=1]="InProgress",e[e.Connecting=2]="Connecting",e[e.Timeout=3]="Timeout",e}({});var ua;const BT=He.createAgent();let X4=(Q((ua=class extends co{startLiveStream(e,t,r){const{[pe]:n,[Et]:i}=this,{liveStream:{isLiveStreamEnable:o,status:s}}=n();return s===rs.InProgress?Promise.reject({type:W,reason:"Live stream is already on"}):o?e&&t&&r?(BT.startLiveStream(e,t,r),Ce({event:ic,operations:[z(a=>a===rs.InProgress),xe(1)]},void 0,3e4).then(()=>"").catch(()=>{const{liveStream:{status:a}}=n();return a===rs.Connecting?(T(ic,rs.Timeout),i(Dm(rs.Timeout)),Promise.reject({type:Pi})):Promise.resolve("")})):Promise.reject({type:Te,reason:"parameter cannot be empty"}):Promise.reject({type:W,reason:"Live stream is not enabled"})}stopLiveStream(){const{[pe]:e,[Et]:t}=this,{liveStream:{status:r}}=e();return r===rs.InProgress&&(BT.stopLiveStream(),T(ic,rs.Ended),t(Dm(rs.Ended))),Promise.resolve("")}isLiveStreamEnabled(){var e;const{[pe]:t}=this;return!((e=t().liveStream)===null||e===void 0||!e.isLiveStreamEnable)}getLiveStreamStatus(){var e;const{[pe]:t}=this;return(e=t().liveStream)===null||e===void 0?void 0:e.status}}).prototype,"startLiveStream",[er],Object.getOwnPropertyDescriptor(ua.prototype,"startLiveStream"),ua.prototype),Q(ua.prototype,"stopLiveStream",[er],Object.getOwnPropertyDescriptor(ua.prototype,"stopLiveStream"),ua.prototype),ua);const eW=hn({epics0:e=>e.pipe(he(`${qn}`),ne(t=>{const{payload:{liveStreamInfo:r}}=t;return SL(!(r==null||!r.isEnabledLiveStream))})),epics1:e=>se(e,7970).pipe(ne(t=>{const{payload:{body:{channelName:r,liveStreamOn:n,isApiCall:i,status:o,viewerUrl:s}}}=t;return T(ic,o),Dm(o)}))}),{setSummaryEnable:rx,setSmartSummaryStatus:nx,resetSummary:tW}=rr("SET_SUMMARY_ENABLE","SET_SMART_SUMMARY_STATUS","RESET_SUMMARY"),{setMeetingQueryEnable:ix,setMeetingQueryStatus:ox}=rr("SET_MEETING_QUERY_ENABLE","SET_MEETING_QUERY_STATUS");let bs=function(e){return e.Default="",e.Start="Start",e.Paused="Paused",e.Stopped="Stopped",e}({}),Os=function(e){return e[e.GW_IND_NONE=0]="GW_IND_NONE",e[e.GW_IND_START=1]="GW_IND_START",e[e.GW_IND_PAUSE=2]="GW_IND_PAUSE",e[e.GW_IND_STOP=3]="GW_IND_STOP",e}({}),Es=function(e){return e.Default="",e.Start="Start",e.Paused="Paused",e.Stopped="Stopped",e}({}),Ps=function(e){return e[e.GW_IND_NONE=0]="GW_IND_NONE",e[e.GW_IND_START=1]="GW_IND_START",e[e.GW_IND_PAUSE=2]="GW_IND_PAUSE",e[e.GW_IND_STOP=3]="GW_IND_STOP",e}({});const HT={summaryStatus:Os.GW_IND_STOP,summaryEnable:!1,meetingQueryStatus:Ps.GW_IND_STOP,meetingQueryEnable:!1},rW=pn({[`${rx}`]:k((e,t)=>{let{payload:r}=t;e.summaryEnable=r}),[`${nx}`]:k((e,t)=>{let{payload:r}=t;e.summaryStatus=r}),[`${ix}`]:k((e,t)=>{let{payload:r}=t;e.meetingQueryEnable=r}),[`${ox}`]:k((e,t)=>{let{payload:r}=t;e.meetingQueryStatus=r}),[`${tW}`]:()=>({...HT})},HT);var zT,WT,GT,KT,Nn;const hh=He.createAgent();let nW=(zT=ue("summary"),WT=ue("summary"),GT=ue("summary"),KT=ue("summary"),Q((Nn=class extends co{startSummary(){const e=this[pe](),{summary:{summaryEnable:t,summaryStatus:r}}=e;return t?r===Os.GW_IND_START?Promise.resolve(""):(hh.summaryMeeting(!0),Ce(ms,n=>n.status===bs.Start)):Promise.reject({type:W,reason:"The account of the meeting disabled the smart summary"})}stopSummary(){const e=this[pe](),{summary:{summaryStatus:t}}=e;return t!==Os.GW_IND_START?Promise.resolve("not start summary, do nothing"):(hh.summaryMeeting(!1),Ce(ms,r=>r.status===bs.Stopped))}getSummaryStatus(){const e=this[pe](),{summary:{summaryStatus:t}}=e;return t===Os.GW_IND_START?bs.Start:t===Os.GW_IND_STOP?bs.Stopped:bs.Default}isSummaryEnabled(){const e=this[pe](),{summary:{summaryEnable:t}}=e;return t}startMeetingQuery(){const e=this[pe](),{summary:{meetingQueryEnable:t,meetingQueryStatus:r}}=e;return t?r===Ps.GW_IND_START?Promise.resolve(""):(hh.startMeetingQuery(!0),Ce(gs,n=>n.status===Es.Start)):Promise.reject({type:W,reason:"The account of the meeting disabled the smart summary"})}stopMeetingQuery(){const e=this[pe](),{summary:{meetingQueryStatus:t}}=e;return t!==Ps.GW_IND_START?Promise.resolve("not start meeting query, do nothing"):(hh.startMeetingQuery(!1),Ce(gs,r=>r.status===Es.Stopped))}getMeetingQueryStatus(){const e=this[pe](),{summary:{meetingQueryStatus:t}}=e;return t===Ps.GW_IND_START?Es.Start:t===Ps.GW_IND_STOP?Es.Stopped:Es.Default}isMeetingQueryEnabled(){const e=this[pe](),{summary:{meetingQueryEnable:t}}=e;return t}}).prototype,"startSummary",[er,J,zT],Object.getOwnPropertyDescriptor(Nn.prototype,"startSummary"),Nn.prototype),Q(Nn.prototype,"stopSummary",[er,J,WT],Object.getOwnPropertyDescriptor(Nn.prototype,"stopSummary"),Nn.prototype),Q(Nn.prototype,"startMeetingQuery",[er,J,GT],Object.getOwnPropertyDescriptor(Nn.prototype,"startMeetingQuery"),Nn.prototype),Q(Nn.prototype,"stopMeetingQuery",[er,J,KT],Object.getOwnPropertyDescriptor(Nn.prototype,"stopMeetingQuery"),Nn.prototype),Nn);const iW=hn({moduleEpics0:e=>se(e,8007).pipe(z(t=>{var r;return((r=t.payload.body)===null||r===void 0?void 0:r.supported)!==void 0}),ne(t=>{const{supported:r}=t.payload.body;return T(ms,{supported:r}),rx(r)})),moduleEpics1:(e,t)=>se(e,8008).pipe(z(r=>{var n;return((n=r.payload.body)===null||n===void 0?void 0:n.status)!==void 0}),fe(t),G(r=>{let[n,i]=r;const{status:o}=n.payload.body,{summary:{summaryStatus:s}}=i,a=[];if(o!==s)switch(o){case Os.GW_IND_START:T(ms,{status:bs.Start});break;case Os.GW_IND_PAUSE:T(ms,{status:bs.Paused});break;case Os.GW_IND_STOP:T(ms,{status:bs.Stopped});break;default:T(ms,{status:""})}return a.push(nx(o)),X(a)})),moduleEpics2:(e,t)=>se(e,8015).pipe(z(r=>{var n;return((n=r.payload.body)===null||n===void 0?void 0:n.supported)!==void 0}),fe(t),ne(r=>{let[n,i]=r;const{supported:o}=n.payload.body;T(gs,{supported:o});const{meeting:{zlkJwtToken:s}}=i;if(s){const{auto_transcription:a}=il(s);a&&(o?He.createAgent().startMeetingQuery(!0):console.warn("You account don't support auto transcription"))}return ix(o)})),moduleEpics3:(e,t)=>se(e,8016).pipe(z(r=>{var n;return((n=r.payload.body)===null||n===void 0?void 0:n.status)!==void 0}),fe(t),G(r=>{let[n,i]=r;const{status:o}=n.payload.body,{summary:{meetingQueryStatus:s}}=i,a=[];if(o!==s)switch(o){case Ps.GW_IND_START:T(gs,{status:Es.Start});break;case Ps.GW_IND_PAUSE:T(gs,{status:Es.Paused});break;case Ps.GW_IND_STOP:T(gs,{status:Es.Stopped});break;default:T(gs,{status:""})}return a.push(ox(o)),X(a)}))});var Rd;const oW={chat:{epic:Vz,reducer:Mz,Client:Nz},logger:{epic:h4,reducer:u4,Client:class extends co{getLogs(e){return sa.getLogs(this[lt],e)}getStore(){return sa.doNotUseDirtyGetStore()}setLogOptions(e){e&&this[lt].dispatch(Lw(e))}isAutoReportInAccountSettingEnabled(){const{meeting:{zlkJwtToken:e,enableAutoLog:t,collectionToggleEnable:r,zsk:n}}=this[lt].getState();return!!e||(n?t&&r:t)}reportMeetingProblem(e){var t;const{product:r,problem:n,timeOfOccurrence:i,description:o,ticket:s,isLogIncluded:a}=e,{meeting:{userId:l,confId:u,conId:d,svcUrl:c}}=this[lt].getState(),p=`'product':${r}
'problem':${n}
'timeOfOccurrence':${i}
'description':${o}
'ticketID':${s}
'isLogIncluded':${a?"Logs included":""}
'nodeId':${l}
'confId':${u}
'conId':${d}
'svcUrl':${c}`,h=["REPORT_NOTIFICATION"];return(t=sa.makeLogger(h).logWithExtraProperties("",{IM_NOTIFICATION:`${p}
TrackingId:${sa.trackingId}`}))===null||t===void 0?void 0:t.then(()=>{sa.reportToGlobalTracing(a?void 0:h,!0)})}reportToGlobalTracing(e){return sa.reportToGlobalTracing(e,!0)}reportRating(e,t){const{meeting:r,media:n,socket:i}=this[lt].getState();if(r){var o,s,a,l;const{zlkJwtToken:u,meetingStatus:d}=r,{assetsPath:c,enforceMultipleVideos:p,enforceVirtualBackground:h,disableRenderLimits:m}=n;sa.report(`rating:${e}, feedback:${t}, appKey:${u?(o=il(u))===null||o===void 0?void 0:o.app_key:""}, CPU:${navigator.hardwareConcurrency}, GPU:${(s=ae.gpu)!==null&&s!==void 0?s:""}, browser:${ae.browser} ${ae.browserVersion}, OS:${ae.os} ${ae.osVersion}, SharedArrayBuffer:${!!ae.isSupportSharedArrayBuffer},
         assetPath:${c},
          enforceMultipleVideos:${p},
          disableRenderLimits:${m},
          enforceVirtualBackground:${h}, ${d===Lt.Joined?`session duration:${Math.floor((performance.now()-((a=r==null?void 0:r.pingRWCTimestamp)!==null&&a!==void 0?a:0))/1e3)}, rwg:${i==null||(l=i.rwgServerList)===null||l===void 0||(l=l[i.retryCount])===null||l===void 0?void 0:l.rwg}, failover count:${r==null?void 0:r.failover.count}`:""}`,"User Rating","info"),Number(e)<=2&&this.reportToGlobalTracing()}return Promise.resolve()}}},recording:{epic:y4,reducer:m4,Client:g4},cmd:{epic:I4,reducer:S4,Client:b4},breakoutRoom:{epic:W4,reducer:T4,Client:B4},liveTranscription:{epic:Z4,reducer:q4,Client:Q4},liveStream:{epic:eW,reducer:Y4,Client:X4},summary:{epic:iW,reducer:rW,Client:nW}},sW=He.createAgent();let aW=(Rd=class extends Rz{constructor(e){super(e),this.mediaStream=void 0,this[Jm]=oW}getMediaStream(){return this.mediaStream===void 0&&(this.mediaStream=new R4(this[lt])),this.mediaStream}joinInstant(e,t,r,n,i,o){const{[pe]:s,[Et]:a}=this,{meeting:{lang:l,meetingStatus:u},socket:{zoomSocketStatus:d}}=s();return t?u!==Lt.Joined&&d===Je.Closed?(a(Lu({topic:e,password:i||"",userName:r,zlk:t,lang:l,cv:n})),o&&a(Ak(o)),So(eB.JoinMeeting)):Promise.reject({type:W,reason:"duplicated operation"}):Promise.reject({type:W,reason:"invalid  signature"})}removeUser(e){const t=this[lt].getState(),{participants:{attendeesList:r}}=t;return r.find(i=>i.userId===e)?(sW.expel(e),Ce(sw,i=>i.some(o=>o.userId===e))):Promise.reject({type:Te,reason:"no matched user"})}},Q(Rd.prototype,"removeUser",[Rt,J],Object.getOwnPropertyDescriptor(Rd.prototype,"removeUser"),Rd.prototype),Rd);class lW{constructor(t){this.instant=void 0,this.context=void 0,this.script=void 0,this.mic=void 0,this.instant=0,this.context=t,this.mic=null,this.script=t.createScriptProcessor(2048,1,1),this.script.onaudioprocess=r=>{const n=r.inputBuffer.getChannelData(0);let i,o=0;for(i=0;i<n.length;++i)o+=n[i]*n[i];this.instant=Math.sqrt(o/n.length)}}connectToSource(t){console.log("InputMicDetector is listening");try{var r;this.mic=this.context.createMediaStreamSource(t),this.mic.connect(this.script),(r=this.script)===null||r===void 0||r.connect(this.context.destination)}catch(n){console.error(n)}}stop(){var t,r;console.log("Audio Previewer stopped"),(t=this.mic)===null||t===void 0||t.disconnect(),this.mic=null,(r=this.script)===null||r===void 0||r.disconnect(),this.script=null}getMicVolume(){return this.instant}}const uW="https://st1.zoom.us/web_client/4qu8baa/audio/ring.mp3";class dW{constructor(){this.sampleAudio=void 0,this.audioCtx=void 0,this.destinationNode=void 0,this.audioPlayer=void 0,this.analyzserInterval=void 0,this.analyserNode=void 0,this.analyserNodeBufferDataArray=void 0,this.analyserCallback=void 0,this.sourceNode=void 0,this.mAudioStream=void 0,this.mSourceNode=void 0,this.mediaRecorder=void 0,this.isRecording=void 0,this.recorderChunks=[],this.recorderObjUrl=void 0,this.recorderPlayer=void 0,this.maximumRecordingTimer=void 0,this.shouldPlayAfterRecording=!0,this.isRunning=!1}testSpeaker(t){var r;if(typeof AudioContext!="function"||typeof MediaStreamAudioDestinationNode!="function"||!AudioContext.prototype.decodeAudioData)return void console.warn("Cannot test the speaker due to the browser capability");const{speakerId:n,sampleAudioUrl:i=uW,onAnalyseFrequency:o}=t||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext(),(((r=this.sampleAudio)===null||r===void 0?void 0:r.url)===i&&this.sampleAudio.data?Promise.resolve(this.sampleAudio.data):window.fetch(i).then(a=>a.arrayBuffer()).then(a=>this.audioCtx.decodeAudioData(a)).then(a=>(this.sampleAudio={url:i,data:a},a))).then(a=>{var l,u,d;this.sourceNode=this.audioCtx.createBufferSource(),this.sourceNode.buffer=a,this.sourceNode.loop=!0,n&&(l=this.audioPlayer)!==null&&l!==void 0&&l.setSinkId&&this.audioPlayer.setSinkId(n),o?typeof AudioContext.prototype.createAnalyser=="function"?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=o,this.initAnalyserNode(),this.analyserNode&&this.sourceNode.connect(this.analyserNode)):(this.sourceNode.connect(this.destinationNode),console.warn("Cannot analyze the stream due to the browser capability")):(this.analyserCallback=void 0,this.sourceNode.connect(this.destinationNode)),this.sourceNode.start(0),((u=this.audioCtx)===null||u===void 0?void 0:u.state)!=="running"&&((d=this.audioCtx)===null||d===void 0||d.resume()),this.audioPlayer&&(this.audioPlayer.muted=!1,this.audioPlayer.currentTime=0,this.audioPlayer.play())});const s=()=>{this.isRunning=!1,this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.sourceNode&&(this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode.buffer=null,this.sourceNode=void 0)};return{stop:s,destroy:()=>{var a;s(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),(a=this.audioCtx)===null||a===void 0||a.close(),this.audioCtx=void 0}}}testMicrophone(t){var r;if(typeof AudioContext!="function"||typeof MediaStreamAudioDestinationNode!="function"||typeof AudioContext.prototype.createMediaStreamSource!="function"||typeof((r=navigator.mediaDevices)===null||r===void 0?void 0:r.getUserMedia)!="function")return void console.warn("Cannot test the microphone due to the browser capability");const{microphoneId:n,speakerId:i,recordAndPlay:o,maxRecordDuration:s,onAnalyseFrequency:a,onStartRecording:l,onStopRecording:u,onStartPlayRecording:d,onStopPlayRecording:c}=t||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext();const p=()=>{o&&this.mediaRecorder&&this.isRecording&&(this.shouldPlayAfterRecording=!0,this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop())};window.navigator.mediaDevices.getUserMedia({audio:!n||{deviceId:{exact:n}}}).then(m=>{var f,v,g,y;this.mAudioStream=m,this.mSourceNode=(f=this.audioCtx)===null||f===void 0?void 0:f.createMediaStreamSource(m),this.audioPlayer.muted=!0,a?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=a,this.initAnalyserNode(),this.analyserNode&&((g=this.mSourceNode)===null||g===void 0||g.connect(this.analyserNode))):this.analyserCallback=void 0,o&&(typeof MediaRecorder=="function"?(this.recorderObjUrl&&window.URL.revokeObjectURL(this.recorderObjUrl),this.mediaRecorder=new MediaRecorder(this.mAudioStream),this.mediaRecorder.ondataavailable=S=>{S.data&&this.recorderChunks.push(S.data)},this.mediaRecorder.onstop=()=>{if(this.isRecording=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),u==null||u(),this.recorderChunks.length>0){var S;const b=new Blob(this.recorderChunks,{type:((S=this.recorderChunks[0])===null||S===void 0?void 0:S.type)||"audio/ogg; codecs=opus"});this.recorderObjUrl=window.URL.createObjectURL(b),this.shouldPlayAfterRecording&&this.playRecording(this.recorderObjUrl,i,d,c).catch(R=>{this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),console.warn(R)}),this.recorderChunks=[],this.mediaRecorder&&(this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder=void 0)}},this.mediaRecorder.start(),this.isRecording=!0,l==null||l(),this.maximumRecordingTimer=window.setTimeout(()=>{p()},s||1e4)):console.warn("Cannot record the sound due to the browser capability")),((v=this.audioCtx)===null||v===void 0?void 0:v.state)!=="running"&&((y=this.audioCtx)===null||y===void 0||y.resume()),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.play())});const h=()=>{this.isRunning=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.mSourceNode&&(a&&this.analyserNode&&this.mSourceNode.disconnect(this.analyserNode),this.mSourceNode=void 0),this.mAudioStream&&(this.mAudioStream.getAudioTracks().forEach(m=>{m.stop()}),this.mAudioStream=void 0),this.mediaRecorder&&(this.shouldPlayAfterRecording=!1,this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop(),this.isRecording=!1,this.mediaRecorder=void 0,this.recorderChunks=[]),this.recorderPlayer&&(this.recorderPlayer.currentTime=0,this.recorderPlayer.pause())};return{stop:h,stopRecording:p,destroy:()=>{var m;h(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),(m=this.audioCtx)===null||m===void 0||m.close(),this.audioCtx=void 0}}}initAudioContext(){this.audioCtx&&this.audioPlayer||(this.audioCtx=new AudioContext,this.destinationNode=new MediaStreamAudioDestinationNode(this.audioCtx),this.audioPlayer=new Audio,this.audioPlayer.loop=!0,this.audioPlayer.srcObject=this.destinationNode.stream)}initAnalyserNode(){if(!this.audioCtx)return;this.analyserNode||(this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.connect(this.destinationNode),this.analyserNode.fftSize=1024);const t=this.analyserNode.frequencyBinCount;this.analyserNodeBufferDataArray=new Uint8Array(t),this.analyzserInterval=window.setInterval(this.audioAnalyserCallback.bind(this),20)}audioAnalyserCallback(){if(this.analyserNodeBufferDataArray&&this.analyserNode&&this.analyserCallback){this.analyserNode.getByteFrequencyData(this.analyserNodeBufferDataArray);let t=0;for(const n of this.analyserNodeBufferDataArray)t+=n;const r=t/this.analyserNodeBufferDataArray.length;this.analyserCallback(r)}}playRecording(t,r,n,i){this.recorderPlayer=new Audio,this.recorderPlayer.src=t,this.recorderPlayer.currentTime=0,this.recorderPlayer.setSinkId&&r&&this.recorderPlayer.setSinkId(r);const o=()=>{i==null||i(),this.recorderPlayer&&(this.recorderPlayer.onpause=null,this.recorderPlayer.onended=null,this.recorderPlayer=void 0,this.isRunning=!1)};return new Promise((s,a)=>{this.recorderPlayer&&(this.recorderPlayer.onpause=()=>{s(!0)},this.recorderPlayer.onended=()=>{s(!0)},this.recorderPlayer.onerror=a,n==null||n(),this.recorderPlayer.play().catch(a))}).finally(()=>{window.URL.revokeObjectURL(t),o()})}}const Dy="AudioNotStartedError";class cW{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this.audioContext=void 0,this.inputMicDetector=void 0,this.isMicUnmuted=void 0,this.isAudioStarted=void 0,this.audioStream=void 0,this.deviceId=void 0,this.tester=void 0,this.audioContext=null,this.inputMicDetector=null,this.isMicUnmuted=!1,this.isAudioStarted=!1,this.audioStream=null,this.deviceId=t,this.tester=new dW}async start(){if(this.audioStream||this.isAudioStarted)throw new Error("AudioAlreadyStartedError");try{const t=await navigator.mediaDevices.getUserMedia(this.getAudioConstraints());this.audioStream=t,this.isAudioStarted=!0}catch(t){throw t}}async unmute(){if(!this.audioStream||!this.isAudioStarted)throw new Error(Dy);if(this.isMicUnmuted)throw new Error("AudioAlreadyUnmutedError");return this.toggleMicIsMuted(!0)}async mute(){if(!this.audioStream||!this.isAudioStarted)throw new Error(Dy);if(!this.isMicUnmuted)throw new Error("AudioAlreadyMutedError");return this.toggleMicIsMuted(!1)}getCurrentVolume(){return this.inputMicDetector?this.inputMicDetector.getMicVolume():0}async stop(){if(!this.audioStream||!this.isAudioStarted)throw new Error(Dy);this.audioStream.getAudioTracks().forEach(t=>t.stop()),this.audioStream=null,this.isAudioStarted=!1}async toggleMicIsMuted(t){if(t){if(!this.audioContext){const r=window.AudioContext||window.webkitAudioContext;this.audioContext=new r}this.inputMicDetector=new lW(this.audioContext),this.inputMicDetector.connectToSource(this.audioStream)}else this.inputMicDetector&&this.inputMicDetector.stop(),this.inputMicDetector=null;this.isMicUnmuted=t}getAudioConstraints(){return{audio:this.deviceId===""||{deviceId:{exact:this.deviceId}},video:!1}}testSpeaker(t){return this.tester.testSpeaker(t)}testMicrophone(t){return this.tester.testMicrophone(t)}}const pW={width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080},aspectRatio:{ideal:1.777777778}};class hW{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this.isVideoStarted=void 0,this.videoStream=void 0,this.deviceId=void 0,this.localPreview=void 0,this.vbPreviewInProgress=void 0,this.videoParams=void 0,this.isVideoStarted=!1,this.videoStream=null,this.vbPreviewInProgress=!1,this.deviceId=t,this.localPreview=new or}async start(t,r){if(!t)throw new Error("Video DOM element is falsy");if(this.isVideoStarted||this.videoStream)throw new Error("VideoAlreadyStartedError");this.videoParams={videoDOMElement:t,virtualBackground:r};const n=async i=>{if(!i||i.name!=="OverconstrainedError"&&i.name!=="ConstraintNotSatisfiedError")throw i;console.log(`Warning: detected ${i.name} -- trying to fall back to lower aspect ratio`);try{const o=await navigator.mediaDevices.getUserMedia(this.getVideoConstraints(!0));return this.tryPlayVideo(t,o)}catch(o){throw o}};if(!(t instanceof HTMLVideoElement)){if(t instanceof HTMLCanvasElement)return this.localPreview.setup().then(()=>this.localPreview.startPreview(t,{...r,deviceId:this.deviceId})).then(()=>{this.vbPreviewInProgress=!0,this.isVideoStarted=!0});throw new Error("Cannot start video with virtual background")}try{const i=await navigator.mediaDevices.getUserMedia(this.getVideoConstraints());return this.tryPlayVideo(t,i)}catch(i){return n(i)}}async stop(){if(this.vbPreviewInProgress)await this.localPreview.stopPreview(),this.vbPreviewInProgress=!1,this.isVideoStarted=!1;else{if(!this.videoStream||!this.isVideoStarted)throw new Error("VideoNotStartedError");this.videoStream.getVideoTracks().forEach(t=>t.stop()),this.videoStream=null,this.isVideoStarted=!1}}async switchCamera(t){t!==this.deviceId&&(this.deviceId=t,await this.stop(),this.videoParams&&await this.start(this.videoParams.videoDOMElement,this.videoParams.virtualBackground))}async updateVirtualBackground(t,r){this.vbPreviewInProgress&&await this.localPreview.updatePreview(t,r)}getVideoConstraints(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=pW;return kg.includes(this.deviceId)?{audio:!1,video:{facingMode:this.deviceId}}:(t?r=this.deviceId===""||{deviceId:{exact:this.deviceId}}:this.deviceId!==""&&(r.deviceId={exact:this.deviceId}),{audio:!1,video:r})}async tryPlayVideo(t,r){if(!t)throw new Error("Video DOM element is falsy");try{this.videoStream=r,t.muted=!0,t.playsInline=!0,t.srcObject=this.videoStream,await t.play(),this.isVideoStarted=!0}catch(n){throw n}}}class Yi{static createClient(){if(!this.meetingClient){const t=function(){const r=function(a){a===void 0&&(a={});var l,u=new AA.constructor(AA.schedulerActionCtor),d=new Fn,c=function(p){l=p;var h=new Fn,m=new Fn,f=h.asObservable().pipe(_r(u)),v=new D$(m.pipe(_r(u)),l.getState());return d.pipe(ne(function(g){var y=g(f,v,a.dependencies);if(!y)throw new TypeError('Your root Epic "'+(g.name||"<anonymous>")+`" does not return a stream. Double check you're not missing a return statement!`);return y}),G(function(g){return X(g).pipe($S(u),_r(u))})).subscribe(l.dispatch),function(g){return function(y){var S=g(y);return m.next(l.getState()),h.next(y),S}}};return c.run=function(p){d.next(p)},c}(),{epicSubject:n,rootEpic:i}=function(){const a=new a$(rk(dH,bH,CH,wz));return{epicSubject:a,rootEpic:(l,u,d)=>a.pipe(Zr(l.pipe(he(`${ZA}`))),G(c=>c(l,u,d)))}}(),o=[r],s=MP(a_(),Az(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return function(d){return function(){var c=d.apply(void 0,arguments),p=function(){throw new Error(zr(15))},h={getState:c.getState,dispatch:function(){return p.apply(void 0,arguments)}},m=l.map(function(f){return f(h)});return p=NP.apply(void 0,m)(c.dispatch),OA(OA({},c),{},{dispatch:p})}}}(...o)));return s.asyncReducers={},s.injectReducer=(a,l)=>{s.asyncReducers[a]===void 0&&(s.asyncReducers[a]=l,s.replaceReducer(a_(s.asyncReducers)))},s.injectEpic=a=>{n.next(a)},r.run(i),s}();this.meetingClient=new aW(t)}return this.meetingClient}static destroyClient(){if(this.meetingClient){const t=this.meetingClient[Et];this.meetingClient.leave().then(()=>{Nt(500).subscribe(()=>{t==null||t(ZA()),vw()})}),this.meetingClient=null}}static checkFeatureRequirements(){return function(){const t=[],r=[],{isAndroidOrIOSBrowser:n,browser:i,browserVersion:o,os:s,osVersion:a,isChrome:l,isFirefox:u,isSafari:d}=ae;!n&&(l||u||d)&&Bp()?t.push("Virtual Background"):r.push("Virtual Background"),(n||l)&&Bp()?t.push("Share Chrome Tab Audio"):r.push("Share Chrome Tab Audio"),!n&&Bp()?(t.push("Screen Share (send)"),t.push("720p Video (receive)"),t.push("Share 2nd Camera")):(r.push("Screen Share (send)"),r.push("720p Video (receive)"),r.push("Share 2nd Camera")),Bp()?(t.push("Audio"),t.push("Video"),t.push("Screen Share (receive)"),t.push("Chat"),t.push("Closed Captioning"),t.push("Live Transcription"),t.push("Live Translation"),t.push("Cloud Recording"),t.push("Call Out (PSTN)"),t.push("Command Channel"),t.push("RTMP Live Streaming"),t.push("Encryption"),t.push("720p Video (send)"),t.push("Render Multiple Videos")):(r.push("Audio"),r.push("Video"),r.push("Screen Share (receive)"),r.push("Chat"),r.push("Closed Captioning"),r.push("Live Transcription"),r.push("Live Translation"),r.push("Cloud Recording"),r.push("Call Out (PSTN)"),r.push("Command Channel"),r.push("RTMP Live Streaming"),r.push("Encryption"),t.push("720p Video (send)"),t.push("Render Multiple Videos"));const c=n?`${s}${a}`:`${i}${o}`;return r.length>0&&console.log("Some features are not supported on your platform, please refer to https://developers.zoom.us/docs/video-sdk/web/browser-support/"),{platform:c,supportFeatures:t,unSupportFeatures:r}}()}static checkSystemRequirements(){return VV()}static getDevices(t){return t?navigator.mediaDevices.enumerateDevices():navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(r=>(r.getTracks().forEach(n=>n.stop()),navigator.mediaDevices.enumerateDevices())).catch(r=>(console.warn(r),navigator.mediaDevices.enumerateDevices()))}static createLocalAudioTrack(){return new cW(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"")}static createLocalVideoTrack(){return new hW(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"")}static preloadDependentAssets(t){(async r=>{const n=r||Sa,i=`${n}/${ba}`,o=[],s=[],a=`${n}/`;if(Kp()){const{workers:u,wasms:d}=Ys("audio","simd",a);o.push(...u),s.push(...d)}else{const{workers:u,wasms:d}=Ys("audio","",a);o.push(...u),s.push(...d)}if(Kp()&&function(){const{browser:u,browserVersion:d,isAndroidBrowser:c,isSupportSharedArrayBuffer:p}=ae;return!c&&u.toLowerCase()==="chrome"&&xc(d,"100")>0&&p}()){const{workers:u,wasms:d}=Ys(["video","sharing"],"videoShare",a);o.push(...u),s.push(...d)}else if(Kp()&&h0()){const{workers:u,wasms:d}=Ys(["video","sharing"],"simd,thread",a);o.push(...u),s.push(...d)}else if(h0()){const{workers:u,wasms:d}=Ys(["video","sharing"],"thread",a);o.push(...u),s.push(...d)}else if(Kp()){const{workers:u,wasms:d}=Ys(["video","sharing"],"simd",a);o.push(...u),s.push(...d)}else{const{workers:u,wasms:d}=Ys(["video","sharing"],"",a);o.push(...u),s.push(...d)}const l=[Mv(i,"script")];o.forEach(u=>{l.push(Mv(u,"fetch"))}),s.forEach(u=>{l.push(Mv(u,"fetch"))});try{document.head.append(...l)}catch{}})(t)}}Yi.meetingClient=void 0,Yi.VERSION=Cg;const Sp="1.12.17",fh="INVALID_PARAMETERS",fW=`https://dmogdx0jrul3u.cloudfront.net/videosdk/${Sp}/lib`,mW=`https://source.zoom.us/videosdk/${Sp}/lib`,gW=`https://jssdk.zoomus.cn/videosdk/${Sp}/lib`,My=e=>typeof e=="string"&&e.length>0,sx=e=>{let t="";switch(e){case"Global":t=mW;break;case"CN":t=gW;break;case"CDN":t=fW;break;default:t=e}return t},ax=["userId","avatar","displayName","isHost","audio","muted","bVideoOn","sharerOn","sharerPause","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","userGuid","isPhoneUser","isInFailover",{from:"isCoHost",to:"isManager"},{from:"bAllowISORecord",to:"isAllowIndividualRecording"},{from:"bVideoConnect",to:"isVideoConnect"},{from:"bShareToBORooms",to:"bShareToSubsession"},{from:"bid",to:"subsessionId"},{from:"phoneNumber",to:e=>e===void 0?{}:{phoneNumber:e}}],lx=[...ax,{from:"userGUID",to:"userGuid"},{from:"bCoHost",to:e=>({isManager:!!e})},{from:"userType",to:e=>({isPhoneUser:!(5&~e)})},{from:"bid",to:e=>e?{subsessionId:e}:{}}],vW=lx.map(e=>typeof e=="string"?e:e.from);function ux(e,t){return typeof e=="string"?{[`${e}`]:t}:typeof e.to=="string"?{[`${e.to}`]:t}:e.to(t)}function $a(e){if(e)return ax.reduce((t,r)=>{const n=typeof r=="string"?r:r.from;return{...t,...ux(r,e[n])}},{})}function Ny(e){if(e)return Object.keys(e).reduce((t,r)=>{const n=vW.indexOf(r);if(n>-1){const i=lx[n],o=typeof i=="string"?i:i.from,s=ux(i,e[o]);return{...t,...s}}return t},{})}const q=Symbol("stream");class yW{constructor(t){this[q]=void 0,this[q]=t}startAudio(t){return this[q].startAudio(t)}stopAudio(){return this[q].stopAudio()}muteAudio(t){return this[q].muteAudio(t)}unmuteAudio(t){return this[q].unmuteAudio(t)}inviteByPhone(t,r,n,i){return this[q].dialOut(t,r,n,i)}cancelInviteByPhone(t,r,n){return this[q].cancelDialOut(t,r,n)}hangup(){return this[q].hangup()}getCurrentSessionCallinInfo(){return this[q].getDialInInfo()}muteShareAudio(t){return this[q].muteShareAudio(t)}unmuteShareAudio(t){return this[q].unmuteShareAudio(t)}subscribeAudioStatisticData(t){return this[q].subscribeAudioStatisticData(t)}unsubscribeAudioStatisticData(t){return this[q].unsubscribeAudioStatisticData(t)}muteUserAudioLocally(t){return this[q].muteUserAudioLocally(t)}unmuteUserAudioLocally(t){return this[q].unmuteUserAudioLocally(t)}adjustUserAudioVolumeLocally(t,r){return this[q].adjustUserAudioVolumeLocally(t,r)}enableBackgroundNoiseSuppression(t){return this[q].enableBackgroundNoiseSuppression(t)}enableSyncButtonsOnHeadset(t){return this[q].enableSyncButtonsOnHeadset(t)}muteAllUserAudioLocally(){return this[q].muteAllUserAudioLocally()}unmuteAllUserAudioLocally(){return this[q].unmuteAllUserAudioLocally()}enableOriginalSound(t){return this[q].enableOriginalSound(t)}callCRCDevice(t,r){return this[q].callCRCDevice(t,r)}cancelCallCRCDevice(t,r){return this[q].cancelCallCRCDevice(t,r)}startSecondaryAudio(t,r){return this[q].startSecondaryAudio(t,r)}stopSecondaryAudio(){return this[q].stopSecondaryAudio()}muteAllAudio(){return this[q].muteAllAudio()}unmuteAllAudio(){return this[q].unmuteAllAudio()}muteAudioUponStartAudio(t){return this[q].muteAudioUponEntry(t)}isAudioMuted(t){return this[q].isAudioMuted(t)}getMicList(){return this[q].getMicList()}getSpeakerList(){return this[q].getSpeakerList()}getActiveMicrophone(){return this[q].getActiveMicrophone()}getActiveSpeaker(){return this[q].getActiveSpeaker()}switchMicrophone(t){return this[q].switchMicrophone(t)}switchSpeaker(t){return this[q].switchSpeaker(t)}isSupportPhoneFeature(){return this[q].isSupportCallOut()}getSupportCountryInfo(){return this[q].getDialOutCountries()}getInviteByPhoneStatus(){return this[q].getDialOutStatus()}getShareAudioStatus(){return this[q].getShareAudioStatus()}isOthersShareAudioMutedLocally(t){return this[q].isOthersShareAudioMutedLocally(t)}getAudioStatisticData(){return this[q].getAudioStatisticData()}isUserAudioMutedLocally(t){return this[q].isUserAudioMutedLocally(t)}getUserVolumeLocally(t){return this[q].getUserVolumeLocally(t)}isSupportMicrophoneAndShareAudioSimultaneously(){return this[q].isSupportMicrophoneAndShareAudioSimultaneously()}getAudioMediaPlaybackController(){return this[q].getAudioMediaPlaybackController()}startVideo(t){return this[q].startVideo(t)}stopVideo(){return this[q].stopVideo()}renderVideo(t,r,n,i,o,s,a,l){return this[q].renderVideo(t,r,n,i,o,s,a,l)}stopRenderVideo(t,r,n,i){let o=arguments.length>4&&arguments[4]!==void 0&&arguments[4],s=arguments.length>5?arguments[5]:void 0;return this[q].stopRenderVideo(t,r,n,i,o,s)}updateVideoCanvasDimension(t,r,n){return this[q].updateVideoCanvasDimension(t,r,n)}adjustRenderedVideoPosition(t,r,n,i,o,s,a){return this[q].adjustRenderedVideoPosition(t,r,n,i,o,s,a)}clearVideoCanvas(t,r){return this[q].clearVideoCanvas(t,r)}mirrorVideo(t){return this[q].mirrorVideo(t)}enableHardwareAcceleration(t){return this[q].enableHardwareAcceleration(t)}previewVirtualBackground(t,r,n,i){return this[q].previewVirtualBackground(t,r,n,i)}updateVirtualBackgroundImage(t,r){return this[q].updateVirtualBackgroundImage(t,r)}stopPreviewVirtualBackground(){return this[q].stopPreviewVirtualBackground()}previewVideoMask(t,r){return this[q].previewVideoMask(t,r)}updateVideoMask(t){return this[q].updateVideoMask(t)}stopPreviewVideoMask(){return this[q].stopPreviewVideoMask()}switchCamera(t){return this[q].switchCamera(t)}subscribeVideoStatisticData(t){return this[q].subscribeVideoStatisticData(t)}unsubscribeVideoStatisticData(t){return this[q].unsubscribeVideoStatisticData(t)}attachVideo(t,r,n){return this[q].attachVideo(t,r,n)}detachVideo(t,r){return this[q].detachVideo(t,r)}spotlightVideo(t,r){return this[q].spotlight(t,r!=null&&r)}removeSpotlightedVideo(t){return this[q].removeSpotlight(t)}removeAllSpotlightedVideos(){return this[q].removeAllSpotlights()}isCapturingVideo(){return this[q].isCapturingVideo()}isCameraTaken(){return this[q].isCameraTaken()}getActiveVideoId(){return this[q].getActiveVideoId()}getActiveCamera(){return this[q].getActiveCamera()}getCameraList(){return this[q].getCameraList()}isCaptureForbidden(){return this[q].isCaptureForbidden()}getVideoMaxQuality(){return this[q].getVideoMaxQuality()}getReceivedVideoDimension(){return this[q].getReceivedVideoDimension()}isSupportMultipleVideos(){return this[q].isSupportMultipleVideos()}isSupportHDVideo(){return this[q].isSupportHDVideo()}isSupportVirtualBackground(){return this[q].isSupportVirtualBackground()}getVirtualbackgroundStatus(){return this[q].getVirtualbackgroundStatus()}getVideoStatisticData(){return this[q].getVideoStatisticData()}isRenderSelfViewWithVideoElement(){return this[q].isRenderSelfViewWithVideoElement()}getCapturedVideoResolution(){return this[q].getCapturedVideoResolution()}getVideoMaskStatus(){return this[q].getVideoMaskStatus()}isVideoMirrored(){return this[q].isVideoMirrored()}getSpotlightedUserList(){return this[q].getSpotlightedUserList().map(t=>$a(t))}getVideoMediaPlaybackController(){return this[q].getVideoMediaPlaybackController()}startShareView(t,r){return this[q].startShareView(t,r)}stopShareView(){return this[q].stopShareView()}switchShareView(t){return this[q].switchShareView(t)}startShareScreen(t,r){return(r==null?void 0:r.broadcastToSubsession)!==void 0&&Object.assign(r||{},{broadcastToBreakoutRoom:r==null?void 0:r.broadcastToSubsession}),this[q].startShareScreen(t,r)}pauseShareScreen(){return this[q].pauseShareScreen()}resumeShareScreen(){return this[q].resumeShareScreen()}stopShareScreen(){return this[q].stopShareScreen()}lockShare(t){return this[q].lockShare(t)}updateSharingCanvasDimension(t,r){return this[q].updateSharingCanvasDimension(t,r)}switchSharingSecondaryCamera(t){return this[q].switchSharingSecondaryCamera(t)}setSharePrivilege(t){return this[q].setSharePrivilege(t)}shareToSubsession(){return this[q].shareToBreakoutRoom()}stopShareToSubsession(){return this[q].stopShareToBreakoutRoom()}enableOptimizeForSharedVideo(t){return this[q].enableOptimizeForSharedVideo(t)}updateSharedVideoQuality(t){return this[q].updateSharedVideoQuality(t)}subscribeShareStatisticData(t){return this[q].subscribeShareStatisticData(t)}unsubscribeShareStatisticData(t){return this[q].unsubscribeShareStatisticData(t)}isShareLocked(){return this[q].isShareLocked()}getSharePrivilege(){return this[q].getSharePrivilege()}getActiveShareUserId(){return this[q].getActiveShareUserId()}getShareStatus(){return this[q].getShareStatus()}getShareUserList(){return this[q].getShareUserList().map(t=>$a(t))}isStartShareScreenWithVideoElement(){return this[q].isStartShareScreenWithVideoElement()}isOptimizeForSharedVideoEnabled(){return this[q].isOptimizeForSharedVideoEnabled()}isSupportOptimizedForSharedVideo(){return this[q].isSupportOptimizedForSharedVideo()}getShareStatisticData(){return this[q].getShareStatisticData()}requestFarEndCameraControl(t){return this[q].requestFarEndCameraControl(t)}approveFarEndCameraControl(t){return this[q].approveFarEndCameraControl(t)}declineFarEndCameraControl(t){return this[q].declineFarEndCameraControl(t)}giveUpFarEndCameraControl(t){return this[q].giveUpFarEndCameraControl(t)}controlCamera(t){return this[q].controlCamera(t)}controlFarEndCamera(t){return this[q].controlFarEndCamera(t)}getFarEndCameraPTZCapability(t){return this[q].getFarEndCameraPTZCapability(t)}getCameraPTZCapability(t){return this[q].getCameraPTZCapability(t)}isBrowserSupportPTZ(){return this[q].isBrowserSupportPTZ()}getNetworkQuality(t){return this[q].getNetworkQuality(t)}requestRemoteControl(){return this[q].requestRemoteControl()}giveUpRemoteControl(){return this[q].giveUpRemoteControl()}startRemoteControl(t){return this[q].startRemoteControl(t)}grabRemoteControl(){return this[q].grabRemoteControl()}approveRemoteControl(t,r){return this[q].approveRemoteControl(t,r)}declineRemoteControl(t){return this[q].declineRemoteControl(t)}stopRemoteControl(){return this[q].stopRemoteControl()}launchRemoteControlApp(t){return this[q].launchRemoteControlApp(t)}isRemotelyControlApproved(){return this[q].isRemotelyControlApproved()}isControllingUserRemotely(){return this[q].isControllingUserRemotely()}isTargetShareSupportRemoteControl(t){return this[q].isTargetShareSupportRemoteControl(t)}getRemoteControlAppDownloadUrl(){return this[q].getRemoteControlAppDownloadUrl()}getRemotelyControllingUser(){return this[q].getRemotelyControllingUser()}isRemoteControlEnabled(){return this[q].isRemoteControlEnabled()}}const ei=Symbol("chat");class SW{constructor(t){this[ei]=void 0,this[ei]=t}send(t,r){return this[ei].send(t,r)}sendToAll(t){return this[ei].send(t,rt.All)}sendFile(t,r){return this[ei].sendFile(t,r)}downloadFile(t,r,n){return this[ei].downloadFile(t,r,n)}setPrivilege(t){return this[ei].setPrivilege(t)}getPrivilege(){return this[ei].getPrivilege()}getReceivers(){return this[ei].getReceivers().map(t=>{const{isCoHost:r,...n}=t;return{isManager:r,...n}})}getHistory(){return this[ei].getHistory()}isFileTransferEnabled(){return this[ei].isFileTransferEnabled()}getFileTransferSetting(){return this[ei].getFileTransferSetting()}}const Fi=Symbol("recording");class bW{constructor(t){this[Fi]=void 0,this[Fi]=t}canStartRecording(){return this[Fi].isRecordingEnabled()}startCloudRecording(){return this[Fi].startRecording()}pauseCloudRecording(){return this[Fi].pauseRecording()}resumeCloudRecording(){return this[Fi].startRecording()}stopCloudRecording(){return this[Fi].stopRecording()}getCloudRecordingStatus(){return this[Fi].getRecordingStatus()}acceptIndividualRecording(){return this[Fi].accept()}declineIndividualRecording(){return this[Fi].decline()}}const Ly=Symbol("command");class EW{constructor(t){this[Ly]=void 0,this[Ly]=t}send(t,r){return this[Ly].send(t,r)}}const Bt=Symbol("breakout-room");class wW{constructor(t){this[Bt]=void 0,this[Bt]=t}createSubsessions(t,r){return this[Bt].createRooms(t,r).then(n=>n.map(i=>({subsessionId:i.roomId,subsessionName:i.name,userList:i.attendeeList})))}openSubsessions(t,r){const n=r?{...r,isAutoJoinRoom:r.isAutoJoinSubsession,isRoomSelectionEnabled:r.isSubsessionSelectionEnabled}:void 0,i=t.map(o=>({roomId:o.subsessionId,name:o.subsessionName,attendeeList:o.userList}));return this[Bt].openRooms(i,n)}joinSubsession(t){return this[Bt].joinRoom(t)}leaveSubsession(){return this[Bt].leaveRoom()}askForHelp(){return this[Bt].askForHelp()}postponeHelping(t){return this[Bt].postponeHelping(t)}broadcast(t){return this[Bt].broadcast(t)}assignUserToSubsession(t,r){return this[Bt].assignUserToRoom(t,r)}moveUserToSubsession(t,r){return this[Bt].moveUserToRoom(t,r)}moveBackToMainSession(t){return this[Bt].moveBackToMainSession(t)}closeAllSubsessions(){return this[Bt].closeRoom()}startBroadcastVoice(){return this[Bt].startBroadcastVoice()}stopBroadcastVoice(){return this[Bt].stopBroadcastVoice()}getUnassignedUserList(){return this[Bt].getUnassignedAttendeeList().map(t=>$a(t))}getSubsessionList(){return this[Bt].getRoomList().map(t=>{const{roomId:r,name:n,attendeeList:i}=t;return{subsessionId:r,subsessionName:n,userList:i.map(o=>{const{isInRoom:s,...a}=o;return{isInSubsession:s,...a}})}})}getUserStatus(){return this[Bt].getAttendeeStatus()}getSubsessionStatus(){return this[Bt].getRoomStatus()}getCurrentSubsession(){const{attendeeStatus:t,name:r,roomId:n}=this[Bt].getCurrentRoom();return{userStatus:t,subsessionName:r,subsessionId:n}}getSubsessionOptions(){const{isAutoJoinRoom:t,isRoomSelectionEnabled:r,...n}=this[Bt].getRoomOptions();return{isAutoJoinSubsession:t,isSubsessionSelectionEnabled:r,...n}}}const ti=Symbol("liveTranscription");class IW{constructor(t){this[ti]=void 0,this[ti]=t}startLiveTranscription(){return this[ti].startLiveTranscription()}setSpeakingLanguage(t){return this[ti].setSpeakingLanguage(t)}setTranslationLanguage(t){return this[ti].setTranslationLanguage(t)}getLiveTranscriptionStatus(){return this[ti].getLiveTranscriptionStatus()}getCurrentTranscriptionLanguage(){return this[ti].getCurrentTranscriptionLanguage()}getCurrentTranslationLanguage(){return this[ti].getCurrentTranslationLanguage()}getLatestTranscription(){return this[ti].getLatestTranscription()}getLatestTranslation(){return this[ti].getLatestTranslation()}getFullTranscriptionHistory(){return this[ti].getFullTranscriptionHistory()}disableCaptions(t){return this[ti].disableCaptions(t)}}const kl=Symbol("liveStream");class AW{constructor(t){this[kl]=void 0,this[kl]=t}startLiveStream(t,r,n){return this[kl].startLiveStream(t,r,n)}stopLiveStream(){return this[kl].stopLiveStream()}isLiveStreamEnabled(){return this[kl].isLiveStreamEnabled()}getLiveStreamStatus(){return this[kl].getLiveStreamStatus()}}const Td=Symbol("logger");class CW{constructor(t,r){if(this[Td]=void 0,this[Td]=t,r){const{debugMode:n,trackingId:i}=r;this[Td].setLogOptions({debugMode:n,trackingId:i})}}reportToGlobalTracing(t){return this[Td].reportToGlobalTracing(t)}reportRating(t,r){return this[Td].reportRating(t,r)}}const qT=[{event:"connection-change",originalEvent:"connection-change",payloadTransform:e=>{const{roomName:t,...r}=e;return t?{...r,subsessionName:t}:e}},{event:"user-added",originalEvent:"user-added",payloadTransform:e=>e.map(t=>Ny(t))},{event:"user-updated",originalEvent:"user-updated",payloadTransform:e=>e.map(t=>Ny(t))},{event:"user-removed",originalEvent:"user-removed",payloadTransform:e=>e.map(t=>Ny(t))},{event:"subsession-invite-to-join",originalEvent:"invite-to-join",payloadTransform:e=>({subsessionId:e.roomId,subsessionName:e.name})},{event:"subsession-countdown",originalEvent:"room-countdown"},{event:"subsession-time-up",originalEvent:"room-time-up"},{event:"closing-subsession-countdown",originalEvent:"closing-room-countdown"},{event:"subsession-broadcast-message",originalEvent:"broadcast-message"},{event:"subsession-broadcast-voice",originalEvent:"broadcast-voice"},{event:"subsession-ask-for-help",originalEvent:"ask-for-help",payloadTransform:e=>({userId:e.userId,userGuid:e.userGuid,displayName:e.displayName,subsessionId:e.roomId,subsessionName:e.roomName})},{event:"subsession-ask-for-help-response",originalEvent:"ask-for-help-response"},{event:"subsession-invite-back-to-main-session",originalEvent:"invite-back-to-main-session"},{event:"subsession-state-change",originalEvent:"room-state-change"},{event:"host-ask-unmute-audio",originalEvent:"unmute-audio-consent"},{event:"subsession-user-update",originalEvent:"room-user-update",payloadTransform:e=>{const{roomId:t,roomName:r,...n}=e;return{subsessionId:t,subsessionName:r,...n}}},{event:"active-media-failed",originalEvent:"media-internal-error"}],Bi=Symbol("summary");class _W{constructor(t){this[Bi]=void 0,this[Bi]=t}startSummary(){return this[Bi].startSummary()}stopSummary(){return this[Bi].stopSummary()}isSummaryEnabled(){return this[Bi].isSummaryEnabled()}getSummaryStatus(){return this[Bi].getSummaryStatus()}startMeetingQuery(){return this[Bi].startMeetingQuery()}stopMeetingQuery(){return this[Bi].stopMeetingQuery()}isMeetingQueryEnabled(){return this[Bi].isMeetingQueryEnabled()}getMeetingQueryStatus(){return this[Bi].getMeetingQueryStatus()}}const Qe=Symbol("Client"),mh=new WeakMap;class RW{constructor(){this[Qe]=void 0,this.stream=void 0,this.chat=void 0,this.command=void 0,this.recording=void 0,this.subsession=void 0,this.liveTranscription=void 0,this.logger=void 0,this.liveStream=void 0,this.aiClient=void 0,this[Qe]=Yi.createClient(),mh.set(this,new Map)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en-US",r=arguments.length>2?arguments[2]:void 0;const n=sx(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global");return window.isSecureContext===!1&&console.warn("The page is not in a secure context, to use audio, video, screen, a secure context must be enabled."),function(){const i="__ZOOM_VIDEO_SDK_DOM_STORAGE_TEST__";try{return localStorage.setItem(i,i),localStorage.removeItem(i),sessionStorage.setItem(i,i),sessionStorage.removeItem(i),!0}catch{return!1}}()||console.warn("localstorage or sessionstorage is not enabled, please enable to use the video sdk,"),this[Qe].init("","",{language:t,dependentAssets:n,constraints:{...Yi.checkSystemRequirements(),screen:typeof WebAssembly=="object"&&typeof Worker=="function"},additionalFeatures:["chat","cmd","recording","breakoutRoom","liveTranscription","logger","liveStream","summary"],webEndpoint:(r==null?void 0:r.webEndpoint)||"zoom.us",skipJsMedia:r==null?void 0:r.skipJsMedia,enforceMultipleVideos:r==null?void 0:r.enforceMultipleVideos,stayAwake:r==null?void 0:r.stayAwake,enforceVirtualBackground:r==null?void 0:r.enforceVirtualBackground,quicklyLeaveMeeting:r==null?void 0:r.leaveOnPageUnload,patchJsMedia:r==null?void 0:r.patchJsMedia,alternativeNameForVideoPlayer:r==null?void 0:r.alternativeNameForVideoPlayer})}join(t,r,n,i,o){return My(t)&&My(r)&&My(n)?t.length>200?Promise.reject({type:fh,reason:"The maximum length of topic is 200"}):n.length>200?Promise.reject({type:fh,reason:"The maximum length of username is 200"}):i&&(typeof i!="string"||i.length>10)?Promise.reject({type:fh,reason:"The maximum length of password is 10"}):this[Qe].joinInstant(t,r,n,Sp,i,o):Promise.reject({type:fh,reason:"Topic, token and userName must be string and required"})}leave(){var t;return arguments.length>0&&arguments[0]!==void 0&&arguments[0]?((t=mh.get(this))===null||t===void 0||t.clear(),this[Qe].end()):this[Qe].leave()}on(t,r){const n=qT.find(i=>i.event===t);if(n){const{originalEvent:i,payloadTransform:o}=n;if(o){const s=l=>{const u=o(l);r(u)};this[Qe].on(i,s);const a=mh.get(this);if(a){a.has(t)||a.set(t,[]);const l=a.get(t);l==null||l.push({originalCb:r,newCb:s})}}else this[Qe].on(i,r)}else this[Qe].on(t,r)}off(t,r){const n=qT.find(i=>i.event===t);if(n){const{originalEvent:i,payloadTransform:o}=n;if(o){const s=mh.get(this);if(s){const a=s.get(t),l=a==null?void 0:a.find(u=>u.originalCb===r);if(l&&a){this[Qe].off(i,l.newCb);const u=a==null?void 0:a.filter(d=>d.originalCb!==r);s.set(t,u)}}}else this[Qe].off(i,r)}else this[Qe].off(t,r)}getMediaStream(){return this.stream||(this.stream=new yW(this[Qe].getMediaStream())),this.stream}getChatClient(){return this.chat||(this.chat=new SW(this[Qe].getFeatureModule("chat"))),this.chat}getRecordingClient(){return this.recording||(this.recording=new bW(this[Qe].getFeatureModule("recording"))),this.recording}getCommandClient(){return this.command||(this.command=new EW(this[Qe].getFeatureModule("cmd"))),this.command}getSubsessionClient(){return this.subsession||(this.subsession=new wW(this[Qe].getFeatureModule("breakoutRoom"))),this.subsession}getLiveTranscriptionClient(){return this.liveTranscription||(this.liveTranscription=new IW(this[Qe].getFeatureModule("liveTranscription"))),this.liveTranscription}getLoggerClient(t){return this.logger||(this.logger=new CW(this[Qe].getFeatureModule("logger"),t)),this.logger}getLiveStreamClient(){return this.liveStream||(this.liveStream=new AW(this[Qe].getFeatureModule("liveStream"))),this.liveStream}getAIClient(){return this.aiClient||(this.aiClient=new _W(this[Qe].getFeatureModule("summary"))),this.aiClient}getSessionInfo(){const t=this[Qe].getMeetingInfo();return{isInMeeting:t.isInMeeting||!1,password:t.password||"",topic:t.topic,userName:t.userName,userId:t.userId,sessionId:t.meetingId}}getCurrentUserInfo(){return $a(this[Qe].getCurrentUserInfo())}getUser(t){return $a(this[Qe].getParticipantsList().find(r=>r.userId===t))}getAllUser(){return this[Qe].getParticipantsList().map(t=>$a(t))}changeName(t,r){return this[Qe].changeName(t,r)}makeHost(t){return this[Qe].makeHost(t)}removeUser(t){return this[Qe].removeUser(t)}makeManager(t){return this[Qe].makeCoHost(t)}revokeManager(t){return this[Qe].revokeCoHost(t)}reclaimHost(){return this[Qe].reclaimHost()}isHost(){return this[Qe].isHost()}isOriginalHost(){return this[Qe].isOriginHost()}getSessionHost(){return $a(this[Qe].getMeetingHost())}isManager(){return this[Qe].isCoHost()}}class W0{static createClient(){return this.videoClient||(this.videoClient=new RW),this.videoClient}static destroyClient(){this.videoClient&&(this.videoClient.leave(),this.videoClient=null)}static checkSystemRequirements(){return Yi.checkSystemRequirements()}static checkFeatureRequirements(){return Yi.checkFeatureRequirements()}static getDevices(t){return Yi.getDevices(t)}static createLocalAudioTrack(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Yi.createLocalAudioTrack(t)}static createLocalVideoTrack(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Yi.createLocalVideoTrack(t)}static preloadDependentAssets(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global";Yi.preloadDependentAssets(sx(t))}}W0.videoClient=void 0,W0.VERSION=Sp;(function(e){return e[e.All=1]="All",e[e.NoOne=4]="NoOne",e[e.EveryonePublicly=5]="EveryonePublicly",e})({});(function(e){return e[e.All=0]="All",e})({});(function(e){return e[e.Automatically=Na.Automatically]="Automatically",e[e.Manually=Na.Manually]="Manually",e})({});(function(e){return e[e.Initial=Ee.Initial]="Initial",e[e.Invited=Ee.Invited]="Invited",e[e.Joining=Ee.Joining]="Joining",e[e.InSubsession=Ee.InRoom]="InSubsession",e[e.Leaving=Ee.Leaving]="Leaving",e[e.MainSession=Ee.MainSession]="MainSession",e})({});(function(e){return e[e.NotStarted=Ve.NotStarted]="NotStarted",e[e.InProgress=Ve.InProgress]="InProgress",e[e.Closing=Ve.Closing]="Closing",e[e.Closed=Ve.Closed]="Closed",e})({});(function(e){return e[e.Failover=Ir.Failover]="Failover",e[e.JoinSubsession=Ir.JoinBreakoutRoom]="JoinSubsession",e[e.MoveToSubsession=Ir.MoveToBreakoutRoom]="MoveToSubsession",e[e.BackToMainSession=Ir.BackToMainSession]="BackToMainSession",e})({});(function(e){return e[e.Unlocked=xn.HostGrab]="Unlocked",e[e.Locked=xn.OnlyHost]="Locked",e[e.MultipleShare=xn.MultipleShare]="MultipleShare",e})({});(function(e){return e[e.Unknown=gr.Unknown]="Unknown",e[e.Uninstalled=gr.Uninstalled]="Uninstalled",e[e.Installed=gr.Installed]="Installed",e[e.Unlaunched=tm.Unlaunched]="Unlaunched",e[e.Launched=tm.Launched]="Launched",e})({});class Jt{constructor(t){if(this.value=t,!this.isValid(t))throw new Error(`Invalid participant ID: ${t}`)}static create(t){const r=typeof t=="number"?t.toString():t;return new Jt(r)}static generate(t="participant"){const r=Date.now().toString(36),n=Math.random().toString(36).substring(2,10);return new Jt(`${t}_${r}_${n}`)}getValue(){return this.value}equals(t){return this.value===t.value}toString(){return this.value}isValid(t){return typeof t=="string"&&t.length>0&&t.length<=100&&/^[a-zA-Z0-9_.-]+$/.test(t)}}class En{constructor(t){this.level=t}static excellent(){return new En("excellent")}static good(){return new En("good")}static fair(){return new En("fair")}static poor(){return new En("poor")}static unknown(){return new En("unknown")}static fromNumber(t){return t>=.8?En.excellent():t>=.6?En.good():t>=.4?En.fair():t>=.2?En.poor():En.unknown()}getLevel(){return this.level}isGoodOrBetter(){return this.level==="excellent"||this.level==="good"}canReceiveHighQualityVideo(){return this.level==="excellent"||this.level==="good"}shouldUseAudioOnly(){return this.level==="poor"}equals(t){return this.level===t.level}toString(){return this.level}}class Mr{constructor(t){this.data=t}static create(t,r,n){return new Mr({id:t,name:r,role:n,videoState:"disabled",audioState:"disabled",connectionQuality:En.unknown(),joinedAt:new Date,lastActivity:new Date,isActiveSpeaker:!1,hasRaisedHand:!1})}getId(){return this.data.id}getName(){return this.data.name}getRole(){return this.data.role}isCoach(){return this.data.role==="coach"}isStudent(){return this.data.role==="student"}isVideoEnabled(){return this.data.videoState==="enabled"}isAudioEnabled(){return this.data.audioState==="enabled"}getConnectionQuality(){return this.data.connectionQuality}isActiveSpeaker(){return this.data.isActiveSpeaker}hasRaisedHand(){return this.data.hasRaisedHand}getJoinedAt(){return this.data.joinedAt}getSessionDuration(){return Date.now()-this.data.joinedAt.getTime()}enableVideo(){return new Mr({...this.data,videoState:"enabled",lastActivity:new Date})}disableVideo(){return new Mr({...this.data,videoState:"disabled",lastActivity:new Date})}enableAudio(){return new Mr({...this.data,audioState:"enabled",lastActivity:new Date})}disableAudio(){return new Mr({...this.data,audioState:"disabled",lastActivity:new Date})}updateConnectionQuality(t){return new Mr({...this.data,connectionQuality:t,lastActivity:new Date})}setActiveSpeaker(t){return new Mr({...this.data,isActiveSpeaker:t,lastActivity:new Date})}raiseHand(){return new Mr({...this.data,hasRaisedHand:!0,lastActivity:new Date})}lowerHand(){return new Mr({...this.data,hasRaisedHand:!1,lastActivity:new Date})}canReceiveHighQualityVideo(){return this.data.connectionQuality.canReceiveHighQualityVideo()}shouldUseAudioOnly(){return this.data.connectionQuality.shouldUseAudioOnly()}canControlOthers(){return this.isCoach()}isInactive(){return Date.now()-this.data.lastActivity.getTime()>3e5}equals(t){return this.data.id.equals(t.data.id)}toSnapshot(){return{id:this.data.id.getValue(),name:this.data.name,role:this.data.role,isVideoEnabled:this.isVideoEnabled(),isAudioEnabled:this.isAudioEnabled(),connectionQuality:this.data.connectionQuality.getLevel(),joinedAt:this.data.joinedAt.toISOString(),isActiveSpeaker:this.data.isActiveSpeaker,hasRaisedHand:this.data.hasRaisedHand,sessionDuration:this.getSessionDuration()}}static fromSnapshot(t){return new Mr({id:Jt.create(t.id),name:t.name,role:t.role,videoState:t.isVideoEnabled?"enabled":"disabled",audioState:t.isAudioEnabled?"enabled":"disabled",connectionQuality:En.fromNumber(t.connectionQuality==="excellent"?1:t.connectionQuality==="good"?.7:t.connectionQuality==="fair"?.5:t.connectionQuality==="poor"?.3:0),joinedAt:new Date(t.joinedAt),lastActivity:new Date,isActiveSpeaker:t.isActiveSpeaker,hasRaisedHand:t.hasRaisedHand})}}class Od{constructor(t){Se(this,"tokenEndpoint");this.tokenEndpoint=t||"https://oorxo2zdkjrmmbzdfhaktk5ipa0phjlp.lambda-url.ap-south-1.on.aws"}async generateToken(t,r,n,i){try{const o={sessionName:this.sanitizeSessionName(t),role:r==="host"?1:0,userIdentity:n,sessionKey:i||"default-key",expirationSeconds:3600};console.log("[ZoomTokenService] Requesting token with payload:",{...o,endpoint:this.tokenEndpoint});const s=await fetch(`${this.tokenEndpoint}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok){const l=await s.text();throw new Error(`Token generation failed: ${s.status} - ${l}`)}const a=await s.json();if(!a.token)throw new Error("No token received from server");return console.log("[ZoomTokenService] Token generated successfully"),a.token}catch(o){throw console.error("[ZoomTokenService] Token generation error:",o),new Error(`Failed to generate token: ${o instanceof Error?o.message:"Unknown error"}`)}}sanitizeSessionName(t){return t.replace(/[^a-zA-Z0-9\s\-_]/g,"").substring(0,200).trim()}static isValidSessionName(t){return!t||t.length===0||t.length>200?!1:/^[a-zA-Z0-9\s\-_]+$/.test(t)}static generateSessionName(t,r="fitwithpari"){if(!t)throw new Error("SessionId is required for generating session name");const n=t.getValue();if(!n||n.trim().length===0)throw new Error(`SessionId value is empty or invalid: ${n}`);const i=`${r}_${n}`,o=i.substring(0,200);if(console.log("[ZoomTokenService] Generated session name:",{originalSessionId:n,prefix:r,generatedName:i,truncatedName:o,isValid:this.isValidSessionName(o)}),!this.isValidSessionName(o))throw new Error(`Generated session name is invalid: ${o}`);return o}}class TW{constructor(){Se(this,"serviceName","zoom");Se(this,"capabilities",{maxParticipants:1e3,supportsScreenShare:!0,supportsRecording:!0,supportsChat:!0,supportsBreakoutRooms:!1,supportsSelectiveStreaming:!0,supportsLiveStreaming:!0,supportedVideoQualities:["low","medium","high","ultra"],supportedStreamTypes:["camera","screen","audio-only"]});Se(this,"_isInitialized",!1);Se(this,"client",null);Se(this,"stream",null);Se(this,"currentParticipant",null);Se(this,"participantsMap",new Map);Se(this,"config",null);Se(this,"videoCanvasMap",new Map);Se(this,"tokenService");Se(this,"participantSyncInterval",null);Se(this,"participantSubject",new Jr);Se(this,"videoSubject",new Jr);Se(this,"audioSubject",new Jr);Se(this,"connectionSubject",new Jr);Se(this,"scalingSubject",new Jr);Se(this,"participantEvents$",this.participantSubject.asObservable());Se(this,"videoEvents$",this.videoSubject.asObservable());Se(this,"audioEvents$",this.audioSubject.asObservable());Se(this,"connectionEvents$",this.connectionSubject.asObservable());Se(this,"scalingEvents$",this.scalingSubject.asObservable());this.tokenService=new Od}get isInitialized(){return this._isInitialized}async initialize(t){try{if(this.config=t,console.log("[ZoomVideoService] Creating Zoom Video SDK client..."),this.client=W0.createClient(),!this.client)throw new Error("Failed to create Zoom Video SDK client");if(console.log("[ZoomVideoService] Initializing client..."),await this.client.init("en-US","Global",{patchJsMedia:!0,leaveOnPageUnload:!0,stayAwake:!0}),console.log("[ZoomVideoService] Getting media stream..."),this.stream=this.client.getMediaStream(),!this.stream)throw new Error("Failed to get media stream from Zoom client");this.setupEventHandlers(),this._isInitialized=!0,console.log("[ZoomVideoService]  Initialized successfully")}catch(r){throw console.error("[ZoomVideoService]  Initialization failed:",r),new Error(`Failed to initialize Zoom Video Service: ${r instanceof Error?r.message:"Unknown error"}`)}}async destroy(){try{this.participantSyncInterval&&(clearInterval(this.participantSyncInterval),this.participantSyncInterval=null),this.client&&(await this.client.leave(),this.client=null),this.participantsMap.clear(),this.currentParticipant=null,this.participantSubject.complete(),this.videoSubject.complete(),this.audioSubject.complete(),this.connectionSubject.complete(),this.scalingSubject.complete(),this._isInitialized=!1}catch(t){throw console.error("[ZoomVideoService] Destroy failed:",t),t}}async joinSession(t){let r="",n=0;try{if(!this.client||!this._isInitialized)throw new Error("Zoom Video Service not initialized");if(!this.stream)throw new Error("Media stream not available");if(r=Od.generateSessionName(t.sessionId),!r||r.trim().length===0){const a=`Failed to generate valid sessionName from sessionId: ${t.sessionId.getValue()}`;throw console.error("[ZoomVideoService]  SessionName generation failed:",{originalSessionId:t.sessionId.getValue(),sessionIdType:typeof t.sessionId.getValue(),generatedSessionName:r,sessionNameType:typeof r,sessionNameLength:(r==null?void 0:r.length)||0,trimmedLength:(r==null?void 0:r.trim().length)||0}),new Error(a)}if(!Od.isValidSessionName(r)){const a=`Generated sessionName is not valid for Zoom SDK: ${r}`;throw console.error("[ZoomVideoService]  SessionName validation failed:",{sessionName:r,isValid:Od.isValidSessionName(r),length:r.length,containsInvalidChars:!/^[a-zA-Z0-9\s\-_]+$/.test(r)}),new Error(a)}console.log("[ZoomVideoService] Generated sessionName:",{sessionName:r,originalSessionId:t.sessionId.getValue(),isValidFormat:Od.isValidSessionName(r)});const i=await this.tokenService.generateToken(r,t.participantRole==="coach"?"host":"participant",t.participantName,"fitness-session");console.log("[ZoomVideoService] Joining session:",{sessionName:r,participantName:t.participantName,role:t.participantRole}),n=Math.floor(Math.random()*9999)+1;try{const a=i.split("."),l=JSON.parse(atob(a[1])),u=Math.floor(Date.now()/1e3);console.log("[ZoomVideoService]  JWT Token Payload:",{topic:l.topic||l.tpc,role_type:l.role_type,user_identity:l.user_identity,app_key:l.app_key?"present":"missing",iatDate:new Date(l.iat*1e3).toISOString(),expDate:new Date(l.exp*1e3).toISOString(),isExpired:u>l.exp,timeSinceIssued:u-l.iat})}catch(a){console.error("[ZoomVideoService] Failed to decode JWT token:",a)}console.log("[ZoomVideoService] Calling client.join with parameters:",{sessionName:r,tokenPrefix:i.substring(0,20)+"...",participantName:t.participantName,userId:n,hasClient:!!this.client,hasStream:!!this.stream,tokenLength:i.length}),console.log("[ZoomVideoService]  Joining session with Zoom SDK..."),await this.client.join(r,i,t.participantName,""),console.log("[ZoomVideoService] Successfully joined session");const o=this.client.getCurrentUserInfo();console.log("[ZoomVideoService] Creating participant with userId:",{userId:o.userId,userIdType:typeof o.userId,participantName:t.participantName,participantRole:t.participantRole}),this.currentParticipant=Mr.create(Jt.create(o.userId),t.participantName,t.participantRole),t.videoEnabled&&(console.log("[ZoomVideoService] Enabling video as requested in join session"),await this.enableVideo(),this.currentParticipant&&(this.participantsMap.get(this.currentParticipant.getId().getValue())||this.participantsMap.set(this.currentParticipant.getId().getValue(),this.currentParticipant))),t.audioEnabled&&(console.log("[ZoomVideoService] Enabling audio as requested in join session"),await this.enableAudio());const s={participantCount:await this.getParticipantCount(),isRecording:!1,sessionStartTime:new Date};if(!this.currentParticipant){const a="Join succeeded but currentParticipant is null";throw console.error("[ZoomVideoService]  Success state validation failed:",{hasClient:!!this.client,hasStream:!!this.stream,currentParticipant:this.currentParticipant,sessionName:r,participantName:t.participantName}),new Error(a)}return console.log("[ZoomVideoService]  Join session success - final validation passed:",{sessionName:r,participantId:this.currentParticipant.getId().getValue(),participantName:this.currentParticipant.getName(),participantRole:this.currentParticipant.getRole(),sessionInfo:s,hasValidSessionName:!!r&&r.length>0}),this.startParticipantSync(),{success:!0,participant:this.currentParticipant,sessionInfo:s}}catch(i){return console.error("[ZoomVideoService] Session join failed:",{error:i,errorMessage:i instanceof Error?i.message:"Unknown error",errorStack:i instanceof Error?i.stack:void 0,sessionName:r,participantName:t.participantName,userId:n}),{success:!1,participant:this.currentParticipant,sessionInfo:{participantCount:0,isRecording:!1,sessionStartTime:new Date},error:i instanceof Error?i.message:`Unknown error: ${JSON.stringify(i)}`}}}async leaveSession(){this.participantSyncInterval&&(clearInterval(this.participantSyncInterval),this.participantSyncInterval=null),this.client&&(await this.client.leave(),this.currentParticipant=null,this.participantsMap.clear())}async getCurrentParticipant(){return this.currentParticipant}async getParticipants(){return Array.from(this.participantsMap.values())}async getParticipantCount(){return this.client?this.client.getAllUser().length:0}async getParticipantById(t){return this.participantsMap.get(t.getValue())||null}async enableVideo(){if(!this.client)throw new Error("Client not initialized");if(!this.stream)throw new Error("Stream not initialized");try{console.log("[ZoomVideoService] Starting video stream..."),await this.stream.startVideo(),console.log("[ZoomVideoService] Video stream started successfully"),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.enableVideo(),this.videoSubject.next({type:"video-enabled",participantId:this.currentParticipant.getId(),timestamp:new Date}),this.participantSubject.next({type:"participant-updated",participant:this.currentParticipant,timestamp:new Date}),console.log("[ZoomVideoService] Current participant video enabled:",{participantId:this.currentParticipant.getId().getValue(),participantName:this.currentParticipant.getName()}))}catch(t){throw console.error("[ZoomVideoService] Failed to enable video:",t),t}}async disableVideo(){if(!this.client)throw new Error("Client not initialized");if(!this.stream)throw new Error("Stream not initialized");try{console.log("[ZoomVideoService] Stopping video stream..."),await this.stream.stopVideo(),console.log("[ZoomVideoService] Video stream stopped successfully"),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.disableVideo(),this.videoSubject.next({type:"video-disabled",participantId:this.currentParticipant.getId(),timestamp:new Date}),this.participantSubject.next({type:"participant-updated",participant:this.currentParticipant,timestamp:new Date}),console.log("[ZoomVideoService] Current participant video disabled:",{participantId:this.currentParticipant.getId().getValue(),participantName:this.currentParticipant.getName()}))}catch(t){throw console.error("[ZoomVideoService] Failed to disable video:",t),t}}async enableAudio(){if(!this.client)throw new Error("Client not initialized");if(!this.stream)throw new Error("Stream not initialized");try{console.log("[ZoomVideoService] Starting audio stream..."),await this.stream.startAudio(),console.log("[ZoomVideoService] Audio stream started successfully"),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.enableAudio(),this.audioSubject.next({type:"audio-enabled",participantId:this.currentParticipant.getId(),timestamp:new Date}))}catch(t){throw console.error("[ZoomVideoService] Failed to enable audio:",t),t}}async disableAudio(){if(!this.client)throw new Error("Client not initialized");if(!this.stream)throw new Error("Stream not initialized");try{console.log("[ZoomVideoService] Stopping audio stream..."),await this.stream.stopAudio(),console.log("[ZoomVideoService] Audio stream stopped successfully"),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.disableAudio(),this.audioSubject.next({type:"audio-disabled",participantId:this.currentParticipant.getId(),timestamp:new Date}))}catch(t){throw console.error("[ZoomVideoService] Failed to disable audio:",t),t}}async setVideoQuality(t){if(!this.client)throw new Error("Client not initialized");const r={low:"90p",medium:"180p",high:"360p",ultra:"720p"};await this.client.getMediaStream().updateVideoCanvasDimension(r[t])}async startScreenShare(){if(!this.client)throw new Error("Client not initialized");await this.client.getMediaStream().startShareScreen(document.querySelector("#share-canvas"))}async stopScreenShare(){if(!this.client)throw new Error("Client not initialized");await this.client.getMediaStream().stopShareScreen()}async setActiveSpeaker(t){const r=this.participantsMap.get(t.getValue());if(r){const n=r.setActiveSpeaker(!0);this.participantsMap.set(t.getValue(),n)}}async muteParticipant(t){var r;if(!((r=this.currentParticipant)!=null&&r.canControlOthers()))throw new Error("Only coaches can mute participants");if(!this.client)throw new Error("Client not initialized");await this.client.mute(parseInt(t.getValue()))}async removeParticipant(t){var r;if(!((r=this.currentParticipant)!=null&&r.canControlOthers()))throw new Error("Only coaches can remove participants");if(!this.client)throw new Error("Client not initialized");await this.client.remove(parseInt(t.getValue()))}async spotlightParticipant(t){this.participantSubject.next({type:"participant-updated",participant:this.participantsMap.get(t.getValue()),timestamp:new Date})}async clearSpotlight(){}async enableSelectiveStreaming(t){if(!this.client)throw new Error("Client not initialized");const r=this.client.getMediaStream();for(const n of t.activeStreams)await r.subscribeVideo(parseInt(n.getValue()),"720p");for(const n of t.thumbnailStreams)await r.subscribeVideo(parseInt(n.getValue()),"90p");for(const n of t.audioOnlyStreams)await r.unsubscribeVideo(parseInt(n.getValue()));this.scalingSubject.next({type:"selective-streaming-enabled",data:t,timestamp:new Date})}async setParticipantVideoLimit(t){t>this.capabilities.maxParticipants&&this.scalingSubject.next({type:"participant-limit-reached",data:{limit:t,max:this.capabilities.maxParticipants},timestamp:new Date})}async enableAudioOnlyMode(){if(!this.client)throw new Error("Client not initialized");const t=this.client.getMediaStream();await t.stopVideo();const r=this.client.getAllUser();for(const n of r)n.userId!==this.client.getCurrentUserInfo().userId&&await t.unsubscribeVideo(n.userId)}async getConnectionStatistics(){var n,i;if(!this.client)return this.getEmptyStats();const t=this.client.getAllUser(),r=this.client.getMediaStream();return{totalParticipants:t.length,activeVideoStreams:t.filter(o=>o.bVideoOn).length,activeAudioStreams:t.filter(o=>o.muted===!1).length,averageConnectionQuality:.8,bandwidthUsage:{upstream:((n=r.getVideoStatisticData())==null?void 0:n.encode_send_kbps)||0,downstream:((i=r.getVideoStatisticData())==null?void 0:i.decode_recv_kbps)||0},latencyStats:{average:50,min:20,max:100},cpuUsage:0,memoryUsage:0}}async renderParticipantVideo(t,r){var n;if(!this.client)throw new Error("Client not initialized");if(!this.stream)throw new Error("Stream not initialized");try{const i=parseInt(t.getValue()),o=this.stream;console.log("[ZoomVideoService] Attempting to render video:",{participantId:t.getValue(),userId:i,elementWidth:r.clientWidth,elementHeight:r.clientHeight,hasStream:!!o,elementTag:r.tagName});const a=this.client.getAllUser().find(d=>d.userId===i);if(!a)throw console.warn("[ZoomVideoService] User not found for video rendering:",i),new Error(`User ${i} not found in session`);const l=(n=this.client.getCurrentUserInfo())==null?void 0:n.userId,u=i===l;if(!a.bVideoOn&&!u){console.warn("[ZoomVideoService] User video is disabled:",{userId:i,bVideoOn:a.bVideoOn,displayName:a.displayName});return}if(u&&!a.bVideoOn&&console.log("[ZoomVideoService] Self-view detected, attempting to render even though bVideoOn is false (video might be starting)"),r.tagName==="VIDEO"){const d=r;d.autoplay=!0,d.playsInline=!0,u&&(d.muted=!0);const c=window.getComputedStyle(d),p=Math.max(d.clientWidth,d.offsetWidth,parseInt(c.width)||0),h=Math.max(d.clientHeight,d.offsetHeight,parseInt(c.height)||0),m=300,f=200;(p===0||h===0)&&(console.warn("[ZoomVideoService] Video element has zero dimensions, forcing size:",{currentWidth:p,currentHeight:h,forcingTo:`${m}x${f}`}),d.style.width=`${m}px`,d.style.height=`${f}px`,d.style.minWidth=`${m}px`,d.style.minHeight=`${f}px`,d.offsetHeight);const v=Math.max(d.clientWidth,d.offsetWidth,m),g=Math.max(d.clientHeight,d.offsetHeight,f);console.log("[ZoomVideoService] Video element dimensions validation:",{participantId:t.getValue(),originalDimensions:`${p}x${h}`,finalDimensions:`${v}x${g}`,elementId:r.id,hasValidDimensions:v>0&&g>0});const y=2;console.log("[ZoomVideoService] Using attachVideo method for VIDEO element:",{userId:i,videoQuality:y,isSelfView:u,elementId:r.id}),await o.attachVideo(i,y,d),this.videoCanvasMap.set(t.getValue(),d)}else if(r.tagName==="CANVAS"){const d=r;d.width===0&&(d.width=Math.max(r.clientWidth,320)),d.height===0&&(d.height=Math.max(r.clientHeight,240));const c=d.width,p=d.height;console.log("[ZoomVideoService] Using renderVideo method for CANVAS element:",{userId:i,width:c,height:p,canvasId:r.id}),await o.renderVideo(d,i,c,p,0,0,2),this.videoCanvasMap.set(t.getValue(),d)}else throw new Error(`Unsupported element type for video rendering: ${r.tagName}. Use VIDEO or CANVAS elements.`);console.log("[ZoomVideoService]  Successfully rendered video for participant:",{participantId:t.getValue(),userId:i,userDisplayName:a.displayName,elementType:r.tagName})}catch(i){throw console.error("[ZoomVideoService] Failed to render participant video:",{participantId:t.getValue(),error:i,errorMessage:i instanceof Error?i.message:"Unknown error",elementDetails:{tagName:r.tagName,width:r.clientWidth,height:r.clientHeight,id:r.id,className:r.className}}),i}}async stopRenderingVideo(t){if(!this.client)throw new Error("Client not initialized");if(!this.stream)throw new Error("Stream not initialized");try{const r=parseInt(t.getValue()),n=this.stream;console.log("[ZoomVideoService] Stopping video rendering for participant:",{participantId:t.getValue(),userId:r});const i=this.videoCanvasMap.get(t.getValue());if(i&&i.tagName==="VIDEO")console.log("[ZoomVideoService] Using detachVideo for VIDEO element"),await n.detachVideo(r);else if(i&&i.tagName==="CANVAS")console.log("[ZoomVideoService] Using stopRenderVideo for CANVAS element"),await n.stopRenderVideo(i,r);else{console.log("[ZoomVideoService] No stored element found, trying detachVideo");try{await n.detachVideo(r)}catch(o){console.warn("[ZoomVideoService] detachVideo failed, trying stopRenderVideo:",o)}}this.videoCanvasMap.delete(t.getValue()),console.log("[ZoomVideoService]  Stopped video rendering for participant:",t.getValue())}catch(r){console.error("[ZoomVideoService] Failed to stop video rendering:",{participantId:t.getValue(),error:r}),this.videoCanvasMap.delete(t.getValue())}}async startRecording(){if(!this.client)throw new Error("Client not initialized");await this.client.startCloudRecording()}async stopRecording(){if(!this.client)throw new Error("Client not initialized");await this.client.stopCloudRecording()}async loadZoomSDK(){return new Promise((t,r)=>{const n=document.createElement("script");n.src="https://source.zoom.us/zoom-video-sdk-js-latest.js",n.onload=()=>t(),n.onerror=r,document.head.appendChild(n)})}async generateJWTToken(t){if(!this.config)throw new Error("Service not configured");const r={iss:this.config.appId,exp:Date.now()+24*60*60*1e3,iat:Date.now(),aud:"zoom",appKey:this.config.appId,tokenExp:Date.now()+24*60*60*1e3,alg:"HS256"};return btoa(JSON.stringify(r))}setupEventHandlers(){this.client&&(this.client.on("user-added",t=>{this.handleUserEvent(t,"user-added")}),this.client.on("user-removed",t=>{this.handleUserEvent(t,"user-removed")}),this.client.on("user-updated",t=>{this.handleUserVideoStateEvent(t)}),this.client.on("video-on",t=>{this.handleVideoStateChange(t,!0)}),this.client.on("video-off",t=>{this.handleVideoStateChange(t,!1)}),this.client.on("audio-on",t=>{this.handleAudioStateChange(t,!0)}),this.client.on("audio-off",t=>{this.handleAudioStateChange(t,!1)}),this.client.on("connection-change",t=>{this.connectionSubject.next({type:"connection-state-changed",state:t.state,timestamp:new Date})}),this.client.on("active-speaker",t=>{this.handleActiveSpeakerEvent(t)}))}handleUserEvent(t,r){const n=`[ZoomVideoService] ${r}`;console.log(`${n} received payload:`,{payload:t,type:typeof t,isArray:Array.isArray(t),hasUserId:(t==null?void 0:t.userId)!==void 0,keys:typeof t=="object"&&t!==null?Object.keys(t):"N/A"});try{const i=this.parseUserPayload(t,n);if(i.length===0){console.warn(`${n} No valid user info found in payload:`,t);return}for(const o of i)r==="user-added"?this.processUserAdded(o,n):this.processUserRemoved(o,n)}catch(i){console.error(`${n} Error processing event:`,i,"payload:",t)}}handleActiveSpeakerEvent(t){const r="[ZoomVideoService] active-speaker";console.log(`${r} received payload:`,{payload:t,type:typeof t,isArray:Array.isArray(t),hasUserId:(t==null?void 0:t.userId)!==void 0,keys:typeof t=="object"&&t!==null?Object.keys(t):"N/A"});try{const n=this.parseUserPayload(t,r);if(n.length===0){console.warn(`${r} No valid speaker info found in payload:`,t);return}this.participantsMap.forEach((i,o)=>{if(i.isActiveSpeaker()){const s=i.setActiveSpeaker(!1);this.participantsMap.set(o,s)}});for(const i of n){const o=i.userId.toString(),s=this.participantsMap.get(o);if(s){const a=s.setActiveSpeaker(!0);this.participantsMap.set(o,a),this.audioSubject.next({type:"active-speaker-changed",participantId:Jt.create(o),timestamp:new Date})}}}catch(n){console.error(`${r} Error processing event:`,n,"payload:",t)}}parseUserPayload(t,r){if(!t)return console.warn(`${r} Payload is null or undefined`),[];if(Array.isArray(t))return console.log(`${r} Processing array payload with ${t.length} items`),t.filter(n=>this.isValidUserInfo(n,r)).map(n=>({userId:n.userId,displayName:n.displayName||n.display_name||"Unknown User"}));if(typeof t=="object"&&t.userId!==void 0&&this.isValidUserInfo(t,r))return console.log(`${r} Processing single object payload`),[{userId:t.userId,displayName:t.displayName||t.display_name||"Unknown User"}];if(typeof t=="object"){const n=["users","participants","data"];for(const o of n)if(Array.isArray(t[o]))return console.log(`${r} Found nested array at payload.${o}`),this.parseUserPayload(t[o],r);const i=["user","participant","userInfo"];for(const o of i)if(t[o]&&typeof t[o]=="object")return console.log(`${r} Found nested object at payload.${o}`),this.parseUserPayload(t[o],r)}return console.warn(`${r} Unrecognized payload format:`,{payload:t,type:typeof t,isArray:Array.isArray(t),hasUserId:(t==null?void 0:t.userId)!==void 0,keys:typeof t=="object"&&t!==null?Object.keys(t):"N/A"}),[]}isValidUserInfo(t,r){if(!t||typeof t!="object")return console.warn(`${r} Invalid userInfo - not an object:`,t),!1;if(t.userId===void 0||t.userId===null)return console.warn(`${r} Invalid userInfo - missing userId:`,t),!1;try{return t.userId.toString(),!0}catch(n){return console.warn(`${r} Invalid userInfo - userId cannot be stringified:`,t,n),!1}}processUserAdded(t,r){try{const n=t.userId.toString();let i=Mr.create(Jt.create(n),t.displayName||"Unknown User","student");try{const s=this.client.getAllUser().find(a=>a.userId===t.userId);s&&(console.log(`${r} Syncing media state for user:`,{userId:n,bVideoOn:s.bVideoOn,muted:s.muted,audio:s.audio}),s.bVideoOn&&(i=i.enableVideo()),!s.muted&&s.audio&&(i=i.enableAudio()))}catch(o){console.warn(`${r} Failed to sync media state:`,o)}this.participantsMap.set(n,i),console.log(`${r} Successfully added participant:`,{userId:n,displayName:t.displayName,videoEnabled:i.isVideoEnabled(),audioEnabled:i.isAudioEnabled(),totalParticipants:this.participantsMap.size}),this.participantSubject.next({type:"participant-joined",participant:i,timestamp:new Date})}catch(n){console.error(`${r} Failed to process user addition:`,n,"userInfo:",t)}}processUserRemoved(t,r){try{const n=t.userId.toString(),i=this.participantsMap.get(n);i?(this.participantsMap.delete(n),console.log(`${r} Successfully removed participant:`,{userId:n,displayName:t.displayName,totalParticipants:this.participantsMap.size}),this.participantSubject.next({type:"participant-left",participant:i,timestamp:new Date})):console.warn(`${r} Attempted to remove non-existent participant:`,n)}catch(n){console.error(`${r} Failed to process user removal:`,n,"userInfo:",t)}}handleUserVideoStateEvent(t){const r="[ZoomVideoService] user-updated";console.log(`${r} received payload:`,t);try{const n=this.parseUserPayload(t,r);for(const i of n){const o=i.userId.toString(),s=this.participantsMap.get(o);if(s){const l=this.client.getAllUser().find(u=>u.userId===i.userId);if(l){let u=s;l.bVideoOn!==s.isVideoEnabled()&&(u=l.bVideoOn?u.enableVideo():u.disableVideo(),this.videoSubject.next({type:l.bVideoOn?"video-enabled":"video-disabled",participantId:Jt.create(o),timestamp:new Date}));const d=!l.muted&&l.audio;d!==s.isAudioEnabled()&&(u=d?u.enableAudio():u.disableAudio(),this.audioSubject.next({type:d?"audio-enabled":"audio-disabled",participantId:Jt.create(o),timestamp:new Date})),u!==s&&(this.participantsMap.set(o,u),this.participantSubject.next({type:"participant-updated",participant:u,timestamp:new Date}))}}}}catch(n){console.error(`${r} Error processing event:`,n,"payload:",t)}}handleVideoStateChange(t,r){const n=`[ZoomVideoService] video-${r?"on":"off"}`;console.log(`${n} received payload:`,t);try{const i=this.parseUserPayload(t,n);for(const o of i){const s=o.userId.toString(),a=this.participantsMap.get(s);if(a){const l=r?a.enableVideo():a.disableVideo();this.participantsMap.set(s,l),this.videoSubject.next({type:r?"video-enabled":"video-disabled",participantId:Jt.create(s),timestamp:new Date}),this.participantSubject.next({type:"participant-updated",participant:l,timestamp:new Date}),console.log(`${n} Updated participant video state:`,{userId:s,videoEnabled:r,participantVideoState:l.isVideoEnabled()})}}}catch(i){console.error(`${n} Error processing event:`,i,"payload:",t)}}handleAudioStateChange(t,r){const n=`[ZoomVideoService] audio-${r?"on":"off"}`;console.log(`${n} received payload:`,t);try{const i=this.parseUserPayload(t,n);for(const o of i){const s=o.userId.toString(),a=this.participantsMap.get(s);if(a){const l=r?a.enableAudio():a.disableAudio();this.participantsMap.set(s,l),this.audioSubject.next({type:r?"audio-enabled":"audio-disabled",participantId:Jt.create(s),timestamp:new Date}),this.participantSubject.next({type:"participant-updated",participant:l,timestamp:new Date}),console.log(`${n} Updated participant audio state:`,{userId:s,audioEnabled:r,participantAudioState:l.isAudioEnabled()})}}}catch(i){console.error(`${n} Error processing event:`,i,"payload:",t)}}startParticipantSync(){this.participantSyncInterval&&clearInterval(this.participantSyncInterval),this.participantSyncInterval=setInterval(()=>{this.syncParticipantStates()},3e3),console.log("[ZoomVideoService] Started participant state synchronization")}syncParticipantStates(){try{if(!this.client)return;const t=this.client.getAllUser();console.log("[ZoomVideoService] Syncing participant states:",{zoomUsers:t.length,trackedParticipants:this.participantsMap.size});for(const n of t){const i=n.userId.toString(),o=this.participantsMap.get(i);if(o){let s=!1,a=o;const l=!!n.bVideoOn;l!==o.isVideoEnabled()&&(a=l?a.enableVideo():a.disableVideo(),s=!0,console.log("[ZoomVideoService] Video state sync:",{userId:i,name:o.getName(),zoomVideoState:l,previousState:o.isVideoEnabled(),newState:a.isVideoEnabled()}),this.videoSubject.next({type:l?"video-enabled":"video-disabled",participantId:Jt.create(i),timestamp:new Date}));const u=!n.muted&&!!n.audio;u!==o.isAudioEnabled()&&(a=u?a.enableAudio():a.disableAudio(),s=!0,console.log("[ZoomVideoService] Audio state sync:",{userId:i,name:o.getName(),zoomAudioState:u,muted:n.muted,audio:n.audio,previousState:o.isAudioEnabled(),newState:a.isAudioEnabled()}),this.audioSubject.next({type:u?"audio-enabled":"audio-disabled",participantId:Jt.create(i),timestamp:new Date})),s&&(this.participantsMap.set(i,a),this.participantSubject.next({type:"participant-updated",participant:a,timestamp:new Date}))}else console.log("[ZoomVideoService] Found untracked participant during sync:",{userId:i,displayName:n.displayName||n.display_name,bVideoOn:n.bVideoOn,muted:n.muted}),this.processUserAdded({userId:n.userId,displayName:n.displayName||n.display_name},"[ZoomVideoService] sync-recovery")}const r=new Set(t.map(n=>n.userId.toString()));for(const[n,i]of this.participantsMap)!r.has(n)&&i!==this.currentParticipant&&(console.log("[ZoomVideoService] Found departed participant during sync:",{userId:n,name:i.getName()}),this.processUserRemoved({userId:parseInt(n),displayName:i.getName()},"[ZoomVideoService] sync-recovery"))}catch(t){console.error("[ZoomVideoService] Error during participant sync:",t)}}getEmptyStats(){return{totalParticipants:0,activeVideoStreams:0,activeAudioStreams:0,averageConnectionQuality:0,bandwidthUsage:{upstream:0,downstream:0},latencyStats:{average:0,min:0,max:0},cpuUsage:0,memoryUsage:0}}}class OW{constructor(t,r){Se(this,"appId");Se(this,"appCertificate");Se(this,"defaultExpirationTime",3600);if(this.appId=t||"ba0b6f951caa4d58be94af083ff55911",this.appCertificate=r||void 0||"",!this.appId)throw new Error("Agora App ID is required. Set VITE_AGORA_APP_ID in environment or pass as parameter.")}async generateRtcToken(t){if(console.log(" AgoraTokenService: Generating RTC token for:",{channel:t.channelName,uid:t.uid,role:t.role}),!this.appCertificate)return console.log(" AgoraTokenService: No App Certificate configured - using testing mode (null token)"),null;try{return console.warn(" AgoraTokenService: App Certificate configured but server-side token generation not implemented"),console.log(" AgoraTokenService: Falling back to testing mode for development"),null}catch(r){return console.error(" AgoraTokenService: Failed to generate token:",r),console.log(" AgoraTokenService: Falling back to testing mode"),null}}validateConfiguration(){const t=[];return this.appId?this.appId.length!==32&&t.push("App ID should be 32 characters long"):t.push("App ID is missing"),this.appCertificate?this.appCertificate.length!==32&&t.push("App Certificate should be 32 characters long"):t.push("App Certificate is missing (will use testing mode)"),{isValid:t.length===0||t.length===1&&t[0].includes("testing mode"),issues:t}}getServiceInfo(){const t=this.validateConfiguration();return{appId:this.appId?`${this.appId.substring(0,8)}...`:"MISSING",hasCertificate:!!this.appCertificate,isTestingMode:!this.appCertificate,defaultExpirationTime:this.defaultExpirationTime,validation:t}}isTestingMode(){return!this.appCertificate}}let Vy=null;function PW(){return Vy||(Vy=new OW),Vy}class kW{constructor(){Se(this,"serviceName","agora");Se(this,"capabilities",{maxParticipants:1e4,supportsScreenShare:!0,supportsRecording:!1,supportsChat:!1,supportsBreakoutRooms:!1,supportsSelectiveStreaming:!0,supportsLiveStreaming:!0,supportedVideoQualities:["low","medium","high","ultra"],supportedStreamTypes:["camera","screen","audio-only"]});Se(this,"_isInitialized",!1);Se(this,"client",null);Se(this,"currentParticipant",null);Se(this,"participantsMap",new Map);Se(this,"config",null);Se(this,"localVideoTrack",null);Se(this,"localAudioTrack",null);Se(this,"participantSubject",new Jr);Se(this,"videoSubject",new Jr);Se(this,"audioSubject",new Jr);Se(this,"connectionSubject",new Jr);Se(this,"scalingSubject",new Jr);Se(this,"participantEvents$",this.participantSubject.asObservable());Se(this,"videoEvents$",this.videoSubject.asObservable());Se(this,"audioEvents$",this.audioSubject.asObservable());Se(this,"connectionEvents$",this.connectionSubject.asObservable());Se(this,"scalingEvents$",this.scalingSubject.asObservable())}get isInitialized(){return this._isInitialized}async initialize(t){try{this.config=t,typeof window<"u"&&!window.AgoraRTC&&await this.loadAgoraSDK(),this.client=window.AgoraRTC.createClient({mode:"live",codec:"vp8"}),this.setupEventHandlers(),this._isInitialized=!0,t.enableLogging&&console.log("[AgoraVideoService] Initialized successfully")}catch(r){throw console.error("[AgoraVideoService] Initialization failed:",r),new Error(`Failed to initialize Agora Video Service: ${r}`)}}async destroy(){try{this.localVideoTrack&&this.localVideoTrack.close(),this.localAudioTrack&&this.localAudioTrack.close(),this.client&&await this.client.leave(),this.participantsMap.clear(),this.currentParticipant=null,this.participantSubject.complete(),this.videoSubject.complete(),this.audioSubject.complete(),this.connectionSubject.complete(),this.scalingSubject.complete(),this._isInitialized=!1}catch(t){throw console.error("[AgoraVideoService] Destroy failed:",t),t}}async joinSession(t){try{if(!this.client||!this._isInitialized||!this.config)throw new Error("Service not initialized");await this.client.setClientRole(t.participantRole==="coach"?"host":"audience");const r=await this.generateAgoraToken(t.sessionId.getValue(),t.participantRole);console.log(" AgoraVideoService: Using token for join:",r===null?"testing mode (null)":`token: ${r.substring(0,20)}...`),console.log(" AgoraVideoService: Attempting to join channel with params:",{appId:this.config.appId?`${this.config.appId.substring(0,8)}...`:"MISSING",channel:t.sessionId.getValue(),token:r===null?"null (testing mode)":"token provided",role:t.participantRole});const n=await this.client.join(this.config.appId,t.sessionId.getValue(),r,null);console.log(" AgoraVideoService: Successfully joined channel with UID:",n),this.currentParticipant=Mr.create(Jt.create(n.toString()),t.participantName,t.participantRole),t.videoEnabled&&await this.enableVideo(),t.audioEnabled&&await this.enableAudio();const i={participantCount:await this.getParticipantCount(),isRecording:!1,sessionStartTime:new Date};return{success:!0,participant:this.currentParticipant,sessionInfo:i}}catch(r){return{success:!1,participant:this.currentParticipant,sessionInfo:{participantCount:0,isRecording:!1,sessionStartTime:new Date},error:r instanceof Error?r.message:"Unknown error"}}}async leaveSession(){this.client&&(await this.client.leave(),this.currentParticipant=null,this.participantsMap.clear())}async getCurrentParticipant(){return this.currentParticipant}async getParticipants(){return Array.from(this.participantsMap.values())}async getParticipantCount(){return this.client?this.client.remoteUsers.length+1:0}async getParticipantById(t){return this.participantsMap.get(t.getValue())||null}async enableVideo(){try{this.localVideoTrack||(this.localVideoTrack=await window.AgoraRTC.createCameraVideoTrack({encoderConfig:"720p_1"})),await this.client.publish([this.localVideoTrack]),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.enableVideo(),this.videoSubject.next({type:"video-enabled",participantId:this.currentParticipant.getId(),timestamp:new Date}))}catch(t){throw console.error("[AgoraVideoService] Enable video failed:",t),t}}async disableVideo(){try{this.localVideoTrack&&(await this.client.unpublish([this.localVideoTrack]),this.localVideoTrack.close(),this.localVideoTrack=null),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.disableVideo(),this.videoSubject.next({type:"video-disabled",participantId:this.currentParticipant.getId(),timestamp:new Date}))}catch(t){throw console.error("[AgoraVideoService] Disable video failed:",t),t}}async enableAudio(){try{this.localAudioTrack||(this.localAudioTrack=await window.AgoraRTC.createMicrophoneAudioTrack({encoderConfig:"music_standard"})),await this.client.publish([this.localAudioTrack]),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.enableAudio(),this.audioSubject.next({type:"audio-enabled",participantId:this.currentParticipant.getId(),timestamp:new Date}))}catch(t){throw console.error("[AgoraVideoService] Enable audio failed:",t),t}}async disableAudio(){try{this.localAudioTrack&&(await this.client.unpublish([this.localAudioTrack]),this.localAudioTrack.close(),this.localAudioTrack=null),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.disableAudio(),this.audioSubject.next({type:"audio-disabled",participantId:this.currentParticipant.getId(),timestamp:new Date}))}catch(t){throw console.error("[AgoraVideoService] Disable audio failed:",t),t}}async setVideoQuality(t){if(!this.localVideoTrack)return;const r={low:"180p_1",medium:"360p_1",high:"720p_1",ultra:"1080p_1"};await this.localVideoTrack.setEncoderConfiguration(r[t])}async startScreenShare(){throw new Error("Screen share not implemented in basic Agora service")}async stopScreenShare(){throw new Error("Screen share not implemented in basic Agora service")}async setActiveSpeaker(t){const r=this.participantsMap.get(t.getValue());if(r){const n=r.setActiveSpeaker(!0);this.participantsMap.set(t.getValue(),n)}}async muteParticipant(t){throw new Error("Participant control requires Agora RTM SDK integration")}async removeParticipant(t){throw new Error("Participant control requires server-side implementation")}async spotlightParticipant(t){}async clearSpotlight(){}async enableSelectiveStreaming(t){const r=this.client.remoteUsers;for(const n of r){const i=n.uid.toString();t.activeStreams.some(o=>o.getValue()===i)?await this.client.subscribe(n,"video"):t.audioOnlyStreams.some(o=>o.getValue()===i)&&(await this.client.subscribe(n,"audio"),await this.client.unsubscribe(n,"video"))}this.scalingSubject.next({type:"selective-streaming-enabled",data:t,timestamp:new Date})}async setParticipantVideoLimit(t){t>this.capabilities.maxParticipants&&this.scalingSubject.next({type:"participant-limit-reached",data:{limit:t,max:this.capabilities.maxParticipants},timestamp:new Date})}async enableAudioOnlyMode(){for(const t of this.client.remoteUsers)t.hasVideo&&await this.client.unsubscribe(t,"video")}async getConnectionStatistics(){if(!this.client)return this.getEmptyStats();const t=this.client.getRTCStats(),r=this.client.remoteUsers;return{totalParticipants:r.length+1,activeVideoStreams:r.filter(n=>n.hasVideo).length,activeAudioStreams:r.filter(n=>n.hasAudio).length,averageConnectionQuality:.85,bandwidthUsage:{upstream:t.OutgoingAvailableBandwidth||0,downstream:t.IncomingAvailableBandwidth||0},latencyStats:{average:t.RTT||50,min:20,max:150},cpuUsage:0,memoryUsage:0}}async renderParticipantVideo(t,r){var o;const n=t.getValue(),i=this.client.remoteUsers.find(s=>s.uid.toString()===n);i&&i.videoTrack?i.videoTrack.play(r):((o=this.currentParticipant)==null?void 0:o.getId().getValue())===n&&this.localVideoTrack&&this.localVideoTrack.play(r)}async stopRenderingVideo(t){var i;const r=t.getValue(),n=this.client.remoteUsers.find(o=>o.uid.toString()===r);n&&n.videoTrack?n.videoTrack.stop():((i=this.currentParticipant)==null?void 0:i.getId().getValue())===r&&this.localVideoTrack&&this.localVideoTrack.stop()}async startRecording(){throw new Error("Recording requires Agora Cloud Recording service integration")}async stopRecording(){throw new Error("Recording requires Agora Cloud Recording service integration")}async loadAgoraSDK(){return new Promise((t,r)=>{const n=document.createElement("script");n.src="https://download.agora.io/sdk/release/AgoraRTC_N.js",n.onload=()=>t(),n.onerror=r,document.head.appendChild(n)})}async generateAgoraToken(t,r){try{console.log(" AgoraVideoService: Generating token via AgoraTokenService...");const n=PW(),i=r==="coach"?"host":"audience",o=await n.generateRtcToken({channelName:t,uid:null,role:i,expirationTimeInSeconds:3600});return console.log(o===null?" AgoraVideoService: Using testing mode (null token)":" AgoraVideoService: Token generated successfully"),o}catch(n){return console.warn(" AgoraVideoService: Token generation failed, using testing mode:",n),null}}setupEventHandlers(){this.client&&(this.client.on("user-joined",t=>{const r=Mr.create(Jt.create(t.uid.toString()),`User ${t.uid}`,"student");this.participantsMap.set(t.uid.toString(),r),this.participantSubject.next({type:"participant-joined",participant:r,timestamp:new Date})}),this.client.on("user-left",t=>{const r=this.participantsMap.get(t.uid.toString());r&&(this.participantsMap.delete(t.uid.toString()),this.participantSubject.next({type:"participant-left",participant:r,timestamp:new Date}))}),this.client.on("user-published",async(t,r)=>{await this.client.subscribe(t,r),r==="video"?this.videoSubject.next({type:"video-enabled",participantId:Jt.create(t.uid.toString()),timestamp:new Date}):r==="audio"&&this.audioSubject.next({type:"audio-enabled",participantId:Jt.create(t.uid.toString()),timestamp:new Date})}),this.client.on("connection-state-change",t=>{this.connectionSubject.next({type:"connection-state-changed",state:t,timestamp:new Date})}),this.client.on("volume-indicator",t=>{const r=t.reduce((n,i)=>n.level>i.level?n:i);r&&r.level>10&&this.audioSubject.next({type:"active-speaker-changed",participantId:Jt.create(r.uid.toString()),timestamp:new Date})}))}getEmptyStats(){return{totalParticipants:0,activeVideoStreams:0,activeAudioStreams:0,averageConnectionQuality:0,bandwidthUsage:{upstream:0,downstream:0},latencyStats:{average:0,min:0,max:0},cpuUsage:0,memoryUsage:0}}}class DW{constructor(){Se(this,"serviceName","webrtc");Se(this,"capabilities",{maxParticipants:50,supportsScreenShare:!0,supportsRecording:!1,supportsChat:!1,supportsBreakoutRooms:!1,supportsSelectiveStreaming:!1,supportsLiveStreaming:!1,supportedVideoQualities:["low","medium","high"],supportedStreamTypes:["camera","screen","audio-only"]});Se(this,"_isInitialized",!1);Se(this,"peerConnections",new Map);Se(this,"localStream",null);Se(this,"currentParticipant",null);Se(this,"participantsMap",new Map);Se(this,"config",null);Se(this,"signalingSocket",null);Se(this,"participantSubject",new Jr);Se(this,"videoSubject",new Jr);Se(this,"audioSubject",new Jr);Se(this,"connectionSubject",new Jr);Se(this,"scalingSubject",new Jr);Se(this,"participantEvents$",this.participantSubject.asObservable());Se(this,"videoEvents$",this.videoSubject.asObservable());Se(this,"audioEvents$",this.audioSubject.asObservable());Se(this,"connectionEvents$",this.connectionSubject.asObservable());Se(this,"scalingEvents$",this.scalingSubject.asObservable())}get isInitialized(){return this._isInitialized}async initialize(t){try{this.config=t,t.serverUrl&&await this.connectToSignalingServer(t.serverUrl),this._isInitialized=!0,t.enableLogging&&console.log("[WebRTCVideoService] Initialized successfully")}catch(r){throw console.error("[WebRTCVideoService] Initialization failed:",r),new Error(`Failed to initialize WebRTC Video Service: ${r}`)}}async destroy(){try{this.localStream&&(this.localStream.getTracks().forEach(t=>t.stop()),this.localStream=null),this.peerConnections.forEach(t=>t.close()),this.peerConnections.clear(),this.signalingSocket&&(this.signalingSocket.close(),this.signalingSocket=null),this.participantsMap.clear(),this.currentParticipant=null,this.participantSubject.complete(),this.videoSubject.complete(),this.audioSubject.complete(),this.connectionSubject.complete(),this.scalingSubject.complete(),this._isInitialized=!1}catch(t){throw console.error("[WebRTCVideoService] Destroy failed:",t),t}}async joinSession(t){try{if(!this._isInitialized)throw new Error("Service not initialized");this.currentParticipant=Mr.create(Jt.create(this.generateUniqueId()),t.participantName,t.participantRole),(t.videoEnabled||t.audioEnabled)&&(this.localStream=await navigator.mediaDevices.getUserMedia({video:t.videoEnabled,audio:t.audioEnabled})),this.sendSignalingMessage({type:"join-session",sessionId:t.sessionId.getValue(),participantId:this.currentParticipant.getId().getValue(),participantName:t.participantName,participantRole:t.participantRole});const r={participantCount:await this.getParticipantCount(),isRecording:!1,sessionStartTime:new Date};return{success:!0,participant:this.currentParticipant,sessionInfo:r}}catch(r){return{success:!1,participant:this.currentParticipant,sessionInfo:{participantCount:0,isRecording:!1,sessionStartTime:new Date},error:r instanceof Error?r.message:"Unknown error"}}}async leaveSession(){this.signalingSocket&&this.currentParticipant&&this.sendSignalingMessage({type:"leave-session",participantId:this.currentParticipant.getId().getValue()}),this.peerConnections.forEach(t=>t.close()),this.peerConnections.clear(),this.participantsMap.clear(),this.currentParticipant=null}async getCurrentParticipant(){return this.currentParticipant}async getParticipants(){return Array.from(this.participantsMap.values())}async getParticipantCount(){return this.participantsMap.size+(this.currentParticipant?1:0)}async getParticipantById(t){return this.participantsMap.get(t.getValue())||null}async enableVideo(){try{if(!this.localStream)this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});else if(!this.localStream.getVideoTracks().length){const t=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});this.localStream.addTrack(t.getVideoTracks()[0])}this.localStream.getVideoTracks().forEach(t=>{t.enabled=!0}),this.peerConnections.forEach(t=>{this.localStream.getVideoTracks().forEach(r=>{t.addTrack(r,this.localStream)})}),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.enableVideo(),this.videoSubject.next({type:"video-enabled",participantId:this.currentParticipant.getId(),timestamp:new Date}))}catch(t){throw console.error("[WebRTCVideoService] Enable video failed:",t),t}}async disableVideo(){this.localStream&&this.localStream.getVideoTracks().forEach(t=>{t.enabled=!1}),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.disableVideo(),this.videoSubject.next({type:"video-disabled",participantId:this.currentParticipant.getId(),timestamp:new Date}))}async enableAudio(){try{if(!this.localStream)this.localStream=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0});else if(!this.localStream.getAudioTracks().length){const t=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0});this.localStream.addTrack(t.getAudioTracks()[0])}this.localStream.getAudioTracks().forEach(t=>{t.enabled=!0}),this.peerConnections.forEach(t=>{this.localStream.getAudioTracks().forEach(r=>{t.addTrack(r,this.localStream)})}),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.enableAudio(),this.audioSubject.next({type:"audio-enabled",participantId:this.currentParticipant.getId(),timestamp:new Date}))}catch(t){throw console.error("[WebRTCVideoService] Enable audio failed:",t),t}}async disableAudio(){this.localStream&&this.localStream.getAudioTracks().forEach(t=>{t.enabled=!1}),this.currentParticipant&&(this.currentParticipant=this.currentParticipant.disableAudio(),this.audioSubject.next({type:"audio-disabled",participantId:this.currentParticipant.getId(),timestamp:new Date}))}async setVideoQuality(t){if(!this.localStream)return;const r={low:{width:320,height:240,frameRate:15},medium:{width:640,height:480,frameRate:24},high:{width:1280,height:720,frameRate:30}},n=this.localStream.getVideoTracks()[0];n&&await n.applyConstraints(r[t])}async startScreenShare(){try{const t=await navigator.mediaDevices.getDisplayMedia({video:!0});this.peerConnections.forEach(r=>{const n=r.getSenders().find(i=>i.track&&i.track.kind==="video");n&&n.replaceTrack(t.getVideoTracks()[0])})}catch(t){throw console.error("[WebRTCVideoService] Screen share failed:",t),t}}async stopScreenShare(){if(!this.localStream)return;const t=this.localStream.getVideoTracks()[0];t&&this.peerConnections.forEach(r=>{const n=r.getSenders().find(i=>i.track&&i.track.kind==="video");n&&n.replaceTrack(t)})}async setActiveSpeaker(t){const r=this.participantsMap.get(t.getValue());if(r){const n=r.setActiveSpeaker(!0);this.participantsMap.set(t.getValue(),n)}}async muteParticipant(t){throw new Error("Peer-to-peer WebRTC does not support remote participant control")}async removeParticipant(t){const r=this.peerConnections.get(t.getValue());r&&(r.close(),this.peerConnections.delete(t.getValue()),this.participantsMap.delete(t.getValue()))}async spotlightParticipant(t){}async clearSpotlight(){}async enableSelectiveStreaming(t){throw new Error("Selective streaming not supported in basic WebRTC implementation")}async setParticipantVideoLimit(t){t>this.capabilities.maxParticipants&&this.scalingSubject.next({type:"participant-limit-reached",data:{limit:t,max:this.capabilities.maxParticipants},timestamp:new Date})}async enableAudioOnlyMode(){this.localStream&&this.localStream.getVideoTracks().forEach(t=>{t.enabled=!1})}async getConnectionStatistics(){const t={totalParticipants:this.participantsMap.size+1,activeVideoStreams:0,activeAudioStreams:0,averageConnectionQuality:0,bandwidthUsage:{upstream:0,downstream:0},latencyStats:{average:0,min:0,max:0},cpuUsage:0,memoryUsage:0},r=Array.from(this.peerConnections.values()).map(s=>s.getStats()),n=await Promise.all(r);let i=0,o=0;return n.forEach(s=>{s.forEach(a=>{a.type==="candidate-pair"&&a.state==="succeeded"&&a.currentRoundTripTime&&(i+=a.currentRoundTripTime*1e3,o++)})}),o>0&&(t.averageConnectionQuality=.7,t.latencyStats.average=i/o),t}async renderParticipantVideo(t,r){var n;if(((n=this.currentParticipant)==null?void 0:n.getId().getValue())===t.getValue()){this.localStream&&(r.srcObject=this.localStream);return}}async stopRenderingVideo(t){}async startRecording(){throw new Error("Recording not supported in basic WebRTC implementation")}async stopRecording(){throw new Error("Recording not supported in basic WebRTC implementation")}async connectToSignalingServer(t){return new Promise((r,n)=>{this.signalingSocket=new WebSocket(t),this.signalingSocket.onopen=()=>{this.setupSignalingHandlers(),r()},this.signalingSocket.onerror=i=>{n(i)}})}setupSignalingHandlers(){this.signalingSocket&&(this.signalingSocket.onmessage=async t=>{const r=JSON.parse(t.data);switch(r.type){case"participant-joined":await this.handleParticipantJoined(r);break;case"participant-left":this.handleParticipantLeft(r);break;case"offer":await this.handleOffer(r);break;case"answer":await this.handleAnswer(r);break;case"ice-candidate":await this.handleIceCandidate(r);break}})}async handleParticipantJoined(t){const r=Mr.create(Jt.create(t.participantId),t.participantName,t.participantRole);this.participantsMap.set(t.participantId,r),await this.createPeerConnection(t.participantId),this.participantSubject.next({type:"participant-joined",participant:r,timestamp:new Date})}handleParticipantLeft(t){const r=this.participantsMap.get(t.participantId);if(r){this.participantsMap.delete(t.participantId);const n=this.peerConnections.get(t.participantId);n&&(n.close(),this.peerConnections.delete(t.participantId)),this.participantSubject.next({type:"participant-left",participant:r,timestamp:new Date})}}async createPeerConnection(t){const r=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]});this.localStream&&this.localStream.getTracks().forEach(n=>{r.addTrack(n,this.localStream)}),r.onicecandidate=n=>{n.candidate&&this.sendSignalingMessage({type:"ice-candidate",participantId:t,candidate:n.candidate})},r.ontrack=n=>{console.log("Received remote stream from:",t)},this.peerConnections.set(t,r)}async handleOffer(t){const r=this.peerConnections.get(t.fromParticipantId);if(r){await r.setRemoteDescription(t.offer);const n=await r.createAnswer();await r.setLocalDescription(n),this.sendSignalingMessage({type:"answer",toParticipantId:t.fromParticipantId,answer:n})}}async handleAnswer(t){const r=this.peerConnections.get(t.fromParticipantId);r&&await r.setRemoteDescription(t.answer)}async handleIceCandidate(t){const r=this.peerConnections.get(t.fromParticipantId);r&&await r.addIceCandidate(t.candidate)}sendSignalingMessage(t){this.signalingSocket&&this.signalingSocket.readyState===WebSocket.OPEN&&this.signalingSocket.send(JSON.stringify(t))}generateUniqueId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}}const gh={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_AGORA_APP_ID:"ba0b6f951caa4d58be94af083ff55911",VITE_USER_NODE_ENV:"production",VITE_ZOOM_SDK_KEY:"Hfg9TGvcT5LutNnUGETcmoswIXNeCxHJsVm6",VITE_ZOOM_SDK_SECRET:"GYcKilkH05kkorqhqUFwrh1a4GEofW2s0SC4",VITE_ZOOM_TOKEN_ENDPOINT:"https://oorxo2zdkjrmmbzdfhaktk5ipa0phjlp.lambda-url.ap-south-1.on.aws"};var xy={};const Aa=class Aa{constructor(){Se(this,"serviceInstances",new Map)}static getInstance(){return Aa.instance||(Aa.instance=new Aa),Aa.instance}async createService(t,r){if(!this.isServiceAvailable(t))throw new fA(t);const n=this.getServiceInfo(t);if(n){const o=this.validateConfiguration(n,r);if(o.length>0)throw new Bj(t,o)}if(this.serviceInstances.has(t)){const o=this.serviceInstances.get(t);if(o.isInitialized)return o}let i;switch(t){case"zoom":i=new TW;break;case"agora":i=new kW;break;case"webrtc":i=new DW;break;default:throw new fA(t)}return await i.initialize(r),this.serviceInstances.set(t,i),i}getSupportedServices(){return[{type:"zoom",name:"Zoom Video SDK",description:"Enterprise-grade video conferencing with advanced features",maxParticipants:1e3,supportsScaling:!0,recommended:!0,requiresConfiguration:["appId"]},{type:"agora",name:"Agora RTC",description:"Real-time communication with global reach and low latency",maxParticipants:1e4,supportsScaling:!0,recommended:!1,requiresConfiguration:["appId"]},{type:"webrtc",name:"Native WebRTC",description:"Direct peer-to-peer communication for small groups",maxParticipants:50,supportsScaling:!1,recommended:!1,requiresConfiguration:["serverUrl"]}]}getServiceInfo(t){return this.getSupportedServices().find(r=>r.type===t)||null}isServiceAvailable(t){if(!this.getServiceInfo(t))return console.warn(`[VideoServiceFactory] Service info not found for type: ${t}`),!1;const n=!1;let i=!1;switch(t){case"zoom":const o=this.hasEnvironmentVariable("VITE_ZOOM_SDK_KEY"),s=this.hasEnvironmentVariable("VITE_ZOOM_SDK_SECRET");i=o,console.log("[VideoServiceFactory] Zoom availability check:",{hasKey:o,hasSecret:s,isDevelopment:n,available:i,keyValue:"present",secretValue:"present"});break;case"agora":i=this.hasEnvironmentVariable("VITE_AGORA_APP_ID"),console.log("[VideoServiceFactory] Agora availability check:",{hasAppId:this.hasEnvironmentVariable("VITE_AGORA_APP_ID"),available:i});break;case"webrtc":i=this.hasEnvironmentVariable("VITE_WEBRTC_SIGNALING_SERVER"),console.log("[VideoServiceFactory] WebRTC availability check:",{hasServer:this.hasEnvironmentVariable("VITE_WEBRTC_SIGNALING_SERVER"),isDevelopment:n,available:i});break;default:return console.warn(`[VideoServiceFactory] Unknown service type: ${t}`),!1}return i}async destroyAllServices(){const t=Array.from(this.serviceInstances.values()).map(r=>r.destroy());await Promise.all(t),this.serviceInstances.clear()}getActiveService(){const t=Array.from(this.serviceInstances.values()).filter(r=>r.isInitialized);return t.length>0?t[0]:null}validateConfiguration(t,r){const n=[];for(const i of t.requiresConfiguration)r[i]||n.push(i);return n}hasEnvironmentVariable(t){const r=typeof import.meta<"u"&&gh?gh[t]:void 0,n=xy==null?void 0:xy[t],i=globalThis[t],o=!!(r||n||i);return console.log(`[VideoServiceFactory] Environment check for ${t}:`,{viteValue:r?"present":"missing",processValue:n?"present":"missing",globalValue:i?"present":"missing",hasValue:o,viteEnvKeys:typeof import.meta<"u"&&gh?Object.keys(gh):"no-import-meta"}),o}};Se(Aa,"instance");let G0=Aa;class tg{constructor(t){if(this.value=t,!this.isValid(t))throw new Error(`Invalid session ID: ${t}`)}static create(t){return new tg(t)}static generate(){const t=Date.now().toString(36),r=Math.random().toString(36).substring(2,15);return new tg(`session_${t}_${r}`)}getValue(){return this.value}equals(t){return this.value===t.value}toString(){return this.value}isValid(t){return typeof t=="string"&&t.length>0&&t.length<=100&&/^[a-zA-Z0-9_-]+$/.test(t)}}const Uy=({participant:e,isCurrentParticipant:t,videoService:r,isCoach:n,viewMode:i,onSpotlight:o,onMute:s,onRemove:a})=>{const l=$e.useRef(null),[u,d]=$e.useState(!1),[c,p]=$e.useState(!1),[h,m]=$e.useState(null);$e.useEffect(()=>{if(!r||!l.current){p(!1);return}return(async()=>{var y,S,b;try{m(null),console.log("[ParticipantTile] Attempting to render video for:",{participantId:e.getId().getValue(),participantName:e.getName(),isVideoEnabled:e.isVideoEnabled(),isCurrentParticipant:t,hasVideoRef:!!l.current,videoElement:{tagName:(y=l.current)==null?void 0:y.tagName,width:(S=l.current)==null?void 0:S.clientWidth,height:(b=l.current)==null?void 0:b.clientHeight}}),t&&e.isVideoEnabled()&&console.log("[ParticipantTile] Rendering self-video for current participant"),e.isVideoEnabled()||t?(l.current&&(l.current.autoplay=!0,l.current.playsInline=!0,t&&(l.current.muted=!0)),await r.renderParticipantVideo(e.getId(),l.current),p(!0),console.log("[ParticipantTile]  Successfully rendered video for:",e.getName())):(console.log("[ParticipantTile] Skipping render - video disabled for:",e.getName()),p(!1))}catch(R){const w=R instanceof Error?R.message:"Unknown error";console.warn("[ParticipantTile] Failed to render video for participant:",{participantName:e.getName(),participantId:e.getId().getValue(),error:w,isVideoEnabled:e.isVideoEnabled(),isCurrentParticipant:t}),p(!1),m(w)}})(),()=>{r&&(console.log("[ParticipantTile] Cleaning up video rendering for:",e.getName()),r.stopRenderingVideo(e.getId()).catch(console.warn),p(!1),m(null))}},[e.getId().getValue(),e.isVideoEnabled(),r,t]);const f=e.getConnectionQuality(),v={excellent:"#00ff00",good:"#ffff00",fair:"#ffa500",poor:"#ff0000",unknown:"#666"}[f.getLevel()];return H.jsxs("div",{className:`participant-tile ${t?"current-participant":""} ${e.isActiveSpeaker()?"active-speaker":""}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[H.jsxs("div",{className:"video-container",children:[H.jsx("video",{ref:l,autoPlay:!0,playsInline:!0,muted:t,className:"participant-video",style:{display:e.isVideoEnabled()&&c?"block":"none"}}),(!e.isVideoEnabled()||!c)&&H.jsxs("div",{className:"video-placeholder",children:[H.jsx("div",{className:"participant-avatar",children:e.getName().charAt(0).toUpperCase()}),H.jsx("div",{className:"video-status",children:h?H.jsx("span",{title:h,children:"Error"}):e.isVideoEnabled()?"Connecting...":"Camera Off"})]}),H.jsxs("div",{className:"status-indicators",children:[H.jsx("div",{className:"connection-indicator",style:{backgroundColor:v},title:`Connection: ${f.getLevel()}`}),!e.isAudioEnabled()&&H.jsx("div",{className:"audio-indicator muted",title:"Muted",children:""}),e.isActiveSpeaker()&&H.jsx("div",{className:"audio-indicator speaking",title:"Speaking",children:""}),e.hasRaisedHand()&&H.jsx("div",{className:"hand-indicator",title:"Hand Raised",children:""}),e.isCoach()&&H.jsx("div",{className:"coach-badge",title:"Coach",children:""})]}),n&&!t&&u&&H.jsxs("div",{className:"control-overlay",children:[H.jsx("button",{className:"control-button spotlight",onClick:o,title:"Spotlight Participant",children:""}),H.jsx("button",{className:"control-button mute",onClick:s,title:"Mute Participant",children:""}),H.jsx("button",{className:"control-button remove",onClick:a,title:"Remove Participant",children:""})]})]}),H.jsxs("div",{className:"participant-name",children:[e.getName(),t&&" (You)"]}),H.jsx("style",{jsx:!0,children:`
        .participant-tile {
          background: #2d2d2d;
          border-radius: 8px;
          overflow: hidden;
          margin: 4px;
          position: relative;
          transition: transform 0.2s ease;
        }

        .participant-tile:hover {
          transform: scale(1.02);
        }

        .current-participant {
          border: 2px solid #007bff;
        }

        .active-speaker {
          border: 2px solid #00ff00;
          box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }

        .video-container {
          position: relative;
          width: 100%;
          height: 120px;
          background: #1a1a1a;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .participant-video {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .video-placeholder {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          background: linear-gradient(135deg, #2d2d2d, #1a1a1a);
          gap: 8px;
        }

        .participant-avatar {
          width: 48px;
          height: 48px;
          border-radius: 50%;
          background: #007bff;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-size: 18px;
          font-weight: bold;
        }

        .video-status {
          color: #ccc;
          font-size: 12px;
          text-align: center;
        }

        .status-indicators {
          position: absolute;
          top: 8px;
          right: 8px;
          display: flex;
          flex-direction: column;
          gap: 4px;
        }

        .connection-indicator {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .audio-indicator,
        .hand-indicator,
        .coach-badge {
          background: rgba(0, 0, 0, 0.7);
          padding: 2px 4px;
          border-radius: 4px;
          font-size: 12px;
        }

        .audio-indicator.speaking {
          animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }

        .control-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.7);
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
        }

        .control-button {
          background: rgba(255, 255, 255, 0.2);
          border: none;
          color: white;
          padding: 8px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
          transition: background 0.2s ease;
        }

        .control-button:hover {
          background: rgba(255, 255, 255, 0.3);
        }

        .control-button.spotlight:hover {
          background: rgba(255, 193, 7, 0.3);
        }

        .control-button.mute:hover {
          background: rgba(220, 53, 69, 0.3);
        }

        .control-button.remove:hover {
          background: rgba(220, 53, 69, 0.3);
        }

        .participant-name {
          padding: 8px 12px;
          color: white;
          font-size: 12px;
          font-weight: 500;
          text-align: center;
          background: #2d2d2d;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .current-participant .participant-name {
          background: #007bff;
        }
      `})]})},MW=({participants:e,currentParticipant:t,spotlightedParticipant:r,viewMode:n,videoService:i,isCoach:o,onSpotlightParticipant:s,onMuteParticipant:a,onRemoveParticipant:l})=>{const u=oO.useMemo(()=>{const d=[...e];return t&&!d.find(c=>c.getId().equals(t.getId()))&&d.unshift(t),d},[e,t]);return n==="spotlight"&&r?H.jsxs("div",{className:"participant-grid-container spotlight-mode",children:[H.jsx("div",{className:"spotlight-participant",children:H.jsx(Uy,{participant:r,isCurrentParticipant:(t==null?void 0:t.getId().equals(r.getId()))||!1,videoService:i,isCoach:o,viewMode:"spotlight",onSpotlight:()=>s(r.getId()),onMute:()=>a(r.getId()),onRemove:()=>l(r.getId())})}),H.jsx("div",{className:"other-participants",children:u.filter(d=>!d.getId().equals(r.getId())).slice(0,6).map(d=>H.jsx("div",{className:"thumbnail-participant",children:H.jsx(Uy,{participant:d,isCurrentParticipant:(t==null?void 0:t.getId().equals(d.getId()))||!1,videoService:i,isCoach:o,viewMode:"gallery",onSpotlight:()=>s(d.getId()),onMute:()=>a(d.getId()),onRemove:()=>l(d.getId())})},d.getId().getValue()))}),H.jsx("style",{jsx:!0,children:`
          .participant-grid-container.spotlight-mode {
            display: flex;
            height: 100%;
            background: #1a1a1a;
          }

          .spotlight-participant {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px;
          }

          .other-participants {
            width: 200px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 20px;
            background: #2d2d2d;
            overflow-y: auto;
          }

          .thumbnail-participant {
            aspect-ratio: 16/9;
            border-radius: 8px;
            overflow: hidden;
          }
        `})]}):H.jsxs("div",{className:"participant-grid-container gallery-mode",children:[H.jsxs("div",{className:"participants-info",children:[H.jsxs("span",{children:["Participants: ",u.length]}),H.jsxs("span",{children:["View: ",n]})]}),H.jsx("div",{className:"participants-grid",children:u.map(d=>H.jsx("div",{className:"participant-slot",children:H.jsx(Uy,{participant:d,isCurrentParticipant:(t==null?void 0:t.getId().equals(d.getId()))||!1,videoService:i,isCoach:o,viewMode:"gallery",onSpotlight:()=>s(d.getId()),onMute:()=>a(d.getId()),onRemove:()=>l(d.getId())})},d.getId().getValue()))}),H.jsx("style",{jsx:!0,children:`
        .participant-grid-container.gallery-mode {
          height: 100%;
          background: #1a1a1a;
          display: flex;
          flex-direction: column;
          padding: 20px;
        }

        .participants-info {
          display: flex;
          justify-content: space-between;
          color: #ccc;
          font-size: 14px;
          margin-bottom: 16px;
          padding: 8px 0;
          border-bottom: 1px solid #444;
        }

        .participants-grid {
          flex: 1;
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          grid-auto-rows: minmax(200px, auto);
          gap: 16px;
          overflow-y: auto;
        }

        .participant-slot {
          background: #2d2d2d;
          border-radius: 8px;
          overflow: hidden;
          border: 1px solid #444;
          transition: all 0.2s ease;
        }

        .participant-slot:hover {
          border-color: #007bff;
          transform: translateY(-2px);
        }

        @media (max-width: 768px) {
          .participants-grid {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            grid-auto-rows: minmax(180px, auto);
            gap: 12px;
          }
        }

        @media (max-width: 480px) {
          .participants-grid {
            grid-template-columns: 1fr;
            grid-auto-rows: minmax(200px, auto);
          }
        }
      `})]})},NW=({isVideoEnabled:e,isAudioEnabled:t,onToggleVideo:r,onToggleAudio:n,onLeave:i,viewMode:o,onViewModeChange:s,canChangeViewMode:a})=>H.jsxs("div",{className:"video-controls",children:[H.jsxs("div",{className:"media-controls",children:[H.jsx("button",{className:`control-btn ${e?"enabled":"disabled"}`,onClick:r,title:e?"Turn off camera":"Turn on camera",children:e?"":""}),H.jsx("button",{className:`control-btn ${t?"enabled":"disabled"}`,onClick:n,title:t?"Mute microphone":"Unmute microphone",children:t?"":""}),H.jsx("button",{className:"control-btn leave-btn",onClick:i,title:"Leave session",children:""})]}),a&&H.jsxs("div",{className:"view-controls",children:[H.jsx("button",{className:`view-btn ${o==="gallery"?"active":""}`,onClick:()=>s("gallery"),title:"Gallery view",children:" Gallery"}),H.jsx("button",{className:`view-btn ${o==="speaker"?"active":""}`,onClick:()=>s("speaker"),title:"Speaker view",children:" Speaker"}),H.jsx("button",{className:`view-btn ${o==="spotlight"?"active":""}`,onClick:()=>s("spotlight"),title:"Spotlight view",children:" Spotlight"})]}),H.jsx("style",{jsx:!0,children:`
        .video-controls {
          display: flex;
          justify-content: space-between;
          align-items: center;
          gap: 20px;
        }

        .media-controls {
          display: flex;
          gap: 12px;
        }

        .control-btn {
          background: #444;
          border: none;
          color: white;
          padding: 12px 16px;
          border-radius: 8px;
          cursor: pointer;
          font-size: 16px;
          transition: all 0.2s ease;
          min-width: 60px;
        }

        .control-btn:hover {
          background: #555;
          transform: translateY(-1px);
        }

        .control-btn.enabled {
          background: #007bff;
        }

        .control-btn.enabled:hover {
          background: #0056b3;
        }

        .control-btn.disabled {
          background: #dc3545;
        }

        .control-btn.disabled:hover {
          background: #c82333;
        }

        .leave-btn {
          background: #dc3545 !important;
        }

        .leave-btn:hover {
          background: #c82333 !important;
        }

        .view-controls {
          display: flex;
          gap: 8px;
        }

        .view-btn {
          background: #2d2d2d;
          border: 1px solid #444;
          color: white;
          padding: 8px 12px;
          border-radius: 6px;
          cursor: pointer;
          font-size: 12px;
          transition: all 0.2s ease;
        }

        .view-btn:hover {
          background: #444;
          border-color: #007bff;
        }

        .view-btn.active {
          background: #007bff;
          border-color: #007bff;
        }

        @media (max-width: 768px) {
          .video-controls {
            flex-direction: column;
            gap: 12px;
          }
        }
      `})]}),LW=({session:e,participants:t,videoService:r,onSpotlightParticipant:n,onClearSpotlight:i,onMuteParticipant:o,onRemoveParticipant:s})=>{const a=e.getSpotlightedParticipant();return H.jsxs("div",{className:"coach-controls",children:[H.jsxs("div",{className:"coach-section",children:[H.jsx("h4",{children:"Coach Controls"}),H.jsxs("div",{className:"participants-list",children:[H.jsxs("div",{className:"section-header",children:["Participants (",t.length,")"]}),t.slice(0,5).map(l=>H.jsxs("div",{className:"participant-item",children:[H.jsxs("span",{className:"participant-name",children:[l.getName(),l.getRole()==="coach"&&" "]}),H.jsxs("div",{className:"participant-controls",children:[H.jsx("button",{className:"mini-btn",onClick:()=>n(l.getId()),title:"Spotlight",disabled:a==null?void 0:a.getId().equals(l.getId()),children:""}),H.jsx("button",{className:"mini-btn",onClick:()=>o(l.getId()),title:"Mute",children:""}),H.jsx("button",{className:"mini-btn danger",onClick:()=>s(l.getId()),title:"Remove",children:""})]})]},l.getId().getValue())),t.length>5&&H.jsxs("div",{className:"more-participants",children:["+",t.length-5," more participants"]})]}),a&&H.jsxs("div",{className:"spotlight-section",children:[H.jsxs("div",{className:"spotlight-info",children:["Spotlighted: ",a.getName()]}),H.jsx("button",{className:"control-btn",onClick:i,children:"Clear Spotlight"})]})]}),H.jsx("style",{jsx:!0,children:`
        .coach-controls {
          background: #1a1a1a;
          border: 1px solid #444;
          border-radius: 8px;
          padding: 16px;
          max-width: 300px;
        }

        .coach-section h4 {
          margin: 0 0 12px 0;
          color: #007bff;
          font-size: 14px;
          font-weight: 600;
        }

        .section-header {
          color: #ccc;
          font-size: 12px;
          font-weight: 500;
          margin-bottom: 8px;
          padding-bottom: 4px;
          border-bottom: 1px solid #444;
        }

        .participants-list {
          margin-bottom: 12px;
        }

        .participant-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 6px 0;
          border-bottom: 1px solid #333;
        }

        .participant-item:last-child {
          border-bottom: none;
        }

        .participant-name {
          color: white;
          font-size: 12px;
          flex: 1;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .participant-controls {
          display: flex;
          gap: 4px;
        }

        .mini-btn {
          background: #444;
          border: none;
          color: white;
          width: 24px;
          height: 24px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 10px;
          transition: all 0.2s ease;
        }

        .mini-btn:hover:not(:disabled) {
          background: #555;
        }

        .mini-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .mini-btn.danger:hover {
          background: #dc3545;
        }

        .more-participants {
          color: #888;
          font-size: 11px;
          text-align: center;
          padding: 4px 0;
          font-style: italic;
        }

        .spotlight-section {
          background: #2d2d2d;
          padding: 8px;
          border-radius: 6px;
          border: 1px solid #ffd700;
        }

        .spotlight-info {
          color: #ffd700;
          font-size: 12px;
          margin-bottom: 6px;
          font-weight: 500;
        }

        .control-btn {
          background: #007bff;
          border: none;
          color: white;
          padding: 6px 12px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 11px;
          width: 100%;
        }

        .control-btn:hover {
          background: #0056b3;
        }
      `})]})},VW=({session:e,connectionStats:t,participantCount:r,videoServiceType:n})=>{const i=s=>s<1024?`${s} B/s`:s<1048576?`${(s/1024).toFixed(1)} KB/s`:`${(s/1048576).toFixed(1)} MB/s`,o=s=>{switch(s){case"zoom":return" Zoom";case"agora":return" Agora";case"webrtc":return" WebRTC";default:return" Video"}};return H.jsxs("div",{className:"session-info",children:[H.jsxs("div",{className:"session-basic",children:[H.jsxs("div",{className:"session-title",children:["Session: ",e.getName()]}),H.jsxs("div",{className:"session-id",children:["ID: ",e.getId().getValue()]})]}),H.jsxs("div",{className:"session-stats",children:[H.jsxs("div",{className:"stat-item",children:[H.jsx("span",{className:"stat-label",children:"Participants:"}),H.jsx("span",{className:"stat-value",children:r})]}),H.jsxs("div",{className:"stat-item",children:[H.jsx("span",{className:"stat-label",children:"Service:"}),H.jsx("span",{className:"stat-value",children:o(n)})]}),t&&H.jsxs(H.Fragment,{children:[H.jsxs("div",{className:"stat-item",children:[H.jsx("span",{className:"stat-label",children:"Quality:"}),H.jsxs("span",{className:`stat-value quality-${Math.round(t.averageConnectionQuality*100)}`,children:[Math.round(t.averageConnectionQuality*100),"%"]})]}),H.jsxs("div",{className:"stat-item",children:[H.jsx("span",{className:"stat-label",children:"Latency:"}),H.jsxs("span",{className:"stat-value",children:[Math.round(t.latencyStats.average),"ms"]})]}),H.jsxs("div",{className:"stat-item",children:[H.jsx("span",{className:"stat-label",children:"Bandwidth:"}),H.jsxs("span",{className:"stat-value",children:["",i(t.bandwidthUsage.upstream),"",i(t.bandwidthUsage.downstream)]})]})]})]}),H.jsx("style",{jsx:!0,children:`
        .session-info {
          display: flex;
          justify-content: space-between;
          align-items: center;
          width: 100%;
        }

        .session-basic {
          display: flex;
          flex-direction: column;
          gap: 4px;
        }

        .session-title {
          color: white;
          font-size: 16px;
          font-weight: 600;
        }

        .session-id {
          color: #888;
          font-size: 12px;
          font-family: monospace;
        }

        .session-stats {
          display: flex;
          gap: 20px;
          align-items: center;
        }

        .stat-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 2px;
        }

        .stat-label {
          color: #888;
          font-size: 10px;
          text-transform: uppercase;
          font-weight: 500;
        }

        .stat-value {
          color: white;
          font-size: 12px;
          font-weight: 600;
        }

        .quality-100, .quality-90 { color: #00ff9f; }
        .quality-80, .quality-70 { color: #ffeb3b; }
        .quality-60, .quality-50 { color: #ff9500; }
        .quality-40, .quality-30, .quality-20, .quality-10, .quality-0 { color: #ff6b6b; }

        @media (max-width: 768px) {
          .session-info {
            flex-direction: column;
            gap: 12px;
            align-items: flex-start;
          }

          .session-stats {
            gap: 12px;
            flex-wrap: wrap;
          }

          .stat-item {
            flex-direction: row;
            gap: 6px;
          }
        }
      `})]})};let xW=class is{constructor(t){this.data=t}static create(t,r,n=1e3){return new is({id:t,name:r,status:"waiting",participants:new Map,coachId:null,spotlightedParticipantId:null,startedAt:null,endedAt:null,maxParticipants:n,allowLateJoin:!0})}getId(){return this.data.id}getName(){return this.data.name}getStatus(){return this.data.status}getParticipantCount(){return this.data.participants.size}getMaxParticipants(){return this.data.maxParticipants}getCoach(){return this.data.coachId&&this.data.participants.get(this.data.coachId.getValue())||null}getSpotlightedParticipant(){return this.data.spotlightedParticipantId&&this.data.participants.get(this.data.spotlightedParticipantId.getValue())||null}getAllParticipants(){return Array.from(this.data.participants.values())}getStudents(){return this.getAllParticipants().filter(t=>t.isStudent())}getActiveSpeakers(){return this.getAllParticipants().filter(t=>t.isActiveSpeaker()).slice(0,6)}getParticipantsWithRaisedHands(){return this.getAllParticipants().filter(t=>t.hasRaisedHand())}getSessionDuration(){return this.data.startedAt?(this.data.endedAt||new Date).getTime()-this.data.startedAt.getTime():0}addParticipant(t){if(!this.canAddParticipant(t))throw new Error("Cannot add participant to session");const r=new Map(this.data.participants);r.set(t.getId().getValue(),t);let n=this.data.coachId;t.isCoach()&&!n&&(n=t.getId());let i=this.data.status,o=this.data.startedAt;return t.isCoach()&&i==="waiting"&&(i="active",o=new Date),new is({...this.data,participants:r,coachId:n,status:i,startedAt:o})}removeParticipant(t){const r=new Map(this.data.participants),n=r.get(t.getValue());if(!n)return this;r.delete(t.getValue());let i=this.data.coachId,o=this.data.spotlightedParticipantId,s=this.data.status,a=this.data.endedAt;return n.isCoach()&&(Array.from(r.values()).filter(u=>u.isStudent()).length===0?(s="ended",a=new Date,i=null):(s="ended",a=new Date,i=null)),o!=null&&o.equals(t)&&(o=null),new is({...this.data,participants:r,coachId:i,spotlightedParticipantId:o,status:s,endedAt:a})}updateParticipant(t){const r=t.getId().getValue();if(!this.data.participants.has(r))throw new Error("Participant not found in session");const n=new Map(this.data.participants);return n.set(r,t),new is({...this.data,participants:n})}spotlightParticipant(t){if(!this.data.participants.has(t.getValue()))throw new Error("Cannot spotlight participant not in session");return new is({...this.data,spotlightedParticipantId:t})}clearSpotlight(){return new is({...this.data,spotlightedParticipantId:null})}endSession(){return this.data.status==="ended"?this:new is({...this.data,status:"ended",endedAt:new Date})}canAddParticipant(t){return!(this.data.participants.size>=this.data.maxParticipants||this.data.status==="active"&&!this.data.allowLateJoin||this.data.status==="ended"||t.isCoach()&&this.data.coachId||this.data.participants.has(t.getId().getValue()))}canStart(){return this.data.status==="waiting"&&this.getCoach()!==null}isActive(){return this.data.status==="active"}isWaiting(){return this.data.status==="waiting"}hasEnded(){return this.data.status==="ended"}getParticipantsPage(t,r=25){const n=this.getAllParticipants(),i=t*r,o=i+r;return n.slice(i,o)}getHighPriorityParticipants(){const t=this.getCoach(),r=this.getActiveSpeakers(),n=this.getParticipantsWithRaisedHands(),i=this.getSpotlightedParticipant(),o=new Set;return t&&o.add(t),i&&o.add(i),r.forEach(s=>o.add(s)),n.forEach(s=>o.add(s)),Array.from(o)}toSnapshot(){var t,r,n,i;return{id:this.data.id.getValue(),name:this.data.name,status:this.data.status,participantCount:this.getParticipantCount(),maxParticipants:this.data.maxParticipants,coachId:((t=this.data.coachId)==null?void 0:t.getValue())||null,spotlightedParticipantId:((r=this.data.spotlightedParticipantId)==null?void 0:r.getValue())||null,startedAt:((n=this.data.startedAt)==null?void 0:n.toISOString())||null,endedAt:((i=this.data.endedAt)==null?void 0:i.toISOString())||null,sessionDuration:this.getSessionDuration(),participants:this.getAllParticipants().map(o=>o.toSnapshot())}}};const UW=e=>{const[t,r]=$e.useState(null),[n,i]=$e.useState(null),[o,s]=$e.useState([]),[a,l]=$e.useState(!1),[u,d]=$e.useState(null),[c,p]=$e.useState(!1),[h,m]=$e.useState(null),f=$e.useRef([]),v=$e.useRef(null);$e.useEffect(()=>{if(!e)return;f.current.forEach(_=>_()),f.current=[];const P=e.participantEvents$.subscribe(_=>{switch(_.type){case"participant-joined":s(C=>C.find(V=>V.getId().equals(_.participant.getId()))?C:[...C,_.participant]),r(C=>{if(C)try{return C.addParticipant(_.participant)}catch{return C}return C});break;case"participant-left":s(C=>C.filter(V=>!V.getId().equals(_.participant.getId()))),r(C=>C&&C.removeParticipant(_.participant.getId()));break;case"participant-updated":s(C=>C.map(V=>V.getId().equals(_.participant.getId())?_.participant:V)),r(C=>C&&C.updateParticipant(_.participant)),i(C=>C!=null&&C.getId().equals(_.participant.getId())?_.participant:C);break}}),I=e.videoEvents$.subscribe(_=>{s(C=>C.map(V=>V.getId().equals(_.participantId)?_.type==="video-enabled"?V.enableVideo():V.disableVideo():V)),i(C=>C!=null&&C.getId().equals(_.participantId)?_.type==="video-enabled"?C.enableVideo():C.disableVideo():C)}),E=e.audioEvents$.subscribe(_=>{s(C=>C.map(V=>{if(V.getId().equals(_.participantId))switch(_.type){case"audio-enabled":return V.enableAudio();case"audio-disabled":return V.disableAudio();case"active-speaker-changed":return V.setActiveSpeaker(!0);default:return V}else if(_.type==="active-speaker-changed")return V.setActiveSpeaker(!1);return V})),i(C=>{if(C!=null&&C.getId().equals(_.participantId))switch(_.type){case"audio-enabled":return C.enableAudio();case"audio-disabled":return C.disableAudio();case"active-speaker-changed":return C.setActiveSpeaker(!0);default:return C}else if(_.type==="active-speaker-changed")return(C==null?void 0:C.setActiveSpeaker(!1))||C;return C})}),A=e.connectionEvents$.subscribe(_=>{if(_.type==="connection-state-changed"&&(l(_.state==="connected"),_.state==="failed"||_.state==="disconnected"?m("Connection lost. Attempting to reconnect..."):m(null)),_.participantId&&_.quality!==void 0){const C=En.fromNumber(_.quality);s(V=>V.map(M=>M.getId().equals(_.participantId)?M.updateConnectionQuality(C):M)),i(V=>V!=null&&V.getId().equals(_.participantId)?V.updateConnectionQuality(C):V)}});return f.current=[()=>P.unsubscribe(),()=>I.unsubscribe(),()=>E.unsubscribe(),()=>A.unsubscribe()],v.current&&clearInterval(v.current),v.current=setInterval(async()=>{try{const _=await e.getConnectionStatistics();d(_)}catch(_){console.warn("Failed to get connection statistics:",_)}},5e3),()=>{f.current.forEach(_=>_()),v.current&&clearInterval(v.current)}},[e]);const g=$e.useCallback(async P=>{if(!e)throw new Error("Video service not initialized");p(!0),m(null);try{const I=await e.joinSession(P);if(!I.success){const _=I.error||"Failed to join session";throw console.error("[useVideoSession] Join failed:",{result:I,error:_,hasParticipant:!!I.participant,sessionInfo:I.sessionInfo}),new Error(_)}if(!I.participant)throw console.error("[useVideoSession]  Success result missing participant:",I),new Error("Join succeeded but participant data is missing");console.log("[useVideoSession]  Join result validation:",{success:I.success,hasParticipant:!!I.participant,participantId:I.participant.getId().getValue(),participantName:I.participant.getName(),participantRole:I.participant.getRole(),sessionInfo:I.sessionInfo,requestSessionId:P.sessionId.getValue(),requestSessionIdType:typeof P.sessionId.getValue()}),console.log("[useVideoSession] Creating session entity:",{sessionId:P.sessionId.getValue(),sessionIdValid:!!P.sessionId.getValue(),maxParticipants:e.capabilities.maxParticipants});const E=xW.create(P.sessionId,`Session ${P.sessionId.getValue()}`,e.capabilities.maxParticipants);console.log("[useVideoSession] Adding participant to session:",{sessionCreated:!!E,sessionId:E.getId().getValue(),sessionName:E.getName(),participant:{id:I.participant.getId().getValue(),name:I.participant.getName(),role:I.participant.getRole()}});const A=E.addParticipant(I.participant);console.log("[useVideoSession] Final session state:",{sessionId:A.getId().getValue(),sessionName:A.getName(),participantCount:A.getParticipantCount(),hasCoach:!!A.getCoach(),status:A.getStatus()}),r(A),i(I.participant),l(!0),console.log("[useVideoSession]  State updated successfully - join complete")}catch(I){const E=I instanceof Error?I.message:"Unknown error";throw console.error("[useVideoSession]  Join session error - detailed context:",{error:I,errorMessage:E,errorStack:I instanceof Error?I.stack:void 0,errorName:I instanceof Error?I.name:void 0,originalError:I,requestData:{sessionId:P.sessionId.getValue(),participantName:P.participantName,participantRole:P.participantRole,videoEnabled:P.videoEnabled,audioEnabled:P.audioEnabled},videoServiceInfo:{isInitialized:e.isInitialized,serviceName:e.serviceName,capabilities:e.capabilities},currentState:{hasSession:!!t,hasCurrentParticipant:!!n,isConnected:a,isLoading:c,error:I},timestamp:new Date().toISOString()}),m(E),I}finally{p(!1)}},[e]),y=$e.useCallback(async()=>{if(e){p(!0);try{await e.leaveSession(),r(null),i(null),s([]),l(!1),d(null),m(null)}catch(P){console.error("Error leaving session:",P),r(null),i(null),s([]),l(!1)}finally{p(!1)}}},[e]),S=$e.useCallback(async()=>{if(!e)throw new Error("Video service not initialized");await e.enableVideo()},[e]),b=$e.useCallback(async()=>{if(!e)throw new Error("Video service not initialized");await e.disableVideo()},[e]),R=$e.useCallback(async()=>{if(!e)throw new Error("Video service not initialized");await e.enableAudio()},[e]),w=$e.useCallback(async()=>{if(!e)throw new Error("Video service not initialized");await e.disableAudio()},[e]),O=$e.useCallback(async P=>{if(!e)throw new Error("Video service not initialized");await e.spotlightParticipant(P),r(I=>I&&I.spotlightParticipant(P))},[e]),D=$e.useCallback(async()=>{if(!e)throw new Error("Video service not initialized");await e.clearSpotlight(),r(P=>P&&P.clearSpotlight())},[e]),U=$e.useCallback(async P=>{if(!e)throw new Error("Video service not initialized");await e.muteParticipant(P)},[e]),x=$e.useCallback(async P=>{if(!e)throw new Error("Video service not initialized");await e.removeParticipant(P)},[e]);return{session:t,currentParticipant:n,participants:o,isConnected:a,connectionStats:u,isLoading:c,error:h,joinSession:g,leaveSession:y,enableVideo:S,disableVideo:b,enableAudio:R,disableAudio:w,spotlightParticipant:O,clearSpotlight:D,muteParticipant:U,removeParticipant:x}},Dl={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_AGORA_APP_ID:"ba0b6f951caa4d58be94af083ff55911",VITE_USER_NODE_ENV:"production",VITE_ZOOM_SDK_KEY:"Hfg9TGvcT5LutNnUGETcmoswIXNeCxHJsVm6",VITE_ZOOM_SDK_SECRET:"GYcKilkH05kkorqhqUFwrh1a4GEofW2s0SC4",VITE_ZOOM_TOKEN_ENDPOINT:"https://oorxo2zdkjrmmbzdfhaktk5ipa0phjlp.lambda-url.ap-south-1.on.aws"},jW=({sessionId:e,participantName:t,participantRole:r,videoServiceType:n="zoom",onLeave:i,onError:o})=>{const[s,a]=$e.useState(null),[l,u]=$e.useState(!0),[d,c]=$e.useState(null),{session:p,currentParticipant:h,participants:m,isConnected:f,connectionStats:v,joinSession:g,leaveSession:y,enableVideo:S,disableVideo:b,enableAudio:R,disableAudio:w,spotlightParticipant:O,clearSpotlight:D,muteParticipant:U,removeParticipant:x}=UW(s),[P,I]=$e.useState(!1),[E,A]=$e.useState(!1),[_,C]=$e.useState("gallery"),V=$e.useRef(null);$e.useEffect(()=>((async()=>{try{u(!0),c(null);const te=G0.getInstance();let ve;n==="zoom"?ve={appId:"Hfg9TGvcT5LutNnUGETcmoswIXNeCxHJsVm6",appSecret:"GYcKilkH05kkorqhqUFwrh1a4GEofW2s0SC4",maxParticipants:1e3,enableLogging:!1,region:"US"}:n==="agora"?ve={appId:"ba0b6f951caa4d58be94af083ff55911",appSecret:(Dl==null?void 0:Dl.VITE_AGORA_APP_CERTIFICATE)||"",maxParticipants:1e3,enableLogging:!1,region:"US"}:ve={appId:"",serverUrl:(Dl==null?void 0:Dl.VITE_WEBRTC_SIGNALING_SERVER)||"ws://localhost:8080",maxParticipants:50,enableLogging:!1},console.log("[VideoSession] Video service config:",{type:n,hasAppId:!!ve.appId,hasAppSecret:!!ve.appSecret,env:{zoom_key:!0,zoom_secret:!0,agora_id:!0}});const Ae=await te.createService(n,ve);a(Ae)}catch(te){const ve=te instanceof Error?te.message:"Failed to initialize video service";c(ve),o==null||o(ve)}finally{u(!1)}})(),()=>{s&&s.destroy().catch(console.error)}),[n,o]),$e.useEffect(()=>{s&&!f&&(async()=>{var te,ve,Ae;try{if(!e){console.error("[VideoSession] sessionId is missing");return}const me=e.trim();if(me.length===0){console.error("[VideoSession] sessionId is empty");return}console.log("[VideoSession] Parameter validation:",{sessionIdType:typeof e,sessionIdValue:e,sessionIdLength:e==null?void 0:e.length,trimmedValue:me,trimmedLength:me.length,hasSpecialChars:/[^a-zA-Z0-9_-]/.test(e||""),participantNameType:typeof t,participantNameValue:t,participantRoleType:typeof r,participantRoleValue:r,videoServiceType:n,hasVideoService:!!s,hasJoinSession:!!g}),console.log("[VideoSession] Attempting to join session:",{sessionId:e,participantName:t,participantRole:r,videoServiceType:n,hasVideoService:!!s});let Me;try{Me=tg.create(me),console.log("[VideoSession] SessionId created successfully:",{value:Me.getValue(),type:typeof Me.getValue()})}catch(j){throw console.error("[VideoSession]  Failed to create SessionId:",{trimmedSessionId:me,sessionIdError:j}),new Error(`Invalid session ID format: ${me}`)}const F={sessionId:Me,participantName:t,participantRole:r,videoEnabled:!1,audioEnabled:!1};console.log("[VideoSession] Prepared join request:",{sessionId:F.sessionId.getValue(),participantName:F.participantName,participantRole:F.participantRole,videoEnabled:F.videoEnabled,audioEnabled:F.audioEnabled}),await g(F),console.log("[VideoSession]  Successfully joined session via useVideoSession hook",{sessionJoined:!0,hasSession:!!p,hasCurrentParticipant:!!h,isConnectedState:f,sessionData:p?{id:p.getId().getValue(),name:p.getName(),status:p.getStatus(),participantCount:p.getParticipantCount()}:null})}catch(me){console.error("[VideoSession]  Detailed join error:",{error:me,errorMessage:me==null?void 0:me.message,errorStack:me==null?void 0:me.stack,errorName:me==null?void 0:me.name,errorToString:me==null?void 0:me.toString(),errorType:typeof me,isErrorObject:me instanceof Error,originalError:me,sessionId:e,sessionIdType:typeof e,sessionIdValue:e,participantName:t,participantNameType:typeof t,participantRole:r,participantRoleType:typeof r,videoServiceType:n,hasVideoService:!!s,hasJoinSession:!!g,videoServiceState:s==null?void 0:s.isInitialized,isConnectedState:f,currentTimestamp:new Date().toISOString(),isSessionNameError:(te=me==null?void 0:me.message)==null?void 0:te.includes("sessionName"),containsUndefined:(ve=me==null?void 0:me.message)==null?void 0:ve.includes("undefined"),sessionNameContext:{errorContainsSessionName:JSON.stringify(me).includes("sessionName"),errorStringified:JSON.stringify(me,null,2)}});let Me=me instanceof Error?me.message:"Failed to join session";Me.includes("sessionName")&&Me.includes("undefined")&&(console.error("[VideoSession]  DETECTED: sessionName undefined error - this is the bug we're fixing:",{originalError:me,errorMessage:Me,context:"This error occurs when SDK expects sessionName but gets undefined",diagnosis:"Parameter transformation or validation failure in video service layer",sessionId:e,participantName:t,participantRole:r}),Me=`Session join failed: Invalid session configuration. Session ID: ${e.trim()}. Please try again.`),Me.includes("sessionName")&&console.error("[VideoSession]  SessionName error detected - providing enhanced context:",{errorType:"sessionName_related",originalErrorMessage:me instanceof Error?me.message:"Unknown",sessionId:e,sessionIdLength:(Ae=e.trim())==null?void 0:Ae.length,participantName:t,participantRole:r,hasVideoService:!!s,videoServiceType:n,timestamp:new Date().toISOString(),stackTrace:me instanceof Error?me.stack:void 0}),o==null||o(Me)}})()},[s,f,e,t,r,g]);const M=$e.useCallback(async()=>{try{P?(await b(),I(!1)):(await S(),I(!0))}catch(le){const te=le instanceof Error?le.message:"Failed to toggle video";o==null||o(te)}},[P,S,b,o]),$=$e.useCallback(async()=>{try{E?(await w(),A(!1)):(await R(),A(!0))}catch(le){const te=le instanceof Error?le.message:"Failed to toggle audio";o==null||o(te)}},[E,R,w,o]),B=$e.useCallback(async()=>{try{await y(),i==null||i()}catch(le){console.error("Error leaving session:",le),i==null||i()}},[y,i]),ee=$e.useCallback(async le=>{if(r==="coach")try{await O(le),C("spotlight")}catch(te){const ve=te instanceof Error?te.message:"Failed to spotlight participant";o==null||o(ve)}},[r,O,o]),ie=$e.useCallback(async le=>{if(r==="coach")try{await U(le)}catch(te){const ve=te instanceof Error?te.message:"Failed to mute participant";o==null||o(ve)}},[r,U,o]),be=$e.useCallback(async le=>{if(r==="coach")try{await x(le)}catch(te){const ve=te instanceof Error?te.message:"Failed to remove participant";o==null||o(ve)}},[r,x,o]);return l?H.jsx("div",{className:"video-session-loading",children:H.jsxs("div",{className:"loading-spinner",children:[H.jsx("div",{className:"spinner"}),H.jsx("p",{children:"Initializing video service..."})]})}):d?H.jsx("div",{className:"video-session-error",children:H.jsxs("div",{className:"error-message",children:[H.jsx("h3",{children:"Unable to Initialize Video Session"}),H.jsx("p",{children:d}),H.jsx("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Retry"})]})}):!f||!p?H.jsx("div",{className:"video-session-connecting",children:H.jsxs("div",{className:"connecting-message",children:[H.jsx("div",{className:"spinner"}),H.jsx("p",{children:"Connecting to session..."})]})}):H.jsxs("div",{className:"video-session-container",children:[H.jsx("div",{className:"session-header",children:H.jsx(VW,{session:p,connectionStats:v,participantCount:m.length,videoServiceType:n})}),H.jsx("div",{className:"video-main-area",ref:V,children:H.jsx(MW,{participants:m,currentParticipant:h,spotlightedParticipant:p.getSpotlightedParticipant(),viewMode:_,videoService:s,isCoach:r==="coach",onSpotlightParticipant:ee,onMuteParticipant:ie,onRemoveParticipant:be})}),H.jsxs("div",{className:"session-controls",children:[H.jsx(NW,{isVideoEnabled:P,isAudioEnabled:E,onToggleVideo:M,onToggleAudio:$,onLeave:B,viewMode:_,onViewModeChange:C,canChangeViewMode:r==="coach"}),r==="coach"&&H.jsx(LW,{session:p,participants:m,videoService:s,onSpotlightParticipant:ee,onClearSpotlight:D,onMuteParticipant:ie,onRemoveParticipant:be})]}),H.jsx("style",{jsx:!0,children:`
        .video-session-container {
          display: flex;
          flex-direction: column;
          height: 100vh;
          background: #1a1a1a;
          color: white;
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .session-header {
          background: #2d2d2d;
          padding: 12px 20px;
          border-bottom: 1px solid #444;
          flex-shrink: 0;
        }

        .video-main-area {
          flex: 1;
          overflow: hidden;
          position: relative;
        }

        .session-controls {
          background: #2d2d2d;
          padding: 16px 20px;
          border-top: 1px solid #444;
          flex-shrink: 0;
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: wrap;
          gap: 16px;
        }

        .video-session-loading,
        .video-session-error,
        .video-session-connecting {
          display: flex;
          align-items: center;
          justify-content: center;
          height: 100vh;
          background: #1a1a1a;
          color: white;
          text-align: center;
        }

        .loading-spinner,
        .connecting-message {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 16px;
        }

        .error-message {
          background: #2d2d2d;
          padding: 40px;
          border-radius: 12px;
          border: 1px solid #444;
          max-width: 400px;
        }

        .error-message h3 {
          margin: 0 0 16px 0;
          color: #ff6b6b;
        }

        .error-message p {
          margin: 0 0 20px 0;
          color: #ccc;
          line-height: 1.5;
        }

        .retry-button {
          background: #007bff;
          color: white;
          border: none;
          padding: 12px 24px;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          font-weight: 500;
        }

        .retry-button:hover {
          background: #0056b3;
        }

        .spinner {
          width: 32px;
          height: 32px;
          border: 3px solid #444;
          border-top: 3px solid #007bff;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
          .session-controls {
            flex-direction: column;
            gap: 12px;
          }

          .session-header {
            padding: 8px 16px;
          }
        }
      `})]})},$W=()=>{const t=(()=>{const c=new URLSearchParams(window.location.search),p=c.get("session")||c.get("sessionId"),h=c.get("name")||c.get("participantName")||c.get("username"),m=c.get("role")||c.get("participantRole"),f=c.get("service")||c.get("videoService");return console.log("[App] Raw URL parameters:",{url:window.location.href,search:window.location.search,allParams:Object.fromEntries(c.entries()),parsed:{session:p,name:h,role:m,service:f}}),{session:p,name:h,role:m,service:f}})(),r=c=>{const m=c==="coach"?["Sarah","Mike","Emma","David","Lisa","John","Maya","Chris"]:["Alex","Jordan","Sam","Riley","Taylor","Morgan","Casey","Avery"],f=m[Math.floor(Math.random()*m.length)];return`${c==="coach"?"Coach":"Student"}-${f}`},[n,i]=$e.useState(!!t.session),o=t.role||"student",[s,a]=$e.useState({sessionId:t.session||"demo-session-"+Date.now(),participantName:t.name||r(o),participantRole:o,videoServiceType:t.service||"zoom"});$e.useEffect(()=>{console.log("[App] Session configuration:",{urlParams:t,sessionConfig:s,isInSession:n,currentUrl:window.location.href})},[s,n]);const l=()=>{i(!0)},u=()=>{i(!1)},d=c=>{console.error("[App] Video session error:",c),alert(`Video session error: ${c}`)};return n?H.jsx(jW,{sessionId:s.sessionId,participantName:s.participantName,participantRole:s.participantRole,videoServiceType:s.videoServiceType,onLeave:u,onError:d}):H.jsxs("div",{className:"app-container",children:[H.jsxs("header",{className:"app-header",children:[H.jsx("h1",{children:"FitWithPari V2 - Clean Architecture Demo"}),H.jsx("p",{children:"Modern video fitness platform with scalable architecture"})]}),H.jsx("main",{className:"app-main",children:H.jsxs("div",{className:"demo-controls",children:[H.jsxs("div",{className:"config-section",children:[H.jsx("h3",{children:"Session Configuration"}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Session ID:"}),H.jsx("input",{type:"text",value:s.sessionId,onChange:c=>a(p=>({...p,sessionId:c.target.value}))})]}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Your Name:"}),H.jsx("input",{type:"text",value:s.participantName,onChange:c=>a(p=>({...p,participantName:c.target.value}))})]}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Role:"}),H.jsxs("select",{value:s.participantRole,onChange:c=>a(p=>({...p,participantRole:c.target.value})),children:[H.jsx("option",{value:"student",children:"Student"}),H.jsx("option",{value:"coach",children:"Coach"})]})]}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Video Service:"}),H.jsxs("select",{value:s.videoServiceType,onChange:c=>a(p=>({...p,videoServiceType:c.target.value})),children:[H.jsx("option",{value:"zoom",children:"Zoom SDK (Recommended)"}),H.jsx("option",{value:"agora",children:"Agora RTC"}),H.jsx("option",{value:"webrtc",children:"Native WebRTC"})]})]}),H.jsx("button",{className:"join-button",onClick:l,disabled:!s.sessionId||!s.participantName,children:"Join Session"})]}),H.jsxs("div",{className:"architecture-info",children:[H.jsx("h3",{children:"Architecture Features"}),H.jsxs("ul",{children:[H.jsx("li",{children:" Clean Architecture with Domain-Driven Design"}),H.jsx("li",{children:" Video Service Abstraction (Zoom/Agora/WebRTC)"}),H.jsx("li",{children:" Immutable Domain Entities"}),H.jsx("li",{children:" Reactive State Management (RxJS)"}),H.jsx("li",{children:" Virtualized Rendering for 1000+ participants"}),H.jsx("li",{children:" Type-Safe with TypeScript"}),H.jsx("li",{children:" Scalable Component Architecture"}),H.jsx("li",{children:" Modern React Hooks & Patterns"})]}),H.jsxs("div",{className:"performance-notes",children:[H.jsx("h4",{children:"Performance Optimizations:"}),H.jsxs("ul",{children:[H.jsx("li",{children:"Virtual scrolling for participant grid"}),H.jsx("li",{children:"Selective video streaming"}),H.jsx("li",{children:"Connection quality monitoring"}),H.jsx("li",{children:"Efficient state management"}),H.jsx("li",{children:"Lazy loading and code splitting ready"})]})]})]})]})}),H.jsx("style",{jsx:!0,children:`
        .app-container {
          min-height: 100vh;
          background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
          color: white;
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .app-header {
          text-align: center;
          padding: 40px 20px;
          border-bottom: 1px solid #444;
        }

        .app-header h1 {
          margin: 0 0 16px 0;
          font-size: 28px;
          font-weight: 700;
          background: linear-gradient(135deg, #007bff, #00d4ff);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
        }

        .app-header p {
          margin: 0;
          color: #ccc;
          font-size: 16px;
        }

        .app-main {
          max-width: 1200px;
          margin: 0 auto;
          padding: 40px 20px;
        }

        .demo-controls {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 40px;
          align-items: start;
        }

        .config-section {
          background: #2d2d2d;
          padding: 32px;
          border-radius: 12px;
          border: 1px solid #444;
        }

        .config-section h3 {
          margin: 0 0 24px 0;
          color: #007bff;
          font-size: 20px;
        }

        .form-group {
          margin-bottom: 20px;
        }

        .form-group label {
          display: block;
          margin-bottom: 8px;
          color: #ccc;
          font-weight: 500;
          font-size: 14px;
        }

        .form-group input,
        .form-group select {
          width: 100%;
          padding: 12px 16px;
          background: #1a1a1a;
          border: 1px solid #555;
          border-radius: 6px;
          color: white;
          font-size: 14px;
          box-sizing: border-box;
        }

        .form-group input:focus,
        .form-group select:focus {
          outline: none;
          border-color: #007bff;
          box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }

        .join-button {
          background: #007bff;
          color: white;
          border: none;
          padding: 16px 32px;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
          width: 100%;
        }

        .join-button:hover:not(:disabled) {
          background: #0056b3;
          transform: translateY(-1px);
        }

        .join-button:disabled {
          background: #555;
          cursor: not-allowed;
        }

        .architecture-info {
          background: #1a1a1a;
          padding: 32px;
          border-radius: 12px;
          border: 1px solid #333;
        }

        .architecture-info h3 {
          margin: 0 0 20px 0;
          color: #00d4ff;
          font-size: 20px;
        }

        .architecture-info ul {
          margin: 0;
          padding-left: 20px;
          line-height: 1.6;
        }

        .architecture-info li {
          margin-bottom: 8px;
          color: #ccc;
        }

        .performance-notes {
          margin-top: 24px;
          padding-top: 24px;
          border-top: 1px solid #333;
        }

        .performance-notes h4 {
          margin: 0 0 12px 0;
          color: #00ff9f;
          font-size: 16px;
        }

        .performance-notes ul {
          margin: 0;
          padding-left: 20px;
        }

        .performance-notes li {
          margin-bottom: 6px;
          color: #aaa;
          font-size: 14px;
        }

        @media (max-width: 768px) {
          .demo-controls {
            grid-template-columns: 1fr;
            gap: 24px;
          }

          .app-header h1 {
            font-size: 24px;
          }

          .config-section,
          .architecture-info {
            padding: 24px;
          }
        }
      `})]})},Ca=class Ca{constructor(){Se(this,"serviceWorker",null);Se(this,"installPrompt",null);Se(this,"isRegistered",!1);this.initializePWA()}static getInstance(){return Ca.instance||(Ca.instance=new Ca),Ca.instance}async initializePWA(){try{console.log(" PWA: Initializing FitWithPari PWA service"),await this.registerServiceWorker(),this.setupInstallPrompt(),this.setupNotifications(),this.setupMediaPermissions(),this.setupUpdateHandling(),console.log(" PWA: FitWithPari PWA service initialized")}catch(t){console.error(" PWA: Failed to initialize PWA service:",t)}}async registerServiceWorker(){if(!("serviceWorker"in navigator)){console.warn(" PWA: Service workers not supported");return}try{const t=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});this.serviceWorker=t,this.isRegistered=!0,console.log(" PWA: Service worker registered successfully"),t.addEventListener("updatefound",()=>{console.log(" PWA: New service worker version found"),this.handleServiceWorkerUpdate(t)})}catch(t){console.error(" PWA: Service worker registration failed:",t)}}setupInstallPrompt(){window.addEventListener("beforeinstallprompt",t=>{console.log(" PWA: Install prompt available"),t.preventDefault(),this.installPrompt=t,this.dispatchPWAEvent("install-available",{canInstall:!0})}),window.addEventListener("appinstalled",()=>{console.log(" PWA: App installed successfully"),this.installPrompt=null,this.dispatchPWAEvent("app-installed",{installed:!0})})}async setupNotifications(){if(!("Notification"in window)){console.warn(" PWA: Notifications not supported");return}try{const t=await Notification.requestPermission();console.log(" PWA: Notification permission:",t),t==="granted"&&this.dispatchPWAEvent("notifications-enabled",{enabled:!0})}catch(t){console.error(" PWA: Failed to setup notifications:",t)}}async setupMediaPermissions(){try{const t=await this.checkMediaCapabilities();console.log(" PWA: Media capabilities:",t),this.dispatchPWAEvent("media-capabilities",t)}catch(t){console.error(" PWA: Failed to check media capabilities:",t)}}setupUpdateHandling(){window.addEventListener("beforeunload",()=>{this.serviceWorker&&console.log(" PWA: Checking for updates before unload")}),this.serviceWorker&&setInterval(()=>{var t;(t=this.serviceWorker)==null||t.update().catch(()=>{})},6e4)}handleServiceWorkerUpdate(t){const r=t.installing;r&&r.addEventListener("statechange",()=>{r.state==="installed"&&navigator.serviceWorker.controller&&(console.log(" PWA: New version available - prompting user"),this.dispatchPWAEvent("update-available",{canUpdate:!0,version:"latest"}))})}async promptInstall(){if(!this.installPrompt)return console.warn(" PWA: Install prompt not available"),!1;try{await this.installPrompt.prompt();const t=await this.installPrompt.userChoice;return console.log(" PWA: User install choice:",t.outcome),this.installPrompt=null,t.outcome==="accepted"}catch(t){return console.error(" PWA: Install prompt failed:",t),!1}}async updateServiceWorker(){if(!this.serviceWorker){console.warn(" PWA: No service worker to update");return}try{await this.serviceWorker.update(),window.location.reload()}catch(t){console.error(" PWA: Service worker update failed:",t)}}async sendSessionNotification(t,r,n){if(!this.serviceWorker||Notification.permission!=="granted"){console.warn(" PWA: Cannot send notification - permission denied or no SW");return}try{await this.serviceWorker.showNotification(t,{body:r,icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",data:{url:n||"/"},actions:n?[{action:"join",title:"Join Session",icon:"/icons/join-icon.png"},{action:"dismiss",title:"Dismiss",icon:"/icons/dismiss-icon.png"}]:void 0}),console.log(" PWA: Notification sent:",t)}catch(i){console.error(" PWA: Failed to send notification:",i)}}async getCapabilities(){const t=await this.checkMediaCapabilities();return{isInstallable:!!this.installPrompt,isInstalled:window.matchMedia("(display-mode: standalone)").matches,isOfflineCapable:this.isRegistered,hasNotifications:Notification.permission==="granted",hasCameraAccess:t.camera,hasMicrophoneAccess:t.microphone}}async checkMediaCapabilities(){try{const t=await navigator.mediaDevices.enumerateDevices();return{camera:t.some(r=>r.kind==="videoinput"),microphone:t.some(r=>r.kind==="audioinput")}}catch(t){return console.warn(" PWA: Could not check media capabilities:",t),{camera:!1,microphone:!1}}}async clearCache(){var t;if(!this.serviceWorker){console.warn(" PWA: No service worker to clear cache");return}try{navigator.serviceWorker.controller&&((t=navigator.serviceWorker.controller)==null||t.postMessage({type:"CLEAR_CACHE"})),console.log(" PWA: Cache clear requested")}catch(r){console.error(" PWA: Failed to clear cache:",r)}}async getCacheStatus(){return!this.serviceWorker||!navigator.serviceWorker.controller?{available:!1}:new Promise(t=>{var n;const r=new MessageChannel;r.port1.onmessage=i=>{i.data.type==="CACHE_STATUS"&&t(i.data.data)},(n=navigator.serviceWorker.controller)==null||n.postMessage({type:"GET_CACHE_STATUS"},[r.port2]),setTimeout(()=>t({available:!1,timeout:!0}),5e3)})}dispatchPWAEvent(t,r){const n=new CustomEvent(`pwa-${t}`,{detail:r});window.dispatchEvent(n)}setupMessageListener(){navigator.serviceWorker.addEventListener("message",t=>{const{type:r,data:n}=t.data;switch(r){case"NETWORK_RECOVERY":console.log(" PWA: Network recovered"),this.dispatchPWAEvent("network-recovery",n);break;case"CACHE_STATUS":this.dispatchPWAEvent("cache-status",n);break;default:console.log(" PWA: Received message from SW:",r,n)}})}};Se(Ca,"instance");let K0=Ca;const FW=K0.getInstance();window.addEventListener("unhandledrejection",e=>{console.error("[V2] Unhandled Promise Rejection:",e.reason)});window.addEventListener("error",e=>{console.error("[V2] Unhandled Error:",e.error)});console.log(" V2: Initializing PWA service for FitWithPari");FW.setupMessageListener();const dx=document.getElementById("root-v2");if(!dx)throw new Error('Root element #root-v2 not found. Please ensure the HTML includes a div with id="root-v2"');const BW=jy.createRoot(dx);BW.render(H.jsx(oO.StrictMode,{children:H.jsx($W,{})}));
